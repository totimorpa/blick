var Y_=Object.defineProperty;var X_=(t,e,i)=>e in t?Y_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var gl=(t,e,i)=>(X_(t,typeof e!="symbol"?e+"":e,i),i);function ZT(){import.meta.url,import("_").catch(()=>1);async function*t(){}}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function Mo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hp={exports:{}},Ca={},zp={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=Symbol.for("react.element"),K_=Symbol.for("react.portal"),q_=Symbol.for("react.fragment"),Z_=Symbol.for("react.strict_mode"),J_=Symbol.for("react.profiler"),Q_=Symbol.for("react.provider"),ey=Symbol.for("react.context"),ty=Symbol.for("react.forward_ref"),iy=Symbol.for("react.suspense"),ny=Symbol.for("react.memo"),ry=Symbol.for("react.lazy"),Gh=Symbol.iterator;function oy(t){return t===null||typeof t!="object"?null:(t=Gh&&t[Gh]||t["@@iterator"],typeof t=="function"?t:null)}var Gp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yp=Object.assign,Xp={};function Dr(t,e,i){this.props=t,this.context=e,this.refs=Xp,this.updater=i||Gp}Dr.prototype.isReactComponent={};Dr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kp(){}Kp.prototype=Dr.prototype;function fu(t,e,i){this.props=t,this.context=e,this.refs=Xp,this.updater=i||Gp}var pu=fu.prototype=new Kp;pu.constructor=fu;Yp(pu,Dr.prototype);pu.isPureReactComponent=!0;var Yh=Array.isArray,qp=Object.prototype.hasOwnProperty,gu={current:null},Zp={key:!0,ref:!0,__self:!0,__source:!0};function Jp(t,e,i){var n,r={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)qp.call(e,n)&&!Zp.hasOwnProperty(n)&&(r[n]=e[n]);var f=arguments.length-2;if(f===1)r.children=i;else if(1<f){for(var _=Array(f),y=0;y<f;y++)_[y]=arguments[y+2];r.children=_}if(t&&t.defaultProps)for(n in f=t.defaultProps,f)r[n]===void 0&&(r[n]=f[n]);return{$$typeof:Fo,type:t,key:s,ref:a,props:r,_owner:gu.current}}function sy(t,e){return{$$typeof:Fo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fo}function ay(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var Xh=/\/+/g;function ml(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ay(""+t.key):e.toString(36)}function bs(t,e,i,n,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fo:case K_:a=!0}}if(a)return a=t,r=r(a),t=n===""?"."+ml(a,0):n,Yh(r)?(i="",t!=null&&(i=t.replace(Xh,"$&/")+"/"),bs(r,e,i,"",function(y){return y})):r!=null&&(mu(r)&&(r=sy(r,i+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Xh,"$&/")+"/")+t)),e.push(r)),1;if(a=0,n=n===""?".":n+":",Yh(t))for(var f=0;f<t.length;f++){s=t[f];var _=n+ml(s,f);a+=bs(s,e,i,_,r)}else if(_=oy(t),typeof _=="function")for(t=_.call(t),f=0;!(s=t.next()).done;)s=s.value,_=n+ml(s,f++),a+=bs(s,e,i,_,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Xo(t,e,i){if(t==null)return t;var n=[],r=0;return bs(t,n,"","",function(s){return e.call(i,s,r++)}),n}function ly(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},ws={transition:null},cy={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:ws,ReactCurrentOwner:gu};Re.Children={map:Xo,forEach:function(t,e,i){Xo(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return Xo(t,function(){e++}),e},toArray:function(t){return Xo(t,function(e){return e})||[]},only:function(t){if(!mu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=Dr;Re.Fragment=q_;Re.Profiler=J_;Re.PureComponent=fu;Re.StrictMode=Z_;Re.Suspense=iy;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cy;Re.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Yp({},t.props),r=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=gu.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(_ in e)qp.call(e,_)&&!Zp.hasOwnProperty(_)&&(n[_]=e[_]===void 0&&f!==void 0?f[_]:e[_])}var _=arguments.length-2;if(_===1)n.children=i;else if(1<_){f=Array(_);for(var y=0;y<_;y++)f[y]=arguments[y+2];n.children=f}return{$$typeof:Fo,type:t.type,key:r,ref:s,props:n,_owner:a}};Re.createContext=function(t){return t={$$typeof:ey,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Q_,_context:t},t.Consumer=t};Re.createElement=Jp;Re.createFactory=function(t){var e=Jp.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:ty,render:t}};Re.isValidElement=mu;Re.lazy=function(t){return{$$typeof:ry,_payload:{_status:-1,_result:t},_init:ly}};Re.memo=function(t,e){return{$$typeof:ny,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=ws.transition;ws.transition={};try{t()}finally{ws.transition=e}};Re.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Re.useCallback=function(t,e){return _t.current.useCallback(t,e)};Re.useContext=function(t){return _t.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};Re.useEffect=function(t,e){return _t.current.useEffect(t,e)};Re.useId=function(){return _t.current.useId()};Re.useImperativeHandle=function(t,e,i){return _t.current.useImperativeHandle(t,e,i)};Re.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return _t.current.useMemo(t,e)};Re.useReducer=function(t,e,i){return _t.current.useReducer(t,e,i)};Re.useRef=function(t){return _t.current.useRef(t)};Re.useState=function(t){return _t.current.useState(t)};Re.useSyncExternalStore=function(t,e,i){return _t.current.useSyncExternalStore(t,e,i)};Re.useTransition=function(){return _t.current.useTransition()};Re.version="18.2.0";zp.exports=Re;var Qt=zp.exports;const re=Mo(Qt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy=Qt,hy=Symbol.for("react.element"),dy=Symbol.for("react.fragment"),fy=Object.prototype.hasOwnProperty,py=uy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gy={key:!0,ref:!0,__self:!0,__source:!0};function Qp(t,e,i){var n,r={},s=null,a=null;i!==void 0&&(s=""+i),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)fy.call(e,n)&&!gy.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:hy,type:t,key:s,ref:a,props:r,_owner:py.current}}Ca.Fragment=dy;Ca.jsx=Qp;Ca.jsxs=Qp;Hp.exports=Ca;var eg=Hp.exports;const xe=eg.jsx,ht=eg.jsxs;var tg={exports:{}},Wt={},ig={exports:{}},ng={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(d,v){var p=d.length;d.push(v);e:for(;0<p;){var m=p-1>>>1,b=d[m];if(0<r(b,v))d[m]=v,d[p]=b,p=m;else break e}}function i(d){return d.length===0?null:d[0]}function n(d){if(d.length===0)return null;var v=d[0],p=d.pop();if(p!==v){d[0]=p;e:for(var m=0,b=d.length,C=b>>>1;m<C;){var T=2*(m+1)-1,I=d[T],O=T+1,A=d[O];if(0>r(I,p))O<b&&0>r(A,I)?(d[m]=A,d[O]=p,m=O):(d[m]=I,d[T]=p,m=T);else if(O<b&&0>r(A,p))d[m]=A,d[O]=p,m=O;else break e}}return v}function r(d,v){var p=d.sortIndex-v.sortIndex;return p!==0?p:d.id-v.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,f=a.now();t.unstable_now=function(){return a.now()-f}}var _=[],y=[],w=1,x=null,E=3,k=!1,P=!1,M=!1,V=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(d){for(var v=i(y);v!==null;){if(v.callback===null)n(y);else if(v.startTime<=d)n(y),v.sortIndex=v.expirationTime,e(_,v);else break;v=i(y)}}function Y(d){if(M=!1,D(d),!P)if(i(_)!==null)P=!0,o(ie);else{var v=i(y);v!==null&&l(Y,v.startTime-d)}}function ie(d,v){P=!1,M&&(M=!1,L(S),S=-1),k=!0;var p=E;try{for(D(v),x=i(_);x!==null&&(!(x.expirationTime>v)||d&&!ue());){var m=x.callback;if(typeof m=="function"){x.callback=null,E=x.priorityLevel;var b=m(x.expirationTime<=v);v=t.unstable_now(),typeof b=="function"?x.callback=b:x===i(_)&&n(_),D(v)}else n(_);x=i(_)}if(x!==null)var C=!0;else{var T=i(y);T!==null&&l(Y,T.startTime-v),C=!1}return C}finally{x=null,E=p,k=!1}}var oe=!1,z=null,S=-1,he=5,le=-1;function ue(){return!(t.unstable_now()-le<he)}function h(){if(z!==null){var d=t.unstable_now();le=d;var v=!0;try{v=z(!0,d)}finally{v?c():(oe=!1,z=null)}}else oe=!1}var c;if(typeof R=="function")c=function(){R(h)};else if(typeof MessageChannel<"u"){var u=new MessageChannel,g=u.port2;u.port1.onmessage=h,c=function(){g.postMessage(null)}}else c=function(){V(h,0)};function o(d){z=d,oe||(oe=!0,c())}function l(d,v){S=V(function(){d(t.unstable_now())},v)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(d){d.callback=null},t.unstable_continueExecution=function(){P||k||(P=!0,o(ie))},t.unstable_forceFrameRate=function(d){0>d||125<d?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<d?Math.floor(1e3/d):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return i(_)},t.unstable_next=function(d){switch(E){case 1:case 2:case 3:var v=3;break;default:v=E}var p=E;E=v;try{return d()}finally{E=p}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(d,v){switch(d){case 1:case 2:case 3:case 4:case 5:break;default:d=3}var p=E;E=d;try{return v()}finally{E=p}},t.unstable_scheduleCallback=function(d,v,p){var m=t.unstable_now();switch(typeof p=="object"&&p!==null?(p=p.delay,p=typeof p=="number"&&0<p?m+p:m):p=m,d){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=p+b,d={id:w++,callback:v,priorityLevel:d,startTime:p,expirationTime:b,sortIndex:-1},p>m?(d.sortIndex=p,e(y,d),i(_)===null&&d===i(y)&&(M?(L(S),S=-1):M=!0,l(Y,p-m))):(d.sortIndex=b,e(_,d),P||k||(P=!0,o(ie))),d},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(d){var v=E;return function(){var p=E;E=v;try{return d.apply(this,arguments)}finally{E=p}}}})(ng);ig.exports=ng;var my=ig.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg=Qt,Ut=my;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var og=new Set,po={};function jn(t,e){br(t,e),br(t+"Capture",e)}function br(t,e){for(po[t]=e,t=0;t<e.length;t++)og.add(e[t])}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=Object.prototype.hasOwnProperty,vy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kh={},qh={};function _y(t){return rc.call(qh,t)?!0:rc.call(Kh,t)?!1:vy.test(t)?qh[t]=!0:(Kh[t]=!0,!1)}function yy(t,e,i,n){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function by(t,e,i,n){if(e===null||typeof e>"u"||yy(t,e,i,n))return!0;if(n)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,i,n,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vu=/[\-:]([a-z])/g;function _u(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vu,_u);st[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vu,_u);st[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vu,_u);st[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yu(t,e,i,n){var r=st.hasOwnProperty(e)?st[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(by(e,i,r,n)&&(i=null),n||r===null?_y(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):r.mustUseProperty?t[r.propertyName]=i===null?r.type===3?!1:"":i:(e=r.attributeName,n=r.attributeNamespace,i===null?t.removeAttribute(e):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,n?t.setAttributeNS(n,e,i):t.setAttribute(e,i))))}var Ui=rg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ko=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),er=Symbol.for("react.fragment"),bu=Symbol.for("react.strict_mode"),oc=Symbol.for("react.profiler"),sg=Symbol.for("react.provider"),ag=Symbol.for("react.context"),wu=Symbol.for("react.forward_ref"),sc=Symbol.for("react.suspense"),ac=Symbol.for("react.suspense_list"),Su=Symbol.for("react.memo"),Ki=Symbol.for("react.lazy"),lg=Symbol.for("react.offscreen"),Zh=Symbol.iterator;function Nr(t){return t===null||typeof t!="object"?null:(t=Zh&&t[Zh]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,vl;function qr(t){if(vl===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);vl=e&&e[1]||""}return`
`+vl+t}var _l=!1;function yl(t,e){if(!t||_l)return"";_l=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(y){var n=y}Reflect.construct(t,[],e)}else{try{e.call()}catch(y){n=y}t.call(e.prototype)}else{try{throw Error()}catch(y){n=y}t()}}catch(y){if(y&&n&&typeof y.stack=="string"){for(var r=y.stack.split(`
`),s=n.stack.split(`
`),a=r.length-1,f=s.length-1;1<=a&&0<=f&&r[a]!==s[f];)f--;for(;1<=a&&0<=f;a--,f--)if(r[a]!==s[f]){if(a!==1||f!==1)do if(a--,f--,0>f||r[a]!==s[f]){var _=`
`+r[a].replace(" at new "," at ");return t.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",t.displayName)),_}while(1<=a&&0<=f);break}}}finally{_l=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?qr(t):""}function wy(t){switch(t.tag){case 5:return qr(t.type);case 16:return qr("Lazy");case 13:return qr("Suspense");case 19:return qr("SuspenseList");case 0:case 2:case 15:return t=yl(t.type,!1),t;case 11:return t=yl(t.type.render,!1),t;case 1:return t=yl(t.type,!0),t;default:return""}}function lc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case er:return"Fragment";case Qn:return"Portal";case oc:return"Profiler";case bu:return"StrictMode";case sc:return"Suspense";case ac:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ag:return(t.displayName||"Context")+".Consumer";case sg:return(t._context.displayName||"Context")+".Provider";case wu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Su:return e=t.displayName||null,e!==null?e:lc(t.type)||"Memo";case Ki:e=t._payload,t=t._init;try{return lc(t(e))}catch(i){}}return null}function Sy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lc(e);case 8:return e===bu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cy(t){var e=cg(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qo(t){t._valueTracker||(t._valueTracker=Cy(t))}function ug(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),n="";return t&&(n=cg(t)?t.checked?"true":"false":t.value),t=n,t!==i?(e.setValue(t),!0):!1}function Ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function cc(t,e){var i=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:t._wrapperState.initialChecked})}function Jh(t,e){var i=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;i=hn(e.value!=null?e.value:i),t._wrapperState={initialChecked:n,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hg(t,e){e=e.checked,e!=null&&yu(t,"checked",e,!1)}function uc(t,e){hg(t,e);var i=hn(e.value),n=e.type;if(i!=null)n==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hc(t,e.type,i):e.hasOwnProperty("defaultValue")&&hc(t,e.type,hn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qh(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function hc(t,e,i){(e!=="number"||Ms(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Zr=Array.isArray;function hr(t,e,i,n){if(t=t.options,e){e={};for(var r=0;r<i.length;r++)e["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=e.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&n&&(t[i].defaultSelected=!0)}else{for(i=""+hn(i),e=null,r=0;r<t.length;r++){if(t[r].value===i){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function dc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ed(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(de(92));if(Zr(i)){if(1<i.length)throw Error(de(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:hn(i)}}function dg(t,e){var i=hn(e.value),n=hn(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),n!=null&&(t.defaultValue=""+n)}function td(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zo,pg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,i,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zo=Zo||document.createElement("div"),Zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function go(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xy=["Webkit","ms","Moz","O"];Object.keys(io).forEach(function(t){xy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),io[e]=io[t]})});function gg(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||io.hasOwnProperty(t)&&io[t]?(""+e).trim():e+"px"}function mg(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var n=i.indexOf("--")===0,r=gg(i,e[i],n);i==="float"&&(i="cssFloat"),n?t.setProperty(i,r):t[i]=r}}var Ty=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pc(t,e){if(e){if(Ty[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function gc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mc=null;function Cu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vc=null,dr=null,fr=null;function id(t){if(t=$o(t)){if(typeof vc!="function")throw Error(de(280));var e=t.stateNode;e&&(e=Oa(e),vc(t.stateNode,t.type,e))}}function vg(t){dr?fr?fr.push(t):fr=[t]:dr=t}function _g(){if(dr){var t=dr,e=fr;if(fr=dr=null,id(t),e)for(t=0;t<e.length;t++)id(e[t])}}function yg(t,e){return t(e)}function bg(){}var bl=!1;function wg(t,e,i){if(bl)return t(e,i);bl=!0;try{return yg(t,e,i)}finally{bl=!1,(dr!==null||fr!==null)&&(bg(),_g())}}function mo(t,e){var i=t.stateNode;if(i===null)return null;var n=Oa(i);if(n===null)return null;i=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(de(231,e,typeof i));return i}var _c=!1;if(Ni)try{var $r={};Object.defineProperty($r,"passive",{get:function(){_c=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch(t){_c=!1}function Ey(t,e,i,n,r,s,a,f,_){var y=Array.prototype.slice.call(arguments,3);try{e.apply(i,y)}catch(w){this.onError(w)}}var no=!1,Fs=null,Bs=!1,yc=null,Iy={onError:function(t){no=!0,Fs=t}};function Oy(t,e,i,n,r,s,a,f,_){no=!1,Fs=null,Ey.apply(Iy,arguments)}function Ry(t,e,i,n,r,s,a,f,_){if(Oy.apply(this,arguments),no){if(no){var y=Fs;no=!1,Fs=null}else throw Error(de(198));Bs||(Bs=!0,yc=y)}}function Vn(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function Sg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nd(t){if(Vn(t)!==t)throw Error(de(188))}function Ay(t){var e=t.alternate;if(!e){if(e=Vn(t),e===null)throw Error(de(188));return e!==t?null:t}for(var i=t,n=e;;){var r=i.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return nd(r),t;if(s===n)return nd(r),e;s=s.sibling}throw Error(de(188))}if(i.return!==n.return)i=r,n=s;else{for(var a=!1,f=r.child;f;){if(f===i){a=!0,i=r,n=s;break}if(f===n){a=!0,n=r,i=s;break}f=f.sibling}if(!a){for(f=s.child;f;){if(f===i){a=!0,i=s,n=r;break}if(f===n){a=!0,n=s,i=r;break}f=f.sibling}if(!a)throw Error(de(189))}}if(i.alternate!==n)throw Error(de(190))}if(i.tag!==3)throw Error(de(188));return i.stateNode.current===i?t:e}function Cg(t){return t=Ay(t),t!==null?xg(t):null}function xg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xg(t);if(e!==null)return e;t=t.sibling}return null}var Tg=Ut.unstable_scheduleCallback,rd=Ut.unstable_cancelCallback,ky=Ut.unstable_shouldYield,Dy=Ut.unstable_requestPaint,Ye=Ut.unstable_now,Ly=Ut.unstable_getCurrentPriorityLevel,xu=Ut.unstable_ImmediatePriority,Eg=Ut.unstable_UserBlockingPriority,Ns=Ut.unstable_NormalPriority,Py=Ut.unstable_LowPriority,Ig=Ut.unstable_IdlePriority,xa=null,xi=null;function My(t){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(xa,t,void 0,(t.current.flags&128)===128)}catch(e){}}var hi=Math.clz32?Math.clz32:Ny,Fy=Math.log,By=Math.LN2;function Ny(t){return t>>>=0,t===0?32:31-(Fy(t)/By|0)|0}var Jo=64,Qo=4194304;function Jr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $s(t,e){var i=t.pendingLanes;if(i===0)return 0;var n=0,r=t.suspendedLanes,s=t.pingedLanes,a=i&268435455;if(a!==0){var f=a&~r;f!==0?n=Jr(f):(s&=a,s!==0&&(n=Jr(s)))}else a=i&~r,a!==0?n=Jr(a):s!==0&&(n=Jr(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(n&4&&(n|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)i=31-hi(e),r=1<<i,n|=t[i],e&=~r;return n}function $y(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jy(t,e){for(var i=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-hi(s),f=1<<a,_=r[a];_===-1?(!(f&i)||f&n)&&(r[a]=$y(f,e)):_<=e&&(t.expiredLanes|=f),s&=~f}}function bc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Og(){var t=Jo;return Jo<<=1,!(Jo&4194240)&&(Jo=64),t}function wl(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function Bo(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hi(e),t[e]=i}function Vy(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<i;){var r=31-hi(i),s=1<<r;e[r]=0,n[r]=-1,t[r]=-1,i&=~s}}function Tu(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var n=31-hi(i),r=1<<n;r&e|t[n]&e&&(t[n]|=e),i&=~r}}var De=0;function Rg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ag,Eu,kg,Dg,Lg,wc=!1,es=[],nn=null,rn=null,on=null,vo=new Map,_o=new Map,Zi=[],Uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function od(t,e){switch(t){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(e.pointerId)}}function jr(t,e,i,n,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:i,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},e!==null&&(e=$o(e),e!==null&&Eu(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Wy(t,e,i,n,r){switch(e){case"focusin":return nn=jr(nn,t,e,i,n,r),!0;case"dragenter":return rn=jr(rn,t,e,i,n,r),!0;case"mouseover":return on=jr(on,t,e,i,n,r),!0;case"pointerover":var s=r.pointerId;return vo.set(s,jr(vo.get(s)||null,t,e,i,n,r)),!0;case"gotpointercapture":return s=r.pointerId,_o.set(s,jr(_o.get(s)||null,t,e,i,n,r)),!0}return!1}function Pg(t){var e=Cn(t.target);if(e!==null){var i=Vn(e);if(i!==null){if(e=i.tag,e===13){if(e=Sg(i),e!==null){t.blockedOn=e,Lg(t.priority,function(){kg(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ss(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=Sc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var n=new i.constructor(i.type,i);mc=n,i.target.dispatchEvent(n),mc=null}else return e=$o(i),e!==null&&Eu(e),t.blockedOn=i,!1;e.shift()}return!0}function sd(t,e,i){Ss(t)&&i.delete(e)}function Hy(){wc=!1,nn!==null&&Ss(nn)&&(nn=null),rn!==null&&Ss(rn)&&(rn=null),on!==null&&Ss(on)&&(on=null),vo.forEach(sd),_o.forEach(sd)}function Vr(t,e){t.blockedOn===e&&(t.blockedOn=null,wc||(wc=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,Hy)))}function yo(t){function e(r){return Vr(r,t)}if(0<es.length){Vr(es[0],t);for(var i=1;i<es.length;i++){var n=es[i];n.blockedOn===t&&(n.blockedOn=null)}}for(nn!==null&&Vr(nn,t),rn!==null&&Vr(rn,t),on!==null&&Vr(on,t),vo.forEach(e),_o.forEach(e),i=0;i<Zi.length;i++)n=Zi[i],n.blockedOn===t&&(n.blockedOn=null);for(;0<Zi.length&&(i=Zi[0],i.blockedOn===null);)Pg(i),i.blockedOn===null&&Zi.shift()}var pr=Ui.ReactCurrentBatchConfig,js=!0;function zy(t,e,i,n){var r=De,s=pr.transition;pr.transition=null;try{De=1,Iu(t,e,i,n)}finally{De=r,pr.transition=s}}function Gy(t,e,i,n){var r=De,s=pr.transition;pr.transition=null;try{De=4,Iu(t,e,i,n)}finally{De=r,pr.transition=s}}function Iu(t,e,i,n){if(js){var r=Sc(t,e,i,n);if(r===null)kl(t,e,n,Vs,i),od(t,n);else if(Wy(r,t,e,i,n))n.stopPropagation();else if(od(t,n),e&4&&-1<Uy.indexOf(t)){for(;r!==null;){var s=$o(r);if(s!==null&&Ag(s),s=Sc(t,e,i,n),s===null&&kl(t,e,n,Vs,i),s===r)break;r=s}r!==null&&n.stopPropagation()}else kl(t,e,n,null,i)}}var Vs=null;function Sc(t,e,i,n){if(Vs=null,t=Cu(n),t=Cn(t),t!==null)if(e=Vn(t),e===null)t=null;else if(i=e.tag,i===13){if(t=Sg(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vs=t,null}function Mg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ly()){case xu:return 1;case Eg:return 4;case Ns:case Py:return 16;case Ig:return 536870912;default:return 16}default:return 16}}var Qi=null,Ou=null,Cs=null;function Fg(){if(Cs)return Cs;var t,e=Ou,i=e.length,n,r="value"in Qi?Qi.value:Qi.textContent,s=r.length;for(t=0;t<i&&e[t]===r[t];t++);var a=i-t;for(n=1;n<=a&&e[i-n]===r[s-n];n++);return Cs=r.slice(t,1<n?1-n:void 0)}function xs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ts(){return!0}function ad(){return!1}function Ht(t){function e(i,n,r,s,a){this._reactName=i,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(i=t[f],this[f]=i?i(s):s[f]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ts:ad,this.isPropagationStopped=ad,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),e}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ru=Ht(Lr),No=He({},Lr,{view:0,detail:0}),Yy=Ht(No),Sl,Cl,Ur,Ta=He({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Au,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ur&&(Ur&&t.type==="mousemove"?(Sl=t.screenX-Ur.screenX,Cl=t.screenY-Ur.screenY):Cl=Sl=0,Ur=t),Sl)},movementY:function(t){return"movementY"in t?t.movementY:Cl}}),ld=Ht(Ta),Xy=He({},Ta,{dataTransfer:0}),Ky=Ht(Xy),qy=He({},No,{relatedTarget:0}),xl=Ht(qy),Zy=He({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jy=Ht(Zy),Qy=He({},Lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),e0=Ht(Qy),t0=He({},Lr,{data:0}),cd=Ht(t0),i0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=r0[t])?!!e[t]:!1}function Au(){return o0}var s0=He({},No,{key:function(t){if(t.key){var e=i0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?n0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Au,charCode:function(t){return t.type==="keypress"?xs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),a0=Ht(s0),l0=He({},Ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ud=Ht(l0),c0=He({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Au}),u0=Ht(c0),h0=He({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),d0=Ht(h0),f0=He({},Ta,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),p0=Ht(f0),g0=[9,13,27,32],ku=Ni&&"CompositionEvent"in window,ro=null;Ni&&"documentMode"in document&&(ro=document.documentMode);var m0=Ni&&"TextEvent"in window&&!ro,Bg=Ni&&(!ku||ro&&8<ro&&11>=ro),hd=String.fromCharCode(32),dd=!1;function Ng(t,e){switch(t){case"keyup":return g0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $g(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tr=!1;function v0(t,e){switch(t){case"compositionend":return $g(e);case"keypress":return e.which!==32?null:(dd=!0,hd);case"textInput":return t=e.data,t===hd&&dd?null:t;default:return null}}function _0(t,e){if(tr)return t==="compositionend"||!ku&&Ng(t,e)?(t=Fg(),Cs=Ou=Qi=null,tr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bg&&e.locale!=="ko"?null:e.data;default:return null}}var y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!y0[t.type]:e==="textarea"}function jg(t,e,i,n){vg(n),e=Us(e,"onChange"),0<e.length&&(i=new Ru("onChange","change",null,i,n),t.push({event:i,listeners:e}))}var oo=null,bo=null;function b0(t){Zg(t,0)}function Ea(t){var e=rr(t);if(ug(e))return t}function w0(t,e){if(t==="change")return e}var Vg=!1;if(Ni){var Tl;if(Ni){var El="oninput"in document;if(!El){var pd=document.createElement("div");pd.setAttribute("oninput","return;"),El=typeof pd.oninput=="function"}Tl=El}else Tl=!1;Vg=Tl&&(!document.documentMode||9<document.documentMode)}function gd(){oo&&(oo.detachEvent("onpropertychange",Ug),bo=oo=null)}function Ug(t){if(t.propertyName==="value"&&Ea(bo)){var e=[];jg(e,bo,t,Cu(t)),wg(b0,e)}}function S0(t,e,i){t==="focusin"?(gd(),oo=e,bo=i,oo.attachEvent("onpropertychange",Ug)):t==="focusout"&&gd()}function C0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ea(bo)}function x0(t,e){if(t==="click")return Ea(e)}function T0(t,e){if(t==="input"||t==="change")return Ea(e)}function E0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gi=typeof Object.is=="function"?Object.is:E0;function wo(t,e){if(gi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!rc.call(e,r)||!gi(t[r],e[r]))return!1}return!0}function md(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vd(t,e){var i=md(t);t=0;for(var n;i;){if(i.nodeType===3){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=md(i)}}function Wg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hg(){for(var t=window,e=Ms();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch(n){i=!1}if(i)t=e.contentWindow;else break;e=Ms(t.document)}return e}function Du(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function I0(t){var e=Hg(),i=t.focusedElem,n=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&Wg(i.ownerDocument.documentElement,i)){if(n!==null&&Du(i)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=i.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!t.extend&&s>n&&(r=n,n=s,s=r),r=vd(i,s);var a=vd(i,n);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var O0=Ni&&"documentMode"in document&&11>=document.documentMode,ir=null,Cc=null,so=null,xc=!1;function _d(t,e,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;xc||ir==null||ir!==Ms(n)||(n=ir,"selectionStart"in n&&Du(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),so&&wo(so,n)||(so=n,n=Us(Cc,"onSelect"),0<n.length&&(e=new Ru("onSelect","select",null,e,i),t.push({event:e,listeners:n}),e.target=ir)))}function is(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var nr={animationend:is("Animation","AnimationEnd"),animationiteration:is("Animation","AnimationIteration"),animationstart:is("Animation","AnimationStart"),transitionend:is("Transition","TransitionEnd")},Il={},zg={};Ni&&(zg=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function Ia(t){if(Il[t])return Il[t];if(!nr[t])return t;var e=nr[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in zg)return Il[t]=e[i];return t}var Gg=Ia("animationend"),Yg=Ia("animationiteration"),Xg=Ia("animationstart"),Kg=Ia("transitionend"),qg=new Map,yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gn(t,e){qg.set(t,e),jn(e,[t])}for(var Ol=0;Ol<yd.length;Ol++){var Rl=yd[Ol],R0=Rl.toLowerCase(),A0=Rl[0].toUpperCase()+Rl.slice(1);gn(R0,"on"+A0)}gn(Gg,"onAnimationEnd");gn(Yg,"onAnimationIteration");gn(Xg,"onAnimationStart");gn("dblclick","onDoubleClick");gn("focusin","onFocus");gn("focusout","onBlur");gn(Kg,"onTransitionEnd");br("onMouseEnter",["mouseout","mouseover"]);br("onMouseLeave",["mouseout","mouseover"]);br("onPointerEnter",["pointerout","pointerover"]);br("onPointerLeave",["pointerout","pointerover"]);jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qr));function bd(t,e,i){var n=t.type||"unknown-event";t.currentTarget=i,Ry(n,e,void 0,t),t.currentTarget=null}function Zg(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var n=t[i],r=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var f=n[a],_=f.instance,y=f.currentTarget;if(f=f.listener,_!==s&&r.isPropagationStopped())break e;bd(r,f,y),s=_}else for(a=0;a<n.length;a++){if(f=n[a],_=f.instance,y=f.currentTarget,f=f.listener,_!==s&&r.isPropagationStopped())break e;bd(r,f,y),s=_}}}if(Bs)throw t=yc,Bs=!1,yc=null,t}function Be(t,e){var i=e[Rc];i===void 0&&(i=e[Rc]=new Set);var n=t+"__bubble";i.has(n)||(Jg(e,t,2,!1),i.add(n))}function Al(t,e,i){var n=0;e&&(n|=4),Jg(i,t,n,e)}var ns="_reactListening"+Math.random().toString(36).slice(2);function So(t){if(!t[ns]){t[ns]=!0,og.forEach(function(i){i!=="selectionchange"&&(k0.has(i)||Al(i,!1,t),Al(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ns]||(e[ns]=!0,Al("selectionchange",!1,e))}}function Jg(t,e,i,n){switch(Mg(e)){case 1:var r=zy;break;case 4:r=Gy;break;default:r=Iu}i=r.bind(null,e,i,t),r=void 0,!_c||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,i,{capture:!0,passive:r}):t.addEventListener(e,i,!0):r!==void 0?t.addEventListener(e,i,{passive:r}):t.addEventListener(e,i,!1)}function kl(t,e,i,n,r){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var f=n.stateNode.containerInfo;if(f===r||f.nodeType===8&&f.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var _=a.tag;if((_===3||_===4)&&(_=a.stateNode.containerInfo,_===r||_.nodeType===8&&_.parentNode===r))return;a=a.return}for(;f!==null;){if(a=Cn(f),a===null)return;if(_=a.tag,_===5||_===6){n=s=a;continue e}f=f.parentNode}}n=n.return}wg(function(){var y=s,w=Cu(i),x=[];e:{var E=qg.get(t);if(E!==void 0){var k=Ru,P=t;switch(t){case"keypress":if(xs(i)===0)break e;case"keydown":case"keyup":k=a0;break;case"focusin":P="focus",k=xl;break;case"focusout":P="blur",k=xl;break;case"beforeblur":case"afterblur":k=xl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=Ky;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=u0;break;case Gg:case Yg:case Xg:k=Jy;break;case Kg:k=d0;break;case"scroll":k=Yy;break;case"wheel":k=p0;break;case"copy":case"cut":case"paste":k=e0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=ud}var M=(e&4)!==0,V=!M&&t==="scroll",L=M?E!==null?E+"Capture":null:E;M=[];for(var R=y,D;R!==null;){D=R;var Y=D.stateNode;if(D.tag===5&&Y!==null&&(D=Y,L!==null&&(Y=mo(R,L),Y!=null&&M.push(Co(R,Y,D)))),V)break;R=R.return}0<M.length&&(E=new k(E,P,null,i,w),x.push({event:E,listeners:M}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",E&&i!==mc&&(P=i.relatedTarget||i.fromElement)&&(Cn(P)||P[$i]))break e;if((k||E)&&(E=w.window===w?w:(E=w.ownerDocument)?E.defaultView||E.parentWindow:window,k?(P=i.relatedTarget||i.toElement,k=y,P=P?Cn(P):null,P!==null&&(V=Vn(P),P!==V||P.tag!==5&&P.tag!==6)&&(P=null)):(k=null,P=y),k!==P)){if(M=ld,Y="onMouseLeave",L="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(M=ud,Y="onPointerLeave",L="onPointerEnter",R="pointer"),V=k==null?E:rr(k),D=P==null?E:rr(P),E=new M(Y,R+"leave",k,i,w),E.target=V,E.relatedTarget=D,Y=null,Cn(w)===y&&(M=new M(L,R+"enter",P,i,w),M.target=D,M.relatedTarget=V,Y=M),V=Y,k&&P)t:{for(M=k,L=P,R=0,D=M;D;D=zn(D))R++;for(D=0,Y=L;Y;Y=zn(Y))D++;for(;0<R-D;)M=zn(M),R--;for(;0<D-R;)L=zn(L),D--;for(;R--;){if(M===L||L!==null&&M===L.alternate)break t;M=zn(M),L=zn(L)}M=null}else M=null;k!==null&&wd(x,E,k,M,!1),P!==null&&V!==null&&wd(x,V,P,M,!0)}}e:{if(E=y?rr(y):window,k=E.nodeName&&E.nodeName.toLowerCase(),k==="select"||k==="input"&&E.type==="file")var ie=w0;else if(fd(E))if(Vg)ie=T0;else{ie=C0;var oe=S0}else(k=E.nodeName)&&k.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(ie=x0);if(ie&&(ie=ie(t,y))){jg(x,ie,i,w);break e}oe&&oe(t,E,y),t==="focusout"&&(oe=E._wrapperState)&&oe.controlled&&E.type==="number"&&hc(E,"number",E.value)}switch(oe=y?rr(y):window,t){case"focusin":(fd(oe)||oe.contentEditable==="true")&&(ir=oe,Cc=y,so=null);break;case"focusout":so=Cc=ir=null;break;case"mousedown":xc=!0;break;case"contextmenu":case"mouseup":case"dragend":xc=!1,_d(x,i,w);break;case"selectionchange":if(O0)break;case"keydown":case"keyup":_d(x,i,w)}var z;if(ku)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else tr?Ng(t,i)&&(S="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(S="onCompositionStart");S&&(Bg&&i.locale!=="ko"&&(tr||S!=="onCompositionStart"?S==="onCompositionEnd"&&tr&&(z=Fg()):(Qi=w,Ou="value"in Qi?Qi.value:Qi.textContent,tr=!0)),oe=Us(y,S),0<oe.length&&(S=new cd(S,t,null,i,w),x.push({event:S,listeners:oe}),z?S.data=z:(z=$g(i),z!==null&&(S.data=z)))),(z=m0?v0(t,i):_0(t,i))&&(y=Us(y,"onBeforeInput"),0<y.length&&(w=new cd("onBeforeInput","beforeinput",null,i,w),x.push({event:w,listeners:y}),w.data=z))}Zg(x,e)})}function Co(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Us(t,e){for(var i=e+"Capture",n=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=mo(t,i),s!=null&&n.unshift(Co(t,s,r)),s=mo(t,e),s!=null&&n.push(Co(t,s,r))),t=t.return}return n}function zn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wd(t,e,i,n,r){for(var s=e._reactName,a=[];i!==null&&i!==n;){var f=i,_=f.alternate,y=f.stateNode;if(_!==null&&_===n)break;f.tag===5&&y!==null&&(f=y,r?(_=mo(i,s),_!=null&&a.unshift(Co(i,_,f))):r||(_=mo(i,s),_!=null&&a.push(Co(i,_,f)))),i=i.return}a.length!==0&&t.push({event:e,listeners:a})}var D0=/\r\n?/g,L0=/\u0000|\uFFFD/g;function Sd(t){return(typeof t=="string"?t:""+t).replace(D0,`
`).replace(L0,"")}function rs(t,e,i){if(e=Sd(e),Sd(t)!==e&&i)throw Error(de(425))}function Ws(){}var Tc=null,Ec=null;function Ic(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Oc=typeof setTimeout=="function"?setTimeout:void 0,P0=typeof clearTimeout=="function"?clearTimeout:void 0,Cd=typeof Promise=="function"?Promise:void 0,M0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cd<"u"?function(t){return Cd.resolve(null).then(t).catch(F0)}:Oc;function F0(t){setTimeout(function(){throw t})}function Dl(t,e){var i=e,n=0;do{var r=i.nextSibling;if(t.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(n===0){t.removeChild(r),yo(e);return}n--}else i!=="$"&&i!=="$?"&&i!=="$!"||n++;i=r}while(i);yo(e)}function sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var Pr=Math.random().toString(36).slice(2),Ci="__reactFiber$"+Pr,xo="__reactProps$"+Pr,$i="__reactContainer$"+Pr,Rc="__reactEvents$"+Pr,B0="__reactListeners$"+Pr,N0="__reactHandles$"+Pr;function Cn(t){var e=t[Ci];if(e)return e;for(var i=t.parentNode;i;){if(e=i[$i]||i[Ci]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=xd(t);t!==null;){if(i=t[Ci])return i;t=xd(t)}return e}t=i,i=t.parentNode}return null}function $o(t){return t=t[Ci]||t[$i],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function Oa(t){return t[xo]||null}var Ac=[],or=-1;function mn(t){return{current:t}}function $e(t){0>or||(t.current=Ac[or],Ac[or]=null,or--)}function Fe(t,e){or++,Ac[or]=t.current,t.current=e}var dn={},ft=mn(dn),It=mn(!1),kn=dn;function wr(t,e){var i=t.type.contextTypes;if(!i)return dn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in i)r[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ot(t){return t=t.childContextTypes,t!=null}function Hs(){$e(It),$e(ft)}function Td(t,e,i){if(ft.current!==dn)throw Error(de(168));Fe(ft,e),Fe(It,i)}function Qg(t,e,i){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return i;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(de(108,Sy(t)||"Unknown",r));return He({},i,n)}function zs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dn,kn=ft.current,Fe(ft,t),Fe(It,It.current),!0}function Ed(t,e,i){var n=t.stateNode;if(!n)throw Error(de(169));i?(t=Qg(t,e,kn),n.__reactInternalMemoizedMergedChildContext=t,$e(It),$e(ft),Fe(ft,t)):$e(It),Fe(It,i)}var ki=null,Ra=!1,Ll=!1;function em(t){ki===null?ki=[t]:ki.push(t)}function $0(t){Ra=!0,em(t)}function vn(){if(!Ll&&ki!==null){Ll=!0;var t=0,e=De;try{var i=ki;for(De=1;t<i.length;t++){var n=i[t];do n=n(!0);while(n!==null)}ki=null,Ra=!1}catch(r){throw ki!==null&&(ki=ki.slice(t+1)),Tg(xu,vn),r}finally{De=e,Ll=!1}}return null}var sr=[],ar=0,Gs=null,Ys=0,qt=[],Zt=0,Dn=null,Mi=1,Fi="";function wn(t,e){sr[ar++]=Ys,sr[ar++]=Gs,Gs=t,Ys=e}function tm(t,e,i){qt[Zt++]=Mi,qt[Zt++]=Fi,qt[Zt++]=Dn,Dn=t;var n=Mi;t=Fi;var r=32-hi(n)-1;n&=~(1<<r),i+=1;var s=32-hi(e)+r;if(30<s){var a=r-r%5;s=(n&(1<<a)-1).toString(32),n>>=a,r-=a,Mi=1<<32-hi(e)+r|i<<r|n,Fi=s+t}else Mi=1<<s|i<<r|n,Fi=t}function Lu(t){t.return!==null&&(wn(t,1),tm(t,1,0))}function Pu(t){for(;t===Gs;)Gs=sr[--ar],sr[ar]=null,Ys=sr[--ar],sr[ar]=null;for(;t===Dn;)Dn=qt[--Zt],qt[Zt]=null,Fi=qt[--Zt],qt[Zt]=null,Mi=qt[--Zt],qt[Zt]=null}var Vt=null,jt=null,Ve=!1,li=null;function im(t,e){var i=Jt(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function Id(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,jt=sn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=Dn!==null?{id:Mi,overflow:Fi}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=Jt(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,Vt=t,jt=null,!0):!1;default:return!1}}function kc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dc(t){if(Ve){var e=jt;if(e){var i=e;if(!Id(t,e)){if(kc(t))throw Error(de(418));e=sn(i.nextSibling);var n=Vt;e&&Id(t,e)?im(n,i):(t.flags=t.flags&-4097|2,Ve=!1,Vt=t)}}else{if(kc(t))throw Error(de(418));t.flags=t.flags&-4097|2,Ve=!1,Vt=t}}}function Od(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function os(t){if(t!==Vt)return!1;if(!Ve)return Od(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ic(t.type,t.memoizedProps)),e&&(e=jt)){if(kc(t))throw nm(),Error(de(418));for(;e;)im(t,e),e=sn(e.nextSibling)}if(Od(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){jt=sn(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Vt?sn(t.stateNode.nextSibling):null;return!0}function nm(){for(var t=jt;t;)t=sn(t.nextSibling)}function Sr(){jt=Vt=null,Ve=!1}function Mu(t){li===null?li=[t]:li.push(t)}var j0=Ui.ReactCurrentBatchConfig;function si(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}var Xs=mn(null),Ks=null,lr=null,Fu=null;function Bu(){Fu=lr=Ks=null}function Nu(t){var e=Xs.current;$e(Xs),t._currentValue=e}function Lc(t,e,i){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===i)break;t=t.return}}function gr(t,e){Ks=t,Fu=lr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function ti(t){var e=t._currentValue;if(Fu!==t)if(t={context:t,memoizedValue:e,next:null},lr===null){if(Ks===null)throw Error(de(308));lr=t,Ks.dependencies={lanes:0,firstContext:t}}else lr=lr.next=t;return e}var xn=null;function $u(t){xn===null?xn=[t]:xn.push(t)}function rm(t,e,i,n){var r=e.interleaved;return r===null?(i.next=i,$u(e)):(i.next=r.next,r.next=i),e.interleaved=i,ji(t,n)}function ji(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var qi=!1;function ju(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function an(t,e,i){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ae&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,ji(t,i)}return r=n.interleaved,r===null?(e.next=e,$u(n)):(e.next=r.next,r.next=e),n.interleaved=e,ji(t,i)}function Ts(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,Tu(t,i)}}function Rd(t,e){var i=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var r=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?r=s=a:s=s.next=a,i=i.next}while(i!==null);s===null?r=s=e:s=s.next=e}else r=s=e;i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function qs(t,e,i,n){var r=t.updateQueue;qi=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,f=r.shared.pending;if(f!==null){r.shared.pending=null;var _=f,y=_.next;_.next=null,a===null?s=y:a.next=y,a=_;var w=t.alternate;w!==null&&(w=w.updateQueue,f=w.lastBaseUpdate,f!==a&&(f===null?w.firstBaseUpdate=y:f.next=y,w.lastBaseUpdate=_))}if(s!==null){var x=r.baseState;a=0,w=y=_=null,f=s;do{var E=f.lane,k=f.eventTime;if((n&E)===E){w!==null&&(w=w.next={eventTime:k,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var P=t,M=f;switch(E=e,k=i,M.tag){case 1:if(P=M.payload,typeof P=="function"){x=P.call(k,x,E);break e}x=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=M.payload,E=typeof P=="function"?P.call(k,x,E):P,E==null)break e;x=He({},x,E);break e;case 2:qi=!0}}f.callback!==null&&f.lane!==0&&(t.flags|=64,E=r.effects,E===null?r.effects=[f]:E.push(f))}else k={eventTime:k,lane:E,tag:f.tag,payload:f.payload,callback:f.callback,next:null},w===null?(y=w=k,_=x):w=w.next=k,a|=E;if(f=f.next,f===null){if(f=r.shared.pending,f===null)break;E=f,f=E.next,E.next=null,r.lastBaseUpdate=E,r.shared.pending=null}}while(1);if(w===null&&(_=x),r.baseState=_,r.firstBaseUpdate=y,r.lastBaseUpdate=w,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Pn|=a,t.lanes=a,t.memoizedState=x}}function Ad(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=i,typeof r!="function")throw Error(de(191,r));r.call(n)}}}var sm=new rg.Component().refs;function Pc(t,e,i,n){e=t.memoizedState,i=i(n,e),i=i==null?e:He({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Aa={isMounted:function(t){return(t=t._reactInternals)?Vn(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var n=mt(),r=cn(t),s=Bi(n,r);s.payload=e,i!=null&&(s.callback=i),e=an(t,s,r),e!==null&&(di(e,t,r,n),Ts(e,t,r))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var n=mt(),r=cn(t),s=Bi(n,r);s.tag=1,s.payload=e,i!=null&&(s.callback=i),e=an(t,s,r),e!==null&&(di(e,t,r,n),Ts(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=mt(),n=cn(t),r=Bi(i,n);r.tag=2,e!=null&&(r.callback=e),e=an(t,r,n),e!==null&&(di(e,t,n,i),Ts(e,t,n))}};function kd(t,e,i,n,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!wo(i,n)||!wo(r,s):!0}function am(t,e,i){var n=!1,r=dn,s=e.contextType;return typeof s=="object"&&s!==null?s=ti(s):(r=Ot(e)?kn:ft.current,n=e.contextTypes,s=(n=n!=null)?wr(t,r):dn),e=new e(i,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Aa,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Dd(t,e,i,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,n),e.state!==t&&Aa.enqueueReplaceState(e,e.state,null)}function Mc(t,e,i,n){var r=t.stateNode;r.props=i,r.state=t.memoizedState,r.refs=sm,ju(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ti(s):(s=Ot(e)?kn:ft.current,r.context=wr(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Pc(t,e,s,i),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Aa.enqueueReplaceState(r,r.state,null),qs(t,i,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Wr(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(de(309));var n=i.stateNode}if(!n)throw Error(de(147,t));var r=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var f=r.refs;f===sm&&(f=r.refs={}),a===null?delete f[s]:f[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(de(284));if(!i._owner)throw Error(de(290,t))}return t}function ss(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ld(t){var e=t._init;return e(t._payload)}function lm(t){function e(L,R){if(t){var D=L.deletions;D===null?(L.deletions=[R],L.flags|=16):D.push(R)}}function i(L,R){if(!t)return null;for(;R!==null;)e(L,R),R=R.sibling;return null}function n(L,R){for(L=new Map;R!==null;)R.key!==null?L.set(R.key,R):L.set(R.index,R),R=R.sibling;return L}function r(L,R){return L=un(L,R),L.index=0,L.sibling=null,L}function s(L,R,D){return L.index=D,t?(D=L.alternate,D!==null?(D=D.index,D<R?(L.flags|=2,R):D):(L.flags|=2,R)):(L.flags|=1048576,R)}function a(L){return t&&L.alternate===null&&(L.flags|=2),L}function f(L,R,D,Y){return R===null||R.tag!==6?(R=jl(D,L.mode,Y),R.return=L,R):(R=r(R,D),R.return=L,R)}function _(L,R,D,Y){var ie=D.type;return ie===er?w(L,R,D.props.children,Y,D.key):R!==null&&(R.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Ki&&Ld(ie)===R.type)?(Y=r(R,D.props),Y.ref=Wr(L,R,D),Y.return=L,Y):(Y=ks(D.type,D.key,D.props,null,L.mode,Y),Y.ref=Wr(L,R,D),Y.return=L,Y)}function y(L,R,D,Y){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=Vl(D,L.mode,Y),R.return=L,R):(R=r(R,D.children||[]),R.return=L,R)}function w(L,R,D,Y,ie){return R===null||R.tag!==7?(R=Rn(D,L.mode,Y,ie),R.return=L,R):(R=r(R,D),R.return=L,R)}function x(L,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return R=jl(""+R,L.mode,D),R.return=L,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ko:return D=ks(R.type,R.key,R.props,null,L.mode,D),D.ref=Wr(L,null,R),D.return=L,D;case Qn:return R=Vl(R,L.mode,D),R.return=L,R;case Ki:var Y=R._init;return x(L,Y(R._payload),D)}if(Zr(R)||Nr(R))return R=Rn(R,L.mode,D,null),R.return=L,R;ss(L,R)}return null}function E(L,R,D,Y){var ie=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return ie!==null?null:f(L,R,""+D,Y);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ko:return D.key===ie?_(L,R,D,Y):null;case Qn:return D.key===ie?y(L,R,D,Y):null;case Ki:return ie=D._init,E(L,R,ie(D._payload),Y)}if(Zr(D)||Nr(D))return ie!==null?null:w(L,R,D,Y,null);ss(L,D)}return null}function k(L,R,D,Y,ie){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return L=L.get(D)||null,f(R,L,""+Y,ie);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Ko:return L=L.get(Y.key===null?D:Y.key)||null,_(R,L,Y,ie);case Qn:return L=L.get(Y.key===null?D:Y.key)||null,y(R,L,Y,ie);case Ki:var oe=Y._init;return k(L,R,D,oe(Y._payload),ie)}if(Zr(Y)||Nr(Y))return L=L.get(D)||null,w(R,L,Y,ie,null);ss(R,Y)}return null}function P(L,R,D,Y){for(var ie=null,oe=null,z=R,S=R=0,he=null;z!==null&&S<D.length;S++){z.index>S?(he=z,z=null):he=z.sibling;var le=E(L,z,D[S],Y);if(le===null){z===null&&(z=he);break}t&&z&&le.alternate===null&&e(L,z),R=s(le,R,S),oe===null?ie=le:oe.sibling=le,oe=le,z=he}if(S===D.length)return i(L,z),Ve&&wn(L,S),ie;if(z===null){for(;S<D.length;S++)z=x(L,D[S],Y),z!==null&&(R=s(z,R,S),oe===null?ie=z:oe.sibling=z,oe=z);return Ve&&wn(L,S),ie}for(z=n(L,z);S<D.length;S++)he=k(z,L,S,D[S],Y),he!==null&&(t&&he.alternate!==null&&z.delete(he.key===null?S:he.key),R=s(he,R,S),oe===null?ie=he:oe.sibling=he,oe=he);return t&&z.forEach(function(ue){return e(L,ue)}),Ve&&wn(L,S),ie}function M(L,R,D,Y){var ie=Nr(D);if(typeof ie!="function")throw Error(de(150));if(D=ie.call(D),D==null)throw Error(de(151));for(var oe=ie=null,z=R,S=R=0,he=null,le=D.next();z!==null&&!le.done;S++,le=D.next()){z.index>S?(he=z,z=null):he=z.sibling;var ue=E(L,z,le.value,Y);if(ue===null){z===null&&(z=he);break}t&&z&&ue.alternate===null&&e(L,z),R=s(ue,R,S),oe===null?ie=ue:oe.sibling=ue,oe=ue,z=he}if(le.done)return i(L,z),Ve&&wn(L,S),ie;if(z===null){for(;!le.done;S++,le=D.next())le=x(L,le.value,Y),le!==null&&(R=s(le,R,S),oe===null?ie=le:oe.sibling=le,oe=le);return Ve&&wn(L,S),ie}for(z=n(L,z);!le.done;S++,le=D.next())le=k(z,L,S,le.value,Y),le!==null&&(t&&le.alternate!==null&&z.delete(le.key===null?S:le.key),R=s(le,R,S),oe===null?ie=le:oe.sibling=le,oe=le);return t&&z.forEach(function(h){return e(L,h)}),Ve&&wn(L,S),ie}function V(L,R,D,Y){if(typeof D=="object"&&D!==null&&D.type===er&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case Ko:e:{for(var ie=D.key,oe=R;oe!==null;){if(oe.key===ie){if(ie=D.type,ie===er){if(oe.tag===7){i(L,oe.sibling),R=r(oe,D.props.children),R.return=L,L=R;break e}}else if(oe.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Ki&&Ld(ie)===oe.type){i(L,oe.sibling),R=r(oe,D.props),R.ref=Wr(L,oe,D),R.return=L,L=R;break e}i(L,oe);break}else e(L,oe);oe=oe.sibling}D.type===er?(R=Rn(D.props.children,L.mode,Y,D.key),R.return=L,L=R):(Y=ks(D.type,D.key,D.props,null,L.mode,Y),Y.ref=Wr(L,R,D),Y.return=L,L=Y)}return a(L);case Qn:e:{for(oe=D.key;R!==null;){if(R.key===oe)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){i(L,R.sibling),R=r(R,D.children||[]),R.return=L,L=R;break e}else{i(L,R);break}else e(L,R);R=R.sibling}R=Vl(D,L.mode,Y),R.return=L,L=R}return a(L);case Ki:return oe=D._init,V(L,R,oe(D._payload),Y)}if(Zr(D))return P(L,R,D,Y);if(Nr(D))return M(L,R,D,Y);ss(L,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,R!==null&&R.tag===6?(i(L,R.sibling),R=r(R,D),R.return=L,L=R):(i(L,R),R=jl(D,L.mode,Y),R.return=L,L=R),a(L)):i(L,R)}return V}var Cr=lm(!0),cm=lm(!1),jo={},Ti=mn(jo),To=mn(jo),Eo=mn(jo);function Tn(t){if(t===jo)throw Error(de(174));return t}function Vu(t,e){switch(Fe(Eo,e),Fe(To,t),Fe(Ti,jo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fc(e,t)}$e(Ti),Fe(Ti,e)}function xr(){$e(Ti),$e(To),$e(Eo)}function um(t){Tn(Eo.current);var e=Tn(Ti.current),i=fc(e,t.type);e!==i&&(Fe(To,t),Fe(Ti,i))}function Uu(t){To.current===t&&($e(Ti),$e(To))}var Ue=mn(0);function Zs(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pl=[];function Wu(){for(var t=0;t<Pl.length;t++)Pl[t]._workInProgressVersionPrimary=null;Pl.length=0}var Es=Ui.ReactCurrentDispatcher,Ml=Ui.ReactCurrentBatchConfig,Ln=0,We=null,qe=null,Qe=null,Js=!1,ao=!1,Io=0,V0=0;function lt(){throw Error(de(321))}function Hu(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!gi(t[i],e[i]))return!1;return!0}function zu(t,e,i,n,r,s){if(Ln=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Es.current=t===null||t.memoizedState===null?z0:G0,t=i(n,r),ao){s=0;do{if(ao=!1,Io=0,25<=s)throw Error(de(301));s+=1,Qe=qe=null,e.updateQueue=null,Es.current=Y0,t=i(n,r)}while(ao)}if(Es.current=Qs,e=qe!==null&&qe.next!==null,Ln=0,Qe=qe=We=null,Js=!1,e)throw Error(de(300));return t}function Gu(){var t=Io!==0;return Io=0,t}function wi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?We.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function ii(){if(qe===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Qe===null?We.memoizedState:Qe.next;if(e!==null)Qe=e,qe=t;else{if(t===null)throw Error(de(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Qe===null?We.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Oo(t,e){return typeof e=="function"?e(t):e}function Fl(t){var e=ii(),i=e.queue;if(i===null)throw Error(de(311));i.lastRenderedReducer=t;var n=qe,r=n.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}n.baseQueue=r=s,i.pending=null}if(r!==null){s=r.next,n=n.baseState;var f=a=null,_=null,y=s;do{var w=y.lane;if((Ln&w)===w)_!==null&&(_=_.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),n=y.hasEagerState?y.eagerState:t(n,y.action);else{var x={lane:w,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};_===null?(f=_=x,a=n):_=_.next=x,We.lanes|=w,Pn|=w}y=y.next}while(y!==null&&y!==s);_===null?a=n:_.next=f,gi(n,e.memoizedState)||(Tt=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=_,i.lastRenderedState=n}if(t=i.interleaved,t!==null){r=t;do s=r.lane,We.lanes|=s,Pn|=s,r=r.next;while(r!==t)}else r===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function Bl(t){var e=ii(),i=e.queue;if(i===null)throw Error(de(311));i.lastRenderedReducer=t;var n=i.dispatch,r=i.pending,s=e.memoizedState;if(r!==null){i.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);gi(s,e.memoizedState)||(Tt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),i.lastRenderedState=s}return[s,n]}function hm(){}function dm(t,e){var i=We,n=ii(),r=e(),s=!gi(n.memoizedState,r);if(s&&(n.memoizedState=r,Tt=!0),n=n.queue,Yu(gm.bind(null,i,n,t),[t]),n.getSnapshot!==e||s||Qe!==null&&Qe.memoizedState.tag&1){if(i.flags|=2048,Ro(9,pm.bind(null,i,n,r,e),void 0,null),et===null)throw Error(de(349));Ln&30||fm(i,e,r)}return r}function fm(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function pm(t,e,i,n){e.value=i,e.getSnapshot=n,mm(e)&&vm(t)}function gm(t,e,i){return i(function(){mm(e)&&vm(t)})}function mm(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!gi(t,i)}catch(n){return!0}}function vm(t){var e=ji(t,1);e!==null&&di(e,t,1,-1)}function Pd(t){var e=wi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},e.queue=t,t=t.dispatch=H0.bind(null,We,t),[e.memoizedState,t]}function Ro(t,e,i,n){return t={tag:t,create:e,destroy:i,deps:n,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(n=i.next,i.next=t,t.next=n,e.lastEffect=t)),t}function _m(){return ii().memoizedState}function Is(t,e,i,n){var r=wi();We.flags|=t,r.memoizedState=Ro(1|e,i,void 0,n===void 0?null:n)}function ka(t,e,i,n){var r=ii();n=n===void 0?null:n;var s=void 0;if(qe!==null){var a=qe.memoizedState;if(s=a.destroy,n!==null&&Hu(n,a.deps)){r.memoizedState=Ro(e,i,s,n);return}}We.flags|=t,r.memoizedState=Ro(1|e,i,s,n)}function Md(t,e){return Is(8390656,8,t,e)}function Yu(t,e){return ka(2048,8,t,e)}function ym(t,e){return ka(4,2,t,e)}function bm(t,e){return ka(4,4,t,e)}function wm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Sm(t,e,i){return i=i!=null?i.concat([t]):null,ka(4,4,wm.bind(null,e,t),i)}function Xu(){}function Cm(t,e){var i=ii();e=e===void 0?null:e;var n=i.memoizedState;return n!==null&&e!==null&&Hu(e,n[1])?n[0]:(i.memoizedState=[t,e],t)}function xm(t,e){var i=ii();e=e===void 0?null:e;var n=i.memoizedState;return n!==null&&e!==null&&Hu(e,n[1])?n[0]:(t=t(),i.memoizedState=[t,e],t)}function Tm(t,e,i){return Ln&21?(gi(i,e)||(i=Og(),We.lanes|=i,Pn|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=i)}function U0(t,e){var i=De;De=i!==0&&4>i?i:4,t(!0);var n=Ml.transition;Ml.transition={};try{t(!1),e()}finally{De=i,Ml.transition=n}}function Em(){return ii().memoizedState}function W0(t,e,i){var n=cn(t);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},Im(t))Om(e,i);else if(i=rm(t,e,i,n),i!==null){var r=mt();di(i,t,n,r),Rm(i,e,n)}}function H0(t,e,i){var n=cn(t),r={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(Im(t))Om(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,f=s(a,i);if(r.hasEagerState=!0,r.eagerState=f,gi(f,a)){var _=e.interleaved;_===null?(r.next=r,$u(e)):(r.next=_.next,_.next=r),e.interleaved=r;return}}catch(y){}finally{}i=rm(t,e,r,n),i!==null&&(r=mt(),di(i,t,n,r),Rm(i,e,n))}}function Im(t){var e=t.alternate;return t===We||e!==null&&e===We}function Om(t,e){ao=Js=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function Rm(t,e,i){if(i&4194240){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,Tu(t,i)}}var Qs={readContext:ti,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},z0={readContext:ti,useCallback:function(t,e){return wi().memoizedState=[t,e===void 0?null:e],t},useContext:ti,useEffect:Md,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,Is(4194308,4,wm.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Is(4194308,4,t,e)},useInsertionEffect:function(t,e){return Is(4,2,t,e)},useMemo:function(t,e){var i=wi();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var n=wi();return e=i!==void 0?i(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=W0.bind(null,We,t),[n.memoizedState,t]},useRef:function(t){var e=wi();return t={current:t},e.memoizedState=t},useState:Pd,useDebugValue:Xu,useDeferredValue:function(t){return wi().memoizedState=t},useTransition:function(){var t=Pd(!1),e=t[0];return t=U0.bind(null,t[1]),wi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var n=We,r=wi();if(Ve){if(i===void 0)throw Error(de(407));i=i()}else{if(i=e(),et===null)throw Error(de(349));Ln&30||fm(n,e,i)}r.memoizedState=i;var s={value:i,getSnapshot:e};return r.queue=s,Md(gm.bind(null,n,s,t),[t]),n.flags|=2048,Ro(9,pm.bind(null,n,s,i,e),void 0,null),i},useId:function(){var t=wi(),e=et.identifierPrefix;if(Ve){var i=Fi,n=Mi;i=(n&~(1<<32-hi(n)-1)).toString(32)+i,e=":"+e+"R"+i,i=Io++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=V0++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},G0={readContext:ti,useCallback:Cm,useContext:ti,useEffect:Yu,useImperativeHandle:Sm,useInsertionEffect:ym,useLayoutEffect:bm,useMemo:xm,useReducer:Fl,useRef:_m,useState:function(){return Fl(Oo)},useDebugValue:Xu,useDeferredValue:function(t){var e=ii();return Tm(e,qe.memoizedState,t)},useTransition:function(){var t=Fl(Oo)[0],e=ii().memoizedState;return[t,e]},useMutableSource:hm,useSyncExternalStore:dm,useId:Em,unstable_isNewReconciler:!1},Y0={readContext:ti,useCallback:Cm,useContext:ti,useEffect:Yu,useImperativeHandle:Sm,useInsertionEffect:ym,useLayoutEffect:bm,useMemo:xm,useReducer:Bl,useRef:_m,useState:function(){return Bl(Oo)},useDebugValue:Xu,useDeferredValue:function(t){var e=ii();return qe===null?e.memoizedState=t:Tm(e,qe.memoizedState,t)},useTransition:function(){var t=Bl(Oo)[0],e=ii().memoizedState;return[t,e]},useMutableSource:hm,useSyncExternalStore:dm,useId:Em,unstable_isNewReconciler:!1};function Tr(t,e){try{var i="",n=e;do i+=wy(n),n=n.return;while(n);var r=i}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Nl(t,e,i){return{value:t,source:null,stack:i!=null?i:null,digest:e!=null?e:null}}function Fc(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var X0=typeof WeakMap=="function"?WeakMap:Map;function Am(t,e,i){i=Bi(-1,i),i.tag=3,i.payload={element:null};var n=e.value;return i.callback=function(){ta||(ta=!0,Gc=n),Fc(t,e)},i}function km(t,e,i){i=Bi(-1,i),i.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;i.payload=function(){return n(r)},i.callback=function(){Fc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){Fc(t,e),typeof n!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),i}function Fd(t,e,i){var n=t.pingCache;if(n===null){n=t.pingCache=new X0;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(i)||(r.add(i),t=lb.bind(null,t,e,i),e.then(t,t))}function Bd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Nd(t,e,i,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=Bi(-1,1),e.tag=2,an(i,e,1))),i.lanes|=1),t)}var K0=Ui.ReactCurrentOwner,Tt=!1;function gt(t,e,i,n){e.child=t===null?cm(e,null,i,n):Cr(e,t.child,i,n)}function $d(t,e,i,n,r){i=i.render;var s=e.ref;return gr(e,r),n=zu(t,e,i,n,s,r),i=Gu(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Vi(t,e,r)):(Ve&&i&&Lu(e),e.flags|=1,gt(t,e,n,r),e.child)}function jd(t,e,i,n,r){if(t===null){var s=i.type;return typeof s=="function"&&!ih(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=s,Dm(t,e,s,n,r)):(t=ks(i.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var a=s.memoizedProps;if(i=i.compare,i=i!==null?i:wo,i(a,n)&&t.ref===e.ref)return Vi(t,e,r)}return e.flags|=1,t=un(s,n),t.ref=e.ref,t.return=e,e.child=t}function Dm(t,e,i,n,r){if(t!==null){var s=t.memoizedProps;if(wo(s,n)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=n=s,(t.lanes&r)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Vi(t,e,r)}return Bc(t,e,i,n,r)}function Lm(t,e,i){var n=e.pendingProps,r=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(ur,Mt),Mt|=i;else{if(!(i&1073741824))return t=s!==null?s.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(ur,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:i,Fe(ur,Mt),Mt|=n}else s!==null?(n=s.baseLanes|i,e.memoizedState=null):n=i,Fe(ur,Mt),Mt|=n;return gt(t,e,r,i),e.child}function Pm(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function Bc(t,e,i,n,r){var s=Ot(i)?kn:ft.current;return s=wr(e,s),gr(e,r),i=zu(t,e,i,n,s,r),n=Gu(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Vi(t,e,r)):(Ve&&n&&Lu(e),e.flags|=1,gt(t,e,i,r),e.child)}function Vd(t,e,i,n,r){if(Ot(i)){var s=!0;zs(e)}else s=!1;if(gr(e,r),e.stateNode===null)Os(t,e),am(e,i,n),Mc(e,i,n,r),n=!0;else if(t===null){var a=e.stateNode,f=e.memoizedProps;a.props=f;var _=a.context,y=i.contextType;typeof y=="object"&&y!==null?y=ti(y):(y=Ot(i)?kn:ft.current,y=wr(e,y));var w=i.getDerivedStateFromProps,x=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function";x||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(f!==n||_!==y)&&Dd(e,a,n,y),qi=!1;var E=e.memoizedState;a.state=E,qs(e,n,a,r),_=e.memoizedState,f!==n||E!==_||It.current||qi?(typeof w=="function"&&(Pc(e,i,w,n),_=e.memoizedState),(f=qi||kd(e,i,f,n,E,_,y))?(x||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=_),a.props=n,a.state=_,a.context=y,n=f):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,om(t,e),f=e.memoizedProps,y=e.type===e.elementType?f:si(e.type,f),a.props=y,x=e.pendingProps,E=a.context,_=i.contextType,typeof _=="object"&&_!==null?_=ti(_):(_=Ot(i)?kn:ft.current,_=wr(e,_));var k=i.getDerivedStateFromProps;(w=typeof k=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(f!==x||E!==_)&&Dd(e,a,n,_),qi=!1,E=e.memoizedState,a.state=E,qs(e,n,a,r);var P=e.memoizedState;f!==x||E!==P||It.current||qi?(typeof k=="function"&&(Pc(e,i,k,n),P=e.memoizedState),(y=qi||kd(e,i,y,n,E,P,_)||!1)?(w||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,P,_),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,P,_)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||f===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=P),a.props=n,a.state=P,a.context=_,n=y):(typeof a.componentDidUpdate!="function"||f===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),n=!1)}return Nc(t,e,i,n,s,r)}function Nc(t,e,i,n,r,s){Pm(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return r&&Ed(e,i,!1),Vi(t,e,s);n=e.stateNode,K0.current=e;var f=a&&typeof i.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Cr(e,t.child,null,s),e.child=Cr(e,null,f,s)):gt(t,e,f,s),e.memoizedState=n.state,r&&Ed(e,i,!0),e.child}function Mm(t){var e=t.stateNode;e.pendingContext?Td(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Td(t,e.context,!1),Vu(t,e.containerInfo)}function Ud(t,e,i,n,r){return Sr(),Mu(r),e.flags|=256,gt(t,e,i,n),e.child}var $c={dehydrated:null,treeContext:null,retryLane:0};function jc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fm(t,e,i){var n=e.pendingProps,r=Ue.current,s=!1,a=(e.flags&128)!==0,f;if((f=a)||(f=t!==null&&t.memoizedState===null?!1:(r&2)!==0),f?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Fe(Ue,r&1),t===null)return Dc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Pa(a,n,0,null),t=Rn(t,n,i,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=jc(i),e.memoizedState=$c,t):Ku(e,a));if(r=t.memoizedState,r!==null&&(f=r.dehydrated,f!==null))return q0(t,e,a,n,f,r,i);if(s){s=n.fallback,a=e.mode,r=t.child,f=r.sibling;var _={mode:"hidden",children:n.children};return!(a&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=_,e.deletions=null):(n=un(r,_),n.subtreeFlags=r.subtreeFlags&14680064),f!==null?s=un(f,s):(s=Rn(s,a,i,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?jc(i):{baseLanes:a.baseLanes|i,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~i,e.memoizedState=$c,n}return s=t.child,t=s.sibling,n=un(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=i),n.return=e,n.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=n,e.memoizedState=null,n}function Ku(t,e){return e=Pa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function as(t,e,i,n){return n!==null&&Mu(n),Cr(e,t.child,null,i),t=Ku(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function q0(t,e,i,n,r,s,a){if(i)return e.flags&256?(e.flags&=-257,n=Nl(Error(de(422))),as(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,r=e.mode,n=Pa({mode:"visible",children:n.children},r,0,null),s=Rn(s,r,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Cr(e,t.child,null,a),e.child.memoizedState=jc(a),e.memoizedState=$c,s);if(!(e.mode&1))return as(t,e,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var f=n.dgst;return n=f,s=Error(de(419)),n=Nl(s,n,void 0),as(t,e,a,n)}if(f=(a&t.childLanes)!==0,Tt||f){if(n=et,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ji(t,r),di(n,t,r,-1))}return th(),n=Nl(Error(de(421))),as(t,e,a,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=cb.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,jt=sn(r.nextSibling),Vt=e,Ve=!0,li=null,t!==null&&(qt[Zt++]=Mi,qt[Zt++]=Fi,qt[Zt++]=Dn,Mi=t.id,Fi=t.overflow,Dn=e),e=Ku(e,n.children),e.flags|=4096,e)}function Wd(t,e,i){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Lc(t.return,e,i)}function $l(t,e,i,n,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailMode=r)}function Bm(t,e,i){var n=e.pendingProps,r=n.revealOrder,s=n.tail;if(gt(t,e,n.children,i),n=Ue.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wd(t,i,e);else if(t.tag===19)Wd(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Fe(Ue,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(i=e.child,r=null;i!==null;)t=i.alternate,t!==null&&Zs(t)===null&&(r=i),i=i.sibling;i=r,i===null?(r=e.child,e.child=null):(r=i.sibling,i.sibling=null),$l(e,!1,r,i,s);break;case"backwards":for(i=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Zs(t)===null){e.child=r;break}t=r.sibling,r.sibling=i,i=r,r=t}$l(e,!0,i,null,s);break;case"together":$l(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Os(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vi(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),Pn|=e.lanes,!(i&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,i=un(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=un(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function Z0(t,e,i){switch(e.tag){case 3:Mm(e),Sr();break;case 5:um(e);break;case 1:Ot(e.type)&&zs(e);break;case 4:Vu(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Fe(Xs,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Fe(Ue,Ue.current&1),e.flags|=128,null):i&e.child.childLanes?Fm(t,e,i):(Fe(Ue,Ue.current&1),t=Vi(t,e,i),t!==null?t.sibling:null);Fe(Ue,Ue.current&1);break;case 19:if(n=(i&e.childLanes)!==0,t.flags&128){if(n)return Bm(t,e,i);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Fe(Ue,Ue.current),n)break;return null;case 22:case 23:return e.lanes=0,Lm(t,e,i)}return Vi(t,e,i)}var Nm,Vc,$m,jm;Nm=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Vc=function(){};$m=function(t,e,i,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,Tn(Ti.current);var s=null;switch(i){case"input":r=cc(t,r),n=cc(t,n),s=[];break;case"select":r=He({},r,{value:void 0}),n=He({},n,{value:void 0}),s=[];break;case"textarea":r=dc(t,r),n=dc(t,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ws)}pc(i,n);var a;i=null;for(y in r)if(!n.hasOwnProperty(y)&&r.hasOwnProperty(y)&&r[y]!=null)if(y==="style"){var f=r[y];for(a in f)f.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(po.hasOwnProperty(y)?s||(s=[]):(s=s||[]).push(y,null));for(y in n){var _=n[y];if(f=r!=null?r[y]:void 0,n.hasOwnProperty(y)&&_!==f&&(_!=null||f!=null))if(y==="style")if(f){for(a in f)!f.hasOwnProperty(a)||_&&_.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in _)_.hasOwnProperty(a)&&f[a]!==_[a]&&(i||(i={}),i[a]=_[a])}else i||(s||(s=[]),s.push(y,i)),i=_;else y==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,f=f?f.__html:void 0,_!=null&&f!==_&&(s=s||[]).push(y,_)):y==="children"?typeof _!="string"&&typeof _!="number"||(s=s||[]).push(y,""+_):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(po.hasOwnProperty(y)?(_!=null&&y==="onScroll"&&Be("scroll",t),s||f===_||(s=[])):(s=s||[]).push(y,_))}i&&(s=s||[]).push("style",i);var y=s;(e.updateQueue=y)&&(e.flags|=4)}};jm=function(t,e,i,n){i!==n&&(e.flags|=4)};function Hr(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,n=0;if(e)for(var r=t.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=i,e}function J0(t,e,i){var n=e.pendingProps;switch(Pu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return Ot(e.type)&&Hs(),ct(e),null;case 3:return n=e.stateNode,xr(),$e(It),$e(ft),Wu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(os(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,li!==null&&(Kc(li),li=null))),Vc(t,e),ct(e),null;case 5:Uu(e);var r=Tn(Eo.current);if(i=e.type,t!==null&&e.stateNode!=null)$m(t,e,i,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(de(166));return ct(e),null}if(t=Tn(Ti.current),os(e)){n=e.stateNode,i=e.type;var s=e.memoizedProps;switch(n[Ci]=e,n[xo]=s,t=(e.mode&1)!==0,i){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(r=0;r<Qr.length;r++)Be(Qr[r],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":Jh(n,s),Be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Be("invalid",n);break;case"textarea":ed(n,s),Be("invalid",n)}pc(i,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var f=s[a];a==="children"?typeof f=="string"?n.textContent!==f&&(s.suppressHydrationWarning!==!0&&rs(n.textContent,f,t),r=["children",f]):typeof f=="number"&&n.textContent!==""+f&&(s.suppressHydrationWarning!==!0&&rs(n.textContent,f,t),r=["children",""+f]):po.hasOwnProperty(a)&&f!=null&&a==="onScroll"&&Be("scroll",n)}switch(i){case"input":qo(n),Qh(n,s,!0);break;case"textarea":qo(n),td(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Ws)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fg(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(i,{is:n.is}):(t=a.createElement(i),i==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,i),t[Ci]=e,t[xo]=n,Nm(t,e,!1,!1),e.stateNode=t;e:{switch(a=gc(i,n),i){case"dialog":Be("cancel",t),Be("close",t),r=n;break;case"iframe":case"object":case"embed":Be("load",t),r=n;break;case"video":case"audio":for(r=0;r<Qr.length;r++)Be(Qr[r],t);r=n;break;case"source":Be("error",t),r=n;break;case"img":case"image":case"link":Be("error",t),Be("load",t),r=n;break;case"details":Be("toggle",t),r=n;break;case"input":Jh(t,n),r=cc(t,n),Be("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=He({},n,{value:void 0}),Be("invalid",t);break;case"textarea":ed(t,n),r=dc(t,n),Be("invalid",t);break;default:r=n}pc(i,r),f=r;for(s in f)if(f.hasOwnProperty(s)){var _=f[s];s==="style"?mg(t,_):s==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&pg(t,_)):s==="children"?typeof _=="string"?(i!=="textarea"||_!=="")&&go(t,_):typeof _=="number"&&go(t,""+_):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(po.hasOwnProperty(s)?_!=null&&s==="onScroll"&&Be("scroll",t):_!=null&&yu(t,s,_,a))}switch(i){case"input":qo(t),Qh(t,n,!1);break;case"textarea":qo(t),td(t);break;case"option":n.value!=null&&t.setAttribute("value",""+hn(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?hr(t,!!n.multiple,s,!1):n.defaultValue!=null&&hr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ws)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)jm(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(de(166));if(i=Tn(Eo.current),Tn(Ti.current),os(e)){if(n=e.stateNode,i=e.memoizedProps,n[Ci]=e,(s=n.nodeValue!==i)&&(t=Vt,t!==null))switch(t.tag){case 3:rs(n.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rs(n.nodeValue,i,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(i.nodeType===9?i:i.ownerDocument).createTextNode(n),n[Ci]=e,e.stateNode=n}return ct(e),null;case 13:if($e(Ue),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&jt!==null&&e.mode&1&&!(e.flags&128))nm(),Sr(),e.flags|=98560,s=!1;else if(s=os(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(de(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(de(317));s[Ci]=e}else Sr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),s=!1}else li!==null&&(Kc(li),li=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?Je===0&&(Je=3):th())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return xr(),Vc(t,e),t===null&&So(e.stateNode.containerInfo),ct(e),null;case 10:return Nu(e.type._context),ct(e),null;case 17:return Ot(e.type)&&Hs(),ct(e),null;case 19:if($e(Ue),s=e.memoizedState,s===null)return ct(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Hr(s,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Zs(t),a!==null){for(e.flags|=128,Hr(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=i,i=e.child;i!==null;)s=i,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Fe(Ue,Ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ye()>Er&&(e.flags|=128,n=!0,Hr(s,!1),e.lanes=4194304)}else{if(!n)if(t=Zs(a),t!==null){if(e.flags|=128,n=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),Hr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ve)return ct(e),null}else 2*Ye()-s.renderingStartTime>Er&&i!==1073741824&&(e.flags|=128,n=!0,Hr(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(i=s.last,i!==null?i.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ye(),e.sibling=null,i=Ue.current,Fe(Ue,n?i&1|2:i&1),e):(ct(e),null);case 22:case 23:return eh(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Mt&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function Q0(t,e){switch(Pu(e),e.tag){case 1:return Ot(e.type)&&Hs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xr(),$e(It),$e(ft),Wu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uu(e),null;case 13:if($e(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));Sr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ue),null;case 4:return xr(),null;case 10:return Nu(e.type._context),null;case 22:case 23:return eh(),null;case 24:return null;default:return null}}var ls=!1,dt=!1,eb=typeof WeakSet=="function"?WeakSet:Set,we=null;function cr(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(n){ze(t,e,n)}else i.current=null}function Uc(t,e,i){try{i()}catch(n){ze(t,e,n)}}var Hd=!1;function tb(t,e){if(Tc=js,t=Hg(),Du(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{i.nodeType,s.nodeType}catch(Y){i=null;break e}var a=0,f=-1,_=-1,y=0,w=0,x=t,E=null;t:for(;;){for(var k;x!==i||r!==0&&x.nodeType!==3||(f=a+r),x!==s||n!==0&&x.nodeType!==3||(_=a+n),x.nodeType===3&&(a+=x.nodeValue.length),(k=x.firstChild)!==null;)E=x,x=k;for(;;){if(x===t)break t;if(E===i&&++y===r&&(f=a),E===s&&++w===n&&(_=a),(k=x.nextSibling)!==null)break;x=E,E=x.parentNode}x=k}i=f===-1||_===-1?null:{start:f,end:_}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ec={focusedElem:t,selectionRange:i},js=!1,we=e;we!==null;)if(e=we,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,we=t;else for(;we!==null;){e=we;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var M=P.memoizedProps,V=P.memoizedState,L=e.stateNode,R=L.getSnapshotBeforeUpdate(e.elementType===e.type?M:si(e.type,M),V);L.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var D=e.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(Y){ze(e,e.return,Y)}if(t=e.sibling,t!==null){t.return=e.return,we=t;break}we=e.return}return P=Hd,Hd=!1,P}function lo(t,e,i){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Uc(e,i,s)}r=r.next}while(r!==n)}}function Da(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var n=i.create;i.destroy=n()}i=i.next}while(i!==e)}}function Wc(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function Vm(t){var e=t.alternate;e!==null&&(t.alternate=null,Vm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ci],delete e[xo],delete e[Rc],delete e[B0],delete e[N0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Um(t){return t.tag===5||t.tag===3||t.tag===4}function zd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Um(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hc(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=Ws));else if(n!==4&&(t=t.child,t!==null))for(Hc(t,e,i),t=t.sibling;t!==null;)Hc(t,e,i),t=t.sibling}function zc(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(zc(t,e,i),t=t.sibling;t!==null;)zc(t,e,i),t=t.sibling}var rt=null,ai=!1;function Xi(t,e,i){for(i=i.child;i!==null;)Wm(t,e,i),i=i.sibling}function Wm(t,e,i){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(xa,i)}catch(f){}switch(i.tag){case 5:dt||cr(i,e);case 6:var n=rt,r=ai;rt=null,Xi(t,e,i),rt=n,ai=r,rt!==null&&(ai?(t=rt,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):rt.removeChild(i.stateNode));break;case 18:rt!==null&&(ai?(t=rt,i=i.stateNode,t.nodeType===8?Dl(t.parentNode,i):t.nodeType===1&&Dl(t,i),yo(t)):Dl(rt,i.stateNode));break;case 4:n=rt,r=ai,rt=i.stateNode.containerInfo,ai=!0,Xi(t,e,i),rt=n,ai=r;break;case 0:case 11:case 14:case 15:if(!dt&&(n=i.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Uc(i,e,a),r=r.next}while(r!==n)}Xi(t,e,i);break;case 1:if(!dt&&(cr(i,e),n=i.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(f){ze(i,e,f)}Xi(t,e,i);break;case 21:Xi(t,e,i);break;case 22:i.mode&1?(dt=(n=dt)||i.memoizedState!==null,Xi(t,e,i),dt=n):Xi(t,e,i);break;default:Xi(t,e,i)}}function Gd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new eb),e.forEach(function(n){var r=ub.bind(null,t,n);i.has(n)||(i.add(n),n.then(r,r))})}}function ri(t,e){var i=e.deletions;if(i!==null)for(var n=0;n<i.length;n++){var r=i[n];try{var s=t,a=e,f=a;e:for(;f!==null;){switch(f.tag){case 5:rt=f.stateNode,ai=!1;break e;case 3:rt=f.stateNode.containerInfo,ai=!0;break e;case 4:rt=f.stateNode.containerInfo,ai=!0;break e}f=f.return}if(rt===null)throw Error(de(160));Wm(s,a,r),rt=null,ai=!1;var _=r.alternate;_!==null&&(_.return=null),r.return=null}catch(y){ze(r,e,y)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hm(e,t),e=e.sibling}function Hm(t,e){var i=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ri(e,t),bi(t),n&4){try{lo(3,t,t.return),Da(3,t)}catch(M){ze(t,t.return,M)}try{lo(5,t,t.return)}catch(M){ze(t,t.return,M)}}break;case 1:ri(e,t),bi(t),n&512&&i!==null&&cr(i,i.return);break;case 5:if(ri(e,t),bi(t),n&512&&i!==null&&cr(i,i.return),t.flags&32){var r=t.stateNode;try{go(r,"")}catch(M){ze(t,t.return,M)}}if(n&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,a=i!==null?i.memoizedProps:s,f=t.type,_=t.updateQueue;if(t.updateQueue=null,_!==null)try{f==="input"&&s.type==="radio"&&s.name!=null&&hg(r,s),gc(f,a);var y=gc(f,s);for(a=0;a<_.length;a+=2){var w=_[a],x=_[a+1];w==="style"?mg(r,x):w==="dangerouslySetInnerHTML"?pg(r,x):w==="children"?go(r,x):yu(r,w,x,y)}switch(f){case"input":uc(r,s);break;case"textarea":dg(r,s);break;case"select":var E=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var k=s.value;k!=null?hr(r,!!s.multiple,k,!1):E!==!!s.multiple&&(s.defaultValue!=null?hr(r,!!s.multiple,s.defaultValue,!0):hr(r,!!s.multiple,s.multiple?[]:"",!1))}r[xo]=s}catch(M){ze(t,t.return,M)}}break;case 6:if(ri(e,t),bi(t),n&4){if(t.stateNode===null)throw Error(de(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(M){ze(t,t.return,M)}}break;case 3:if(ri(e,t),bi(t),n&4&&i!==null&&i.memoizedState.isDehydrated)try{yo(e.containerInfo)}catch(M){ze(t,t.return,M)}break;case 4:ri(e,t),bi(t);break;case 13:ri(e,t),bi(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ju=Ye())),n&4&&Gd(t);break;case 22:if(w=i!==null&&i.memoizedState!==null,t.mode&1?(dt=(y=dt)||w,ri(e,t),dt=y):ri(e,t),bi(t),n&8192){if(y=t.memoizedState!==null,(t.stateNode.isHidden=y)&&!w&&t.mode&1)for(we=t,w=t.child;w!==null;){for(x=we=w;we!==null;){switch(E=we,k=E.child,E.tag){case 0:case 11:case 14:case 15:lo(4,E,E.return);break;case 1:cr(E,E.return);var P=E.stateNode;if(typeof P.componentWillUnmount=="function"){n=E,i=E.return;try{e=n,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(M){ze(n,i,M)}}break;case 5:cr(E,E.return);break;case 22:if(E.memoizedState!==null){Xd(x);continue}}k!==null?(k.return=E,we=k):Xd(x)}w=w.sibling}e:for(w=null,x=t;;){if(x.tag===5){if(w===null){w=x;try{r=x.stateNode,y?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(f=x.stateNode,_=x.memoizedProps.style,a=_!=null&&_.hasOwnProperty("display")?_.display:null,f.style.display=gg("display",a))}catch(M){ze(t,t.return,M)}}}else if(x.tag===6){if(w===null)try{x.stateNode.nodeValue=y?"":x.memoizedProps}catch(M){ze(t,t.return,M)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;w===x&&(w=null),x=x.return}w===x&&(w=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:ri(e,t),bi(t),n&4&&Gd(t);break;case 21:break;default:ri(e,t),bi(t)}}function bi(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(Um(i)){var n=i;break e}i=i.return}throw Error(de(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(go(r,""),n.flags&=-33);var s=zd(t);zc(t,s,r);break;case 3:case 4:var a=n.stateNode.containerInfo,f=zd(t);Hc(t,f,a);break;default:throw Error(de(161))}}catch(_){ze(t,t.return,_)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ib(t,e,i){we=t,zm(t)}function zm(t,e,i){for(var n=(t.mode&1)!==0;we!==null;){var r=we,s=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||ls;if(!a){var f=r.alternate,_=f!==null&&f.memoizedState!==null||dt;f=ls;var y=dt;if(ls=a,(dt=_)&&!y)for(we=r;we!==null;)a=we,_=a.child,a.tag===22&&a.memoizedState!==null?Kd(r):_!==null?(_.return=a,we=_):Kd(r);for(;s!==null;)we=s,zm(s),s=s.sibling;we=r,ls=f,dt=y}Yd(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,we=s):Yd(t)}}function Yd(t){for(;we!==null;){var e=we;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||Da(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!dt)if(i===null)n.componentDidMount();else{var r=e.elementType===e.type?i.memoizedProps:si(e.type,i.memoizedProps);n.componentDidUpdate(r,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ad(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}Ad(e,a,i)}break;case 5:var f=e.stateNode;if(i===null&&e.flags&4){i=f;var _=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&i.focus();break;case"img":_.src&&(i.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var y=e.alternate;if(y!==null){var w=y.memoizedState;if(w!==null){var x=w.dehydrated;x!==null&&yo(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}dt||e.flags&512&&Wc(e)}catch(E){ze(e,e.return,E)}}if(e===t){we=null;break}if(i=e.sibling,i!==null){i.return=e.return,we=i;break}we=e.return}}function Xd(t){for(;we!==null;){var e=we;if(e===t){we=null;break}var i=e.sibling;if(i!==null){i.return=e.return,we=i;break}we=e.return}}function Kd(t){for(;we!==null;){var e=we;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{Da(4,e)}catch(_){ze(e,i,_)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(_){ze(e,r,_)}}var s=e.return;try{Wc(e)}catch(_){ze(e,s,_)}break;case 5:var a=e.return;try{Wc(e)}catch(_){ze(e,a,_)}}}catch(_){ze(e,e.return,_)}if(e===t){we=null;break}var f=e.sibling;if(f!==null){f.return=e.return,we=f;break}we=e.return}}var nb=Math.ceil,ea=Ui.ReactCurrentDispatcher,qu=Ui.ReactCurrentOwner,ei=Ui.ReactCurrentBatchConfig,Ae=0,et=null,Xe=null,ot=0,Mt=0,ur=mn(0),Je=0,Ao=null,Pn=0,La=0,Zu=0,co=null,xt=null,Ju=0,Er=1/0,Oi=null,ta=!1,Gc=null,ln=null,cs=!1,en=null,ia=0,uo=0,Yc=null,Rs=-1,As=0;function mt(){return Ae&6?Ye():Rs!==-1?Rs:Rs=Ye()}function cn(t){return t.mode&1?Ae&2&&ot!==0?ot&-ot:j0.transition!==null?(As===0&&(As=Og()),As):(t=De,t!==0||(t=window.event,t=t===void 0?16:Mg(t.type)),t):1}function di(t,e,i,n){if(50<uo)throw uo=0,Yc=null,Error(de(185));Bo(t,i,n),(!(Ae&2)||t!==et)&&(t===et&&(!(Ae&2)&&(La|=i),Je===4&&Ji(t,ot)),Rt(t,n),i===1&&Ae===0&&!(e.mode&1)&&(Er=Ye()+500,Ra&&vn()))}function Rt(t,e){var i=t.callbackNode;jy(t,e);var n=$s(t,t===et?ot:0);if(n===0)i!==null&&rd(i),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(i!=null&&rd(i),e===1)t.tag===0?$0(qd.bind(null,t)):em(qd.bind(null,t)),M0(function(){!(Ae&6)&&vn()}),i=null;else{switch(Rg(n)){case 1:i=xu;break;case 4:i=Eg;break;case 16:i=Ns;break;case 536870912:i=Ig;break;default:i=Ns}i=Qm(i,Gm.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function Gm(t,e){if(Rs=-1,As=0,Ae&6)throw Error(de(327));var i=t.callbackNode;if(mr()&&t.callbackNode!==i)return null;var n=$s(t,t===et?ot:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=na(t,n);else{e=n;var r=Ae;Ae|=2;var s=Xm();(et!==t||ot!==e)&&(Oi=null,Er=Ye()+500,On(t,e));do try{sb();break}catch(f){Ym(t,f)}while(1);Bu(),ea.current=s,Ae=r,Xe!==null?e=0:(et=null,ot=0,e=Je)}if(e!==0){if(e===2&&(r=bc(t),r!==0&&(n=r,e=Xc(t,r))),e===1)throw i=Ao,On(t,0),Ji(t,n),Rt(t,Ye()),i;if(e===6)Ji(t,n);else{if(r=t.current.alternate,!(n&30)&&!rb(r)&&(e=na(t,n),e===2&&(s=bc(t),s!==0&&(n=s,e=Xc(t,s))),e===1))throw i=Ao,On(t,0),Ji(t,n),Rt(t,Ye()),i;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(de(345));case 2:Sn(t,xt,Oi);break;case 3:if(Ji(t,n),(n&130023424)===n&&(e=Ju+500-Ye(),10<e)){if($s(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){mt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Oc(Sn.bind(null,t,xt,Oi),e);break}Sn(t,xt,Oi);break;case 4:if(Ji(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var a=31-hi(n);s=1<<a,a=e[a],a>r&&(r=a),n&=~s}if(n=r,n=Ye()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*nb(n/1960))-n,10<n){t.timeoutHandle=Oc(Sn.bind(null,t,xt,Oi),n);break}Sn(t,xt,Oi);break;case 5:Sn(t,xt,Oi);break;default:throw Error(de(329))}}}return Rt(t,Ye()),t.callbackNode===i?Gm.bind(null,t):null}function Xc(t,e){var i=co;return t.current.memoizedState.isDehydrated&&(On(t,e).flags|=256),t=na(t,e),t!==2&&(e=xt,xt=i,e!==null&&Kc(e)),t}function Kc(t){xt===null?xt=t:xt.push.apply(xt,t)}function rb(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var n=0;n<i.length;n++){var r=i[n],s=r.getSnapshot;r=r.value;try{if(!gi(s(),r))return!1}catch(a){return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ji(t,e){for(e&=~Zu,e&=~La,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-hi(e),n=1<<i;t[i]=-1,e&=~n}}function qd(t){if(Ae&6)throw Error(de(327));mr();var e=$s(t,0);if(!(e&1))return Rt(t,Ye()),null;var i=na(t,e);if(t.tag!==0&&i===2){var n=bc(t);n!==0&&(e=n,i=Xc(t,n))}if(i===1)throw i=Ao,On(t,0),Ji(t,e),Rt(t,Ye()),i;if(i===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sn(t,xt,Oi),Rt(t,Ye()),null}function Qu(t,e){var i=Ae;Ae|=1;try{return t(e)}finally{Ae=i,Ae===0&&(Er=Ye()+500,Ra&&vn())}}function Mn(t){en!==null&&en.tag===0&&!(Ae&6)&&mr();var e=Ae;Ae|=1;var i=ei.transition,n=De;try{if(ei.transition=null,De=1,t)return t()}finally{De=n,ei.transition=i,Ae=e,!(Ae&6)&&vn()}}function eh(){Mt=ur.current,$e(ur)}function On(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,P0(i)),Xe!==null)for(i=Xe.return;i!==null;){var n=i;switch(Pu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Hs();break;case 3:xr(),$e(It),$e(ft),Wu();break;case 5:Uu(n);break;case 4:xr();break;case 13:$e(Ue);break;case 19:$e(Ue);break;case 10:Nu(n.type._context);break;case 22:case 23:eh()}i=i.return}if(et=t,Xe=t=un(t.current,null),ot=Mt=e,Je=0,Ao=null,Zu=La=Pn=0,xt=co=null,xn!==null){for(e=0;e<xn.length;e++)if(i=xn[e],n=i.interleaved,n!==null){i.interleaved=null;var r=n.next,s=i.pending;if(s!==null){var a=s.next;s.next=r,n.next=a}i.pending=n}xn=null}return t}function Ym(t,e){do{var i=Xe;try{if(Bu(),Es.current=Qs,Js){for(var n=We.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Js=!1}if(Ln=0,Qe=qe=We=null,ao=!1,Io=0,qu.current=null,i===null||i.return===null){Je=1,Ao=e,Xe=null;break}e:{var s=t,a=i.return,f=i,_=e;if(e=ot,f.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var y=_,w=f,x=w.tag;if(!(w.mode&1)&&(x===0||x===11||x===15)){var E=w.alternate;E?(w.updateQueue=E.updateQueue,w.memoizedState=E.memoizedState,w.lanes=E.lanes):(w.updateQueue=null,w.memoizedState=null)}var k=Bd(a);if(k!==null){k.flags&=-257,Nd(k,a,f,s,e),k.mode&1&&Fd(s,y,e),e=k,_=y;var P=e.updateQueue;if(P===null){var M=new Set;M.add(_),e.updateQueue=M}else P.add(_);break e}else{if(!(e&1)){Fd(s,y,e),th();break e}_=Error(de(426))}}else if(Ve&&f.mode&1){var V=Bd(a);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Nd(V,a,f,s,e),Mu(Tr(_,f));break e}}s=_=Tr(_,f),Je!==4&&(Je=2),co===null?co=[s]:co.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var L=Am(s,_,e);Rd(s,L);break e;case 1:f=_;var R=s.type,D=s.stateNode;if(!(s.flags&128)&&(typeof R.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(ln===null||!ln.has(D)))){s.flags|=65536,e&=-e,s.lanes|=e;var Y=km(s,f,e);Rd(s,Y);break e}}s=s.return}while(s!==null)}qm(i)}catch(ie){e=ie,Xe===i&&i!==null&&(Xe=i=i.return);continue}break}while(1)}function Xm(){var t=ea.current;return ea.current=Qs,t===null?Qs:t}function th(){(Je===0||Je===3||Je===2)&&(Je=4),et===null||!(Pn&268435455)&&!(La&268435455)||Ji(et,ot)}function na(t,e){var i=Ae;Ae|=2;var n=Xm();(et!==t||ot!==e)&&(Oi=null,On(t,e));do try{ob();break}catch(r){Ym(t,r)}while(1);if(Bu(),Ae=i,ea.current=n,Xe!==null)throw Error(de(261));return et=null,ot=0,Je}function ob(){for(;Xe!==null;)Km(Xe)}function sb(){for(;Xe!==null&&!ky();)Km(Xe)}function Km(t){var e=Jm(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?qm(t):Xe=e,qu.current=null}function qm(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&32768){if(i=Q0(i,e),i!==null){i.flags&=32767,Xe=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Xe=null;return}}else if(i=J0(i,e,Mt),i!==null){Xe=i;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);Je===0&&(Je=5)}function Sn(t,e,i){var n=De,r=ei.transition;try{ei.transition=null,De=1,ab(t,e,i,n)}finally{ei.transition=r,De=n}return null}function ab(t,e,i,n){do mr();while(en!==null);if(Ae&6)throw Error(de(327));i=t.finishedWork;var r=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var s=i.lanes|i.childLanes;if(Vy(t,s),t===et&&(Xe=et=null,ot=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||cs||(cs=!0,Qm(Ns,function(){return mr(),null})),s=(i.flags&15990)!==0,i.subtreeFlags&15990||s){s=ei.transition,ei.transition=null;var a=De;De=1;var f=Ae;Ae|=4,qu.current=null,tb(t,i),Hm(i,t),I0(Ec),js=!!Tc,Ec=Tc=null,t.current=i,ib(i),Dy(),Ae=f,De=a,ei.transition=s}else t.current=i;if(cs&&(cs=!1,en=t,ia=r),s=t.pendingLanes,s===0&&(ln=null),My(i.stateNode),Rt(t,Ye()),e!==null)for(n=t.onRecoverableError,i=0;i<e.length;i++)r=e[i],n(r.value,{componentStack:r.stack,digest:r.digest});if(ta)throw ta=!1,t=Gc,Gc=null,t;return ia&1&&t.tag!==0&&mr(),s=t.pendingLanes,s&1?t===Yc?uo++:(uo=0,Yc=t):uo=0,vn(),null}function mr(){if(en!==null){var t=Rg(ia),e=ei.transition,i=De;try{if(ei.transition=null,De=16>t?16:t,en===null)var n=!1;else{if(t=en,en=null,ia=0,Ae&6)throw Error(de(331));var r=Ae;for(Ae|=4,we=t.current;we!==null;){var s=we,a=s.child;if(we.flags&16){var f=s.deletions;if(f!==null){for(var _=0;_<f.length;_++){var y=f[_];for(we=y;we!==null;){var w=we;switch(w.tag){case 0:case 11:case 15:lo(8,w,s)}var x=w.child;if(x!==null)x.return=w,we=x;else for(;we!==null;){w=we;var E=w.sibling,k=w.return;if(Vm(w),w===y){we=null;break}if(E!==null){E.return=k,we=E;break}we=k}}}var P=s.alternate;if(P!==null){var M=P.child;if(M!==null){P.child=null;do{var V=M.sibling;M.sibling=null,M=V}while(M!==null)}}we=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,we=a;else e:for(;we!==null;){if(s=we,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lo(9,s,s.return)}var L=s.sibling;if(L!==null){L.return=s.return,we=L;break e}we=s.return}}var R=t.current;for(we=R;we!==null;){a=we;var D=a.child;if(a.subtreeFlags&2064&&D!==null)D.return=a,we=D;else e:for(a=R;we!==null;){if(f=we,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:Da(9,f)}}catch(ie){ze(f,f.return,ie)}if(f===a){we=null;break e}var Y=f.sibling;if(Y!==null){Y.return=f.return,we=Y;break e}we=f.return}}if(Ae=r,vn(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(xa,t)}catch(ie){}n=!0}return n}finally{De=i,ei.transition=e}}return!1}function Zd(t,e,i){e=Tr(i,e),e=Am(t,e,1),t=an(t,e,1),e=mt(),t!==null&&(Bo(t,1,e),Rt(t,e))}function ze(t,e,i){if(t.tag===3)Zd(t,t,i);else for(;e!==null;){if(e.tag===3){Zd(e,t,i);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ln===null||!ln.has(n))){t=Tr(i,t),t=km(e,t,1),e=an(e,t,1),t=mt(),e!==null&&(Bo(e,1,t),Rt(e,t));break}}e=e.return}}function lb(t,e,i){var n=t.pingCache;n!==null&&n.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&i,et===t&&(ot&i)===i&&(Je===4||Je===3&&(ot&130023424)===ot&&500>Ye()-Ju?On(t,0):Zu|=i),Rt(t,e)}function Zm(t,e){e===0&&(t.mode&1?(e=Qo,Qo<<=1,!(Qo&130023424)&&(Qo=4194304)):e=1);var i=mt();t=ji(t,e),t!==null&&(Bo(t,e,i),Rt(t,i))}function cb(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),Zm(t,i)}function ub(t,e){var i=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(i=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(de(314))}n!==null&&n.delete(e),Zm(t,i)}var Jm;Jm=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Tt=!0;else{if(!(t.lanes&i)&&!(e.flags&128))return Tt=!1,Z0(t,e,i);Tt=!!(t.flags&131072)}else Tt=!1,Ve&&e.flags&1048576&&tm(e,Ys,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Os(t,e),t=e.pendingProps;var r=wr(e,ft.current);gr(e,i),r=zu(null,e,n,t,r,i);var s=Gu();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(n)?(s=!0,zs(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ju(e),r.updater=Aa,e.stateNode=r,r._reactInternals=e,Mc(e,n,t,i),e=Nc(null,e,n,!0,s,i)):(e.tag=0,Ve&&s&&Lu(e),gt(null,e,r,i),e=e.child),e;case 16:n=e.elementType;e:{switch(Os(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=db(n),t=si(n,t),r){case 0:e=Bc(null,e,n,t,i);break e;case 1:e=Vd(null,e,n,t,i);break e;case 11:e=$d(null,e,n,t,i);break e;case 14:e=jd(null,e,n,si(n.type,t),i);break e}throw Error(de(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:si(n,r),Bc(t,e,n,r,i);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:si(n,r),Vd(t,e,n,r,i);case 3:e:{if(Mm(e),t===null)throw Error(de(387));n=e.pendingProps,s=e.memoizedState,r=s.element,om(t,e),qs(e,n,null,i);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Tr(Error(de(423)),e),e=Ud(t,e,n,i,r);break e}else if(n!==r){r=Tr(Error(de(424)),e),e=Ud(t,e,n,i,r);break e}else for(jt=sn(e.stateNode.containerInfo.firstChild),Vt=e,Ve=!0,li=null,i=cm(e,null,n,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Sr(),n===r){e=Vi(t,e,i);break e}gt(t,e,n,i)}e=e.child}return e;case 5:return um(e),t===null&&Dc(e),n=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,a=r.children,Ic(n,r)?a=null:s!==null&&Ic(n,s)&&(e.flags|=32),Pm(t,e),gt(t,e,a,i),e.child;case 6:return t===null&&Dc(e),null;case 13:return Fm(t,e,i);case 4:return Vu(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Cr(e,null,n,i):gt(t,e,n,i),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:si(n,r),$d(t,e,n,r,i);case 7:return gt(t,e,e.pendingProps,i),e.child;case 8:return gt(t,e,e.pendingProps.children,i),e.child;case 12:return gt(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Fe(Xs,n._currentValue),n._currentValue=a,s!==null)if(gi(s.value,a)){if(s.children===r.children&&!It.current){e=Vi(t,e,i);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var f=s.dependencies;if(f!==null){a=s.child;for(var _=f.firstContext;_!==null;){if(_.context===n){if(s.tag===1){_=Bi(-1,i&-i),_.tag=2;var y=s.updateQueue;if(y!==null){y=y.shared;var w=y.pending;w===null?_.next=_:(_.next=w.next,w.next=_),y.pending=_}}s.lanes|=i,_=s.alternate,_!==null&&(_.lanes|=i),Lc(s.return,i,e),f.lanes|=i;break}_=_.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(de(341));a.lanes|=i,f=a.alternate,f!==null&&(f.lanes|=i),Lc(a,i,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}gt(t,e,r.children,i),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,gr(e,i),r=ti(r),n=n(r),e.flags|=1,gt(t,e,n,i),e.child;case 14:return n=e.type,r=si(n,e.pendingProps),r=si(n.type,r),jd(t,e,n,r,i);case 15:return Dm(t,e,e.type,e.pendingProps,i);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:si(n,r),Os(t,e),e.tag=1,Ot(n)?(t=!0,zs(e)):t=!1,gr(e,i),am(e,n,r),Mc(e,n,r,i),Nc(null,e,n,!0,t,i);case 19:return Bm(t,e,i);case 22:return Lm(t,e,i)}throw Error(de(156,e.tag))};function Qm(t,e){return Tg(t,e)}function hb(t,e,i,n){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,i,n){return new hb(t,e,i,n)}function ih(t){return t=t.prototype,!(!t||!t.isReactComponent)}function db(t){if(typeof t=="function")return ih(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wu)return 11;if(t===Su)return 14}return 2}function un(t,e){var i=t.alternate;return i===null?(i=Jt(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function ks(t,e,i,n,r,s){var a=2;if(n=t,typeof t=="function")ih(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case er:return Rn(i.children,r,s,e);case bu:a=8,r|=8;break;case oc:return t=Jt(12,i,e,r|2),t.elementType=oc,t.lanes=s,t;case sc:return t=Jt(13,i,e,r),t.elementType=sc,t.lanes=s,t;case ac:return t=Jt(19,i,e,r),t.elementType=ac,t.lanes=s,t;case lg:return Pa(i,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sg:a=10;break e;case ag:a=9;break e;case wu:a=11;break e;case Su:a=14;break e;case Ki:a=16,n=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=Jt(a,i,e,r),e.elementType=t,e.type=n,e.lanes=s,e}function Rn(t,e,i,n){return t=Jt(7,t,n,e),t.lanes=i,t}function Pa(t,e,i,n){return t=Jt(22,t,n,e),t.elementType=lg,t.lanes=i,t.stateNode={isHidden:!1},t}function jl(t,e,i){return t=Jt(6,t,null,e),t.lanes=i,t}function Vl(t,e,i){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fb(t,e,i,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wl(0),this.expirationTimes=wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function nh(t,e,i,n,r,s,a,f,_){return t=new fb(t,e,i,f,_),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ju(s),t}function pb(t,e,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:i}}function ev(t){if(!t)return dn;t=t._reactInternals;e:{if(Vn(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var i=t.type;if(Ot(i))return Qg(t,i,e)}return e}function tv(t,e,i,n,r,s,a,f,_){return t=nh(i,n,!0,t,r,s,a,f,_),t.context=ev(null),i=t.current,n=mt(),r=cn(i),s=Bi(n,r),s.callback=e!=null?e:null,an(i,s,r),t.current.lanes=r,Bo(t,r,n),Rt(t,n),t}function Ma(t,e,i,n){var r=e.current,s=mt(),a=cn(r);return i=ev(i),e.context===null?e.context=i:e.pendingContext=i,e=Bi(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=an(r,e,a),t!==null&&(di(t,r,a,s),Ts(t,r,a)),a}function ra(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function rh(t,e){Jd(t,e),(t=t.alternate)&&Jd(t,e)}function gb(){return null}var iv=typeof reportError=="function"?reportError:function(t){console.error(t)};function oh(t){this._internalRoot=t}Fa.prototype.render=oh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));Ma(t,e,null,null)};Fa.prototype.unmount=oh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mn(function(){Ma(null,t,null,null)}),e[$i]=null}};function Fa(t){this._internalRoot=t}Fa.prototype.unstable_scheduleHydration=function(t){if(t){var e=Dg();t={blockedOn:null,target:t,priority:e};for(var i=0;i<Zi.length&&e!==0&&e<Zi[i].priority;i++);Zi.splice(i,0,t),i===0&&Pg(t)}};function sh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ba(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qd(){}function mb(t,e,i,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var y=ra(a);s.call(y)}}var a=tv(e,n,t,0,null,!1,!1,"",Qd);return t._reactRootContainer=a,t[$i]=a.current,So(t.nodeType===8?t.parentNode:t),Mn(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var f=n;n=function(){var y=ra(_);f.call(y)}}var _=nh(t,0,!1,null,null,!1,!1,"",Qd);return t._reactRootContainer=_,t[$i]=_.current,So(t.nodeType===8?t.parentNode:t),Mn(function(){Ma(e,_,i,n)}),_}function Na(t,e,i,n,r){var s=i._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var f=r;r=function(){var _=ra(a);f.call(_)}}Ma(e,a,t,r)}else a=mb(i,e,t,r,n);return ra(a)}Ag=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=Jr(e.pendingLanes);i!==0&&(Tu(e,i|1),Rt(e,Ye()),!(Ae&6)&&(Er=Ye()+500,vn()))}break;case 13:Mn(function(){var n=ji(t,1);if(n!==null){var r=mt();di(n,t,1,r)}}),rh(t,1)}};Eu=function(t){if(t.tag===13){var e=ji(t,134217728);if(e!==null){var i=mt();di(e,t,134217728,i)}rh(t,134217728)}};kg=function(t){if(t.tag===13){var e=cn(t),i=ji(t,e);if(i!==null){var n=mt();di(i,t,e,n)}rh(t,e)}};Dg=function(){return De};Lg=function(t,e){var i=De;try{return De=t,e()}finally{De=i}};vc=function(t,e,i){switch(e){case"input":if(uc(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var n=i[e];if(n!==t&&n.form===t.form){var r=Oa(n);if(!r)throw Error(de(90));ug(n),uc(n,r)}}}break;case"textarea":dg(t,i);break;case"select":e=i.value,e!=null&&hr(t,!!i.multiple,e,!1)}};yg=Qu;bg=Mn;var vb={usingClientEntryPoint:!1,Events:[$o,rr,Oa,vg,_g,Qu]},zr={findFiberByHostInstance:Cn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_b={bundleType:zr.bundleType,version:zr.version,rendererPackageName:zr.rendererPackageName,rendererConfig:zr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cg(t),t===null?null:t.stateNode},findFiberByHostInstance:zr.findFiberByHostInstance||gb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var us=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!us.isDisabled&&us.supportsFiber)try{xa=us.inject(_b),xi=us}catch(t){}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vb;Wt.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sh(e))throw Error(de(200));return pb(t,e,null,i)};Wt.createRoot=function(t,e){if(!sh(t))throw Error(de(299));var i=!1,n="",r=iv;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=nh(t,1,!1,null,null,i,!1,n,r),t[$i]=e.current,So(t.nodeType===8?t.parentNode:t),new oh(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=Cg(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return Mn(t)};Wt.hydrate=function(t,e,i){if(!Ba(e))throw Error(de(200));return Na(null,t,e,!0,i)};Wt.hydrateRoot=function(t,e,i){if(!sh(t))throw Error(de(405));var n=i!=null&&i.hydratedSources||null,r=!1,s="",a=iv;if(i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),e=tv(e,null,t,1,i!=null?i:null,r,!1,s,a),t[$i]=e.current,So(t),n)for(t=0;t<n.length;t++)i=n[t],r=i._getVersion,r=r(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,r]:e.mutableSourceEagerHydrationData.push(i,r);return new Fa(e)};Wt.render=function(t,e,i){if(!Ba(e))throw Error(de(200));return Na(null,t,e,!1,i)};Wt.unmountComponentAtNode=function(t){if(!Ba(t))throw Error(de(40));return t._reactRootContainer?(Mn(function(){Na(null,null,t,!1,function(){t._reactRootContainer=null,t[$i]=null})}),!0):!1};Wt.unstable_batchedUpdates=Qu;Wt.unstable_renderSubtreeIntoContainer=function(t,e,i,n){if(!Ba(i))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return Na(t,e,i,!1,n)};Wt.version="18.2.0-next-9e3b772b8-20220608";function nv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nv)}catch(t){console.error(t)}}nv(),tg.exports=Wt;var ah=tg.exports;const yb=Mo(ah);var rv,ef=ah;rv=ef.createRoot,ef.hydrateRoot;function qc(t,e){return qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},qc(t,e)}function fn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,qc(t,e)}var ov={exports:{}},bb="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wb=bb,Sb=wb;function sv(){}function av(){}av.resetWarningCache=sv;var Cb=function(){function t(n,r,s,a,f,_){if(_!==Sb){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}t.isRequired=t;function e(){return t}var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:av,resetWarningCache:sv};return i.PropTypes=i,i};ov.exports=Cb();var xb=ov.exports;const tf=Mo(xb);function kt(){return kt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},kt.apply(this,arguments)}function hs(t){return t.charAt(0)==="/"}function Ul(t,e){for(var i=e,n=i+1,r=t.length;n<r;i+=1,n+=1)t[i]=t[n];t.pop()}function Tb(t,e){e===void 0&&(e="");var i=t&&t.split("/")||[],n=e&&e.split("/")||[],r=t&&hs(t),s=e&&hs(e),a=r||s;if(t&&hs(t)?n=i:i.length&&(n.pop(),n=n.concat(i)),!n.length)return"/";var f;if(n.length){var _=n[n.length-1];f=_==="."||_===".."||_===""}else f=!1;for(var y=0,w=n.length;w>=0;w--){var x=n[w];x==="."?Ul(n,w):x===".."?(Ul(n,w),y++):y&&(Ul(n,w),y--)}if(!a)for(;y--;y)n.unshift("..");a&&n[0]!==""&&(!n[0]||!hs(n[0]))&&n.unshift("");var E=n.join("/");return f&&E.substr(-1)!=="/"&&(E+="/"),E}function nf(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}function Ds(t,e){if(t===e)return!0;if(t==null||e==null)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(r,s){return Ds(r,e[s])});if(typeof t=="object"||typeof e=="object"){var i=nf(t),n=nf(e);return i!==t||n!==e?Ds(i,n):Object.keys(Object.assign({},t,e)).every(function(r){return Ds(t[r],e[r])})}return!1}var Eb=!0,Wl="Invariant failed";function Un(t,e){if(!t){if(Eb)throw new Error(Wl);var i=typeof e=="function"?e():e,n=i?"".concat(Wl,": ").concat(i):Wl;throw new Error(n)}}function ho(t){return t.charAt(0)==="/"?t:"/"+t}function rf(t){return t.charAt(0)==="/"?t.substr(1):t}function Ib(t,e){return t.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(t.charAt(e.length))!==-1}function lv(t,e){return Ib(t,e)?t.substr(e.length):t}function cv(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t}function Ob(t){var e=t||"/",i="",n="",r=e.indexOf("#");r!==-1&&(n=e.substr(r),e=e.substr(0,r));var s=e.indexOf("?");return s!==-1&&(i=e.substr(s),e=e.substr(0,s)),{pathname:e,search:i==="?"?"":i,hash:n==="#"?"":n}}function Kt(t){var e=t.pathname,i=t.search,n=t.hash,r=e||"/";return i&&i!=="?"&&(r+=i.charAt(0)==="?"?i:"?"+i),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Et(t,e,i,n){var r;typeof t=="string"?(r=Ob(t),r.state=e):(r=kt({},t),r.pathname===void 0&&(r.pathname=""),r.search?r.search.charAt(0)!=="?"&&(r.search="?"+r.search):r.search="",r.hash?r.hash.charAt(0)!=="#"&&(r.hash="#"+r.hash):r.hash="",e!==void 0&&r.state===void 0&&(r.state=e));try{r.pathname=decodeURI(r.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return i&&(r.key=i),n?r.pathname?r.pathname.charAt(0)!=="/"&&(r.pathname=Tb(r.pathname,n.pathname)):r.pathname=n.pathname:r.pathname||(r.pathname="/"),r}function Rb(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&Ds(t.state,e.state)}function lh(){var t=null;function e(a){return t=a,function(){t===a&&(t=null)}}function i(a,f,_,y){if(t!=null){var w=typeof t=="function"?t(a,f):t;typeof w=="string"?typeof _=="function"?_(w,y):y(!0):y(w!==!1)}else y(!0)}var n=[];function r(a){var f=!0;function _(){f&&a.apply(void 0,arguments)}return n.push(_),function(){f=!1,n=n.filter(function(y){return y!==_})}}function s(){for(var a=arguments.length,f=new Array(a),_=0;_<a;_++)f[_]=arguments[_];n.forEach(function(y){return y.apply(void 0,f)})}return{setPrompt:e,confirmTransitionTo:i,appendListener:r,notifyListeners:s}}var uv=!!(typeof window<"u"&&window.document&&window.document.createElement);function hv(t,e){e(window.confirm(t))}function Ab(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function kb(){return window.navigator.userAgent.indexOf("Trident")===-1}function Db(){return window.navigator.userAgent.indexOf("Firefox")===-1}function Lb(t){return t.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var of="popstate",sf="hashchange";function af(){try{return window.history.state||{}}catch(t){return{}}}function Pb(t){t===void 0&&(t={}),uv||Un(!1);var e=window.history,i=Ab(),n=!kb(),r=t,s=r.forceRefresh,a=s===void 0?!1:s,f=r.getUserConfirmation,_=f===void 0?hv:f,y=r.keyLength,w=y===void 0?6:y,x=t.basename?cv(ho(t.basename)):"";function E(v){var p=v||{},m=p.key,b=p.state,C=window.location,T=C.pathname,I=C.search,O=C.hash,A=T+I+O;return x&&(A=lv(A,x)),Et(A,b,m)}function k(){return Math.random().toString(36).substr(2,w)}var P=lh();function M(v){kt(d,v),d.length=e.length,P.notifyListeners(d.location,d.action)}function V(v){Lb(v)||D(E(v.state))}function L(){D(E(af()))}var R=!1;function D(v){if(R)R=!1,M();else{var p="POP";P.confirmTransitionTo(v,p,_,function(m){m?M({action:p,location:v}):Y(v)})}}function Y(v){var p=d.location,m=oe.indexOf(p.key);m===-1&&(m=0);var b=oe.indexOf(v.key);b===-1&&(b=0);var C=m-b;C&&(R=!0,le(C))}var ie=E(af()),oe=[ie.key];function z(v){return x+Kt(v)}function S(v,p){var m="PUSH",b=Et(v,p,k(),d.location);P.confirmTransitionTo(b,m,_,function(C){if(C){var T=z(b),I=b.key,O=b.state;if(i)if(e.pushState({key:I,state:O},null,T),a)window.location.href=T;else{var A=oe.indexOf(d.location.key),F=oe.slice(0,A+1);F.push(b.key),oe=F,M({action:m,location:b})}else window.location.href=T}})}function he(v,p){var m="REPLACE",b=Et(v,p,k(),d.location);P.confirmTransitionTo(b,m,_,function(C){if(C){var T=z(b),I=b.key,O=b.state;if(i)if(e.replaceState({key:I,state:O},null,T),a)window.location.replace(T);else{var A=oe.indexOf(d.location.key);A!==-1&&(oe[A]=b.key),M({action:m,location:b})}else window.location.replace(T)}})}function le(v){e.go(v)}function ue(){le(-1)}function h(){le(1)}var c=0;function u(v){c+=v,c===1&&v===1?(window.addEventListener(of,V),n&&window.addEventListener(sf,L)):c===0&&(window.removeEventListener(of,V),n&&window.removeEventListener(sf,L))}var g=!1;function o(v){v===void 0&&(v=!1);var p=P.setPrompt(v);return g||(u(1),g=!0),function(){return g&&(g=!1,u(-1)),p()}}function l(v){var p=P.appendListener(v);return u(1),function(){u(-1),p()}}var d={length:e.length,action:"POP",location:ie,createHref:z,push:S,replace:he,go:le,goBack:ue,goForward:h,block:o,listen:l};return d}var lf="hashchange",Mb={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+rf(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:rf,decodePath:ho},slash:{encodePath:ho,decodePath:ho}};function dv(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)}function Gr(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.substring(e+1)}function Fb(t){window.location.hash=t}function Hl(t){window.location.replace(dv(window.location.href)+"#"+t)}function Bb(t){t===void 0&&(t={}),uv||Un(!1);var e=window.history;Db();var i=t,n=i.getUserConfirmation,r=n===void 0?hv:n,s=i.hashType,a=s===void 0?"slash":s,f=t.basename?cv(ho(t.basename)):"",_=Mb[a],y=_.encodePath,w=_.decodePath;function x(){var p=w(Gr());return f&&(p=lv(p,f)),Et(p)}var E=lh();function k(p){kt(v,p),v.length=e.length,E.notifyListeners(v.location,v.action)}var P=!1,M=null;function V(p,m){return p.pathname===m.pathname&&p.search===m.search&&p.hash===m.hash}function L(){var p=Gr(),m=y(p);if(p!==m)Hl(m);else{var b=x(),C=v.location;if(!P&&V(C,b)||M===Kt(b))return;M=null,R(b)}}function R(p){if(P)P=!1,k();else{var m="POP";E.confirmTransitionTo(p,m,r,function(b){b?k({action:m,location:p}):D(p)})}}function D(p){var m=v.location,b=z.lastIndexOf(Kt(m));b===-1&&(b=0);var C=z.lastIndexOf(Kt(p));C===-1&&(C=0);var T=b-C;T&&(P=!0,ue(T))}var Y=Gr(),ie=y(Y);Y!==ie&&Hl(ie);var oe=x(),z=[Kt(oe)];function S(p){var m=document.querySelector("base"),b="";return m&&m.getAttribute("href")&&(b=dv(window.location.href)),b+"#"+y(f+Kt(p))}function he(p,m){var b="PUSH",C=Et(p,void 0,void 0,v.location);E.confirmTransitionTo(C,b,r,function(T){if(T){var I=Kt(C),O=y(f+I),A=Gr()!==O;if(A){M=I,Fb(O);var F=z.lastIndexOf(Kt(v.location)),U=z.slice(0,F+1);U.push(I),z=U,k({action:b,location:C})}else k()}})}function le(p,m){var b="REPLACE",C=Et(p,void 0,void 0,v.location);E.confirmTransitionTo(C,b,r,function(T){if(T){var I=Kt(C),O=y(f+I),A=Gr()!==O;A&&(M=I,Hl(O));var F=z.indexOf(Kt(v.location));F!==-1&&(z[F]=I),k({action:b,location:C})}})}function ue(p){e.go(p)}function h(){ue(-1)}function c(){ue(1)}var u=0;function g(p){u+=p,u===1&&p===1?window.addEventListener(lf,L):u===0&&window.removeEventListener(lf,L)}var o=!1;function l(p){p===void 0&&(p=!1);var m=E.setPrompt(p);return o||(g(1),o=!0),function(){return o&&(o=!1,g(-1)),m()}}function d(p){var m=E.appendListener(p);return g(1),function(){g(-1),m()}}var v={length:e.length,action:"POP",location:oe,createHref:S,push:he,replace:le,go:ue,goBack:h,goForward:c,block:l,listen:d};return v}function cf(t,e,i){return Math.min(Math.max(t,e),i)}function Nb(t){t===void 0&&(t={});var e=t,i=e.getUserConfirmation,n=e.initialEntries,r=n===void 0?["/"]:n,s=e.initialIndex,a=s===void 0?0:s,f=e.keyLength,_=f===void 0?6:f,y=lh();function w(S){kt(z,S),z.length=z.entries.length,y.notifyListeners(z.location,z.action)}function x(){return Math.random().toString(36).substr(2,_)}var E=cf(a,0,r.length-1),k=r.map(function(S){return typeof S=="string"?Et(S,void 0,x()):Et(S,void 0,S.key||x())}),P=Kt;function M(S,he){var le="PUSH",ue=Et(S,he,x(),z.location);y.confirmTransitionTo(ue,le,i,function(h){if(h){var c=z.index,u=c+1,g=z.entries.slice(0);g.length>u?g.splice(u,g.length-u,ue):g.push(ue),w({action:le,location:ue,index:u,entries:g})}})}function V(S,he){var le="REPLACE",ue=Et(S,he,x(),z.location);y.confirmTransitionTo(ue,le,i,function(h){h&&(z.entries[z.index]=ue,w({action:le,location:ue}))})}function L(S){var he=cf(z.index+S,0,z.entries.length-1),le="POP",ue=z.entries[he];y.confirmTransitionTo(ue,le,i,function(h){h?w({action:le,location:ue,index:he}):w()})}function R(){L(-1)}function D(){L(1)}function Y(S){var he=z.index+S;return he>=0&&he<z.entries.length}function ie(S){return S===void 0&&(S=!1),y.setPrompt(S)}function oe(S){return y.appendListener(S)}var z={length:k.length,action:"POP",location:k[E],index:E,entries:k,createHref:P,push:M,replace:V,go:L,goBack:R,goForward:D,canGo:Y,block:ie,listen:oe};return z}var Mr={exports:{}},$b=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"},oa=$b;Mr.exports=gv;Mr.exports.parse=ch;Mr.exports.compile=Vb;Mr.exports.tokensToFunction=fv;Mr.exports.tokensToRegExp=pv;var jb=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function ch(t,e){for(var i=[],n=0,r=0,s="",a=e&&e.delimiter||"/",f;(f=jb.exec(t))!=null;){var _=f[0],y=f[1],w=f.index;if(s+=t.slice(r,w),r=w+_.length,y){s+=y[1];continue}var x=t[r],E=f[2],k=f[3],P=f[4],M=f[5],V=f[6],L=f[7];s&&(i.push(s),s="");var R=E!=null&&x!=null&&x!==E,D=V==="+"||V==="*",Y=V==="?"||V==="*",ie=f[2]||a,oe=P||M;i.push({name:k||n++,prefix:E||"",delimiter:ie,optional:Y,repeat:D,partial:R,asterisk:!!L,pattern:oe?Hb(oe):L?".*":"[^"+Ls(ie)+"]+?"})}return r<t.length&&(s+=t.substr(r)),s&&i.push(s),i}function Vb(t,e){return fv(ch(t,e),e)}function Ub(t){return encodeURI(t).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Wb(t){return encodeURI(t).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function fv(t,e){for(var i=new Array(t.length),n=0;n<t.length;n++)typeof t[n]=="object"&&(i[n]=new RegExp("^(?:"+t[n].pattern+")$",hh(e)));return function(r,s){for(var a="",f=r||{},_=s||{},y=_.pretty?Ub:encodeURIComponent,w=0;w<t.length;w++){var x=t[w];if(typeof x=="string"){a+=x;continue}var E=f[x.name],k;if(E==null)if(x.optional){x.partial&&(a+=x.prefix);continue}else throw new TypeError('Expected "'+x.name+'" to be defined');if(oa(E)){if(!x.repeat)throw new TypeError('Expected "'+x.name+'" to not repeat, but received `'+JSON.stringify(E)+"`");if(E.length===0){if(x.optional)continue;throw new TypeError('Expected "'+x.name+'" to not be empty')}for(var P=0;P<E.length;P++){if(k=y(E[P]),!i[w].test(k))throw new TypeError('Expected all "'+x.name+'" to match "'+x.pattern+'", but received `'+JSON.stringify(k)+"`");a+=(P===0?x.prefix:x.delimiter)+k}continue}if(k=x.asterisk?Wb(E):y(E),!i[w].test(k))throw new TypeError('Expected "'+x.name+'" to match "'+x.pattern+'", but received "'+k+'"');a+=x.prefix+k}return a}}function Ls(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Hb(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function uh(t,e){return t.keys=e,t}function hh(t){return t&&t.sensitive?"":"i"}function zb(t,e){var i=t.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return uh(t,e)}function Gb(t,e,i){for(var n=[],r=0;r<t.length;r++)n.push(gv(t[r],e,i).source);var s=new RegExp("(?:"+n.join("|")+")",hh(i));return uh(s,e)}function Yb(t,e,i){return pv(ch(t,i),e,i)}function pv(t,e,i){oa(e)||(i=e||i,e=[]),i=i||{};for(var n=i.strict,r=i.end!==!1,s="",a=0;a<t.length;a++){var f=t[a];if(typeof f=="string")s+=Ls(f);else{var _=Ls(f.prefix),y="(?:"+f.pattern+")";e.push(f),f.repeat&&(y+="(?:"+_+y+")*"),f.optional?f.partial?y=_+"("+y+")?":y="(?:"+_+"("+y+"))?":y=_+"("+y+")",s+=y}}var w=Ls(i.delimiter||"/"),x=s.slice(-w.length)===w;return n||(s=(x?s.slice(0,-w.length):s)+"(?:"+w+"(?=$))?"),r?s+="$":s+=n&&x?"":"(?="+w+"|$)",uh(new RegExp("^"+s,hh(i)),e)}function gv(t,e,i){return oa(e)||(i=e||i,e=[]),i=i||{},t instanceof RegExp?zb(t,e):oa(t)?Gb(t,e,i):Yb(t,e,i)}var Xb=Mr.exports;const mv=Mo(Xb);var Pe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tt=typeof Symbol=="function"&&Symbol.for,dh=tt?Symbol.for("react.element"):60103,fh=tt?Symbol.for("react.portal"):60106,$a=tt?Symbol.for("react.fragment"):60107,ja=tt?Symbol.for("react.strict_mode"):60108,Va=tt?Symbol.for("react.profiler"):60114,Ua=tt?Symbol.for("react.provider"):60109,Wa=tt?Symbol.for("react.context"):60110,ph=tt?Symbol.for("react.async_mode"):60111,Ha=tt?Symbol.for("react.concurrent_mode"):60111,za=tt?Symbol.for("react.forward_ref"):60112,Ga=tt?Symbol.for("react.suspense"):60113,Kb=tt?Symbol.for("react.suspense_list"):60120,Ya=tt?Symbol.for("react.memo"):60115,Xa=tt?Symbol.for("react.lazy"):60116,qb=tt?Symbol.for("react.block"):60121,Zb=tt?Symbol.for("react.fundamental"):60117,Jb=tt?Symbol.for("react.responder"):60118,Qb=tt?Symbol.for("react.scope"):60119;function zt(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case dh:switch(t=t.type,t){case ph:case Ha:case $a:case Va:case ja:case Ga:return t;default:switch(t=t&&t.$$typeof,t){case Wa:case za:case Xa:case Ya:case Ua:return t;default:return e}}case fh:return e}}}function vv(t){return zt(t)===Ha}Pe.AsyncMode=ph;Pe.ConcurrentMode=Ha;Pe.ContextConsumer=Wa;Pe.ContextProvider=Ua;Pe.Element=dh;Pe.ForwardRef=za;Pe.Fragment=$a;Pe.Lazy=Xa;Pe.Memo=Ya;Pe.Portal=fh;Pe.Profiler=Va;Pe.StrictMode=ja;Pe.Suspense=Ga;Pe.isAsyncMode=function(t){return vv(t)||zt(t)===ph};Pe.isConcurrentMode=vv;Pe.isContextConsumer=function(t){return zt(t)===Wa};Pe.isContextProvider=function(t){return zt(t)===Ua};Pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===dh};Pe.isForwardRef=function(t){return zt(t)===za};Pe.isFragment=function(t){return zt(t)===$a};Pe.isLazy=function(t){return zt(t)===Xa};Pe.isMemo=function(t){return zt(t)===Ya};Pe.isPortal=function(t){return zt(t)===fh};Pe.isProfiler=function(t){return zt(t)===Va};Pe.isStrictMode=function(t){return zt(t)===ja};Pe.isSuspense=function(t){return zt(t)===Ga};Pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===$a||t===Ha||t===Va||t===ja||t===Ga||t===Kb||typeof t=="object"&&t!==null&&(t.$$typeof===Xa||t.$$typeof===Ya||t.$$typeof===Ua||t.$$typeof===Wa||t.$$typeof===za||t.$$typeof===Zb||t.$$typeof===Jb||t.$$typeof===Qb||t.$$typeof===qb)};Pe.typeOf=zt;function _v(t,e){if(t==null)return{};var i={},n=Object.keys(t),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(i[r]=t[r]);return i}var yv={exports:{}},Le={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it=typeof Symbol=="function"&&Symbol.for,gh=it?Symbol.for("react.element"):60103,mh=it?Symbol.for("react.portal"):60106,Ka=it?Symbol.for("react.fragment"):60107,qa=it?Symbol.for("react.strict_mode"):60108,Za=it?Symbol.for("react.profiler"):60114,Ja=it?Symbol.for("react.provider"):60109,Qa=it?Symbol.for("react.context"):60110,vh=it?Symbol.for("react.async_mode"):60111,el=it?Symbol.for("react.concurrent_mode"):60111,tl=it?Symbol.for("react.forward_ref"):60112,il=it?Symbol.for("react.suspense"):60113,ew=it?Symbol.for("react.suspense_list"):60120,nl=it?Symbol.for("react.memo"):60115,rl=it?Symbol.for("react.lazy"):60116,tw=it?Symbol.for("react.block"):60121,iw=it?Symbol.for("react.fundamental"):60117,nw=it?Symbol.for("react.responder"):60118,rw=it?Symbol.for("react.scope"):60119;function Gt(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case gh:switch(t=t.type,t){case vh:case el:case Ka:case Za:case qa:case il:return t;default:switch(t=t&&t.$$typeof,t){case Qa:case tl:case rl:case nl:case Ja:return t;default:return e}}case mh:return e}}}function bv(t){return Gt(t)===el}Le.AsyncMode=vh;Le.ConcurrentMode=el;Le.ContextConsumer=Qa;Le.ContextProvider=Ja;Le.Element=gh;Le.ForwardRef=tl;Le.Fragment=Ka;Le.Lazy=rl;Le.Memo=nl;Le.Portal=mh;Le.Profiler=Za;Le.StrictMode=qa;Le.Suspense=il;Le.isAsyncMode=function(t){return bv(t)||Gt(t)===vh};Le.isConcurrentMode=bv;Le.isContextConsumer=function(t){return Gt(t)===Qa};Le.isContextProvider=function(t){return Gt(t)===Ja};Le.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===gh};Le.isForwardRef=function(t){return Gt(t)===tl};Le.isFragment=function(t){return Gt(t)===Ka};Le.isLazy=function(t){return Gt(t)===rl};Le.isMemo=function(t){return Gt(t)===nl};Le.isPortal=function(t){return Gt(t)===mh};Le.isProfiler=function(t){return Gt(t)===Za};Le.isStrictMode=function(t){return Gt(t)===qa};Le.isSuspense=function(t){return Gt(t)===il};Le.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ka||t===el||t===Za||t===qa||t===il||t===ew||typeof t=="object"&&t!==null&&(t.$$typeof===rl||t.$$typeof===nl||t.$$typeof===Ja||t.$$typeof===Qa||t.$$typeof===tl||t.$$typeof===iw||t.$$typeof===nw||t.$$typeof===rw||t.$$typeof===tw)};Le.typeOf=Gt;yv.exports=Le;var ow=yv.exports,_h=ow,sw={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},aw={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},lw={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},wv={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},yh={};yh[_h.ForwardRef]=lw;yh[_h.Memo]=wv;function uf(t){return _h.isMemo(t)?wv:yh[t.$$typeof]||sw}var cw=Object.defineProperty,uw=Object.getOwnPropertyNames,hf=Object.getOwnPropertySymbols,hw=Object.getOwnPropertyDescriptor,dw=Object.getPrototypeOf,df=Object.prototype;function Sv(t,e,i){if(typeof e!="string"){if(df){var n=dw(e);n&&n!==df&&Sv(t,n,i)}var r=uw(e);hf&&(r=r.concat(hf(e)));for(var s=uf(t),a=uf(e),f=0;f<r.length;++f){var _=r[f];if(!aw[_]&&!(i&&i[_])&&!(a&&a[_])&&!(s&&s[_])){var y=hw(e,_);try{cw(t,_,y)}catch(w){}}}}return t}var fw=Sv;const pw=Mo(fw);var zl=1073741823,ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function gw(){var t="__global_unique_id__";return ff[t]=(ff[t]||0)+1}function mw(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function vw(t){var e=[];return{on:function(n){e.push(n)},off:function(n){e=e.filter(function(r){return r!==n})},get:function(){return t},set:function(n,r){t=n,e.forEach(function(s){return s(t,r)})}}}function _w(t){return Array.isArray(t)?t[0]:t}function yw(t,e){var i,n,r="__create-react-context-"+gw()+"__",s=function(f){fn(_,f);function _(){for(var w,x=arguments.length,E=new Array(x),k=0;k<x;k++)E[k]=arguments[k];return w=f.call.apply(f,[this].concat(E))||this,w.emitter=vw(w.props.value),w}var y=_.prototype;return y.getChildContext=function(){var x;return x={},x[r]=this.emitter,x},y.componentWillReceiveProps=function(x){if(this.props.value!==x.value){var E=this.props.value,k=x.value,P;mw(E,k)?P=0:(P=typeof e=="function"?e(E,k):zl,P|=0,P!==0&&this.emitter.set(x.value,P))}},y.render=function(){return this.props.children},_}(re.Component);s.childContextTypes=(i={},i[r]=tf.object.isRequired,i);var a=function(f){fn(_,f);function _(){for(var w,x=arguments.length,E=new Array(x),k=0;k<x;k++)E[k]=arguments[k];return w=f.call.apply(f,[this].concat(E))||this,w.observedBits=void 0,w.state={value:w.getValue()},w.onUpdate=function(P,M){var V=w.observedBits|0;V&M&&w.setState({value:w.getValue()})},w}var y=_.prototype;return y.componentWillReceiveProps=function(x){var E=x.observedBits;this.observedBits=E==null?zl:E},y.componentDidMount=function(){this.context[r]&&this.context[r].on(this.onUpdate);var x=this.props.observedBits;this.observedBits=x==null?zl:x},y.componentWillUnmount=function(){this.context[r]&&this.context[r].off(this.onUpdate)},y.getValue=function(){return this.context[r]?this.context[r].get():t},y.render=function(){return _w(this.props.children)(this.state.value)},_}(re.Component);return a.contextTypes=(n={},n[r]=tf.object,n),{Provider:s,Consumer:a}}var bw=re.createContext||yw,Cv=function(e){var i=bw();return i.displayName=e,i},ww=Cv("Router-History"),Ir=Cv("Router"),Vo=function(t){fn(e,t),e.computeRootMatch=function(r){return{path:"/",url:"/",params:{},isExact:r==="/"}};function e(n){var r;return r=t.call(this,n)||this,r.state={location:n.history.location},r._isMounted=!1,r._pendingLocation=null,n.staticContext||(r.unlisten=n.history.listen(function(s){r._pendingLocation=s})),r}var i=e.prototype;return i.componentDidMount=function(){var r=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(s){r._isMounted&&r.setState({location:s})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},i.render=function(){return re.createElement(Ir.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},re.createElement(ww.Provider,{children:this.props.children||null,value:this.props.history}))},e}(re.Component);re.Component;var Sw=function(t){fn(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;return i.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},i.componentDidUpdate=function(r){this.props.onUpdate&&this.props.onUpdate.call(this,this,r)},i.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},i.render=function(){return null},e}(re.Component),Gl={},Cw=1e4,pf=0;function xw(t){if(Gl[t])return Gl[t];var e=mv.compile(t);return pf<Cw&&(Gl[t]=e,pf++),e}function gf(t,e){return t===void 0&&(t="/"),e===void 0&&(e={}),t==="/"?t:xw(t)(e,{pretty:!0})}function Tw(t){var e=t.computedMatch,i=t.to,n=t.push,r=n===void 0?!1:n;return re.createElement(Ir.Consumer,null,function(s){s||Un(!1);var a=s.history,f=s.staticContext,_=r?a.push:a.replace,y=Et(e?typeof i=="string"?gf(i,e.params):kt({},i,{pathname:gf(i.pathname,e.params)}):i);return f?(_(y),null):re.createElement(Sw,{onMount:function(){_(y)},onUpdate:function(x,E){var k=Et(E.to);Rb(k,kt({},y,{key:k.key}))||_(y)},to:i})})}var mf={},Ew=1e4,vf=0;function Iw(t,e){var i=""+e.end+e.strict+e.sensitive,n=mf[i]||(mf[i]={});if(n[t])return n[t];var r=[],s=mv(t,r,e),a={regexp:s,keys:r};return vf<Ew&&(n[t]=a,vf++),a}function Fn(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var i=e,n=i.path,r=i.exact,s=r===void 0?!1:r,a=i.strict,f=a===void 0?!1:a,_=i.sensitive,y=_===void 0?!1:_,w=[].concat(n);return w.reduce(function(x,E){if(!E&&E!=="")return null;if(x)return x;var k=Iw(E,{end:s,strict:f,sensitive:y}),P=k.regexp,M=k.keys,V=P.exec(t);if(!V)return null;var L=V[0],R=V.slice(1),D=t===L;return s&&!D?null:{path:E,url:E==="/"&&L===""?"/":L,isExact:D,params:M.reduce(function(Y,ie,oe){return Y[ie.name]=R[oe],Y},{})}},null)}function Ow(t){return re.Children.count(t)===0}var eo=function(t){fn(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;return i.render=function(){var r=this;return re.createElement(Ir.Consumer,null,function(s){s||Un(!1);var a=r.props.location||s.location,f=r.props.computedMatch?r.props.computedMatch:r.props.path?Fn(a.pathname,r.props):s.match,_=kt({},s,{location:a,match:f}),y=r.props,w=y.children,x=y.component,E=y.render;return Array.isArray(w)&&Ow(w)&&(w=null),re.createElement(Ir.Provider,{value:_},_.match?w?typeof w=="function"?w(_):w:x?re.createElement(x,_):E?E(_):null:typeof w=="function"?w(_):null)})},e}(re.Component);function bh(t){return t.charAt(0)==="/"?t:"/"+t}function Rw(t,e){return t?kt({},e,{pathname:bh(t)+e.pathname}):e}function Aw(t,e){if(!t)return e;var i=bh(t);return e.pathname.indexOf(i)!==0?e:kt({},e,{pathname:e.pathname.substr(i.length)})}function _f(t){return typeof t=="string"?t:Kt(t)}function Yl(t){return function(){Un(!1)}}function yf(){}re.Component;re.Component;function kw(t){var e="withRouter("+(t.displayName||t.name)+")",i=function(r){var s=r.wrappedComponentRef,a=_v(r,["wrappedComponentRef"]);return re.createElement(Ir.Consumer,null,function(f){return f||Un(!1),re.createElement(t,kt({},a,f,{ref:s}))})};return i.displayName=e,i.WrappedComponent=t,pw(i,t)}re.useContext;const Dw="modulepreload",Lw=function(t){return"/"+t},bf={},Si=function(e,i,n){if(!i||i.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=Lw(s),s in bf)return;bf[s]=!0;const a=s.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(!!n)for(let w=r.length-1;w>=0;w--){const x=r[w];if(x.href===s&&(!a||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${f}`))return;const y=document.createElement("link");if(y.rel=a?"stylesheet":Dw,a||(y.as="script",y.crossOrigin=""),y.href=s,document.head.appendChild(y),a)return new Promise((w,x)=>{y.addEventListener("load",w),y.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())},Gn={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Yn,xv,ol,Tv=!1,sa=!1,wh=!1,Ft=!1,wf=null,Zc=!1;const Pw={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},Bn=(t,e="")=>()=>{},Sf="http://www.w3.org/1999/xlink",Cf={},Mw="http://www.w3.org/2000/svg",Fw="http://www.w3.org/1999/xhtml",Bw=t=>t!=null,Sh=t=>(t=typeof t,t==="object"||t==="function");function Nw(t){var e,i,n;return(n=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&n!==void 0?n:void 0}const Ie=(t,e,...i)=>{let n=null,r=null,s=null,a=!1,f=!1;const _=[],y=x=>{for(let E=0;E<x.length;E++)n=x[E],Array.isArray(n)?y(n):n!=null&&typeof n!="boolean"&&((a=typeof t!="function"&&!Sh(n))&&(n=String(n)),a&&f?_[_.length-1].$text$+=n:_.push(a?aa(null,n):n),f=a)};if(y(i),e){e.key&&(r=e.key),e.name&&(s=e.name);{const x=e.className||e.class;x&&(e.class=typeof x!="object"?x:Object.keys(x).filter(E=>x[E]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,_,jw);const w=aa(t,null);return w.$attrs$=e,_.length>0&&(w.$children$=_),w.$key$=r,w.$name$=s,w},aa=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},Ei={},$w=t=>t&&t.$tag$===Ei,jw={forEach:(t,e)=>t.map(xf).forEach(e),map:(t,e)=>t.map(xf).map(e).map(Vw)},xf=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Vw=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),Ie(t.vtag,i,...t.vchildren||[])}const e=aa(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Uw=t=>Fv.map(e=>e(t)).find(e=>!!e),Ww=t=>Fv.push(t),Hw=t=>Fr(t).$modeName$,zw=(t,e)=>t!=null&&!Sh(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,Gw=t=>t,At=(t,e,i)=>{const n=Gw(t);return{emit:r=>Yw(n,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:r})}},Yw=(t,e,i)=>{const n=at.ce(e,i);return t.dispatchEvent(n),n},Tf=new WeakMap,Xw=(t,e,i)=>{let n=ca.get(t);bS&&i?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,ca.set(t,n)},Kw=(t,e,i,n)=>{var r;let s=Ev(e,i);const a=ca.get(s);if(t=t.nodeType===11?t:fi,a)if(typeof a=="string"){t=t.head||t;let f=Tf.get(t),_;if(f||Tf.set(t,f=new Set),!f.has(s)){{_=fi.createElement("style"),_.innerHTML=a;const y=(r=at.$nonce$)!==null&&r!==void 0?r:Nw(fi);y!=null&&_.setAttribute("nonce",y),t.insertBefore(_,t.querySelector("link"))}f&&f.add(s)}}else t.adoptedStyleSheets.includes(a)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,a]);return s},qw=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,n=e.$flags$,r=Bn("attachStyles",e.$tagName$),s=Kw(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);n&10&&(i["s-sc"]=s,i.classList.add(s+"-h"),n&2&&i.classList.add(s+"-s")),r()},Ev=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),Ef=(t,e,i,n,r,s)=>{if(i!==n){let a=Af(t,e),f=e.toLowerCase();if(e==="class"){const _=t.classList,y=If(i),w=If(n);_.remove(...y.filter(x=>x&&!w.includes(x))),_.add(...w.filter(x=>x&&!y.includes(x)))}else if(e==="style"){for(const _ in i)(!n||n[_]==null)&&(_.includes("-")?t.style.removeProperty(_):t.style[_]="");for(const _ in n)(!i||n[_]!==i[_])&&(_.includes("-")?t.style.setProperty(_,n[_]):t.style[_]=n[_])}else if(e!=="key")if(e==="ref")n&&n(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):Af(sl,f)?e=f.slice(2):e=f[2]+e.slice(3),i&&at.rel(t,e,i,!1),n&&at.ael(t,e,n,!1);else{const _=Sh(n);if((a||_&&n!==null)&&!r)try{if(t.tagName.includes("-"))t[e]=n;else{const w=n==null?"":n;e==="list"?a=!1:(i==null||t[e]!=w)&&(t[e]=w)}}catch(w){}let y=!1;f!==(f=f.replace(/^xlink\:?/,""))&&(e=f,y=!0),n==null||n===!1?(n!==!1||t.getAttribute(e)==="")&&(y?t.removeAttributeNS(Sf,e):t.removeAttribute(e)):(!a||s&4||r)&&!_&&(n=n===!0?"":n,y?t.setAttributeNS(Sf,e,n):t.setAttribute(e,n))}}},Zw=/\s/,If=t=>t?t.split(Zw):[],Iv=(t,e,i,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||Cf,a=e.$attrs$||Cf;for(n in s)n in a||Ef(r,n,s[n],void 0,i,e.$flags$);for(n in a)Ef(r,n,s[n],a[n],i,e.$flags$)},la=(t,e,i,n)=>{const r=e.$children$[i];let s=0,a,f,_;if(Tv||(wh=!0,r.$tag$==="slot"&&(Yn&&n.classList.add(Yn+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)a=r.$elm$=fi.createTextNode(r.$text$);else if(r.$flags$&1)a=r.$elm$=fi.createTextNode("");else{if(Ft||(Ft=r.$tag$==="svg"),a=r.$elm$=fi.createElementNS(Ft?Mw:Fw,r.$flags$&2?"slot-fb":r.$tag$),Ft&&r.$tag$==="foreignObject"&&(Ft=!1),Iv(null,r,Ft),Bw(Yn)&&a["s-si"]!==Yn&&a.classList.add(a["s-si"]=Yn),r.$children$)for(s=0;s<r.$children$.length;++s)f=la(t,r,s,a),f&&a.appendChild(f);r.$tag$==="svg"?Ft=!1:a.tagName==="foreignObject"&&(Ft=!0)}return a["s-hn"]=ol,r.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=xv,a["s-sn"]=r.$name$||"",_=t&&t.$children$&&t.$children$[i],_&&_.$tag$===r.$tag$&&t.$elm$&&ko(t.$elm$,!1)),a},ko=(t,e)=>{at.$flags$|=1;const i=t.childNodes;for(let n=i.length-1;n>=0;n--){const r=i[n];r["s-hn"]!==ol&&r["s-ol"]&&(Av(r).insertBefore(r,Ch(r)),r["s-ol"].remove(),r["s-ol"]=void 0,wh=!0),e&&ko(r,e)}at.$flags$&=-2},Ov=(t,e,i,n,r,s)=>{let a=t["s-cr"]&&t["s-cr"].parentNode||t,f;for(a.shadowRoot&&a.tagName===ol&&(a=a.shadowRoot);r<=s;++r)n[r]&&(f=la(null,i,r,t),f&&(n[r].$elm$=f,a.insertBefore(f,Ch(e))))},Rv=(t,e,i)=>{for(let n=e;n<=i;++n){const r=t[n];if(r){const s=r.$elm$;Lv(r),s&&(sa=!0,s["s-ol"]?s["s-ol"].remove():ko(s,!0),s.remove())}}},Jw=(t,e,i,n)=>{let r=0,s=0,a=0,f=0,_=e.length-1,y=e[0],w=e[_],x=n.length-1,E=n[0],k=n[x],P,M;for(;r<=_&&s<=x;)if(y==null)y=e[++r];else if(w==null)w=e[--_];else if(E==null)E=n[++s];else if(k==null)k=n[--x];else if(ds(y,E))Xn(y,E),y=e[++r],E=n[++s];else if(ds(w,k))Xn(w,k),w=e[--_],k=n[--x];else if(ds(y,k))(y.$tag$==="slot"||k.$tag$==="slot")&&ko(y.$elm$.parentNode,!1),Xn(y,k),t.insertBefore(y.$elm$,w.$elm$.nextSibling),y=e[++r],k=n[--x];else if(ds(w,E))(y.$tag$==="slot"||k.$tag$==="slot")&&ko(w.$elm$.parentNode,!1),Xn(w,E),t.insertBefore(w.$elm$,y.$elm$),w=e[--_],E=n[++s];else{for(a=-1,f=r;f<=_;++f)if(e[f]&&e[f].$key$!==null&&e[f].$key$===E.$key$){a=f;break}a>=0?(M=e[a],M.$tag$!==E.$tag$?P=la(e&&e[s],i,a,t):(Xn(M,E),e[a]=void 0,P=M.$elm$),E=n[++s]):(P=la(e&&e[s],i,s,t),E=n[++s]),P&&Av(y.$elm$).insertBefore(P,Ch(y.$elm$))}r>_?Ov(t,n[x+1]==null?null:n[x+1].$elm$,i,n,s,x):s>x&&Rv(e,r,_)},ds=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,Ch=t=>t&&t["s-ol"]||t,Av=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Xn=(t,e)=>{const i=e.$elm$=t.$elm$,n=t.$children$,r=e.$children$,s=e.$tag$,a=e.$text$;let f;a===null?(Ft=s==="svg"?!0:s==="foreignObject"?!1:Ft,s==="slot"||Iv(t,e,Ft),n!==null&&r!==null?Jw(i,n,e,r):r!==null?(t.$text$!==null&&(i.textContent=""),Ov(i,null,e,r,0,r.length-1)):n!==null&&Rv(n,0,n.length-1),Ft&&s==="svg"&&(Ft=!1)):(f=i["s-cr"])?f.parentNode.textContent=a:t.$text$!==a&&(i.data=a)},kv=t=>{const e=t.childNodes;let i,n,r,s,a,f;for(n=0,r=e.length;n<r;n++)if(i=e[n],i.nodeType===1){if(i["s-sr"]){for(a=i["s-sn"],i.hidden=!1,s=0;s<r;s++)if(f=e[s].nodeType,e[s]["s-hn"]!==i["s-hn"]||a!==""){if(f===1&&a===e[s].getAttribute("slot")){i.hidden=!0;break}}else if(f===1||f===3&&e[s].textContent.trim()!==""){i.hidden=!0;break}}kv(i)}},ci=[],Dv=t=>{let e,i,n,r,s,a,f=0;const _=t.childNodes,y=_.length;for(;f<y;f++){if(e=_[f],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(n=i.parentNode.childNodes,r=e["s-sn"],a=n.length-1;a>=0;a--)i=n[a],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(Of(i,r)?(s=ci.find(w=>w.$nodeToRelocate$===i),sa=!0,i["s-sn"]=i["s-sn"]||r,s?s.$slotRefNode$=e:ci.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&ci.map(w=>{Of(w.$nodeToRelocate$,i["s-sn"])&&(s=ci.find(x=>x.$nodeToRelocate$===i),s&&!w.$slotRefNode$&&(w.$slotRefNode$=s.$slotRefNode$))})):ci.some(w=>w.$nodeToRelocate$===i)||ci.push({$nodeToRelocate$:i}));e.nodeType===1&&Dv(e)}},Of=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",Lv=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(Lv)},Qw=(t,e)=>{const i=t.$hostElement$,n=t.$cmpMeta$,r=t.$vnode$||aa(null,null),s=$w(e)?e:Ie(null,null,e);ol=i.tagName,n.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},n.$attrsToReflect$.map(([a,f])=>s.$attrs$[f]=i[a])),s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=r.$elm$=i.shadowRoot||i,Yn=i["s-sc"],xv=i["s-cr"],Tv=(n.$flags$&1)!==0,sa=!1,Xn(r,s);{if(at.$flags$|=1,wh){Dv(s.$elm$);let a,f,_,y,w,x,E=0;for(;E<ci.length;E++)a=ci[E],f=a.$nodeToRelocate$,f["s-ol"]||(_=fi.createTextNode(""),_["s-nr"]=f,f.parentNode.insertBefore(f["s-ol"]=_,f));for(E=0;E<ci.length;E++)if(a=ci[E],f=a.$nodeToRelocate$,a.$slotRefNode$){for(y=a.$slotRefNode$.parentNode,w=a.$slotRefNode$.nextSibling,_=f["s-ol"];_=_.previousSibling;)if(x=_["s-nr"],x&&x["s-sn"]===f["s-sn"]&&y===x.parentNode&&(x=x.nextSibling,!x||!x["s-nr"])){w=x;break}(!w&&y!==f.parentNode||f.nextSibling!==w)&&f!==w&&(!f["s-hn"]&&f["s-ol"]&&(f["s-hn"]=f["s-ol"].parentNode.nodeName),y.insertBefore(f,w))}else f.nodeType===1&&(f.hidden=!0)}sa&&kv(s.$elm$),at.$flags$&=-2,ci.length=0}},eS=(t,e)=>{},xh=(t,e)=>(t.$flags$|=16,eS(t,t.$ancestorComponent$),pn(()=>tS(t,e))),tS=(t,e)=>{const i=t.$hostElement$,n=Bn("scheduleUpdate",t.$cmpMeta$.$tagName$),r=i;let s;return e?s=vr(r,"componentWillLoad"):s=vr(r,"componentWillUpdate"),s=Rf(s,()=>vr(r,"componentWillRender")),n(),Rf(s,()=>iS(t,r,e))},Rf=(t,e)=>t instanceof Promise?t.then(e):e(),iS=async(t,e,i)=>{const n=t.$hostElement$,r=Bn("update",t.$cmpMeta$.$tagName$);n["s-rc"],i&&qw(t);const s=Bn("render",t.$cmpMeta$.$tagName$);nS(t,e,n),s(),r(),rS(t)},nS=(t,e,i)=>{try{wf=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Gn.hasRenderFn||Gn.reflect)&&(Gn.vdomRender||Gn.reflect)&&(Gn.hydrateServerSide||Qw(t,e))}catch(f){Uo(f,t.$hostElement$)}return wf=null,null},rS=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,n=Bn("postUpdate",e),r=i;t.$ancestorComponent$,vr(r,"componentDidRender"),t.$flags$&64?(vr(r,"componentDidUpdate"),n()):(t.$flags$|=64,vr(r,"componentDidLoad"),n())},Jc=t=>{{const e=Fr(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&xh(e,!1),i}},vr=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(n){Uo(n)}},oS=(t,e)=>Fr(t).$instanceValues$.get(e),sS=(t,e,i,n)=>{const r=Fr(t),s=t,a=r.$instanceValues$.get(e),f=r.$flags$,_=s;i=zw(i,n.$members$[e][0]);const y=Number.isNaN(a)&&Number.isNaN(i);if(i!==a&&!y){r.$instanceValues$.set(e,i);{if(n.$watchers$&&f&128){const x=n.$watchers$[e];x&&x.map(E=>{try{_[E](i,a,e)}catch(k){Uo(k,s)}})}if((f&18)===2){if(_.componentShouldUpdate&&_.componentShouldUpdate(i,a,e)===!1)return;xh(r,!1)}}}},aS=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const n=Object.entries(e.$members$),r=t.prototype;n.map(([s,[a]])=>{(a&31||a&32)&&Object.defineProperty(r,s,{get(){return oS(this,s)},set(f){sS(this,s,f,e)},configurable:!0,enumerable:!0})});{const s=new Map;r.attributeChangedCallback=function(a,f,_){at.jmp(()=>{const y=s.get(a);if(this.hasOwnProperty(y))_=this[y],delete this[y];else if(r.hasOwnProperty(y)&&typeof this[y]=="number"&&this[y]==_)return;this[y]=_===null&&typeof this[y]=="boolean"?!1:_})},t.observedAttributes=n.filter(([a,f])=>f[0]&15).map(([a,f])=>{const _=f[1]||a;return s.set(_,a),f[0]&512&&e.$attrsToReflect$.push([a,_]),_})}}return t},lS=async(t,e,i,n,r)=>{if(!(e.$flags$&32)&&(e.$flags$|=32,r=t.constructor,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),r.style)){let a=r.style;typeof a!="string"&&(a=a[e.$modeName$=Uw(t)]);const f=Ev(i,e.$modeName$);if(!ca.has(f)){const _=Bn("registerStyles",i.$tagName$);Xw(f,a,!!(i.$flags$&1)),_()}}e.$ancestorComponent$,(()=>xh(e,!0))()},cS=t=>{},uS=t=>{if(!(at.$flags$&1)){const e=Fr(t),i=e.$cmpMeta$,n=Bn("connectedCallback",i.$tagName$);e.$flags$&1?(Pv(t,e,i.$listeners$),cS(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&hS(t),i.$members$&&Object.entries(i.$members$).map(([r,[s]])=>{if(s&31&&t.hasOwnProperty(r)){const a=t[r];delete t[r],t[r]=a}}),lS(t,e,i)),n()}},hS=t=>{const e=t["s-cr"]=fi.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},dS=t=>{if(!(at.$flags$&1)){const e=Fr(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},mi=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const n=t.prototype.connectedCallback,r=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){mS(this,i)},connectedCallback(){uS(this),n&&n.call(this)},disconnectedCallback(){dS(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,aS(t,i)},Pv=(t,e,i,n)=>{i&&i.map(([r,s,a])=>{const f=pS(t,r),_=fS(e,a),y=gS(r);at.ael(f,s,_,y),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>at.rel(f,s,_,y))})},fS=(t,e)=>i=>{try{Gn.lazyLoad||t.$hostElement$[e](i)}catch(n){Uo(n)}},pS=(t,e)=>e&4?fi:e&8?sl:e&16?fi.body:t,gS=t=>_S?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,Mv=new WeakMap,Fr=t=>Mv.get(t),mS=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return Pv(t,i,e.$listeners$),Mv.set(t,i)},Af=(t,e)=>e in t,Uo=(t,e)=>(0,console.error)(t,e),ca=new Map,Fv=[],sl=typeof window<"u"?window:{},fi=sl.document||{head:{}},vi=sl.HTMLElement||class{},at={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,n)=>t.addEventListener(e,i,n),rel:(t,e,i,n)=>t.removeEventListener(e,i,n),ce:(t,e)=>new CustomEvent(t,e)},vS=t=>{Object.assign(at,t)},_S=(()=>{let t=!1;try{fi.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch(e){}return t})(),yS=t=>Promise.resolve(t),bS=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(t){}return!1})(),Qc=[],Bv=[],Nv=(t,e)=>i=>{t.push(i),Zc||(Zc=!0,e&&at.$flags$&4?wS(eu):at.raf(eu))},kf=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){Uo(i)}t.length=0},eu=()=>{kf(Qc),kf(Bv),(Zc=Qc.length>0)&&at.raf(eu)},wS=t=>yS().then(t),Do=Nv(Qc,!1),pn=Nv(Bv,!0);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Lo=(t,e)=>{t.componentOnReady?t.componentOnReady().then(i=>e(i)):Ri(()=>e(t))},SS=t=>t.componentOnReady!==void 0,$v=(t,e=[])=>{const i={};return e.forEach(n=>{t.hasAttribute(n)&&(t.getAttribute(n)!==null&&(i[n]=t.getAttribute(n)),t.removeAttribute(n))}),i},CS=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],xS=(t,e)=>{let i=CS;return e&&e.length>0&&(i=i.filter(n=>!e.includes(n))),$v(t,i)},JT=(t,e,i,n)=>{var r;if(typeof window<"u"){const s=window,a=(r=s==null?void 0:s.Ionic)===null||r===void 0?void 0:r.config;if(a){const f=a.get("_ael");if(f)return f(t,e,i,n);if(a._ael)return a._ael(t,e,i,n)}}return t.addEventListener(e,i,n)},QT=(t,e,i,n)=>{var r;if(typeof window<"u"){const s=window,a=(r=s==null?void 0:s.Ionic)===null||r===void 0?void 0:r.config;if(a){const f=a.get("_rel");if(f)return f(t,e,i,n);if(a._rel)return a._rel(t,e,i,n)}}return t.removeEventListener(e,i,n)},Ri=t=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(t):typeof requestAnimationFrame=="function"?requestAnimationFrame(t):setTimeout(t),jv=(t,e,i)=>Math.max(t,Math.min(e,i)),St=(t,e)=>{if(!t){const i="ASSERT: "+e;console.error(i);debugger;throw new Error(i)}},eE=t=>t.timeStamp||Date.now(),tE=t=>{if(t){const e=t.changedTouches;if(e&&e.length>0){const i=e[0];return{x:i.clientX,y:i.clientY}}if(t.pageX!==void 0)return{x:t.pageX,y:t.pageY}}return{x:0,y:0}},Vv=(t,e)=>{if(t!=null||(t={}),e!=null||(e={}),t===e)return!0;const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!1;for(const n of i)if(!(n in e)||t[n]!==e[n])return!1;return!0};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ct=typeof window<"u"?window:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let Xl;const TS=t=>(t.forEach(e=>{for(const i in e)if(e.hasOwnProperty(i)){const n=e[i];if(i==="easing"){const r="animation-timing-function";e[r]=n,delete e[i]}else{const r=ES(i);r!==i&&(e[r]=n,delete e[i])}}}),t),ES=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Th=t=>{if(Xl===void 0){const e=t.style.animationName!==void 0,i=t.style.webkitAnimationName!==void 0;Xl=!e&&i?"-webkit-":""}return Xl},je=(t,e,i)=>{const n=e.startsWith("animation")?Th(t):"";t.style.setProperty(n+e,i)},oi=(t,e)=>{const i=e.startsWith("animation")?Th(t):"";t.style.removeProperty(i+e)},IS=(t,e)=>{let i;const n={passive:!0},r=()=>{i&&i()},s=a=>{t===a.target&&(r(),e(a))};return t&&(t.addEventListener("webkitAnimationEnd",s,n),t.addEventListener("animationend",s,n),i=()=>{t.removeEventListener("webkitAnimationEnd",s,n),t.removeEventListener("animationend",s,n)}),r},OS=(t=[])=>t.map(e=>{const i=e.offset,n=[];for(const r in e)e.hasOwnProperty(r)&&r!=="offset"&&n.push(`${r}: ${e[r]};`);return`${i*100}% { ${n.join(" ")} }`}).join(" "),Df=[],RS=t=>{let e=Df.indexOf(t);return e<0&&(e=Df.push(t)-1),`ion-animation-${e}`},AS=t=>{const e=t.getRootNode!==void 0?t.getRootNode():t;return e.head||e},kS=(t,e,i)=>{var n;const r=AS(i),s=Th(i),a=r.querySelector("#"+t);if(a)return a;const f=((n=i.ownerDocument)!==null&&n!==void 0?n:document).createElement("style");return f.id=t,f.textContent=`@${s}keyframes ${t} { ${e} } @${s}keyframes ${t}-alt { ${e} }`,r.appendChild(f),f},fs=(t=[],e)=>{if(e!==void 0){const i=Array.isArray(e)?e:[e];return[...t,...i]}return t},DS=t=>{let e,i,n,r,s,a,f=[],_=[],y=[],w=!1,x,E={},k=[],P=[],M={},V=0,L=!1,R=!1,D,Y,ie,oe,z=!0,S=!1,he=!0,le,ue,h=!1;const c=t,u=[],g=[],o=[],l=[],d=[],v=[],p=[],m=[],b=[],C=[],T=typeof AnimationEffect=="function"||Ct!==void 0&&typeof Ct.AnimationEffect=="function",I=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&T,O=100,A=()=>C,F=te=>(l.forEach(_e=>{_e.destroy(te)}),U(te),o.length=0,l.length=0,f.length=0,X(),w=!1,he=!0,ue),U=te=>{N(),te&&B()},H=()=>{L=!1,R=!1,he=!0,Y=void 0,ie=void 0,oe=void 0,V=0,S=!1,z=!0,h=!1},J=()=>V!==0&&!h,q=(te,_e)=>((_e!=null&&_e.oneTimeCallback?g:u).push({c:te,o:_e}),ue),X=()=>(u.length=0,g.length=0,ue),N=()=>{if(I)C.forEach(te=>{te.cancel()}),C.length=0;else{const te=o.slice();Ri(()=>{te.forEach(_e=>{oi(_e,"animation-name"),oi(_e,"animation-duration"),oi(_e,"animation-timing-function"),oi(_e,"animation-iteration-count"),oi(_e,"animation-delay"),oi(_e,"animation-play-state"),oi(_e,"animation-fill-mode"),oi(_e,"animation-direction")})})}},B=()=>{d.forEach(te=>{te!=null&&te.parentNode&&te.parentNode.removeChild(te)}),d.length=0},G=te=>(v.push(te),ue),Q=te=>(p.push(te),ue),ee=te=>(m.push(te),ue),W=te=>(b.push(te),ue),j=te=>(_=fs(_,te),ue),K=te=>(y=fs(y,te),ue),ne=(te={})=>(E=te,ue),Z=(te=[])=>{for(const _e of te)E[_e]="";return ue},se=te=>(k=fs(k,te),ue),me=te=>(P=fs(P,te),ue),pe=(te={})=>(M=te,ue),ce=(te=[])=>{for(const _e of te)M[_e]="";return ue},ge=()=>s!==void 0?s:x?x.getFill():"both",fe=()=>Y!==void 0?Y:a!==void 0?a:x?x.getDirection():"normal",ye=()=>L?"linear":n!==void 0?n:x?x.getEasing():"linear",be=()=>R?0:ie!==void 0?ie:i!==void 0?i:x?x.getDuration():0,ve=()=>r!==void 0?r:x?x.getIterations():1,Te=()=>oe!==void 0?oe:e!==void 0?e:x?x.getDelay():0,ke=()=>f,bt=te=>(a=te,Yt(!0),ue),ni=te=>(s=te,Yt(!0),ue),Hi=te=>(e=te,Yt(!0),ue),Me=te=>(n=te,Yt(!0),ue),wt=te=>(!I&&te===0&&(te=1),i=te,Yt(!0),ue),_n=te=>(r=te,Yt(!0),ue),zi=te=>(x=te,ue),Ii=te=>{if(te!=null)if(te.nodeType===1)o.push(te);else if(te.length>=0)for(let _e=0;_e<te.length;_e++)o.push(te[_e]);else console.error("Invalid addElement value");return ue},Gi=te=>{if(te!=null)if(Array.isArray(te))for(const _e of te)_e.parent(ue),l.push(_e);else te.parent(ue),l.push(te);return ue},Yo=te=>{const _e=f!==te;return f=te,_e&&Hn(f),ue},Hn=te=>{I?A().forEach(_e=>{if(_e.effect.setKeyframes)_e.effect.setKeyframes(te);else{const Se=new KeyframeEffect(_e.effect.target,te,_e.effect.getTiming());_e.effect=Se}}):Yi()},yn=()=>{v.forEach(Ke=>Ke()),p.forEach(Ke=>Ke());const te=_,_e=y,Se=E;o.forEach(Ke=>{const nt=Ke.classList;te.forEach(Xt=>nt.add(Xt)),_e.forEach(Xt=>nt.remove(Xt));for(const Xt in Se)Se.hasOwnProperty(Xt)&&je(Ke,Xt,Se[Xt])})},fl=()=>{pl(),m.forEach(nt=>nt()),b.forEach(nt=>nt());const te=z?1:0,_e=k,Se=P,Ke=M;o.forEach(nt=>{const Xt=nt.classList;_e.forEach(bn=>Xt.add(bn)),Se.forEach(bn=>Xt.remove(bn));for(const bn in Ke)Ke.hasOwnProperty(bn)&&je(nt,bn,Ke[bn])}),u.forEach(nt=>nt.c(te,ue)),g.forEach(nt=>nt.c(te,ue)),g.length=0,he=!0,z&&(S=!0),z=!0},yi=()=>{V!==0&&(V--,V===0&&(fl(),x&&x.animationFinish()))},Yi=(te=!0)=>{B();const _e=TS(f);o.forEach(Se=>{if(_e.length>0){const Ke=OS(_e);le=t!==void 0?t:RS(Ke);const nt=kS(le,Ke,Se);d.push(nt),je(Se,"animation-duration",`${be()}ms`),je(Se,"animation-timing-function",ye()),je(Se,"animation-delay",`${Te()}ms`),je(Se,"animation-fill-mode",ge()),je(Se,"animation-direction",fe());const Xt=ve()===1/0?"infinite":ve().toString();je(Se,"animation-iteration-count",Xt),je(Se,"animation-play-state","paused"),te&&je(Se,"animation-name",`${nt.id}-alt`),Ri(()=>{je(Se,"animation-name",nt.id||null)})}})},F_=()=>{o.forEach(te=>{const _e=te.animate(f,{id:c,delay:Te(),duration:be(),easing:ye(),iterations:ve(),fill:ge(),direction:fe()});_e.pause(),C.push(_e)}),C.length>0&&(C[0].onfinish=()=>{yi()})},jh=(te=!0)=>{yn(),f.length>0&&(I?F_():Yi(te)),w=!0},Br=te=>{if(te=Math.min(Math.max(te,0),.9999),I)C.forEach(_e=>{_e.currentTime=_e.effect.getComputedTiming().delay+be()*te,_e.pause()});else{const _e=`-${be()*te}ms`;o.forEach(Se=>{f.length>0&&(je(Se,"animation-delay",_e),je(Se,"animation-play-state","paused"))})}},Vh=te=>{C.forEach(_e=>{_e.effect.updateTiming({delay:Te(),duration:be(),easing:ye(),iterations:ve(),fill:ge(),direction:fe()})}),te!==void 0&&Br(te)},Uh=(te=!0,_e)=>{Ri(()=>{o.forEach(Se=>{je(Se,"animation-name",le||null),je(Se,"animation-duration",`${be()}ms`),je(Se,"animation-timing-function",ye()),je(Se,"animation-delay",_e!==void 0?`-${_e*be()}ms`:`${Te()}ms`),je(Se,"animation-fill-mode",ge()||null),je(Se,"animation-direction",fe()||null);const Ke=ve()===1/0?"infinite":ve().toString();je(Se,"animation-iteration-count",Ke),te&&je(Se,"animation-name",`${le}-alt`),Ri(()=>{je(Se,"animation-name",le||null)})})})},Yt=(te=!1,_e=!0,Se)=>(te&&l.forEach(Ke=>{Ke.update(te,_e,Se)}),I?Vh(Se):Uh(_e,Se),ue),B_=(te=!1,_e)=>(l.forEach(Se=>{Se.progressStart(te,_e)}),Wh(),L=te,w||jh(),Yt(!1,!0,_e),ue),N_=te=>(l.forEach(_e=>{_e.progressStep(te)}),Br(te),ue),$_=(te,_e,Se)=>(L=!1,l.forEach(Ke=>{Ke.progressEnd(te,_e,Se)}),Se!==void 0&&(ie=Se),S=!1,z=!0,te===0?(Y=fe()==="reverse"?"normal":"reverse",Y==="reverse"&&(z=!1),I?(Yt(),Br(1-_e)):(oe=(1-_e)*be()*-1,Yt(!1,!1))):te===1&&(I?(Yt(),Br(_e)):(oe=_e*be()*-1,Yt(!1,!1))),te!==void 0&&(q(()=>{ie=void 0,Y=void 0,oe=void 0},{oneTimeCallback:!0}),x||Hh()),ue),Wh=()=>{w&&(I?C.forEach(te=>{te.pause()}):o.forEach(te=>{je(te,"animation-play-state","paused")}),h=!0)},j_=()=>(l.forEach(te=>{te.pause()}),Wh(),ue),V_=()=>{D=void 0,yi()},pl=()=>{D&&clearTimeout(D)},U_=()=>{if(pl(),Ri(()=>{o.forEach(te=>{f.length>0&&je(te,"animation-play-state","running")})}),f.length===0||o.length===0)yi();else{const te=Te()||0,_e=be()||0,Se=ve()||1;isFinite(Se)&&(D=setTimeout(V_,te+_e*Se+O)),IS(o[0],()=>{pl(),Ri(()=>{W_(),Ri(yi)})})}},W_=()=>{o.forEach(te=>{oi(te,"animation-duration"),oi(te,"animation-delay"),oi(te,"animation-play-state")})},H_=()=>{C.forEach(te=>{te.play()}),(f.length===0||o.length===0)&&yi()},z_=()=>{I?(Br(0),Vh()):Uh()},Hh=te=>new Promise(_e=>{te!=null&&te.sync&&(R=!0,q(()=>R=!1,{oneTimeCallback:!0})),w||jh(),S&&(z_(),S=!1),he&&(V=l.length+1,he=!1),q(()=>_e(),{oneTimeCallback:!0}),l.forEach(Se=>{Se.play()}),I?H_():U_(),h=!1}),G_=()=>{l.forEach(te=>{te.stop()}),w&&(N(),w=!1),H()},zh=(te,_e)=>{const Se=f[0];return Se!==void 0&&(Se.offset===void 0||Se.offset===0)?Se[te]=_e:f=[{offset:0,[te]:_e},...f],ue};return ue={parentAnimation:x,elements:o,childAnimations:l,id:c,animationFinish:yi,from:zh,to:(te,_e)=>{const Se=f[f.length-1];return Se!==void 0&&(Se.offset===void 0||Se.offset===1)?Se[te]=_e:f=[...f,{offset:1,[te]:_e}],ue},fromTo:(te,_e,Se)=>zh(te,_e).to(te,Se),parent:zi,play:Hh,pause:j_,stop:G_,destroy:F,keyframes:Yo,addAnimation:Gi,addElement:Ii,update:Yt,fill:ni,direction:bt,iterations:_n,duration:wt,easing:Me,delay:Hi,getWebAnimations:A,getKeyframes:ke,getFill:ge,getDirection:fe,getDelay:Te,getIterations:ve,getEasing:ye,getDuration:be,afterAddRead:ee,afterAddWrite:W,afterClearStyles:ce,afterStyles:pe,afterRemoveClass:me,afterAddClass:se,beforeAddRead:G,beforeAddWrite:Q,beforeClearStyles:Z,beforeStyles:ne,beforeRemoveClass:K,beforeAddClass:j,onFinish:q,isRunning:J,progressStart:B_,progressStep:N_,progressEnd:$_}},LS="ionViewWillEnter",PS="ionViewDidEnter",Uv="ionViewWillLeave",Wv="ionViewDidLeave",Kl="ionViewWillUnload",MS=()=>Si(()=>import("./ios.transition-30625041.js"),[]),FS=()=>Si(()=>import("./md.transition-7dba575c.js"),[]),Hv=t=>new Promise((e,i)=>{pn(()=>{BS(t),NS(t).then(n=>{n.animation&&n.animation.destroy(),Lf(t),e(n)},n=>{Lf(t),i(n)})})}),BS=t=>{const e=t.enteringEl,i=t.leavingEl;HS(e,i,t.direction),t.showGoBack?e.classList.add("can-go-back"):e.classList.remove("can-go-back"),iu(e,!1),e.style.setProperty("pointer-events","none"),i&&(iu(i,!1),i.style.setProperty("pointer-events","none"))},NS=async t=>{const e=await $S(t);return e&&Pw.isBrowser?jS(e,t):VS(t)},Lf=t=>{const e=t.enteringEl,i=t.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),i!==void 0&&(i.classList.remove("ion-page-invisible"),i.style.removeProperty("pointer-events"))},$S=async t=>!t.leavingEl||!t.animated||t.duration===0?void 0:t.animationBuilder?t.animationBuilder:t.mode==="ios"?(await MS()).iosTransitionAnimation:(await FS()).mdTransitionAnimation,jS=async(t,e)=>{await zv(e,!0);const i=t(e.baseEl,e);Gv(e.enteringEl,e.leavingEl);const n=await WS(i,e);return e.progressCallback&&e.progressCallback(void 0),n&&Yv(e.enteringEl,e.leavingEl),{hasCompleted:n,animation:i}},VS=async t=>{const e=t.enteringEl,i=t.leavingEl;return await zv(t,!1),Gv(e,i),Yv(e,i),{hasCompleted:!0}},zv=async(t,e)=>{(t.deepWait!==void 0?t.deepWait:e)&&await Promise.all([tu(t.enteringEl),tu(t.leavingEl)]),await US(t.viewIsReady,t.enteringEl)},US=async(t,e)=>{t&&await t(e)},WS=(t,e)=>{const i=e.progressCallback,n=new Promise(r=>{t.onFinish(s=>r(s===1))});return i?(t.progressStart(!0),i(t)):t.play(),n},Gv=(t,e)=>{Di(e,Uv),Di(t,LS)},Yv=(t,e)=>{Di(t,PS),Di(e,Wv)},Di=(t,e)=>{if(t){const i=new CustomEvent(e,{bubbles:!1,cancelable:!1});t.dispatchEvent(i)}},tu=async t=>{const e=t;if(e){if(e.componentOnReady!=null){if(await e.componentOnReady()!=null)return}else if(e.__registerHost!=null){await new Promise(n=>Ri(n));return}await Promise.all(Array.from(e.children).map(tu))}},iu=(t,e)=>{e?(t.setAttribute("aria-hidden","true"),t.classList.add("ion-page-hidden")):(t.hidden=!1,t.removeAttribute("aria-hidden"),t.classList.remove("ion-page-hidden"))},HS=(t,e,i)=>{t!==void 0&&(t.style.zIndex=i==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},iE=t=>{if(t.classList.contains("ion-page"))return t;const e=t.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||t};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ua=(t,e,i,n,r)=>GS(t[1],e[1],i[1],n[1],r).map(s=>zS(t[0],e[0],i[0],n[0],s)),zS=(t,e,i,n,r)=>{const s=3*e*Math.pow(r-1,2),a=-3*i*r+3*i+n*r,f=t*Math.pow(r-1,3);return r*(s+r*a)-f},GS=(t,e,i,n,r)=>(t-=r,e-=r,i-=r,n-=r,XS(n-3*i+3*e-t,3*i-6*e+3*t,3*e-3*t,t).filter(a=>a>=0&&a<=1)),YS=(t,e,i)=>{const n=e*e-4*t*i;return n<0?[]:[(-e+Math.sqrt(n))/(2*t),(-e-Math.sqrt(n))/(2*t)]},XS=(t,e,i,n)=>{if(t===0)return YS(e,i,n);e/=t,i/=t,n/=t;const r=(3*i-e*e)/3,s=(2*e*e*e-9*e*i+27*n)/27;if(r===0)return[Math.pow(-s,1/3)];if(s===0)return[Math.sqrt(-r),-Math.sqrt(-r)];const a=Math.pow(s/2,2)+Math.pow(r/3,3);if(a===0)return[Math.pow(s/2,1/2)-e/3];if(a>0)return[Math.pow(-(s/2)+Math.sqrt(a),1/3)-Math.pow(s/2+Math.sqrt(a),1/3)-e/3];const f=Math.sqrt(Math.pow(-(r/3),3)),_=Math.acos(-(s/(2*Math.sqrt(Math.pow(-(r/3),3))))),y=2*Math.pow(f,1/3);return[y*Math.cos(_/3)-e/3,y*Math.cos((_+2*Math.PI)/3)-e/3,y*Math.cos((_+4*Math.PI)/3)-e/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class KS{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,i){const n=this.m.get(e);return n!==void 0?n:i}getBoolean(e,i=!1){const n=this.m.get(e);return n===void 0?i:typeof n=="string"?n==="true":!!n}getNumber(e,i){const n=parseFloat(this.m.get(e));return isNaN(n)?i!==void 0?i:NaN:n}set(e,i){this.m.set(e,i)}}const Ge=new KS,qS=t=>{try{const e=t.sessionStorage.getItem(Xv);return e!==null?JSON.parse(e):{}}catch(e){return{}}},ZS=(t,e)=>{try{t.sessionStorage.setItem(Xv,JSON.stringify(e))}catch(i){return}},JS=t=>{const e={};return t.location.search.slice(1).split("&").map(i=>i.split("=")).map(([i,n])=>[decodeURIComponent(i),decodeURIComponent(n)]).filter(([i])=>QS(i,Pf)).map(([i,n])=>[i.slice(Pf.length),n]).forEach(([i,n])=>{e[i]=n}),e},QS=(t,e)=>t.substr(0,e.length)===e,Pf="ionic:",Xv="ionic-persist-config",e1=t=>Kv(t),tn=(t,e)=>(typeof t=="string"&&(e=t,t=void 0),e1(t).includes(e)),Kv=(t=window)=>{if(typeof t>"u")return[];t.Ionic=t.Ionic||{};let e=t.Ionic.platforms;return e==null&&(e=t.Ionic.platforms=t1(t),e.forEach(i=>t.document.documentElement.classList.add(`plt-${i}`))),e},t1=t=>{const e=Ge.get("platform");return Object.keys(Mf).filter(i=>{const n=e==null?void 0:e[i];return typeof n=="function"?n(t):Mf[i](t)})},i1=t=>al(t)&&!Zv(t),Eh=t=>!!(Nn(t,/iPad/i)||Nn(t,/Macintosh/i)&&al(t)),n1=t=>Nn(t,/iPhone/i),r1=t=>Nn(t,/iPhone|iPod/i)||Eh(t),qv=t=>Nn(t,/android|sink/i),o1=t=>qv(t)&&!Nn(t,/mobile/i),s1=t=>{const e=t.innerWidth,i=t.innerHeight,n=Math.min(e,i),r=Math.max(e,i);return n>390&&n<520&&r>620&&r<800},a1=t=>{const e=t.innerWidth,i=t.innerHeight,n=Math.min(e,i),r=Math.max(e,i);return Eh(t)||o1(t)||n>460&&n<820&&r>780&&r<1400},al=t=>h1(t,"(any-pointer:coarse)"),l1=t=>!al(t),Zv=t=>Jv(t)||Qv(t),Jv=t=>!!(t.cordova||t.phonegap||t.PhoneGap),Qv=t=>{const e=t.Capacitor;return!!(e!=null&&e.isNative)},c1=t=>Nn(t,/electron/i),u1=t=>{var e;return!!(!((e=t.matchMedia)===null||e===void 0)&&e.call(t,"(display-mode: standalone)").matches||t.navigator.standalone)},Nn=(t,e)=>e.test(t.navigator.userAgent),h1=(t,e)=>{var i;return(i=t.matchMedia)===null||i===void 0?void 0:i.call(t,e).matches},Mf={ipad:Eh,iphone:n1,ios:r1,android:qv,phablet:s1,tablet:a1,cordova:Jv,capacitor:Qv,electron:c1,pwa:u1,mobile:al,mobileweb:i1,desktop:l1,hybrid:Zv};let Kn;const Dt=t=>t&&Hw(t)||Kn,d1=(t={})=>{if(typeof window>"u")return;const e=window.document,i=window,n=i.Ionic=i.Ionic||{},r={};t._ael&&(r.ael=t._ael),t._rel&&(r.rel=t._rel),t._ce&&(r.ce=t._ce),vS(r);const s=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qS(i)),{persistConfig:!1}),n.config),JS(i)),t);Ge.reset(s),Ge.getBoolean("persistConfig")&&ZS(i,s),Kv(i),n.config=Ge,n.mode=Kn=Ge.get("mode",e.documentElement.getAttribute("mode")||(tn(i,"ios")?"ios":"md")),Ge.set("mode",Kn),e.documentElement.setAttribute("mode",Kn),e.documentElement.classList.add(Kn),Ge.getBoolean("_testing")&&Ge.set("animated",!1);const a=_=>{var y;return(y=_.tagName)===null||y===void 0?void 0:y.startsWith("ION-")},f=_=>["ios","md"].includes(_);Ww(_=>{for(;_;){const y=_.mode||_.getAttribute("mode");if(y){if(f(y))return y;a(_)&&console.warn('Invalid ionic mode: "'+y+'", expected: "ios" or "md"')}_=_.parentElement}return Kn})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const e_=async(t,e,i,n,r,s)=>{var a;if(t)return t.attachViewToDom(e,i,r,n);if(!s&&typeof i!="string"&&!(i instanceof HTMLElement))throw new Error("framework delegate is missing");const f=typeof i=="string"?(a=e.ownerDocument)===null||a===void 0?void 0:a.createElement(i):i;return n&&n.forEach(_=>f.classList.add(_)),r&&Object.assign(f,r),e.appendChild(f),await new Promise(_=>Lo(f,_)),f},f1=(t,e)=>{if(e){if(t){const i=e.parentElement;return t.removeViewFromDom(i,e)}e.remove()}return Promise.resolve()};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const p1=(t,...e)=>console.error(`<${t.tagName.toLowerCase()}> must be used inside ${e.join(" or ")}.`);function vt(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ll=(t,e)=>e.closest(t)!==null,Wo=(t,e)=>typeof t=="string"&&t.length>0?Object.assign({"ion-color":!0,[`ion-color-${t}`]:!0},e):e;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const g1=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",m1=mi(class extends vi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,i){return new Promise(n=>{Do(()=>{const r=this.el.getBoundingClientRect(),s=r.width,a=r.height,f=Math.sqrt(s*s+a*a),_=Math.max(a,s),y=this.unbounded?_:f+_1,w=Math.floor(_*y1),x=y/w;let E=e-r.left,k=i-r.top;this.unbounded&&(E=s*.5,k=a*.5);const P=E-w*.5,M=k-w*.5,V=s*.5-E,L=a*.5-k;pn(()=>{const R=document.createElement("div");R.classList.add("ripple-effect");const D=R.style;D.top=M+"px",D.left=P+"px",D.width=D.height=w+"px",D.setProperty("--final-scale",`${x}`),D.setProperty("--translate-end",`${V}px, ${L}px`),(this.el.shadowRoot||this.el).appendChild(R),setTimeout(()=>{n(()=>{v1(R)})},225+100)})})})}get unbounded(){return this.type==="unbounded"}render(){const e=Dt(this);return Ie(Ei,{role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return g1}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),v1=t=>{t.classList.add("fade-out"),setTimeout(()=>{t.remove()},200)},_1=10,y1=.5;function b1(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(e=>{switch(e){case"ion-ripple-effect":customElements.get(e)||customElements.define(e,m1);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ps=typeof window<"u"?window:void 0;ps&&(ps.CSS&&ps.CSS.supports&&ps.CSS.supports("--a: 0"));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const w1=t=>t&&t.dir!==""?t.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const S1=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',C1=mi(class extends vi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=At(this,"ionScrollStart",7),this.ionScroll=At(this,"ionScroll",7),this.ionScrollEnd=At(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,i=Dt(this);return e===void 0?i==="ios"&&tn("ios"):e}resize(){this.fullscreen?Do(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,Jc(this))}readDimensions(){const e=T1(this.el),i=Math.max(this.el.offsetTop,0),n=Math.max(e.offsetHeight-i-this.el.offsetHeight,0);(i!==this.cTop||n!==this.cBottom)&&(this.cTop=i,this.cBottom=n,Jc(this))}onScroll(e){const i=Date.now(),n=!this.isScrolling;this.lastScroll=i,n&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,Do(r=>{this.queued=!1,this.detail.event=e,E1(this.detail,this.scrollEl,r,n),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(e=>Lo(this.el,e)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(e=>Lo(this.el,e)),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const i=await this.getScrollElement(),n=i.scrollHeight-i.clientHeight;return this.scrollToPoint(void 0,n,e)}async scrollByPoint(e,i,n){const r=await this.getScrollElement();return this.scrollToPoint(e+r.scrollLeft,i+r.scrollTop,n)}async scrollToPoint(e,i,n=0){const r=await this.getScrollElement();if(n<32){i!=null&&(r.scrollTop=i),e!=null&&(r.scrollLeft=e);return}let s,a=0;const f=new Promise(k=>s=k),_=r.scrollTop,y=r.scrollLeft,w=i!=null?i-_:0,x=e!=null?e-y:0,E=k=>{const P=Math.min(1,(k-a)/n)-1,M=Math.pow(P,3)+1;w!==0&&(r.scrollTop=Math.floor(M*w+_)),x!==0&&(r.scrollLeft=Math.floor(M*x+y)),M<1?requestAnimationFrame(E):s()};return requestAnimationFrame(k=>{a=k,E(k)}),f}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:e,scrollX:i,scrollY:n,el:r}=this,s=w1(r)?"rtl":"ltr",a=Dt(this),f=this.shouldForceOverscroll(),_=a==="ios",y=e?"main":"div";return this.resize(),Ie(Ei,{class:Wo(this.color,{[a]:!0,"content-sizing":ll("ion-popover",this.el),overscroll:f,[`content-${s}`]:!0}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},Ie("div",{ref:w=>this.backgroundContentEl=w,id:"background-content",part:"background"}),Ie(y,{class:{"inner-scroll":!0,"scroll-x":i,"scroll-y":n,overscroll:(i||n)&&f},ref:w=>this.scrollEl=w,onScroll:this.scrollEvents?w=>this.onScroll(w):void 0,part:"scroll"},Ie("slot",null)),_?Ie("div",{class:"transition-effect"},Ie("div",{class:"transition-cover"}),Ie("div",{class:"transition-shadow"})):null,Ie("slot",{name:"fixed"}))}get el(){return this}static get style(){return S1}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),x1=t=>{var e;return t.parentElement?t.parentElement:!((e=t.parentNode)===null||e===void 0)&&e.host?t.parentNode.host:null},T1=t=>{const e=t.closest("ion-tabs");if(e)return e;const i=t.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return i||x1(t)},E1=(t,e,i,n)=>{const r=t.currentX,s=t.currentY,a=t.currentTime,f=e.scrollLeft,_=e.scrollTop,y=i-a;if(n&&(t.startTime=i,t.startX=f,t.startY=_,t.velocityX=t.velocityY=0),t.currentTime=i,t.currentX=t.scrollLeft=f,t.currentY=t.scrollTop=_,t.deltaX=f-t.startX,t.deltaY=_-t.startY,y>0&&y<100){const w=(f-r)/y,x=(_-s)/y;t.velocityX=w*.7+t.velocityX*.3,t.velocityY=x*.7+t.velocityY*.3}};function I1(){if(typeof customElements>"u")return;["ion-content"].forEach(e=>{switch(e){case"ion-content":customElements.get(e)||customElements.define(e,C1);break}})}const O1=I1;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const R1=".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",A1='.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}',k1=mi(class extends vi{constructor(){super(),this.__registerHost(),this.ionColor=At(this,"ionColor",7),this.ionStyle=At(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate=this.position==="floating",this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:e}=this;this.ionColor.emit({"item-label-color":e!==void 0,[`ion-color-${e}`]:e!==void 0})}emitStyle(){const{inRange:e,position:i}=this;e||this.ionStyle.emit({label:!0,[`label-${i}`]:i!==void 0})}render(){const e=this.position,i=Dt(this);return Ie(Ei,{class:Wo(this.color,{[i]:!0,"in-item-color":ll("ion-item.ion-color",this.el),[`label-${e}`]:e!==void 0,["label-no-animate"]:this.noAnimate,"label-rtl":document.dir==="rtl"})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:R1,md:A1}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);function D1(){if(typeof customElements>"u")return;["ion-label"].forEach(e=>{switch(e){case"ion-label":customElements.get(e)||customElements.define(e,k1);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const L1="ION-CONTENT",t_="ion-content",i_=".ion-content-scroll-host",n_=`${t_}, ${i_}`,Ih=t=>t.tagName===L1,Ff=async t=>Ih(t)?(await new Promise(e=>Lo(t,e)),t.getScrollElement()):t,Bf=t=>{const e=t.querySelector(i_);return e||t.querySelector(n_)},sE=t=>t.closest(n_),aE=(t,e)=>Ih(t)?t.scrollToTop(e):Promise.resolve(t.scrollTo({top:0,left:0,behavior:e>0?"smooth":"auto"})),lE=(t,e,i,n)=>Ih(t)?t.scrollByPoint(e,i,n):Promise.resolve(t.scrollBy({top:i,left:e,behavior:n>0?"smooth":"auto"})),Nf=t=>p1(t,t_);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const P1=t=>{let e,i,n;const r=()=>{e=()=>{n=!0,t&&t(!0)},i=()=>{n=!1,t&&t(!1)},Ct==null||Ct.addEventListener("keyboardWillShow",e),Ct==null||Ct.addEventListener("keyboardWillHide",i)},s=()=>{Ct==null||Ct.removeEventListener("keyboardWillShow",e),Ct==null||Ct.removeEventListener("keyboardWillHide",i),e=i=void 0},a=()=>n;return r(),{init:r,destroy:s,isKeyboardVisible:a}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const M1="all 0.2s ease-in-out",$f=t=>{const e=document.querySelector(`${t}.ion-cloned-element`);if(e!==null)return e;const i=document.createElement(t);return i.classList.add("ion-cloned-element"),i.style.setProperty("display","none"),document.body.appendChild(i),i},jf=t=>{if(!t)return;const e=t.querySelectorAll("ion-toolbar");return{el:t,toolbars:Array.from(e).map(i=>{const n=i.querySelector("ion-title");return{el:i,background:i.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:n,innerTitleEl:n?n.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(i.querySelectorAll("ion-buttons"))}})}},F1=(t,e,i)=>{Do(()=>{const n=t.scrollTop,r=jv(1,1+-n/500,1.1);i.querySelector("ion-refresher.refresher-native")===null&&pn(()=>{$1(e.toolbars,r)})})},Oh=(t,e)=>{t.collapse!=="fade"&&(e===void 0?t.style.removeProperty("--opacity-scale"):t.style.setProperty("--opacity-scale",e.toString()))},B1=(t,e,i)=>{if(!t[0].isIntersecting)return;const n=t[0].intersectionRatio>.9||i<=0?0:(1-t[0].intersectionRatio)*100/75;Oh(e.el,n===1?void 0:n)},N1=(t,e,i,n)=>{pn(()=>{const r=n.scrollTop;B1(t,e,r);const s=t[0],a=s.intersectionRect,f=a.width*a.height,_=s.rootBounds.width*s.rootBounds.height,y=f===0&&_===0,w=Math.abs(a.left-s.boundingClientRect.left),x=Math.abs(a.right-s.boundingClientRect.right),E=f>0&&(w>=5||x>=5);y||E||(s.isIntersecting?(to(e,!1),to(i)):(a.x===0&&a.y===0||a.width!==0&&a.height!==0)&&r>0&&(to(e),to(i,!1),Oh(e.el)))})},to=(t,e=!0)=>{const i=t.el;e?(i.classList.remove("header-collapse-condense-inactive"),i.removeAttribute("aria-hidden")):(i.classList.add("header-collapse-condense-inactive"),i.setAttribute("aria-hidden","true"))},$1=(t=[],e=1,i=!1)=>{t.forEach(n=>{const r=n.ionTitleEl,s=n.innerTitleEl;!r||r.size!=="large"||(s.style.transition=i?M1:"",s.style.transform=`scale3d(${e}, ${e}, 1)`)})},Vf=(t,e,i)=>{Do(()=>{const n=t.scrollTop,r=e.clientHeight,s=i?i.clientHeight:0;if(i!==null&&n<s){e.style.setProperty("--opacity-scale","0"),t.style.setProperty("clip-path",`inset(${r}px 0px 0px 0px)`);return}const a=n-s,_=jv(0,a/10,1);pn(()=>{t.style.removeProperty("clip-path"),e.style.setProperty("--opacity-scale",_.toString())})})},j1="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:7px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",V1='ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md::after{bottom:-5px;background-position:left 0 top -2px;position:absolute;width:100%;height:5px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAHBAMAAADzDtBxAAAAD1BMVEUAAAAAAAAAAAAAAAAAAABPDueNAAAABXRSTlMUCS0gBIh/TXEAAAAaSURBVAjXYxCEAgY4UIICBmMogMsgFLtAAQCNSwXZKOdPxgAAAABJRU5ErkJggg==);background-repeat:repeat-x;content:""}@supports (inset-inline-start: 0){.header-md::after{inset-inline-start:0}}@supports not (inset-inline-start: 0){.header-md::after{left:0}[dir=rtl] .header-md::after,:host-context([dir=rtl]) .header-md::after{left:unset;right:unset;right:0}}[dir=rtl] .header-md::after,:host-context([dir=rtl]) .header-md::after{background-position:right 0 top -2px}.header-collapse-condense{display:none}.header-md.ion-no-border::after{display:none}',U1=mi(class extends vi{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(e,i)=>{const n=this.scrollEl=await Ff(e);this.contentScrollCallback=()=>{Vf(this.scrollEl,this.el,i)},n.addEventListener("scroll",this.contentScrollCallback),Vf(this.scrollEl,this.el,i)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=xS(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if(Dt(this)!=="ios")return;const{collapse:i}=this,n=i==="condense",r=i==="fade";if(this.destroyCollapsibleHeader(),n){const s=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),a=s?Bf(s):null;pn(()=>{const f=$f("ion-title");f.size="large",$f("ion-back-button")}),await this.setupCondenseHeader(a,s)}else if(r){const s=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),a=s?Bf(s):null;if(!a){Nf(this.el);return}const f=a.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(a,f)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(e,i){if(!e||!i){Nf(this.el);return}if(typeof IntersectionObserver>"u")return;this.scrollEl=await Ff(e);const n=i.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(n).find(f=>f.collapse!=="condense"),!this.collapsibleMainHeader)return;const r=jf(this.collapsibleMainHeader),s=jf(this.el);if(!r||!s)return;to(r,!1),Oh(r.el,0);const a=f=>{N1(f,r,s,this.scrollEl)};this.intersectionObserver=new IntersectionObserver(a,{root:e,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(s.toolbars[s.toolbars.length-1].el),this.contentScrollCallback=()=>{F1(this.scrollEl,s,e)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),pn(()=>{this.collapsibleMainHeader!==void 0&&this.collapsibleMainHeader.classList.add("header-collapse-main")})}render(){const{translucent:e,inheritedAttributes:i}=this,n=Dt(this),r=this.collapse||"none",s=ll("ion-menu",this.el)?"none":"banner";return Ie(Ei,Object.assign({role:s,class:{[n]:!0,[`header-${n}`]:!0,["header-translucent"]:this.translucent,[`header-collapse-${r}`]:!0,[`header-translucent-${n}`]:this.translucent}},i),n==="ios"&&e&&Ie("div",{class:"header-background"}),Ie("slot",null))}get el(){return this}static get style(){return{ios:j1,md:V1}}},[36,"ion-header",{collapse:[1],translucent:[4]}]);function W1(){if(typeof customElements>"u")return;["ion-header"].forEach(e=>{switch(e){case"ion-header":customElements.get(e)||customElements.define(e,U1);break}})}const H1=W1;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const z1=D1,r_=1,o_=2,ha=3;class nu{constructor(e,i){this.component=e,this.params=i,this.state=r_}async init(e){if(this.state=o_,!this.element){const i=this.component;this.element=await e_(this.delegate,e,i,["ion-page","ion-page-invisible"],this.params)}}_destroy(){St(this.state!==ha,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=ha}}const Uf=(t,e,i)=>!t||t.component!==e?!1:Vv(t.params,i),Wf=(t,e)=>t?t instanceof nu?t:new nu(t,e):null,G1=t=>t.map(e=>e instanceof nu?e:"component"in e?Wf(e.component,e.componentProps===null?void 0:e.componentProps):Wf(e,void 0)).filter(e=>e!==null),Y1=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",X1=mi(class extends vi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=At(this,"ionNavWillLoad",7),this.ionNavWillChange=At(this,"ionNavWillChange",3),this.ionNavDidChange=At(this,"ionNavDidChange",3),this.transInstr=[],this.animationEnabled=!0,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&(this.useRouter||this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const e=Dt(this);this.swipeGesture=Ge.getBoolean("swipeBackEnabled",e==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.rootChanged(),this.gesture=(await Si(()=>import("./swipe-back-153f793e.js"),[])).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)Di(e.element,Kl),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,i,n,r){return this.insert(-1,e,i,n,r)}insert(e,i,n,r,s){return this.insertPages(e,[{component:i,componentProps:n}],r,s)}insertPages(e,i,n,r){return this.queueTrns({insertStart:e,insertViews:i,opts:n},r)}pop(e,i){return this.removeIndex(-1,1,e,i)}popTo(e,i,n){const r={removeStart:-1,removeCount:-1,opts:i};return typeof e=="object"&&e.component?(r.removeView=e,r.removeStart=1):typeof e=="number"&&(r.removeStart=e+1),this.queueTrns(r,n)}popToRoot(e,i){return this.removeIndex(1,-1,e,i)}removeIndex(e,i=1,n,r){return this.queueTrns({removeStart:e,removeCount:i,opts:n},r)}setRoot(e,i,n,r){return this.setPages([{component:e,componentProps:i}],n,r)}setPages(e,i,n){return i!=null||(i={}),i.animated!==!0&&(i.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:i},n)}setRouteId(e,i,n,r){const s=this.getActiveSync();if(Uf(s,e,i))return Promise.resolve({changed:!1,element:s.element});let a;const f=new Promise(w=>a=w);let _;const y={updateURL:!1,viewIsReady:w=>{let x;const E=new Promise(k=>x=k);return a({changed:!0,element:w,markVisible:async()=>{x(),await _}}),E}};if(n==="root")_=this.setRoot(e,i,y);else{const w=this.views.find(x=>Uf(x,e,i));w?_=this.popTo(w,Object.assign(Object.assign({},y),{direction:"back",animationBuilder:r})):n==="forward"?_=this.push(e,i,Object.assign(Object.assign({},y),{animationBuilder:r})):n==="back"&&(_=this.setRoot(e,i,Object.assign(Object.assign({},y),{direction:"back",animated:!0,animationBuilder:r})))}return f}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!!(e&&this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const i=this.views,n=i.indexOf(e);return n>0?i[n-1]:void 0}async queueTrns(e,i){var n,r;if(this.isTransitioning&&(!((n=e.opts)===null||n===void 0)&&n.skipIfBusy))return!1;const s=new Promise((a,f)=>{e.resolve=a,e.reject=f});if(e.done=i,e.opts&&e.opts.updateURL!==!1&&this.useRouter){const a=document.querySelector("ion-router");if(a){const f=await a.canTransition();if(f===!1)return!1;if(typeof f=="string")return a.push(f,e.opts.direction||"back"),!1}}return((r=e.insertViews)===null||r===void 0?void 0:r.length)===0&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),s}success(e,i){if(this.destroyed){this.fireError("nav controller was destroyed",i);return}if(i.done&&i.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),i.resolve(e.hasCompleted),i.opts.updateURL!==!1&&this.useRouter){const n=document.querySelector("ion-router");if(n){const r=e.direction==="back"?"back":"forward";n.navChanged(r)}}}failed(e,i){if(this.destroyed){this.fireError("nav controller was destroyed",i);return}this.transInstr.length=0,this.fireError(e,i)}fireError(e,i){i.done&&i.done(!1,!1,e),i.reject&&!this.destroyed?i.reject(e):i.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return e?(this.runTransition(e),!0):!1}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const i=this.getActiveSync(),n=this.getEnteringView(e,i);if(!i&&!n)throw new Error("no views in the stack to be removed");n&&n.state===r_&&await n.init(this.el),this.postViewInit(n,i,e);const r=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&n!==i;r&&e.opts&&i&&(e.opts.direction==="back"&&(e.opts.animationBuilder=e.opts.animationBuilder||(n==null?void 0:n.animationBuilder)),i.animationBuilder=e.opts.animationBuilder);let s;r?s=await this.transition(n,i,e):s={hasCompleted:!0,requiresTransition:!1},this.success(s,e),this.ionNavDidChange.emit()}catch(i){this.failed(i,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var i,n,r;const s=this.views.length;if((i=e.opts)!==null&&i!==void 0||(e.opts={}),(n=(r=e.opts).delegate)!==null&&n!==void 0||(r.delegate=this.delegate),e.removeView!==void 0){St(e.removeStart!==void 0,"removeView needs removeStart"),St(e.removeCount!==void 0,"removeView needs removeCount");const _=this.views.indexOf(e.removeView);if(_<0)throw new Error("removeView was not found");e.removeStart+=_}e.removeStart!==void 0&&(e.removeStart<0&&(e.removeStart=s-1),e.removeCount<0&&(e.removeCount=s-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===s),e.insertViews&&((e.insertStart<0||e.insertStart>s)&&(e.insertStart=s),e.enteringRequiresTransition=e.insertStart===s);const a=e.insertViews;if(!a)return;St(a.length>0,"length can not be zero");const f=G1(a);if(f.length===0)throw new Error("invalid views to insert");for(const _ of f){_.delegate=e.opts.delegate;const y=_.nav;if(y&&y!==this)throw new Error("inserted view was already inserted");if(_.state===ha)throw new Error("inserted view was already destroyed")}e.insertViews=f}getEnteringView(e,i){const n=e.insertViews;if(n!==void 0)return n[n.length-1];const r=e.removeStart;if(r!==void 0){const s=this.views,a=r+e.removeCount;for(let f=s.length-1;f>=0;f--){const _=s[f];if((f<r||f>=a)&&_!==i)return _}}}postViewInit(e,i,n){var r,s,a;St(i||e,"Both leavingView and enteringView are null"),St(n.resolve,"resolve must be valid"),St(n.reject,"reject must be valid");const f=n.opts,{insertViews:_,removeStart:y,removeCount:w}=n;let x;if(y!==void 0&&w!==void 0){St(y>=0,"removeStart can not be negative"),St(w>=0,"removeCount can not be negative"),x=[];for(let k=y;k<y+w;k++){const P=this.views[k];P!==void 0&&P!==e&&P!==i&&x.push(P)}(r=f.direction)!==null&&r!==void 0||(f.direction="back")}const E=this.views.length+((s=_==null?void 0:_.length)!==null&&s!==void 0?s:0)-(w!=null?w:0);if(St(E>=0,"final balance can not be negative"),E===0)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(_){let k=n.insertStart;for(const P of _)this.insertViewAt(P,k),k++;n.enteringRequiresTransition&&((a=f.direction)!==null&&a!==void 0||(f.direction="forward"))}if(x&&x.length>0){for(const k of x)Di(k.element,Uv),Di(k.element,Wv),Di(k.element,Kl);for(const k of x)this.destroyView(k)}}async transition(e,i,n){const r=n.opts,s=r.progressAnimation?x=>this.sbAni=x:void 0,a=Dt(this),f=e.element,_=i&&i.element,y=Object.assign(Object.assign({mode:a,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:s,animated:this.animated&&Ge.getBoolean("animated",!0),enteringEl:f,leavingEl:_},r),{animationBuilder:r.animationBuilder||this.animation||Ge.get("navAnimation")}),{hasCompleted:w}=await Hv(y);return this.transitionFinish(w,e,i,r)}transitionFinish(e,i,n,r){const s=e?i:n;return s&&this.unmountInactiveViews(s),{hasCompleted:e,requiresTransition:!0,enteringView:i,leavingView:n,direction:r.direction}}insertViewAt(e,i){const n=this.views,r=n.indexOf(e);r>-1?(St(e.nav===this,"view is not part of the nav"),n.splice(r,1),n.splice(i,0,e)):(St(!e.nav,"nav is used"),e.nav=this,n.splice(i,0,e))}removeView(e){St(e.state===o_||e.state===ha,"view state should be loaded or destroyed");const i=this.views,n=i.indexOf(e);St(n>-1,"view must be part of the stack"),n>=0&&i.splice(n,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const i=this.views,n=i.indexOf(e);for(let r=i.length-1;r>=0;r--){const s=i[r],a=s.element;a&&(r>n?(Di(a,Kl),this.destroyView(s)):r<n&&iu(a,!0))}}canStart(){return!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.animationEnabled&&this.canGoBackSync()}onStart(){this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,i,n){if(this.sbAni){this.animationEnabled=!1,this.sbAni.onFinish(()=>{this.animationEnabled=!0},{oneTimeCallback:!0});let r=e?-.001:.001;e?r+=ua([0,0],[.32,.72],[0,1],[1,1],i)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=ua([0,0],[1,0],[.68,.28],[1,1],i)[0]),this.sbAni.progressEnd(e?1:0,r,n)}}render(){return Ie("slot",null)}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return Y1}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);function K1(){if(typeof customElements>"u")return;["ion-nav"].forEach(e=>{switch(e){case"ion-nav":customElements.get(e)||customElements.define(e,X1);break}})}const q1=K1;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Z1=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:17px;font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:13px;font-weight:normal}:host(.title-large){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-webkit-transform-origin:left center;transform-origin:left center;bottom:0;-ms-flex-align:end;align-items:flex-end;min-width:100%;padding-bottom:6px;font-size:34px;font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}",J1=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:15px;font-weight:normal}",Q1=mi(class extends vi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=At(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const e=this.getSize();this.ionStyle.emit({[`title-${e}`]:!0})}getSize(){return this.size!==void 0?this.size:"default"}render(){const e=Dt(this),i=this.getSize();return Ie(Ei,{class:Wo(this.color,{[e]:!0,[`title-${i}`]:!0,"title-rtl":document.dir==="rtl"})},Ie("div",{class:"toolbar-title"},Ie("slot",null)))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:Z1,md:J1}}},[33,"ion-title",{color:[513],size:[1]}]);function eC(){if(typeof customElements>"u")return;["ion-title"].forEach(e=>{switch(e){case"ion-title":customElements.get(e)||customElements.define(e,Q1);break}})}const tC=eC;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const iC=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}:host(.toolbar-searchbar) ::slotted(ion-back-button){height:38px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",nC=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, #c1c4cd)));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}",rC=mi(class extends vi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const e=Array.from(this.el.querySelectorAll("ion-buttons")),i=e.find(s=>s.slot==="start");i&&i.classList.add("buttons-first-slot");const n=e.reverse(),r=n.find(s=>s.slot==="end")||n.find(s=>s.slot==="primary")||n.find(s=>s.slot==="secondary");r&&r.classList.add("buttons-last-slot")}childrenStyle(e){e.stopPropagation();const i=e.target.tagName,n=e.detail,r={},s=this.childrenStyles.get(i)||{};let a=!1;Object.keys(n).forEach(f=>{const _=`toolbar-${f}`,y=n[f];y!==s[_]&&(a=!0),y&&(r[_]=!0)}),a&&(this.childrenStyles.set(i,r),Jc(this))}render(){const e=Dt(this),i={};return this.childrenStyles.forEach(n=>{Object.assign(i,n)}),Ie(Ei,{class:Object.assign(Object.assign({},i),Wo(this.color,{[e]:!0,"in-toolbar":ll("ion-toolbar",this.el)}))},Ie("div",{class:"toolbar-background"}),Ie("div",{class:"toolbar-container"},Ie("slot",{name:"start"}),Ie("slot",{name:"secondary"}),Ie("div",{class:"toolbar-content"},Ie("slot",null)),Ie("slot",{name:"primary"}),Ie("slot",{name:"end"})))}get el(){return this}static get style(){return{ios:iC,md:nC}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);function oC(){if(typeof customElements>"u")return;["ion-toolbar"].forEach(e=>{switch(e){case"ion-toolbar":customElements.get(e)||customElements.define(e,rC);break}})}const sC=oC;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Hf;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(Hf||(Hf={}));const aC="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",lC=mi(class extends vi{constructor(){super(),this.__registerHost()}componentDidLoad(){uC(async()=>{const e=tn(window,"hybrid");if(Ge.getBoolean("_testing")||Si(()=>import("./index9-cf9c8dbe.js"),[]).then(n=>n.startTapClick(Ge)),Ge.getBoolean("statusTap",e)&&Si(()=>import("./status-tap-5d168aa7.js"),[]).then(n=>n.startStatusTap()),Ge.getBoolean("inputShims",cC())){const n=tn(window,"ios")?"ios":"android";Si(()=>import("./input-shims-ce603318.js"),[]).then(r=>r.startInputShims(Ge,n))}const i=await Si(()=>import("./hardware-back-button-77fd2980.js"),[]);Ge.getBoolean("hardwareBackButton",e)?i.startHardwareBackButton():i.blockHardwareBackButton(),typeof window<"u"&&Si(()=>import("./keyboard-78b51126.js"),[]).then(n=>n.startKeyboardAssist(window)),Si(()=>import("./focus-visible-56d4fbba.js"),[]).then(n=>this.focusVisible=n.startFocusVisible())})}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=Dt(this);return Ie(Ei,{class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":Ge.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return aC}},[0,"ion-app",{setFocus:[64]}]),cC=()=>!!(tn(window,"ios")&&tn(window,"mobile")||tn(window,"android")&&tn(window,"mobileweb")),uC=t=>{"requestIdleCallback"in window?window.requestIdleCallback(t):setTimeout(t,32)};function hC(){if(typeof customElements>"u")return;["ion-app"].forEach(e=>{switch(e){case"ion-app":customElements.get(e)||customElements.define(e,lC);break}})}const dC=hC,fC=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",pC=mi(class extends vi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=At(this,"ionNavWillLoad",7),this.ionNavWillChange=At(this,"ionNavWillChange",3),this.ionNavDidChange=At(this,"ionNavDidChange",3),this.gestureOrAnimationInProgress=!1,this.mode=Dt(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await Si(()=>import("./swipe-back-153f793e.js"),[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>e(),i=>{var n;return(n=this.ani)===null||n===void 0?void 0:n.progressStep(i)},(i,n,r)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(i)},{oneTimeCallback:!0});let s=i?-.001:.001;i?s+=ua([0,0],[.32,.72],[0,1],[1,1],n)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),s+=ua([0,0],[1,0],[.68,.28],[1,1],n)[0]),this.ani.progressEnd(i?1:0,s,r)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,i,n){const r=await this.lock();let s=!1;try{s=await this.transition(e,i,n)}catch(a){console.error(a)}return r(),s}async setRouteId(e,i,n,r){return{changed:await this.setRoot(e,i,{duration:n==="root"?0:void 0,direction:n==="back"?"back":"forward",animationBuilder:r}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,i,n){if(this.activeComponent===e&&Vv(i,this.activeParams))return!1;const r=this.activeEl,s=await e_(this.delegate,this.el,e,["ion-page","ion-page-invisible"],i);return this.activeComponent=e,this.activeEl=s,this.activeParams=i,await this.commit(s,r,n),await f1(this.delegate,r),!0}async transition(e,i,n={}){if(i===e)return!1;this.ionNavWillChange.emit();const{el:r,mode:s}=this,a=this.animated&&Ge.getBoolean("animated",!0),f=n.animationBuilder||this.animation||Ge.get("navAnimation");return await Hv(Object.assign(Object.assign({mode:s,animated:a,enteringEl:e,leavingEl:i,baseEl:r,deepWait:SS(r),progressCallback:n.progressAnimation?_=>{_!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,_.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),_.progressEnd(0,0,0)):this.ani=_}:void 0},n),{animationBuilder:f})),this.ionNavDidChange.emit(),!0}async lock(){const e=this.waitPromise;let i;return this.waitPromise=new Promise(n=>i=n),e!==void 0&&await e,i}render(){return Ie("slot",null)}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return fC}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);function gC(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(e=>{switch(e){case"ion-router-outlet":customElements.get(e)||customElements.define(e,pC);break}})}const mC=gC;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const vC=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-400, #999999));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",_C=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}",yC=mi(class extends vi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=At(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}connectedCallback(){this.keyboardCtrl=P1(e=>{this.keyboardVisible=e})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:e,translucent:i,keyboardVisible:n}=this,r=Dt(this),s=n&&this.el.getAttribute("slot")!=="top";return Ie(Ei,{role:"tablist","aria-hidden":s?"true":null,class:Wo(e,{[r]:!0,"tab-bar-translucent":i,"tab-bar-hidden":s})},Ie("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:vC,md:_C}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);function bC(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(e=>{switch(e){case"ion-tab-bar":customElements.get(e)||customElements.define(e,yC);break}})}const wC=bC;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const SC=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge),:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',CC=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}[dir=rtl] ::slotted(ion-icon),:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge),:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',xC=mi(class extends vi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=At(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{(e.key==="Enter"||e.key===" ")&&this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const i=e.target,n=this.el.parentElement;(e.composedPath().includes(n)||i!=null&&i.contains(this.el))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},$v(this.el,["aria-label"])),this.layout===void 0&&(this.layout=Ge.get("tabButtonLayout","icon-top"))}selectTab(e){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:i,hasLabel:n,href:r,rel:s,target:a,layout:f,selected:_,tab:y,inheritedAttributes:w}=this,x=Dt(this),E={download:this.download,href:r,rel:s,target:a};return Ie(Ei,{onClick:this.onClick,onKeyup:this.onKeyUp,id:y!==void 0?`tab-button-${y}`:null,class:{[x]:!0,"tab-selected":_,"tab-disabled":e,"tab-has-label":n,"tab-has-icon":i,"tab-has-label-only":n&&!i,"tab-has-icon-only":i&&!n,[`tab-layout-${f}`]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},Ie("a",Object.assign({},E,{class:"button-native",part:"native",role:"tab","aria-selected":_?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},w),Ie("span",{class:"button-inner"},Ie("slot",null)),x==="md"&&Ie("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:SC,md:CC}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function TC(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,xC);break;case"ion-ripple-effect":customElements.get(e)||b1();break}})}const EC=TC,qn={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Zn,s_,cl,a_=!1,da=!1,Rh=!1,Bt=!1,zf=null,ru=!1;const IC=t=>{const e=new URL(t,pt.$resourcesUrl$);return e.origin!==zo.location.origin?e.href:e.pathname},$n=(t,e="")=>()=>{},Gf="http://www.w3.org/1999/xlink",Yf={},OC="http://www.w3.org/2000/svg",RC="http://www.w3.org/1999/xhtml",AC=t=>t!=null,Ah=t=>(t=typeof t,t==="object"||t==="function");function kC(t){var e,i,n;return(n=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&n!==void 0?n:void 0}const fo=(t,e,...i)=>{let n=null,r=null,s=null,a=!1,f=!1;const _=[],y=x=>{for(let E=0;E<x.length;E++)n=x[E],Array.isArray(n)?y(n):n!=null&&typeof n!="boolean"&&((a=typeof t!="function"&&!Ah(n))&&(n=String(n)),a&&f?_[_.length-1].$text$+=n:_.push(a?fa(null,n):n),f=a)};if(y(i),e){e.key&&(r=e.key),e.name&&(s=e.name);{const x=e.className||e.class;x&&(e.class=typeof x!="object"?x:Object.keys(x).filter(E=>x[E]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,_,LC);const w=fa(t,null);return w.$attrs$=e,_.length>0&&(w.$children$=_),w.$key$=r,w.$name$=s,w},fa=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},l_={},DC=t=>t&&t.$tag$===l_,LC={forEach:(t,e)=>t.map(Xf).forEach(e),map:(t,e)=>t.map(Xf).map(e).map(PC)},Xf=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),PC=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),fo(t.vtag,i,...t.vchildren||[])}const e=fa(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},MC=t=>ax.map(e=>e(t)).find(e=>!!e),FC=(t,e)=>t!=null&&!Ah(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,Kf=new WeakMap,BC=(t,e,i)=>{let n=ga.get(t);hx&&i?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,ga.set(t,n)},NC=(t,e,i,n)=>{var r;let s=c_(e,i);const a=ga.get(s);if(t=t.nodeType===11?t:pi,a)if(typeof a=="string"){t=t.head||t;let f=Kf.get(t),_;if(f||Kf.set(t,f=new Set),!f.has(s)){{_=pi.createElement("style"),_.innerHTML=a;const y=(r=pt.$nonce$)!==null&&r!==void 0?r:kC(pi);y!=null&&_.setAttribute("nonce",y),t.insertBefore(_,t.querySelector("link"))}f&&f.add(s)}}else t.adoptedStyleSheets.includes(a)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,a]);return s},$C=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,n=e.$flags$,r=$n("attachStyles",e.$tagName$),s=NC(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);n&10&&(i["s-sc"]=s,i.classList.add(s+"-h"),n&2&&i.classList.add(s+"-s")),r()},c_=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),qf=(t,e,i,n,r,s)=>{if(i!==n){let a=ep(t,e),f=e.toLowerCase();if(e==="class"){const _=t.classList,y=Zf(i),w=Zf(n);_.remove(...y.filter(x=>x&&!w.includes(x))),_.add(...w.filter(x=>x&&!y.includes(x)))}else if(e==="style"){for(const _ in i)(!n||n[_]==null)&&(_.includes("-")?t.style.removeProperty(_):t.style[_]="");for(const _ in n)(!i||n[_]!==i[_])&&(_.includes("-")?t.style.setProperty(_,n[_]):t.style[_]=n[_])}else if(e!=="key")if(e==="ref")n&&n(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):ep(zo,f)?e=f.slice(2):e=f[2]+e.slice(3),i&&pt.rel(t,e,i,!1),n&&pt.ael(t,e,n,!1);else{const _=Ah(n);if((a||_&&n!==null)&&!r)try{if(t.tagName.includes("-"))t[e]=n;else{const w=n==null?"":n;e==="list"?a=!1:(i==null||t[e]!=w)&&(t[e]=w)}}catch(w){}let y=!1;f!==(f=f.replace(/^xlink\:?/,""))&&(e=f,y=!0),n==null||n===!1?(n!==!1||t.getAttribute(e)==="")&&(y?t.removeAttributeNS(Gf,e):t.removeAttribute(e)):(!a||s&4||r)&&!_&&(n=n===!0?"":n,y?t.setAttributeNS(Gf,e,n):t.setAttribute(e,n))}}},jC=/\s/,Zf=t=>t?t.split(jC):[],u_=(t,e,i,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||Yf,a=e.$attrs$||Yf;for(n in s)n in a||qf(r,n,s[n],void 0,i,e.$flags$);for(n in a)qf(r,n,s[n],a[n],i,e.$flags$)},pa=(t,e,i,n)=>{const r=e.$children$[i];let s=0,a,f,_;if(a_||(Rh=!0,r.$tag$==="slot"&&(Zn&&n.classList.add(Zn+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)a=r.$elm$=pi.createTextNode(r.$text$);else if(r.$flags$&1)a=r.$elm$=pi.createTextNode("");else{if(Bt||(Bt=r.$tag$==="svg"),a=r.$elm$=pi.createElementNS(Bt?OC:RC,r.$flags$&2?"slot-fb":r.$tag$),Bt&&r.$tag$==="foreignObject"&&(Bt=!1),u_(null,r,Bt),AC(Zn)&&a["s-si"]!==Zn&&a.classList.add(a["s-si"]=Zn),r.$children$)for(s=0;s<r.$children$.length;++s)f=pa(t,r,s,a),f&&a.appendChild(f);r.$tag$==="svg"?Bt=!1:a.tagName==="foreignObject"&&(Bt=!0)}return a["s-hn"]=cl,r.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=s_,a["s-sn"]=r.$name$||"",_=t&&t.$children$&&t.$children$[i],_&&_.$tag$===r.$tag$&&t.$elm$&&Po(t.$elm$,!1)),a},Po=(t,e)=>{pt.$flags$|=1;const i=t.childNodes;for(let n=i.length-1;n>=0;n--){const r=i[n];r["s-hn"]!==cl&&r["s-ol"]&&(f_(r).insertBefore(r,kh(r)),r["s-ol"].remove(),r["s-ol"]=void 0,Rh=!0),e&&Po(r,e)}pt.$flags$&=-2},h_=(t,e,i,n,r,s)=>{let a=t["s-cr"]&&t["s-cr"].parentNode||t,f;for(a.shadowRoot&&a.tagName===cl&&(a=a.shadowRoot);r<=s;++r)n[r]&&(f=pa(null,i,r,t),f&&(n[r].$elm$=f,a.insertBefore(f,kh(e))))},d_=(t,e,i,n,r)=>{for(;e<=i;++e)(n=t[e])&&(r=n.$elm$,m_(n),da=!0,r["s-ol"]?r["s-ol"].remove():Po(r,!0),r.remove())},VC=(t,e,i,n)=>{let r=0,s=0,a=0,f=0,_=e.length-1,y=e[0],w=e[_],x=n.length-1,E=n[0],k=n[x],P,M;for(;r<=_&&s<=x;)if(y==null)y=e[++r];else if(w==null)w=e[--_];else if(E==null)E=n[++s];else if(k==null)k=n[--x];else if(gs(y,E))Jn(y,E),y=e[++r],E=n[++s];else if(gs(w,k))Jn(w,k),w=e[--_],k=n[--x];else if(gs(y,k))(y.$tag$==="slot"||k.$tag$==="slot")&&Po(y.$elm$.parentNode,!1),Jn(y,k),t.insertBefore(y.$elm$,w.$elm$.nextSibling),y=e[++r],k=n[--x];else if(gs(w,E))(y.$tag$==="slot"||k.$tag$==="slot")&&Po(w.$elm$.parentNode,!1),Jn(w,E),t.insertBefore(w.$elm$,y.$elm$),w=e[--_],E=n[++s];else{for(a=-1,f=r;f<=_;++f)if(e[f]&&e[f].$key$!==null&&e[f].$key$===E.$key$){a=f;break}a>=0?(M=e[a],M.$tag$!==E.$tag$?P=pa(e&&e[s],i,a,t):(Jn(M,E),e[a]=void 0,P=M.$elm$),E=n[++s]):(P=pa(e&&e[s],i,s,t),E=n[++s]),P&&f_(y.$elm$).insertBefore(P,kh(y.$elm$))}r>_?h_(t,n[x+1]==null?null:n[x+1].$elm$,i,n,s,x):s>x&&d_(e,r,_)},gs=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,kh=t=>t&&t["s-ol"]||t,f_=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Jn=(t,e)=>{const i=e.$elm$=t.$elm$,n=t.$children$,r=e.$children$,s=e.$tag$,a=e.$text$;let f;a===null?(Bt=s==="svg"?!0:s==="foreignObject"?!1:Bt,s==="slot"||u_(t,e,Bt),n!==null&&r!==null?VC(i,n,e,r):r!==null?(t.$text$!==null&&(i.textContent=""),h_(i,null,e,r,0,r.length-1)):n!==null&&d_(n,0,n.length-1),Bt&&s==="svg"&&(Bt=!1)):(f=i["s-cr"])?f.parentNode.textContent=a:t.$text$!==a&&(i.data=a)},p_=t=>{const e=t.childNodes;let i,n,r,s,a,f;for(n=0,r=e.length;n<r;n++)if(i=e[n],i.nodeType===1){if(i["s-sr"]){for(a=i["s-sn"],i.hidden=!1,s=0;s<r;s++)if(f=e[s].nodeType,e[s]["s-hn"]!==i["s-hn"]||a!==""){if(f===1&&a===e[s].getAttribute("slot")){i.hidden=!0;break}}else if(f===1||f===3&&e[s].textContent.trim()!==""){i.hidden=!0;break}}p_(i)}},ui=[],g_=t=>{let e,i,n,r,s,a,f=0;const _=t.childNodes,y=_.length;for(;f<y;f++){if(e=_[f],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(n=i.parentNode.childNodes,r=e["s-sn"],a=n.length-1;a>=0;a--)i=n[a],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(Jf(i,r)?(s=ui.find(w=>w.$nodeToRelocate$===i),da=!0,i["s-sn"]=i["s-sn"]||r,s?s.$slotRefNode$=e:ui.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&ui.map(w=>{Jf(w.$nodeToRelocate$,i["s-sn"])&&(s=ui.find(x=>x.$nodeToRelocate$===i),s&&!w.$slotRefNode$&&(w.$slotRefNode$=s.$slotRefNode$))})):ui.some(w=>w.$nodeToRelocate$===i)||ui.push({$nodeToRelocate$:i}));e.nodeType===1&&g_(e)}},Jf=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",m_=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(m_)},UC=(t,e)=>{const i=t.$hostElement$,n=t.$cmpMeta$,r=t.$vnode$||fa(null,null),s=DC(e)?e:fo(null,null,e);cl=i.tagName,n.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},n.$attrsToReflect$.map(([a,f])=>s.$attrs$[f]=i[a])),s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=r.$elm$=i.shadowRoot||i,Zn=i["s-sc"],s_=i["s-cr"],a_=(n.$flags$&1)!==0,da=!1,Jn(r,s);{if(pt.$flags$|=1,Rh){g_(s.$elm$);let a,f,_,y,w,x,E=0;for(;E<ui.length;E++)a=ui[E],f=a.$nodeToRelocate$,f["s-ol"]||(_=pi.createTextNode(""),_["s-nr"]=f,f.parentNode.insertBefore(f["s-ol"]=_,f));for(E=0;E<ui.length;E++)if(a=ui[E],f=a.$nodeToRelocate$,a.$slotRefNode$){for(y=a.$slotRefNode$.parentNode,w=a.$slotRefNode$.nextSibling,_=f["s-ol"];_=_.previousSibling;)if(x=_["s-nr"],x&&x["s-sn"]===f["s-sn"]&&y===x.parentNode&&(x=x.nextSibling,!x||!x["s-nr"])){w=x;break}(!w&&y!==f.parentNode||f.nextSibling!==w)&&f!==w&&(!f["s-hn"]&&f["s-ol"]&&(f["s-hn"]=f["s-ol"].parentNode.nodeName),y.insertBefore(f,w))}else f.nodeType===1&&(f.hidden=!0)}da&&p_(s.$elm$),pt.$flags$&=-2,ui.length=0}},WC=(t,e)=>{},v_=(t,e)=>(t.$flags$|=16,WC(t,t.$ancestorComponent$),px(()=>HC(t,e))),HC=(t,e)=>{const i=t.$hostElement$,n=$n("scheduleUpdate",t.$cmpMeta$.$tagName$),r=i;let s;return e?s=_r(r,"componentWillLoad"):s=_r(r,"componentWillUpdate"),s=Qf(s,()=>_r(r,"componentWillRender")),n(),Qf(s,()=>zC(t,r,e))},zC=async(t,e,i)=>{const n=t.$hostElement$,r=$n("update",t.$cmpMeta$.$tagName$);n["s-rc"],i&&$C(t);const s=$n("render",t.$cmpMeta$.$tagName$);GC(t,e,n),s(),r(),YC(t)},GC=(t,e,i)=>{try{zf=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(qn.hasRenderFn||qn.reflect)&&(qn.vdomRender||qn.reflect)&&(qn.hydrateServerSide||UC(t,e))}catch(f){Ho(f,t.$hostElement$)}return zf=null,null},YC=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,n=$n("postUpdate",e),r=i;t.$ancestorComponent$,_r(r,"componentDidRender"),t.$flags$&64?(_r(r,"componentDidUpdate"),n()):(t.$flags$|=64,_r(r,"componentDidLoad"),n())},_r=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(n){Ho(n)}},Qf=(t,e)=>t&&t.then?t.then(e):e(),XC=(t,e)=>ul(t).$instanceValues$.get(e),KC=(t,e,i,n)=>{const r=ul(t),s=t,a=r.$instanceValues$.get(e),f=r.$flags$,_=s;i=FC(i,n.$members$[e][0]);const y=Number.isNaN(a)&&Number.isNaN(i);if(i!==a&&!y){r.$instanceValues$.set(e,i);{if(n.$watchers$&&f&128){const x=n.$watchers$[e];x&&x.map(E=>{try{_[E](i,a,e)}catch(k){Ho(k,s)}})}if((f&18)===2){if(_.componentShouldUpdate&&_.componentShouldUpdate(i,a,e)===!1)return;v_(r,!1)}}}},qC=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const n=Object.entries(e.$members$),r=t.prototype;n.map(([s,[a]])=>{(a&31||a&32)&&Object.defineProperty(r,s,{get(){return XC(this,s)},set(f){KC(this,s,f,e)},configurable:!0,enumerable:!0})});{const s=new Map;r.attributeChangedCallback=function(a,f,_){pt.jmp(()=>{const y=s.get(a);if(this.hasOwnProperty(y))_=this[y],delete this[y];else if(r.hasOwnProperty(y)&&typeof this[y]=="number"&&this[y]==_)return;this[y]=_===null&&typeof this[y]=="boolean"?!1:_})},t.observedAttributes=n.filter(([a,f])=>f[0]&15).map(([a,f])=>{const _=f[1]||a;return s.set(_,a),f[0]&512&&e.$attrsToReflect$.push([a,_]),_})}}return t},ZC=async(t,e,i,n,r)=>{if(!(e.$flags$&32)&&(r=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),r.style)){let a=r.style;typeof a!="string"&&(a=a[e.$modeName$=MC(t)]);const f=c_(i,e.$modeName$);if(!ga.has(f)){const _=$n("registerStyles",i.$tagName$);BC(f,a,!!(i.$flags$&1)),_()}}e.$ancestorComponent$,(()=>v_(e,!0))()},JC=t=>{},QC=t=>{if(!(pt.$flags$&1)){const e=ul(t),i=e.$cmpMeta$,n=$n("connectedCallback",i.$tagName$);e.$flags$&1?(__(t,e,i.$listeners$),JC(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&ex(t),i.$members$&&Object.entries(i.$members$).map(([r,[s]])=>{if(s&31&&t.hasOwnProperty(r)){const a=t[r];delete t[r],t[r]=a}}),ZC(t,e,i)),n()}},ex=t=>{const e=t["s-cr"]=pi.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},tx=t=>{if(!(pt.$flags$&1)){const e=ul(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},ix=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const n=t.prototype.connectedCallback,r=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){sx(this,i)},connectedCallback(){QC(this),n&&n.call(this)},disconnectedCallback(){tx(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,qC(t,i)},__=(t,e,i,n)=>{i&&i.map(([r,s,a])=>{const f=rx(t,r),_=nx(e,a),y=ox(r);pt.ael(f,s,_,y),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>pt.rel(f,s,_,y))})},nx=(t,e)=>i=>{try{qn.lazyLoad||t.$hostElement$[e](i)}catch(n){Ho(n)}},rx=(t,e)=>e&4?pi:e&8?zo:e&16?pi.body:t,ox=t=>cx?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,y_=new WeakMap,ul=t=>y_.get(t),sx=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return __(t,i,e.$listeners$),y_.set(t,i)},ep=(t,e)=>e in t,Ho=(t,e)=>(0,console.error)(t,e),ga=new Map,ax=[],zo=typeof window<"u"?window:{},pi=zo.document||{head:{}},lx=zo.HTMLElement||class{},pt={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,n)=>t.addEventListener(e,i,n),rel:(t,e,i,n)=>t.removeEventListener(e,i,n),ce:(t,e)=>new CustomEvent(t,e)},cx=(()=>{let t=!1;try{pi.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch(e){}return t})(),ux=t=>Promise.resolve(t),hx=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(t){}return!1})(),tp=[],b_=[],dx=(t,e)=>i=>{t.push(i),ru||(ru=!0,e&&pt.$flags$&4?fx(ou):pt.raf(ou))},ip=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){Ho(i)}t.length=0},ou=()=>{ip(tp),ip(b_),(ru=tp.length>0)&&pt.raf(ou)},fx=t=>ux().then(t),px=dx(b_,!0);let ql;const gx=()=>{if(typeof window>"u")return new Map;if(!ql){const t=window;t.Ionicons=t.Ionicons||{},ql=t.Ionicons.map=t.Ionicons.map||new Map}return ql},mx=t=>{let e=Zl(t.src);return e||(e=w_(t.name,t.icon,t.mode,t.ios,t.md),e?vx(e):t.icon&&(e=Zl(t.icon),e||(e=Zl(t.icon[t.mode]),e))?e:null)},vx=t=>{const e=gx().get(t);return e||IC(`svg/${t}.svg`)},w_=(t,e,i,n,r)=>(i=(i&&ms(i))==="ios"?"ios":"md",n&&i==="ios"?t=ms(n):r&&i==="md"?t=ms(r):(!t&&e&&!S_(e)&&(t=e),ma(t)&&(t=ms(t))),!ma(t)||t.trim()===""||t.replace(/[a-z]|-|\d/gi,"")!==""?null:t),Zl=t=>ma(t)&&(t=t.trim(),S_(t))?t:null,S_=t=>t.length>0&&/(\/|\.)/.test(t),ma=t=>typeof t=="string",ms=t=>t.toLowerCase(),_x=(t,e=[])=>{const i={};return e.forEach(n=>{t.hasAttribute(n)&&(t.getAttribute(n)!==null&&(i[n]=t.getAttribute(n)),t.removeAttribute(n))}),i},yx=t=>t&&t.dir!==""?t.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",bx=t=>{const e=document.createElement("div");e.innerHTML=t;for(let n=e.childNodes.length-1;n>=0;n--)e.childNodes[n].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[n]);const i=e.firstElementChild;if(i&&i.nodeName.toLowerCase()==="svg"){const n=i.getAttribute("class")||"";if(i.setAttribute("class",(n+" s-ion-icon").trim()),C_(i))return e.innerHTML}return""},C_=t=>{if(t.nodeType===1){if(t.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<t.attributes.length;e++){const i=t.attributes[e].name;if(ma(i)&&i.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<t.childNodes.length;e++)if(!C_(t.childNodes[e]))return!1}return!0},wx=t=>t.startsWith("data:image/svg+xml"),Sx=t=>t.indexOf(";utf8,")!==-1,En=new Map,np=new Map;let Jl;const Cx=(t,e)=>{let i=np.get(t);if(!i)if(typeof fetch<"u"&&typeof document<"u")if(wx(t)&&Sx(t)){Jl||(Jl=new DOMParser);const r=Jl.parseFromString(t,"text/html").querySelector("svg");return r&&En.set(t,r.outerHTML),Promise.resolve()}else i=fetch(t).then(n=>{if(n.ok)return n.text().then(r=>{r&&e!==!1&&(r=bx(r)),En.set(t,r||"")});En.set(t,"")}),np.set(t,i);else return En.set(t,""),Promise.resolve();return i},xx=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",Tx=ix(class extends lx{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=Ex(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=_x(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(t,e,i){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const n=this.io=new window.IntersectionObserver(r=>{r[0].isIntersecting&&(n.disconnect(),this.io=void 0,i())},{rootMargin:e});n.observe(t)}else i()}loadIcon(){if(this.isVisible){const t=mx(this);t&&(En.has(t)?this.svgContent=En.get(t):Cx(t,this.sanitize).then(()=>this.svgContent=En.get(t)))}this.iconName=w_(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{iconName:t,el:e,inheritedAttributes:i}=this,n=this.mode||"md",r=this.flipRtl||t&&(t.indexOf("arrow")>-1||t.indexOf("chevron")>-1)&&this.flipRtl!==!1;return fo(l_,Object.assign({role:"img",class:Object.assign(Object.assign({[n]:!0},Ix(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":!!r&&yx(e)})},i),this.svgContent?fo("div",{class:"icon-inner",innerHTML:this.svgContent}):fo("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return xx}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),Ex=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",Ix=t=>t?{"ion-color":!0,[`ion-color-${t}`]:!0}:null;function Ox(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,Tx);break}})}const Rx=Ox,Dh=re.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{}}),Ax=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}onIonViewWillEnter(t){if(t.id){const e=this.ionViewWillEnterCallbacks.findIndex(i=>i.id===t.id);e>-1?this.ionViewWillEnterCallbacks[e]=t:this.ionViewWillEnterCallbacks.push(t)}else this.ionViewWillEnterCallbacks.push(t)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach(t=>t())}onIonViewDidEnter(t){if(t.id){const e=this.ionViewDidEnterCallbacks.findIndex(i=>i.id===t.id);e>-1?this.ionViewDidEnterCallbacks[e]=t:this.ionViewDidEnterCallbacks.push(t)}else this.ionViewDidEnterCallbacks.push(t)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach(t=>t())}onIonViewWillLeave(t){if(t.id){const e=this.ionViewWillLeaveCallbacks.findIndex(i=>i.id===t.id);e>-1?this.ionViewWillLeaveCallbacks[e]=t:this.ionViewWillLeaveCallbacks.push(t)}else this.ionViewWillLeaveCallbacks.push(t)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach(t=>t())}onIonViewDidLeave(t){if(t.id){const e=this.ionViewDidLeaveCallbacks.findIndex(i=>i.id===t.id);e>-1?this.ionViewDidLeaveCallbacks[e]=t:this.ionViewDidLeaveCallbacks.push(t)}else this.ionViewDidLeaveCallbacks.push(t)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach(t=>t()),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(t){this.componentCanBeDestroyedCallback=t}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},Wi=re.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:t=>{typeof window<"u"&&(typeof t=="string"?window.location.pathname=t:window.history.back())},navigate:t=>{typeof window<"u"&&(window.location.pathname=t)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(t,e)=>{typeof window<"u"&&(window.location.pathname=e)},resetTab:(t,e)=>{typeof window<"u"&&(window.location.pathname=e)}}),kx=t=>t.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),x_=t=>t.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`),Dx=(t,e,i={})=>{if(t instanceof Element){const n=Lx(t.classList,e,i);n!==""&&(t.className=n),Object.keys(e).forEach(r=>{if(!(r==="children"||r==="style"||r==="ref"||r==="class"||r==="className"||r==="forwardedRef"))if(r.indexOf("on")===0&&r[2]===r[2].toUpperCase()){const s=r.substring(2),a=s[0].toLowerCase()+s.substring(1);T_(a)||Px(t,a,e[r])}else t[r]=e[r],typeof e[r]==="string"&&t.setAttribute(x_(r),e[r])})}},Lx=(t,e,i)=>{const n=e.className||e.class,r=i.className||i.class,s=Ql(t),a=Ql(n?n.split(" "):[]),f=Ql(r?r.split(" "):[]),_=[];return s.forEach(y=>{a.has(y)?(_.push(y),a.delete(y)):f.has(y)||_.push(y)}),a.forEach(y=>_.push(y)),_.join(" ")};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const T_=t=>{if(typeof document>"u")return!0;{const e="on"+t;let i=e in document;if(!i){const n=document.createElement("div");n.setAttribute(e,"return;"),i=typeof n[e]=="function"}return i}},Px=(t,e,i)=>{const n=t.__events||(t.__events={}),r=n[e];r&&t.removeEventListener(e,r),t.addEventListener(e,n[e]=function(a){i&&i.call(this,a)})},Ql=t=>{const e=new Map;return t.forEach(i=>e.set(i,i)),e},Mx=(t,e)=>{typeof t=="function"?t(e):t!=null&&(t.current=e)},E_=(...t)=>e=>{t.forEach(i=>{Mx(i,e)})},Fx=(t,e)=>{const i=(n,r)=>re.createElement(t,Object.assign({},n,{forwardedRef:r}));return i.displayName=e,re.forwardRef(i)},_i=(t,e,i,n)=>{n!==void 0&&n();const r=kx(t),s=class extends re.Component{constructor(a){super(a),this.setComponentElRef=f=>{this.componentEl=f}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){Dx(this.componentEl,this.props,a)}render(){const a=this.props,{children:f,forwardedRef:_,style:y,className:w,ref:x}=a,E=vt(a,["children","forwardedRef","style","className","ref"]);let k=Object.keys(E).reduce((M,V)=>{const L=E[V];if(V.indexOf("on")===0&&V[2]===V[2].toUpperCase()){const R=V.substring(2).toLowerCase();typeof document<"u"&&T_(R)&&(M[V]=L)}else{const R=typeof L;(R==="string"||R==="boolean"||R==="number")&&(M[x_(V)]=L)}return M},{});i&&(k=i(this.props,k));const P=Object.assign(Object.assign({},k),{ref:E_(_,this.setComponentElRef),style:y});return Qt.createElement(t,P,f)}static get displayName(){return r}};return e&&(s.contextType=e),Fx(s,r)},Lh=_i("ion-content",void 0,void 0,O1),Or=_i("ion-header",void 0,void 0,H1),ec=_i("ion-label",void 0,void 0,z1),Rr=_i("ion-title",void 0,void 0,tC),Ar=_i("ion-toolbar",void 0,void 0,sC),Go=(t,e)=>{const i=(n,r)=>re.createElement(t,Object.assign({},n,{forwardedRef:r}));return i.displayName=e,re.forwardRef(i)},Ph=()=>{if(typeof window<"u"){const t=window.Ionic;if(t&&t.config)return t.config}return null},Bx=re.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),Nx=({onAddOverlay:t,onRemoveOverlay:e})=>{const[i,n]=Qt.useState({}),r=Qt.useRef({});r.current=i,Qt.useEffect(()=>{t(s),e(a)},[]);const s=(_,y,w)=>{const x=Object.assign({},r.current);x[_]={component:y,containerElement:w},n(x)},a=_=>{const y=Object.assign({},r.current);delete y[_],n(y)},f=Object.keys(i);return re.createElement(re.Fragment,null,f.map(_=>{const y=i[_];return yb.createPortal(y.component,y.containerElement,`overlay-${_}`)}))},$x=_i("ion-tab-button",void 0,void 0,EC),jx=_i("ion-tab-bar",void 0,void 0,wC),su=_i("ion-router-outlet",void 0,void 0,mC),Vx=_i("ion-app",void 0,void 0,dC),Ux=_i("ion-icon",void 0,void 0,Rx),Wx=(()=>class extends re.Component{constructor(t){super(t),this.ionContext={addOverlay:(e,i,n)=>{this.addOverlayCallback&&this.addOverlayCallback(e,i,n)},removeOverlay:e=>{this.removeOverlayCallback&&this.removeOverlayCallback(e)}}}render(){return re.createElement(Bx.Provider,{value:this.ionContext},re.createElement(Vx,Object.assign({},this.props),this.props.children),re.createElement(Nx,{onAddOverlay:t=>{this.addOverlayCallback=t},onRemoveOverlay:t=>{this.removeOverlayCallback=t}}))}static get displayName(){return"IonApp"}})(),Mh=re.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class Fh extends re.PureComponent{constructor(e){super(e),this.ionPageElementRef=re.createRef(),this.stableMergedRefs=E_(this.ionPageElementRef,this.props.forwardedRef)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{className:i,children:n,routeInfo:r,forwardedRef:s}=e,a=vt(e,["className","children","routeInfo","forwardedRef"]);return re.createElement(Dh.Consumer,null,f=>(this.ionLifeCycleContext=f,re.createElement("div",Object.assign({className:i?`${i} ion-page`:"ion-page",ref:this.stableMergedRefs},a),n)))}static get contextType(){return Mh}}class Hx extends re.Component{constructor(e){super(e)}render(){const e=this.props,{className:i,children:n,forwardedRef:r}=e,s=vt(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?re.createElement(Fh,Object.assign({className:i?`${i}`:"",routeInfo:this.context.routeInfo,forwardedRef:r},s),n):re.createElement("div",Object.assign({className:i?`ion-page ${i}`:"ion-page",ref:r},s),n)}static get displayName(){return"IonPage"}static get contextType(){return Wi}}const Bh=Go(Hx,"IonPage"),zx=(t,e)=>{const i=new WeakMap;return{attachViewToDom:async(s,a,f,_)=>{const y=document.createElement("div");_&&y.classList.add(..._),s.appendChild(y);const w=a(f),x=ah.createPortal(w,y);return i.set(y,x),t(x),Promise.resolve(y)},removeViewFromDom:(s,a)=>{const f=i.get(a);return f&&e(f),a.remove(),Promise.resolve()}}},Gx=_i("ion-nav",void 0,void 0,q1),Yx=t=>{var{children:e,forwardedRef:i}=t,n=vt(t,["children","forwardedRef"]);const[r,s]=Qt.useState([]),a=y=>s(w=>[...w,y]),f=y=>s(w=>w.filter(x=>x!==y)),_=Qt.useMemo(()=>zx(a,f),[]);return re.createElement(Gx,Object.assign({delegate:_,ref:i},n),r)};Go(Yx,"IonNav");const Xx=re.createContext({activeTab:void 0,selectTab:()=>!1}),Kx=typeof HTMLElement<"u"?HTMLElement:class{};class qx extends re.Component{constructor(e){super(e),this.outletIsReady=!1}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||Lo(this.ionRouterOutlet,()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)}),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{StackManager:i,children:n,routeInfo:r}=e,s=vt(e,["StackManager","children","routeInfo"]);return re.createElement(Dh.Consumer,null,a=>(this.ionLifeCycleContext=a,re.createElement(i,{routeInfo:r},re.createElement(su,Object.assign({setRef:f=>this.ionRouterOutlet=f},s),n))))}static get contextType(){return Mh}}class Zx extends re.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),i=this.props,{children:n,forwardedRef:r}=i,s=vt(i,["children","forwardedRef"]);return this.context.hasIonicRouter()?s.ionPage?re.createElement(qx,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},s),n):re.createElement(e,{routeInfo:this.context.routeInfo},re.createElement(su,Object.assign({},s,{forwardedRef:r}),n)):re.createElement(su,Object.assign({ref:r},this.props),this.props.children)}static get contextType(){return Wi}}const au=Go(Zx,"IonRouterOutlet"),yr=(()=>class extends re.Component{constructor(t){super(t),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const t=this.props,e=vt(t,["onClick"]);return re.createElement($x,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}static get displayName(){return"IonTabButton"}})();class Jx extends re.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=n=>{};const i={};re.Children.forEach(e.children,n=>{var r,s,a,f;n!=null&&typeof n=="object"&&n.props&&(n.type===yr||n.type.isTabButton)&&(i[n.props.tab]={originalHref:n.props.href,currentHref:n.props.href,originalRouteOptions:n.props.href===((r=e.routeInfo)===null||r===void 0?void 0:r.pathname)?(s=e.routeInfo)===null||s===void 0?void 0:s.routeOptions:void 0,currentRouteOptions:n.props.href===((a=e.routeInfo)===null||a===void 0?void 0:a.pathname)?(f=e.routeInfo)===null||f===void 0?void 0:f.routeOptions:void 0})}),this.state={tabs:i},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,n=Object.keys(e).find(r=>{const s=e[r].originalHref;return this.props.routeInfo.pathname.startsWith(s)});n&&this.setState({activeTab:n})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const i=this.state.tabs[e];return i?(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:i.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0):!1}static getDerivedStateFromProps(e,i){var n,r,s;const a=Object.assign({},i.tabs),_=Object.keys(i.tabs).find(w=>{const x=i.tabs[w].originalHref;return e.routeInfo.pathname.startsWith(x)});re.Children.forEach(e.children,w=>{if(w!=null&&typeof w=="object"&&w.props&&(w.type===yr||w.type.isTabButton)){const x=a[w.props.tab];(!x||x.originalHref!==w.props.href)&&(a[w.props.tab]={originalHref:w.props.href,currentHref:w.props.href,originalRouteOptions:w.props.routeOptions,currentRouteOptions:w.props.routeOptions})}});const{activeTab:y}=i;if(_&&y){const w=i.tabs[y].currentHref,x=i.tabs[y].currentRouteOptions;(_!==y||w!==((n=e.routeInfo)===null||n===void 0?void 0:n.pathname)||x!==((r=e.routeInfo)===null||r===void 0?void 0:r.routeOptions))&&(a[_]={originalHref:a[_].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:a[_].originalRouteOptions,currentRouteOptions:(s=e.routeInfo)===null||s===void 0?void 0:s.routeOptions},e.routeInfo.routeAction==="pop"&&_!==y&&(a[y]={originalHref:a[y].originalHref,currentHref:a[y].originalHref,originalRouteOptions:a[y].originalRouteOptions,currentRouteOptions:a[y].currentRouteOptions}))}return _&&e.onSetCurrentTab(_,e.routeInfo),{activeTab:_,tabs:a}}onTabButtonClick(e,i){const n=this.state.tabs[e.detail.tab],r=n.originalHref,s=e.detail.href,{activeTab:a}=this.state;i&&i(e),a===e.detail.tab?r!==s&&this.context.resetTab(e.detail.tab,r,n.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,s,e.detail.routeOptions))}renderTabButton(e){return i=>{var n,r;if(i!=null&&i.props&&(i.type===yr||i.type.isTabButton)){const s=i.props.tab===e?(n=this.props.routeInfo)===null||n===void 0?void 0:n.pathname:this.state.tabs[i.props.tab].currentHref,a=i.props.tab===e?(r=this.props.routeInfo)===null||r===void 0?void 0:r.routeOptions:this.state.tabs[i.props.tab].currentRouteOptions;return re.cloneElement(i,{href:s,routeOptions:a,onClick:f=>this.onTabButtonClick(f,i.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return re.createElement(jx,Object.assign({},this.props,{selectedTab:e}),re.Children.map(this.props.children,this.renderTabButton(e)))}static get contextType(){return Wi}}const Qx=re.memo(t=>{var{forwardedRef:e}=t,i=vt(t,["forwardedRef"]);const n=Qt.useContext(Wi);return re.createElement(Jx,Object.assign({ref:e},i,{routeInfo:i.routeInfo||n.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:n.setCurrentTab}),i.children)}),lu=Go(Qx,"IonTabBar");class eT extends Kx{constructor(){super()}}typeof window<"u"&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",eT));const rp={display:"flex",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",flexDirection:"column",width:"100%",height:"100%",contain:"layout size style"},op={position:"relative",flex:1,contain:"layout size style"},tT=(()=>class extends re.Component{constructor(t){super(t),this.routerOutletRef=re.createRef(),this.tabBarRef=re.createRef(),this.ionTabContextState={activeTab:void 0,selectTab:()=>!1}}componentDidMount(){this.tabBarRef.current&&(this.ionTabContextState.activeTab=this.tabBarRef.current.state.activeTab,this.tabBarRef.current.setActiveTabOnContext=t=>{this.ionTabContextState.activeTab=t},this.ionTabContextState.selectTab=this.tabBarRef.current.selectTab)}render(){let t,e;const i=this.props,{className:n,onIonTabsDidChange:r,onIonTabsWillChange:s}=i,a=vt(i,["className","onIonTabsDidChange","onIonTabsWillChange"]),f=typeof this.props.children=="function"?this.props.children(this.ionTabContextState):this.props.children;if(re.Children.forEach(f,_=>{if(_==null||typeof _!="object"||!_.hasOwnProperty("type"))return;_.type===au||_.type.isRouterOutlet?t=re.cloneElement(_):_.type===Qt.Fragment&&_.props.children[0].type===au&&(t=_.props.children[0]);let y={ref:this.tabBarRef};r!==void 0&&(y=Object.assign(Object.assign({},y),{onIonTabsDidChange:r})),s!==void 0&&(y=Object.assign(Object.assign({},y),{onIonTabsWillChange:s})),_.type===lu||_.type.isTabBar?e=re.cloneElement(_,y):_.type===Qt.Fragment&&(_.props.children[1].type===lu||_.props.children[1].type.isTabBar)&&(e=re.cloneElement(_.props.children[1],y))}),!t)throw new Error("IonTabs must contain an IonRouterOutlet");if(!e)throw new Error("IonTabs needs a IonTabBar");return re.createElement(Xx.Provider,{value:this.ionTabContextState},this.context.hasIonicRouter()?re.createElement(Fh,Object.assign({className:n?`${n}`:"",routeInfo:this.context.routeInfo},a),re.createElement("ion-tabs",{className:"ion-tabs",style:rp},e.props.slot==="top"?e:null,re.createElement("div",{style:op,className:"tabs-inner"},t),e.props.slot==="bottom"?e:null)):re.createElement("div",Object.assign({className:n?`${n}`:"ion-tabs"},a,{style:rp}),e.props.slot==="top"?e:null,re.createElement("div",{style:op,className:"tabs-inner"},t),e.props.slot==="bottom"?e:null))}static get contextType(){return Wi}})();class iT extends re.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var e,i;const n=this.props,{icon:r,ios:s,md:a,mode:f}=n,_=vt(n,["icon","ios","md","mode"]);let y;const w=Ph(),x=f||(w==null?void 0:w.get("mode"));return s||a?x==="ios"?y=(e=s!=null?s:a)!==null&&e!==void 0?e:r:y=(i=a!=null?a:s)!==null&&i!==void 0?i:r:y=r,re.createElement(Ux,Object.assign({ref:this.props.forwardedRef,icon:y},_),this.props.children)}static get contextType(){return Wi}}const tc=Go(iT,"IonIcon");class Nh extends re.PureComponent{render(){const e=this.context.getIonRoute();return!this.context.hasIonicRouter()||!Nh?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null):re.createElement(e,Object.assign({},this.props))}static get contextType(){return Wi}}class I_ extends re.PureComponent{render(){const e=this.context.getIonRedirect();return!this.context.hasIonicRouter()||!I_?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null):re.createElement(e,Object.assign({},this.props))}static get contextType(){return Wi}}const nT=re.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});class vE extends re.PureComponent{constructor(e){super(e),this.nodes=new Map,this.animation=DS(e.id)}setupAnimation(e){const i=this.animation;this.nodes.size>0&&i.addElement(Array.from(this.nodes.values())),sp(i,e),ap(i,e)}componentDidMount(){const e=this.props;this.setupAnimation(e)}componentDidUpdate(e){const i=this.animation,n=this.props;sp(i,n,e),rT(i,n,e),ap(i,n,e)}render(){const{children:e}=this.props;return re.createElement(re.Fragment,null,re.Children.map(e,(i,n)=>re.cloneElement(i,{ref:r=>this.nodes.set(n,r)})))}}const sp=(t,e={},i={})=>{const n=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(const _ in e)e.hasOwnProperty(_)&&!n.includes(_)&&e[_]!==i[_]&&t[_](e[_]);const r=e.from;r&&r!==i.from&&(Array.isArray(r)?r:[r]).forEach(y=>t.from(y.property,y.value));const s=e.to;s&&s!==i.to&&(Array.isArray(s)?s:[s]).forEach(y=>t.to(y.property,y.value));const a=e.fromTo;a&&a!==i.fromTo&&(Array.isArray(a)?a:[a]).forEach(y=>t.fromTo(y.property,y.fromValue,y.toValue));const f=e.onFinish;f&&f!==i.onFinish&&(Array.isArray(f)?f:[f]).forEach(y=>t.onFinish(y.callback,y.opts))},rT=(t,e={},i={})=>{var n,r,s,a,f;const{progressStart:_,progressStep:y,progressEnd:w}=e;_&&(((n=i.progressStart)===null||n===void 0?void 0:n.forceLinearEasing)!==(_==null?void 0:_.forceLinearEasing)||((r=i.progressStart)===null||r===void 0?void 0:r.step)!==(_==null?void 0:_.step))&&t.progressStart(_.forceLinearEasing,_.step),y&&((s=i.progressStep)===null||s===void 0?void 0:s.step)!==(y==null?void 0:y.step)&&t.progressStep(y.step),w&&(((a=i.progressEnd)===null||a===void 0?void 0:a.playTo)!==(w==null?void 0:w.playTo)||((f=i.progressEnd)===null||f===void 0?void 0:f.step)!==(w==null?void 0:w.step)||(i==null?void 0:i.dur)!==(w==null?void 0:w.dur))&&t.progressEnd(w.playTo,w.step,w.dur)},ap=(t,e={},i={})=>{!i.play&&e.play&&t.play(),!i.pause&&e.pause&&t.pause(),!i.stop&&e.stop&&t.stop(),!i.destroy&&e.destroy&&t.destroy()},lp={main:0},va=(t="main")=>{var e;const i=((e=lp[t])!==null&&e!==void 0?e:0)+1;return lp[t]=i,i.toString()},oT=(t={})=>{typeof document<"u"&&document.documentElement.classList.add("ion-ce"),d1(Object.assign({},t))},O_=re.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class cp extends re.Component{constructor(e){super(e),this.ionLifeCycleContext=new Ax,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed(()=>{this.props.mount||this._isMounted&&this.setState({show:!1},()=>this.props.removeView())}),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return re.createElement(Dh.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}class sT{constructor(){this.locationHistory=[],this.tabHistory={}}add(e){e.routeAction==="push"||e.routeAction==null?this._add(e):e.routeAction==="pop"?this._pop(e):e.routeAction==="replace"&&this._replace(e),e.routeDirection==="root"&&(this._clear(),this._add(e))}clearTabStack(e){const i=this._getRouteInfosByKey(e);i&&(i.forEach(n=>{this.locationHistory=this.locationHistory.filter(r=>r.id!==n.id)}),this.tabHistory[e]=[])}update(e){const i=this.locationHistory.findIndex(r=>r.id===e.id);i>-1&&this.locationHistory.splice(i,1,e);const n=this.tabHistory[e.tab||""];if(n){const r=n.findIndex(s=>s.id===e.id);r>-1?n.splice(r,1,e):n.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}_add(e){const i=this._getRouteInfosByKey(e.tab);i&&(this._areRoutesEqual(i[i.length-1],e)&&i.pop(),i.push(e)),this.locationHistory.push(e)}_areRoutesEqual(e,i){return!e||!i?!1:e.pathname===i.pathname&&e.search===i.search}_pop(e){const i=this._getRouteInfosByKey(e.tab);i&&(i.pop(),i.pop(),i.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}_replace(e){const i=this._getRouteInfosByKey(e.tab);i&&i.pop(),this.locationHistory.pop(),this._add(e)}_clear(){Object.keys(this.tabHistory).forEach(i=>this.tabHistory[i]=[]),this.locationHistory=[]}_getRouteInfosByKey(e){let i;return e&&(i=this.tabHistory[e],i||(i=this.tabHistory[e]=[])),i}getFirstRouteInfoForTab(e){const i=this._getRouteInfosByKey(e);if(i)return i[0]}getCurrentRouteInfoForTab(e){const i=this._getRouteInfosByKey(e);if(i)return i[i.length-1]}findLastLocation(e){const i=this._getRouteInfosByKey(e.tab);if(i)for(let n=i.length-2;n>=0;n--){const r=i[n];if(r&&r.pathname===e.pushedByRoute)return r}for(let n=this.locationHistory.length-2;n>=0;n--){const r=this.locationHistory[n];if(r&&r.pathname===e.pushedByRoute)return r}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class aT extends re.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(i,n,r,s,a)=>{this.navigate(i,n,r,a,s)},back:i=>{this.goBack(void 0,i)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){typeof document<"u"&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){typeof document<"u"&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,i=>{this.nativeGoBack(),i()})}goBack(e,i){this.props.onNavigateBack(e,i)}nativeGoBack(){this.props.onNativeBack()}navigate(e,i="forward",n="push",r,s,a){this.props.onNavigate(e,n,i,r,s,a)}getPageManager(){return Fh}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return re.createElement(Wi.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},re.createElement(nT.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class lT{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(e){const{outletId:i}=e;this.viewStacks[i]?this.viewStacks[i].push(e):this.viewStacks[i]=[e]}clear(e){return setTimeout(()=>{delete this.viewStacks[e]},500)}getViewItemsForOutlet(e){return this.viewStacks[e]||[]}remove(e){const{outletId:i}=e,n=this.viewStacks[i];if(n){const r=n.find(s=>s.id===e.id);r&&(r.mount=!1,this.viewStacks[i]=n.filter(s=>s.id!==r.id))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const e=this.getStackIds(),i=[];return e.forEach(n=>{i.push(...this.viewStacks[n])}),i}}class cT extends re.PureComponent{render(){return re.createElement(eo,{path:this.props.path,exact:this.props.exact,render:this.props.render,computedMatch:this.props.computedMatch})}}class uT extends lT{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(e,i,n,r){const s={id:va("viewItem"),outletId:e,ionPageElement:r,reactElement:i,mount:!0,ionRoute:!1},a={exact:i.props.exact,path:i.props.path||i.props.from,component:i.props.component},f=Fn(n.pathname,a);return i.type===Nh&&(s.ionRoute=!0,s.disableIonPageManagement=i.props.disableIonPageManagement),s.routeData={match:f,childProps:i.props},s}getChildrenToRender(e,i,n){const r=this.getViewItemsForOutlet(e);return re.Children.forEach(i.props.children,a=>{const f=r.find(_=>up(a,_.routeData.childProps.path||_.routeData.childProps.from));f&&(f.reactElement=a)}),r.map(a=>{let f;if(a.ionRoute&&!a.disableIonPageManagement)f=re.createElement(cp,{key:`view-${a.id}`,mount:a.mount,removeView:()=>this.remove(a)},re.cloneElement(a.reactElement,{computedMatch:a.routeData.match}));else{const _=up(a.reactElement,n.pathname);f=re.createElement(cp,{key:`view-${a.id}`,mount:a.mount,removeView:()=>this.remove(a)},re.cloneElement(a.reactElement,{computedMatch:a.routeData.match})),!_&&a.routeData.match&&(a.routeData.match=void 0,a.mount=!1)}return f})}findViewItemByRouteInfo(e,i,n){const{viewItem:r,match:s}=this.findViewItemByPath(e.pathname,i);return(n===void 0||n===!0)&&r&&s&&(r.routeData.match=s),r}findLeavingViewItemByRouteInfo(e,i,n=!0){const{viewItem:r}=this.findViewItemByPath(e.lastPathname,i,!1,n);return r}findViewItemByPathname(e,i){const{viewItem:n}=this.findViewItemByPath(e,i);return n}findViewItemByPath(e,i,n,r){let s,a,f;if(i)f=this.getViewItemsForOutlet(i),f.some(_),s||f.some(y);else{const w=this.getAllViewItems();w.some(_),s||w.some(y)}return{viewItem:s,match:a};function _(w){if(r&&!w.ionRoute)return!1;const x={exact:n?!0:w.routeData.childProps.exact,path:w.routeData.childProps.path||w.routeData.childProps.from,component:w.routeData.childProps.component},E=Fn(e,x);return E?(s=w,a=E,!0):!1}function y(w){return!w.routeData.childProps.path&&!w.routeData.childProps.from?(a={path:e,url:e,isExact:!0,params:{}},s=w,!0):!1}}}function up(t,e,i){const n={exact:i?!0:t.props.exact,path:t.props.path||t.props.from,component:t.props.component};return Fn(e,n)}function hT(t){let e;if(typeof t=="string"?e=t:e=t.outerHTML,document){const i=document.createElement("div");i.innerHTML=e,i.style.zIndex="";const n=i.getElementsByTagName("ion-back-button");return n[0]&&n[0].remove(),i.firstChild}}const hp=t=>!t.classList.contains("ion-page-invisible")&&!t.classList.contains("ion-page-hidden");class dT extends re.PureComponent{constructor(e){super(e),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=va("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(e){const{pathname:i}=this.props.routeInfo,{pathname:n}=e.routeInfo;i!==n?(this.prevProps=e,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(e){var i,n;if(!this.routerOutletElement||!this.routerOutletElement.commit)this.pendingPageTransition=!0;else{let r=this.context.findViewItemByRouteInfo(e,this.id),s=this.context.findLeavingViewItemByRouteInfo(e,this.id);!s&&e.prevRouteLastPathname&&(s=this.context.findViewItemByPathname(e.prevRouteLastPathname,this.id)),s&&(e.routeAction==="replace"?s.mount=!1:e.routeAction==="push"&&e.routeDirection==="forward"?!((i=e.routeOptions)===null||i===void 0)&&i.unmount&&(s.mount=!1):e.routeDirection!=="none"&&r!==s&&(s.mount=!1));const a=fT((n=this.ionRouterOutlet)===null||n===void 0?void 0:n.props.children,e);if(r?r.reactElement=a:a&&(r=this.context.createViewItem(this.id,a,e),this.context.addViewItem(r)),r&&r.ionPageElement){if(r===s&&r.routeData.match.url!==e.pathname||(!s&&this.props.routeInfo.prevRouteLastPathname&&(s=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),hp(r.ionPageElement)&&s!==void 0&&!hp(s.ionPageElement)))return;this.transitionPage(e,r,s)}else s&&!a&&!r&&s.ionPageElement&&(s.ionPageElement.classList.add("ion-page-hidden"),s.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}}registerIonPage(e,i){const n=this.context.findViewItemByRouteInfo(i,this.id);if(n){const r=n.ionPageElement;if(n.ionPageElement=e,n.ionRoute=!0,r===e)return}this.handlePageTransition(i)}async setupRouterOutlet(e){const i=()=>{const s=Ph();if(!(s&&s.get("swipeBackEnabled",e.mode==="ios")))return!1;const{routeInfo:f}=this.props,_=this.prevProps&&this.prevProps.routeInfo.pathname===f.pushedByRoute?this.prevProps.routeInfo:{pathname:f.pushedByRoute||""},y=this.context.findViewItemByRouteInfo(_,this.id,!1);return!!y&&y.mount&&y.routeData.match.path!==f.pathname},n=async()=>{const{routeInfo:s}=this.props,a=this.prevProps&&this.prevProps.routeInfo.pathname===s.pushedByRoute?this.prevProps.routeInfo:{pathname:s.pushedByRoute||""},f=this.context.findViewItemByRouteInfo(a,this.id,!1),_=this.context.findViewItemByRouteInfo(s,this.id,!1);return f&&_&&await this.transitionPage(s,f,_,"back",!0),Promise.resolve()},r=s=>{if(s)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:a}=this.props,f=this.prevProps&&this.prevProps.routeInfo.pathname===a.pushedByRoute?this.prevProps.routeInfo:{pathname:a.pushedByRoute||""},_=this.context.findViewItemByRouteInfo(f,this.id,!1),y=this.context.findViewItemByRouteInfo(a,this.id,!1);if(_!==y&&(_==null?void 0:_.ionPageElement)!==void 0){const{ionPageElement:w}=_;w.setAttribute("aria-hidden","true"),w.classList.add("ion-page-hidden")}}};e.swipeHandler={canStart:i,onStart:n,onEnd:r}}async transitionPage(e,i,n,r,s=!1){const a=async(w,x)=>{const E=this.skipTransition;E?this.skipTransition=!1:(w.classList.add("ion-page"),w.classList.add("ion-page-invisible")),await f.commit(w,x,{duration:E||y===void 0?0:void 0,direction:y,showGoBack:!!e.pushedByRoute,progressAnimation:s,animationBuilder:e.routeAnimation})},f=this.routerOutletElement,_=e.routeDirection==="none"||e.routeDirection==="root"?void 0:e.routeDirection,y=r!=null?r:_;if(i&&i.ionPageElement&&this.routerOutletElement)if(n&&n.ionPageElement&&i===n)if(pT(n.reactElement,e.pathname,!0)){const x=hT(n.ionPageElement.outerHTML);x&&(this.routerOutletElement.appendChild(x),await a(i.ionPageElement,x),this.routerOutletElement.removeChild(x))}else await a(i.ionPageElement,void 0);else await a(i.ionPageElement,n==null?void 0:n.ionPageElement),n&&n.ionPageElement&&!s&&(n.ionPageElement.classList.add("ion-page-hidden"),n.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:e}=this.props,i=re.Children.only(e);this.ionRouterOutlet=i;const n=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,()=>{this.forceUpdate()});return re.createElement(Mh.Provider,{value:this.stackContextValue},re.cloneElement(i,{ref:r=>{i.props.setRef&&i.props.setRef(r),i.props.forwardedRef&&(i.props.forwardedRef.current=r),this.routerOutletElement=r;const{ref:s}=i;typeof s=="function"&&s(r)}},n))}static get contextType(){return O_}}function fT(t,e){let i;return re.Children.forEach(t,n=>{const r={exact:n.props.exact,path:n.props.path||n.props.from,component:n.props.component};Fn(e.pathname,r)&&(i=n)}),i||(re.Children.forEach(t,n=>{n.props.path||n.props.from||(i=n)}),i)}function pT(t,e,i){const n={exact:i?!0:t.props.exact,path:t.props.path||t.props.from,component:t.props.component};return Fn(e,n)}class gT extends re.PureComponent{constructor(e){super(e),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new sT,this.viewStack=new uT,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const i={id:va("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(i),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:i}}handleChangeTab(e,i,n){if(!i)return;const r=this.locationHistory.getCurrentRouteInfoForTab(e),[s,a]=i.split("?");r?(this.incomingRouteParams=Object.assign(Object.assign({},r),{routeAction:"push",routeDirection:"none"}),r.pathname===s?(this.incomingRouteParams.routeOptions=n,this.props.history.push(r.pathname+(r.search||""))):(this.incomingRouteParams.pathname=s,this.incomingRouteParams.search=a?"?"+a:void 0,this.incomingRouteParams.routeOptions=n,this.props.history.push(s+(a?"?"+a:"")))):this.handleNavigate(s,"push","none",void 0,n,e)}handleHistoryChange(e,i){var n,r,s;let a;if(this.incomingRouteParams?this.incomingRouteParams.routeAction==="replace"?a=this.locationHistory.previous():a=this.locationHistory.current():a=this.locationHistory.current(),a.pathname+a.search!==e.pathname){if(!this.incomingRouteParams){if(i==="REPLACE"&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),i==="POP"){const y=this.locationHistory.current();if(y&&y.pushedByRoute){const w=this.locationHistory.findLastLocation(y);this.incomingRouteParams=Object.assign(Object.assign({},w),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:((n=e.state)===null||n===void 0?void 0:n.direction)||"forward",routeOptions:(r=e.state)===null||r===void 0?void 0:r.routerOptions,tab:this.currentTab})}let _;if(!((s=this.incomingRouteParams)===null||s===void 0)&&s.id)_=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:a.pathname}),this.locationHistory.add(_);else{const y=this.incomingRouteParams.routeAction==="push"&&this.incomingRouteParams.routeDirection==="forward";if(_=Object.assign(Object.assign({id:va("routeInfo")},this.incomingRouteParams),{lastPathname:a.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:a.lastPathname}),y)_.tab=a.tab,_.pushedByRoute=a.pathname;else if(_.routeAction==="pop"){const w=this.locationHistory.findLastLocation(_);_.pushedByRoute=w==null?void 0:w.pushedByRoute}else if(_.routeAction==="push"&&_.tab!==a.tab){const w=this.locationHistory.getCurrentRouteInfoForTab(_.tab);_.pushedByRoute=w==null?void 0:w.pushedByRoute}else if(_.routeAction==="replace"){const w=this.locationHistory.current(),x=w==null?void 0:w.pushedByRoute,E=x!==void 0&&x!==_.pathname?x:_.pushedByRoute;_.lastPathname=(w==null?void 0:w.pathname)||_.lastPathname,_.prevRouteLastPathname=w==null?void 0:w.lastPathname,_.pushedByRoute=E,_.routeDirection=(w==null?void 0:w.routeDirection)||_.routeDirection,_.routeAnimation=(w==null?void 0:w.routeAnimation)||_.routeAnimation}this.locationHistory.add(_)}this.setState({routeInfo:_})}this.incomingRouteParams=void 0}handleNativeBack(){const e=this.props.history;(e.goBack||e.back)()}handleNavigate(e,i,n,r,s,a){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:i,routeDirection:n,routeOptions:s,routeAnimation:r,tab:a}),i==="push"?this.props.history.push(e):this.props.history.replace(e)}handleNavigateBack(e="/",i){const n=Ph();e=e||n&&n.get("backButtonDefaultHref");const r=this.locationHistory.current();if(r&&r.pushedByRoute){const s=this.locationHistory.findLastLocation(r);if(s)if(this.incomingRouteParams=Object.assign(Object.assign({},s),{routeAction:"pop",routeDirection:"back",routeAnimation:i||r.routeAnimation}),r.lastPathname===r.pushedByRoute||s.pathname===r.pushedByRoute&&r.tab===""&&s.tab===""){const a=this.props.history;(a.goBack||a.back)()}else this.handleNavigate(s.pathname+(s.search||""),"pop","back");else this.handleNavigate(e,"pop","back")}else this.handleNavigate(e,"pop","back")}handleResetTab(e,i,n){const r=this.locationHistory.getFirstRouteInfoForTab(e);if(r){const s=Object.assign({},r);s.pathname=i,s.routeOptions=n,this.incomingRouteParams=Object.assign(Object.assign({},s),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(s.pathname+(s.search||""))}}handleSetCurrentTab(e){this.currentTab=e;const i=Object.assign({},this.locationHistory.current());i.tab!==e&&(i.tab=e,this.locationHistory.update(i))}render(){return re.createElement(O_.Provider,{value:this.routeMangerContextState},re.createElement(aT,{ionRoute:cT,ionRedirect:{},stackManager:dT,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const hl=kw(gT);hl.displayName="IonRouter";class mT extends re.Component{constructor(e){super(e);const{history:i}=e,n=vt(e,["history"]);this.history=i||Pb(n),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,i){const n=e.location||e,r=e.action||i;this.historyListenHandler&&this.historyListenHandler(n,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:i}=e,n=vt(e,["children"]);return re.createElement(Vo,Object.assign({history:this.history},n),re.createElement(hl,{registerHistoryListener:this.registerHistoryListener},i))}}class _E extends re.Component{constructor(e){super(e),this.history=e.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,i){const n=e.location||e,r=e.action||i;this.historyListenHandler&&this.historyListenHandler(n,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:i}=e,n=vt(e,["children"]);return re.createElement(Vo,Object.assign({},n),re.createElement(hl,{registerHistoryListener:this.registerHistoryListener},i))}}class yE extends re.Component{constructor(e){super(e);const{history:i}=e,n=vt(e,["history"]);this.history=i||Bb(n),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,i){const n=e.location||e,r=e.action||i;this.historyListenHandler&&this.historyListenHandler(n,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:i}=e,n=vt(e,["children"]);return re.createElement(Vo,Object.assign({history:this.history},n),re.createElement(hl,{registerHistoryListener:this.registerHistoryListener},i))}}const vT="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='64'/><path d='M432 144h-59c-3 0-6.72-1.94-9.62-5l-25.94-40.94a15.52 15.52 0 00-1.37-1.85C327.11 85.76 315 80 302 80h-92c-13 0-25.11 5.76-34.07 16.21a15.52 15.52 0 00-1.37 1.85l-25.94 41c-2.22 2.42-5.34 5-8.62 5v-8a16 16 0 00-16-16h-24a16 16 0 00-16 16v8h-4a48.05 48.05 0 00-48 48V384a48.05 48.05 0 0048 48h352a48.05 48.05 0 0048-48V192a48.05 48.05 0 00-48-48zM256 368a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>",_T="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M160 144h288M160 256h288M160 368h288' class='ionicon-fill-none'/><circle cx='80' cy='144' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='256' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='368' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",yT="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M192 448h128M384 208v32c0 70.4-57.6 128-128 128h0c-70.4 0-128-57.6-128-128v-32M256 368v80' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 320a78.83 78.83 0 01-56.55-24.1A80.89 80.89 0 01176 239V128a79.69 79.69 0 0180-80c44.86 0 80 35.14 80 80v111c0 44.66-35.89 81-80 81z'/></svg>";/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */function bT(t,e,i,n){t.prototype._pos=[0,0,0],t.prototype._orientation=[0,0,-1,0,1,0],t.prototype.stereo=function(s){var a=this;if(!a.ctx||!a.ctx.listener)return a;for(var f=a._howls.length-1;f>=0;f--)a._howls[f].stereo(s);return a},t.prototype.pos=function(s,a,f){var _=this;if(!_.ctx||!_.ctx.listener)return _;if(a=typeof a!="number"?_._pos[1]:a,f=typeof f!="number"?_._pos[2]:f,typeof s=="number")_._pos=[s,a,f],typeof _.ctx.listener.positionX<"u"?(_.ctx.listener.positionX.setTargetAtTime(_._pos[0],e.ctx.currentTime,.1),_.ctx.listener.positionY.setTargetAtTime(_._pos[1],e.ctx.currentTime,.1),_.ctx.listener.positionZ.setTargetAtTime(_._pos[2],e.ctx.currentTime,.1)):_.ctx.listener.setPosition(_._pos[0],_._pos[1],_._pos[2]);else return _._pos;return _},t.prototype.orientation=function(s,a,f,_,y,w){var x=this;if(!x.ctx||!x.ctx.listener)return x;var E=x._orientation;if(a=typeof a!="number"?E[1]:a,f=typeof f!="number"?E[2]:f,_=typeof _!="number"?E[3]:_,y=typeof y!="number"?E[4]:y,w=typeof w!="number"?E[5]:w,typeof s=="number")x._orientation=[s,a,f,_,y,w],typeof x.ctx.listener.forwardX<"u"?(x.ctx.listener.forwardX.setTargetAtTime(s,e.ctx.currentTime,.1),x.ctx.listener.forwardY.setTargetAtTime(a,e.ctx.currentTime,.1),x.ctx.listener.forwardZ.setTargetAtTime(f,e.ctx.currentTime,.1),x.ctx.listener.upX.setTargetAtTime(_,e.ctx.currentTime,.1),x.ctx.listener.upY.setTargetAtTime(y,e.ctx.currentTime,.1),x.ctx.listener.upZ.setTargetAtTime(w,e.ctx.currentTime,.1)):x.ctx.listener.setOrientation(s,a,f,_,y,w);else return E;return x},i.prototype.init=function(s){return function(a){var f=this;return f._orientation=a.orientation||[1,0,0],f._stereo=a.stereo||null,f._pos=a.pos||null,f._pannerAttr={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:360,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:360,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:0,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:"inverse",maxDistance:typeof a.maxDistance<"u"?a.maxDistance:1e4,panningModel:typeof a.panningModel<"u"?a.panningModel:"HRTF",refDistance:typeof a.refDistance<"u"?a.refDistance:1,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:1},f._onstereo=a.onstereo?[{fn:a.onstereo}]:[],f._onpos=a.onpos?[{fn:a.onpos}]:[],f._onorientation=a.onorientation?[{fn:a.onorientation}]:[],s.call(this,a)}}(i.prototype.init),i.prototype.stereo=function(s,a){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"stereo",action:function(){f.stereo(s,a)}}),f;var _=typeof e.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof a>"u")if(typeof s=="number")f._stereo=s,f._pos=[s,0,0];else return f._stereo;for(var y=f._getSoundIds(a),w=0;w<y.length;w++){var x=f._soundById(y[w]);if(x)if(typeof s=="number")x._stereo=s,x._pos=[s,0,0],x._node&&(x._pannerAttr.panningModel="equalpower",(!x._panner||!x._panner.pan)&&r(x,_),_==="spatial"?typeof x._panner.positionX<"u"?(x._panner.positionX.setValueAtTime(s,e.ctx.currentTime),x._panner.positionY.setValueAtTime(0,e.ctx.currentTime),x._panner.positionZ.setValueAtTime(0,e.ctx.currentTime)):x._panner.setPosition(s,0,0):x._panner.pan.setValueAtTime(s,e.ctx.currentTime)),f._emit("stereo",x._id);else return x._stereo}return f},i.prototype.pos=function(s,a,f,_){var y=this;if(!y._webAudio)return y;if(y._state!=="loaded")return y._queue.push({event:"pos",action:function(){y.pos(s,a,f,_)}}),y;if(a=typeof a!="number"?0:a,f=typeof f!="number"?-.5:f,typeof _>"u")if(typeof s=="number")y._pos=[s,a,f];else return y._pos;for(var w=y._getSoundIds(_),x=0;x<w.length;x++){var E=y._soundById(w[x]);if(E)if(typeof s=="number")E._pos=[s,a,f],E._node&&((!E._panner||E._panner.pan)&&r(E,"spatial"),typeof E._panner.positionX<"u"?(E._panner.positionX.setValueAtTime(s,e.ctx.currentTime),E._panner.positionY.setValueAtTime(a,e.ctx.currentTime),E._panner.positionZ.setValueAtTime(f,e.ctx.currentTime)):E._panner.setPosition(s,a,f)),y._emit("pos",E._id);else return E._pos}return y},i.prototype.orientation=function(s,a,f,_){var y=this;if(!y._webAudio)return y;if(y._state!=="loaded")return y._queue.push({event:"orientation",action:function(){y.orientation(s,a,f,_)}}),y;if(a=typeof a!="number"?y._orientation[1]:a,f=typeof f!="number"?y._orientation[2]:f,typeof _>"u")if(typeof s=="number")y._orientation=[s,a,f];else return y._orientation;for(var w=y._getSoundIds(_),x=0;x<w.length;x++){var E=y._soundById(w[x]);if(E)if(typeof s=="number")E._orientation=[s,a,f],E._node&&(E._panner||(E._pos||(E._pos=y._pos||[0,0,-.5]),r(E,"spatial")),typeof E._panner.orientationX<"u"?(E._panner.orientationX.setValueAtTime(s,e.ctx.currentTime),E._panner.orientationY.setValueAtTime(a,e.ctx.currentTime),E._panner.orientationZ.setValueAtTime(f,e.ctx.currentTime)):E._panner.setOrientation(s,a,f)),y._emit("orientation",E._id);else return E._orientation}return y},i.prototype.pannerAttr=function(){var s=this,a=arguments,f,_,y;if(!s._webAudio)return s;if(a.length===0)return s._pannerAttr;if(a.length===1)if(typeof a[0]=="object")f=a[0],typeof _>"u"&&(f.pannerAttr||(f.pannerAttr={coneInnerAngle:f.coneInnerAngle,coneOuterAngle:f.coneOuterAngle,coneOuterGain:f.coneOuterGain,distanceModel:f.distanceModel,maxDistance:f.maxDistance,refDistance:f.refDistance,rolloffFactor:f.rolloffFactor,panningModel:f.panningModel}),s._pannerAttr={coneInnerAngle:typeof f.pannerAttr.coneInnerAngle<"u"?f.pannerAttr.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:typeof f.pannerAttr.coneOuterAngle<"u"?f.pannerAttr.coneOuterAngle:s._coneOuterAngle,coneOuterGain:typeof f.pannerAttr.coneOuterGain<"u"?f.pannerAttr.coneOuterGain:s._coneOuterGain,distanceModel:typeof f.pannerAttr.distanceModel<"u"?f.pannerAttr.distanceModel:s._distanceModel,maxDistance:typeof f.pannerAttr.maxDistance<"u"?f.pannerAttr.maxDistance:s._maxDistance,refDistance:typeof f.pannerAttr.refDistance<"u"?f.pannerAttr.refDistance:s._refDistance,rolloffFactor:typeof f.pannerAttr.rolloffFactor<"u"?f.pannerAttr.rolloffFactor:s._rolloffFactor,panningModel:typeof f.pannerAttr.panningModel<"u"?f.pannerAttr.panningModel:s._panningModel});else return y=s._soundById(parseInt(a[0],10)),y?y._pannerAttr:s._pannerAttr;else a.length===2&&(f=a[0],_=parseInt(a[1],10));for(var w=s._getSoundIds(_),x=0;x<w.length;x++)if(y=s._soundById(w[x]),y){var E=y._pannerAttr;E={coneInnerAngle:typeof f.coneInnerAngle<"u"?f.coneInnerAngle:E.coneInnerAngle,coneOuterAngle:typeof f.coneOuterAngle<"u"?f.coneOuterAngle:E.coneOuterAngle,coneOuterGain:typeof f.coneOuterGain<"u"?f.coneOuterGain:E.coneOuterGain,distanceModel:typeof f.distanceModel<"u"?f.distanceModel:E.distanceModel,maxDistance:typeof f.maxDistance<"u"?f.maxDistance:E.maxDistance,refDistance:typeof f.refDistance<"u"?f.refDistance:E.refDistance,rolloffFactor:typeof f.rolloffFactor<"u"?f.rolloffFactor:E.rolloffFactor,panningModel:typeof f.panningModel<"u"?f.panningModel:E.panningModel};var k=y._panner;k||(y._pos||(y._pos=s._pos||[0,0,-.5]),r(y,"spatial"),k=y._panner),k.coneInnerAngle=E.coneInnerAngle,k.coneOuterAngle=E.coneOuterAngle,k.coneOuterGain=E.coneOuterGain,k.distanceModel=E.distanceModel,k.maxDistance=E.maxDistance,k.refDistance=E.refDistance,k.rolloffFactor=E.rolloffFactor,k.panningModel=E.panningModel}return s},n.prototype.init=function(s){return function(){var a=this,f=a._parent;a._orientation=f._orientation,a._stereo=f._stereo,a._pos=f._pos,a._pannerAttr=f._pannerAttr,s.call(this),a._stereo?f.stereo(a._stereo):a._pos&&f.pos(a._pos[0],a._pos[1],a._pos[2],a._id)}}(n.prototype.init),n.prototype.reset=function(s){return function(){var a=this,f=a._parent;return a._orientation=f._orientation,a._stereo=f._stereo,a._pos=f._pos,a._pannerAttr=f._pannerAttr,a._stereo?f.stereo(a._stereo):a._pos?f.pos(a._pos[0],a._pos[1],a._pos[2],a._id):a._panner&&(a._panner.disconnect(0),a._panner=void 0,f._refreshBuffer(a)),s.call(this)}}(n.prototype.reset);var r=function(s,a){a=a||"spatial",a==="spatial"?(s._panner=e.ctx.createPanner(),s._panner.coneInnerAngle=s._pannerAttr.coneInnerAngle,s._panner.coneOuterAngle=s._pannerAttr.coneOuterAngle,s._panner.coneOuterGain=s._pannerAttr.coneOuterGain,s._panner.distanceModel=s._pannerAttr.distanceModel,s._panner.maxDistance=s._pannerAttr.maxDistance,s._panner.refDistance=s._pannerAttr.refDistance,s._panner.rolloffFactor=s._pannerAttr.rolloffFactor,s._panner.panningModel=s._pannerAttr.panningModel,typeof s._panner.positionX<"u"?(s._panner.positionX.setValueAtTime(s._pos[0],e.ctx.currentTime),s._panner.positionY.setValueAtTime(s._pos[1],e.ctx.currentTime),s._panner.positionZ.setValueAtTime(s._pos[2],e.ctx.currentTime)):s._panner.setPosition(s._pos[0],s._pos[1],s._pos[2]),typeof s._panner.orientationX<"u"?(s._panner.orientationX.setValueAtTime(s._orientation[0],e.ctx.currentTime),s._panner.orientationY.setValueAtTime(s._orientation[1],e.ctx.currentTime),s._panner.orientationZ.setValueAtTime(s._orientation[2],e.ctx.currentTime)):s._panner.setOrientation(s._orientation[0],s._orientation[1],s._orientation[2])):(s._panner=e.ctx.createStereoPanner(),s._panner.pan.setValueAtTime(s._stereo,e.ctx.currentTime)),s._panner.connect(s._node),s._paused||s._parent.pause(s._id,!0).play(s._id,!0)}}/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var $h=function(){this.init()};$h.prototype={init:function(){var t=this||ae;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator=typeof window<"u"&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||ae;if(t=parseFloat(t),e.ctx||Ps(),typeof t<"u"&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,ae.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||ae;e.ctx||Ps(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,ae.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.muted=t?!0:s._muted)}return e},stop:function(){for(var t=this||ae,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||ae,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&typeof t.ctx.close<"u"&&(t.ctx.close(),t.ctx=null,Ps()),t},codecs:function(t){return(this||ae)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||ae;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if(typeof Audio<"u")try{var e=new Audio;typeof e.oncanplaythrough>"u"&&(t._canPlayEvent="canplay")}catch(i){t.noAudio=!0}else t.noAudio=!0;try{var e=new Audio;e.muted&&(t.noAudio=!0)}catch(i){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||ae,e=null;try{e=typeof Audio<"u"?new Audio:null}catch(y){return t}if(!e||typeof e.canPlayType!="function")return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator?t._navigator.userAgent:"",r=n.match(/OPR\/([0-6].)/g),s=r&&parseInt(r[0].split("/")[1],10)<33,a=n.indexOf("Safari")!==-1&&n.indexOf("Chrome")===-1,f=n.match(/Version\/(.*?) /),_=a&&f&&parseInt(f[1],10)<15;return t._codecs={mp3:!!(!s&&(i||e.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!_&&e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!_&&e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||ae;if(!(t._audioUnlocked||!t.ctx)){t._audioUnlocked=!1,t.autoUnlock=!1,!t._mobileUnloaded&&t.ctx.sampleRate!==44100&&(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(y){t.noAudio=!0;break}for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var s=t._howls[r]._getSoundIds(),a=0;a<s.length;a++){var f=t._howls[r]._soundById(s[a]);f&&f._node&&!f._node._unlocked&&(f._node._unlocked=!0,f._node.load())}t._autoResume();var _=t.ctx.createBufferSource();_.buffer=t._scratchBuffer,_.connect(t.ctx.destination),typeof _.start>"u"?_.noteOn(0):_.start(0),typeof t.ctx.resume=="function"&&t.ctx.resume(),_.onended=function(){_.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var y=0;y<t._howls.length;y++)t._howls[y]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||ae;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=new Audio().play();return e&&typeof Promise<"u"&&(e instanceof Promise||typeof e.then=="function")&&e.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var e=this||ae;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(!(!t.autoSuspend||!t.ctx||typeof t.ctx.suspend>"u"||!ae.usingWebAudio)){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio){for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t}return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var n=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(n,n)}},3e4),t}},_autoResume:function(){var t=this;if(!(!t.ctx||typeof t.ctx.resume>"u"||!ae.usingWebAudio))return t.state==="running"&&t.ctx.state!=="interrupted"&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):t.state==="suspended"||t.state==="running"&&t.ctx.state==="interrupted"?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):t.state==="suspending"&&(t._resumeAfterSuspend=!0),t}};var ae=new $h,_a=function(t){var e=this;if(!t.src||t.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}e.init(t)};_a.prototype={init:function(t){var e=this;return ae.ctx||Ps(),e._autoplay=t.autoplay||!1,e._format=typeof t.format!="string"?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload=typeof t.preload=="boolean"||t.preload==="metadata"?t.preload:!0,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src=typeof t.src!="string"?t.src:[t.src],e._volume=t.volume!==void 0?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:t.xhr&&t.xhr.withCredentials?t.xhr.withCredentials:!1},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=ae.usingWebAudio&&!e._html5,typeof ae.ctx<"u"&&ae.ctx&&ae.autoUnlock&&ae._unlockAudio(),ae._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e._preload!=="none"&&e.load(),e},load:function(){var t=this,e=null;if(ae.noAudio){t._emit("loaderror",null,"No audio support.");return}typeof t._src=="string"&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var n,r;if(t._format&&t._format[i])n=t._format[i];else{if(r=t._src[i],typeof r!="string"){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}n=/^data:audio\/([^;,]+);/i.exec(r),n||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&ae.codecs(n)){e=t._src[i];break}}if(!e){t._emit("loaderror",null,"No codec support for selected audio sources.");return}return t._src=e,t._state="loading",window.location.protocol==="https:"&&e.slice(0,5)==="http:"&&(t._html5=!0,t._webAudio=!1),new ya(t),t._webAudio&&wT(t),t},play:function(t,e){var i=this,n=null;if(typeof t=="number")n=t,t=null;else{if(typeof t=="string"&&i._state==="loaded"&&!i._sprite[t])return null;if(typeof t>"u"&&(t="__default",!i._playLock)){for(var r=0,s=0;s<i._sounds.length;s++)i._sounds[s]._paused&&!i._sounds[s]._ended&&(r++,n=i._sounds[s]._id);r===1?t=null:n=null}}var a=n?i._soundById(n):i._inactiveSound();if(!a)return null;if(n&&!t&&(t=a._sprite||"__default"),i._state!=="loaded"){a._sprite=t,a._ended=!1;var f=a._id;return i._queue.push({event:"play",action:function(){i.play(f)}}),f}if(n&&!a._paused)return e||i._loadQueue("play"),a._id;i._webAudio&&ae._autoResume();var _=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),y=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-_),w=y*1e3/Math.abs(a._rate),x=i._sprite[t][0]/1e3,E=(i._sprite[t][0]+i._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var k=function(){a._paused=!1,a._seek=_,a._start=x,a._stop=E,a._loop=!!(a._loop||i._sprite[t][2])};if(_>=E){i._ended(a);return}var P=a._node;if(i._webAudio){var M=function(){i._playLock=!1,k(),i._refreshBuffer(a);var D=a._muted||i._muted?0:a._volume;P.gain.setValueAtTime(D,ae.ctx.currentTime),a._playStart=ae.ctx.currentTime,typeof P.bufferSource.start>"u"?a._loop?P.bufferSource.noteGrainOn(0,_,86400):P.bufferSource.noteGrainOn(0,_,y):a._loop?P.bufferSource.start(0,_,86400):P.bufferSource.start(0,_,y),w!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),w)),e||setTimeout(function(){i._emit("play",a._id),i._loadQueue()},0)};ae.state==="running"&&ae.ctx.state!=="interrupted"?M():(i._playLock=!0,i.once("resume",M),i._clearTimer(a._id))}else{var V=function(){P.currentTime=_,P.muted=a._muted||i._muted||ae._muted||P.muted,P.volume=a._volume*ae.volume(),P.playbackRate=a._rate;try{var D=P.play();if(D&&typeof Promise<"u"&&(D instanceof Promise||typeof D.then=="function")?(i._playLock=!0,k(),D.then(function(){i._playLock=!1,P._unlocked=!0,e?i._loadQueue():i._emit("play",a._id)}).catch(function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):e||(i._playLock=!1,k(),i._emit("play",a._id)),P.playbackRate=a._rate,P.paused){i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}t!=="__default"||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),w):(i._endTimers[a._id]=function(){i._ended(a),P.removeEventListener("ended",i._endTimers[a._id],!1)},P.addEventListener("ended",i._endTimers[a._id],!1))}catch(Y){i._emit("playerror",a._id,Y)}};P.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(P.src=i._src,P.load());var L=window&&window.ejecta||!P.readyState&&ae._navigator.isCocoonJS;if(P.readyState>=3||L)V();else{i._playLock=!0,i._state="loading";var R=function(){i._state="loaded",V(),P.removeEventListener(ae._canPlayEvent,R,!1)};P.addEventListener(ae._canPlayEvent,R,!1),i._clearTimer(a._id)}}return a._id},pause:function(t){var e=this;if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var r=e._soundById(i[n]);if(r&&!r._paused&&(r._seek=e.seek(i[n]),r._rateSeek=0,r._paused=!0,e._stopFade(i[n]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;typeof r._node.bufferSource.stop>"u"?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else(!isNaN(r._node.duration)||r._node.duration===1/0)&&r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var i=this;if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),r=0;r<n.length;r++){i._clearTimer(n[r]);var s=i._soundById(n[r]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,i._stopFade(n[r]),s._node&&(i._webAudio?s._node.bufferSource&&(typeof s._node.bufferSource.stop>"u"?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),i._cleanBuffer(s._node)):(!isNaN(s._node.duration)||s._node.duration===1/0)&&(s._node.currentTime=s._start||0,s._node.pause(),s._node.duration===1/0&&i._clearSound(s._node))),e||i._emit("stop",s._id))}return i},mute:function(t,e){var i=this;if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(typeof e>"u")if(typeof t=="boolean")i._muted=t;else return i._muted;for(var n=i._getSoundIds(e),r=0;r<n.length;r++){var s=i._soundById(n[r]);s&&(s._muted=t,s._interval&&i._stopFade(s._id),i._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,ae.ctx.currentTime):s._node&&(s._node.muted=ae._muted?!0:t),i._emit("mute",s._id))}return i},volume:function(){var t=this,e=arguments,i,n;if(e.length===0)return t._volume;if(e.length===1||e.length===2&&typeof e[1]>"u"){var r=t._getSoundIds(),s=r.indexOf(e[0]);s>=0?n=parseInt(e[0],10):i=parseFloat(e[0])}else e.length>=2&&(i=parseFloat(e[0]),n=parseInt(e[1],10));var a;if(typeof i<"u"&&i>=0&&i<=1){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,e)}}),t;typeof n>"u"&&(t._volume=i),n=t._getSoundIds(n);for(var f=0;f<n.length;f++)a=t._soundById(n[f]),a&&(a._volume=i,e[2]||t._stopFade(n[f]),t._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(i,ae.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=i*ae.volume()),t._emit("volume",a._id))}else return a=n?t._soundById(n):t._sounds[0],a?a._volume:0;return t},fade:function(t,e,i,n){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,n)}}),r;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),r.volume(t,n);for(var s=r._getSoundIds(n),a=0;a<s.length;a++){var f=r._soundById(s[a]);if(f){if(n||r._stopFade(s[a]),r._webAudio&&!f._muted){var _=ae.ctx.currentTime,y=_+i/1e3;f._volume=t,f._node.gain.setValueAtTime(t,_),f._node.gain.linearRampToValueAtTime(e,y)}r._startFadeInterval(f,t,e,i,s[a],typeof n>"u")}}return r},_startFadeInterval:function(t,e,i,n,r,s){var a=this,f=e,_=i-e,y=Math.abs(_/.01),w=Math.max(4,y>0?n/y:n),x=Date.now();t._fadeTo=i,t._interval=setInterval(function(){var E=(Date.now()-x)/n;x=Date.now(),f+=_*E,f=Math.round(f*100)/100,_<0?f=Math.max(i,f):f=Math.min(i,f),a._webAudio?t._volume=f:a.volume(f,t._id,!0),s&&(a._volume=f),(i<e&&f<=i||i>e&&f>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(i,t._id),a._emit("fade",t._id))},w)},_stopFade:function(t){var e=this,i=e._soundById(t);return i&&i._interval&&(e._webAudio&&i._node.gain.cancelScheduledValues(ae.ctx.currentTime),clearInterval(i._interval),i._interval=null,e.volume(i._fadeTo,t),i._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t=this,e=arguments,i,n,r;if(e.length===0)return t._loop;if(e.length===1)if(typeof e[0]=="boolean")i=e[0],t._loop=i;else return r=t._soundById(parseInt(e[0],10)),r?r._loop:!1;else e.length===2&&(i=e[0],n=parseInt(e[1],10));for(var s=t._getSoundIds(n),a=0;a<s.length;a++)r=t._soundById(s[a]),r&&(r._loop=i,t._webAudio&&r._node&&r._node.bufferSource&&(r._node.bufferSource.loop=i,i&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop,t.playing(s[a])&&(t.pause(s[a],!0),t.play(s[a],!0)))));return t},rate:function(){var t=this,e=arguments,i,n;if(e.length===0)n=t._sounds[0]._id;else if(e.length===1){var r=t._getSoundIds(),s=r.indexOf(e[0]);s>=0?n=parseInt(e[0],10):i=parseFloat(e[0])}else e.length===2&&(i=parseFloat(e[0]),n=parseInt(e[1],10));var a;if(typeof i=="number"){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,e)}}),t;typeof n>"u"&&(t._rate=i),n=t._getSoundIds(n);for(var f=0;f<n.length;f++)if(a=t._soundById(n[f]),a){t.playing(n[f])&&(a._rateSeek=t.seek(n[f]),a._playStart=t._webAudio?ae.ctx.currentTime:a._playStart),a._rate=i,t._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.setValueAtTime(i,ae.ctx.currentTime):a._node&&(a._node.playbackRate=i);var _=t.seek(n[f]),y=(t._sprite[a._sprite][0]+t._sprite[a._sprite][1])/1e3-_,w=y*1e3/Math.abs(a._rate);(t._endTimers[n[f]]||!a._paused)&&(t._clearTimer(n[f]),t._endTimers[n[f]]=setTimeout(t._ended.bind(t,a),w)),t._emit("rate",a._id)}}else return a=t._soundById(n),a?a._rate:t._rate;return t},seek:function(){var t=this,e=arguments,i,n;if(e.length===0)t._sounds.length&&(n=t._sounds[0]._id);else if(e.length===1){var r=t._getSoundIds(),s=r.indexOf(e[0]);s>=0?n=parseInt(e[0],10):t._sounds.length&&(n=t._sounds[0]._id,i=parseFloat(e[0]))}else e.length===2&&(i=parseFloat(e[0]),n=parseInt(e[1],10));if(typeof n>"u")return 0;if(typeof i=="number"&&(t._state!=="loaded"||t._playLock))return t._queue.push({event:"seek",action:function(){t.seek.apply(t,e)}}),t;var a=t._soundById(n);if(a)if(typeof i=="number"&&i>=0){var f=t.playing(n);f&&t.pause(n,!0),a._seek=i,a._ended=!1,t._clearTimer(n),!t._webAudio&&a._node&&!isNaN(a._node.duration)&&(a._node.currentTime=i);var _=function(){f&&t.play(n,!0),t._emit("seek",n)};if(f&&!t._webAudio){var y=function(){t._playLock?setTimeout(y,0):_()};setTimeout(y,0)}else _()}else if(t._webAudio){var w=t.playing(n)?ae.ctx.currentTime-a._playStart:0,x=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(x+w*Math.abs(a._rate))}else return a._node.currentTime;return t},playing:function(t){var e=this;if(typeof t=="number"){var i=e._soundById(t);return i?!i._paused:!1}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,n=e._soundById(t);return n&&(i=e._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(ae._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),ae._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=ae._howls.indexOf(t);n>=0&&ae._howls.splice(n,1);var r=!0;for(i=0;i<ae._howls.length;i++)if(ae._howls[i]._src===t._src||t._src.indexOf(ae._howls[i]._src)>=0){r=!1;break}return An&&r&&delete An[t._src],ae.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var r=this,s=r["_on"+t];return typeof e=="function"&&s.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),r},off:function(t,e,i){var n=this,r=n["_on"+t],s=0;if(typeof e=="number"&&(i=e,e=null),e||i)for(s=0;s<r.length;s++){var a=i===r[s].id;if(e===r[s].fn&&a||!e&&a){r.splice(s,1);break}}else if(t)n["_on"+t]=[];else{var f=Object.keys(n);for(s=0;s<f.length;s++)f[s].indexOf("_on")===0&&Array.isArray(n[f[s]])&&(n[f[s]]=[])}return n},once:function(t,e,i){var n=this;return n.on(t,e,i,1),n},_emit:function(t,e,i){for(var n=this,r=n["_on"+t],s=r.length-1;s>=0;s--)(!r[s].id||r[s].id===e||t==="load")&&(setTimeout(function(a){a.call(this,e,i)}.bind(n,r[s].fn),0),r[s].once&&n.off(t,r[s].fn,r[s].id));return n._loadQueue(t),n},_loadQueue:function(t){var e=this;if(e._queue.length>0){var i=e._queue[0];i.event===t&&(e._queue.shift(),e._loadQueue()),t||i.action()}return e},_ended:function(t){var e=this,i=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var n=!!(t._loop||e._sprite[i][2]);if(e._emit("end",t._id),!e._webAudio&&n&&e.stop(t._id,!0).play(t._id),e._webAudio&&n){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=ae.ctx.currentTime;var r=(t._stop-t._start)*1e3/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),r)}return e._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),ae._autoSuspend()),!e._webAudio&&!n&&e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if(typeof e._endTimers[t]!="function")clearTimeout(e._endTimers[t]);else{var i=e._soundById(t);i&&i._node&&i._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new ya(t)},_drain:function(){var t=this,e=t._pool,i=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(t){var e=this;if(typeof t>"u"){for(var i=[],n=0;n<e._sounds.length;n++)i.push(e._sounds[n]._id);return i}else return[t]},_refreshBuffer:function(t){var e=this;return t._node.bufferSource=ae.ctx.createBufferSource(),t._node.bufferSource.buffer=An[e._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,ae.ctx.currentTime),e},_cleanBuffer:function(t){var e=this,i=ae._navigator&&ae._navigator.vendor.indexOf("Apple")>=0;if(!t.bufferSource)return e;if(ae._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),i))try{t.bufferSource.buffer=ae._scratchBuffer}catch(n){}return t.bufferSource=null,e},_clearSound:function(t){var e=/MSIE |Trident\//.test(ae._navigator&&ae._navigator.userAgent);e||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var ya=function(t){this._parent=t,this.init()};ya.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++ae._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,i=ae._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=typeof ae.ctx.createGain>"u"?ae.ctx.createGainNode():ae.ctx.createGain(),t._node.gain.setValueAtTime(i,ae.ctx.currentTime),t._node.paused=!0,t._node.connect(ae.masterGain)):ae.noAudio||(t._node=ae._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(ae._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=e._preload===!0?"auto":e._preload,t._node.volume=i*ae.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++ae._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(t._node.duration*10)/10,Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(ae._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(t._node.duration*10)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=e._duration*1e3),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var An={},wT=function(t){var e=t._src;if(An[e]){t._duration=An[e].duration,R_(t);return}if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);dp(n.buffer,t)}else{var s=new XMLHttpRequest;s.open(t._xhr.method,e,!0),s.withCredentials=t._xhr.withCredentials,s.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(a){s.setRequestHeader(a,t._xhr.headers[a])}),s.onload=function(){var a=(s.status+"")[0];if(a!=="0"&&a!=="2"&&a!=="3"){t._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".");return}dp(s.response,t)},s.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete An[e],t.load())},ST(s)}},ST=function(t){try{t.send()}catch(e){t.onerror()}},dp=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},n=function(r){r&&e._sounds.length>0?(An[e._src]=r,R_(e,r)):i()};typeof Promise<"u"&&ae.ctx.decodeAudioData.length===1?ae.ctx.decodeAudioData(t).then(n).catch(i):ae.ctx.decodeAudioData(t,n,i)},R_=function(t,e){e&&!t._duration&&(t._duration=e.duration),Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue())},Ps=function(){if(ae.usingWebAudio){try{typeof AudioContext<"u"?ae.ctx=new AudioContext:typeof webkitAudioContext<"u"?ae.ctx=new webkitAudioContext:ae.usingWebAudio=!1}catch(r){ae.usingWebAudio=!1}ae.ctx||(ae.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(ae._navigator&&ae._navigator.platform),e=ae._navigator&&ae._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var n=/safari/.test(ae._navigator&&ae._navigator.userAgent.toLowerCase());ae._navigator&&!n&&(ae.usingWebAudio=!1)}ae.usingWebAudio&&(ae.masterGain=typeof ae.ctx.createGain>"u"?ae.ctx.createGainNode():ae.ctx.createGain(),ae.masterGain.gain.setValueAtTime(ae._muted?0:ae._volume,ae.ctx.currentTime),ae.masterGain.connect(ae.ctx.destination)),ae._setup()}};bT($h,ae,_a,ya);/*!
 * Dynamsoft JavaScript Library
 * @product Dynamsoft Barcode Reader JS Edition
 * @website http://www.dynamsoft.com
 * @copyright Copyright 2023, Dynamsoft Corporation
 * @author Dynamsoft
 * @version 9.6.20 (js 20230410)
 * @fileoverview Dynamsoft JavaScript Library for Barcode Reader
 * More info on DBR JS: https://www.dynamsoft.com/barcode-reader/sdk-javascript/
 */const Wn=typeof self>"u";let Yr,Li,vs,ba,ut;if(typeof navigator<"u"&&(Yr=navigator,Li=Yr.userAgent,vs=Yr.platform,ba=Yr.mediaDevices),!Wn){const t={Edge:{search:"Edg",verSearch:"Edg"},OPR:null,Chrome:null,Safari:{str:Yr.vendor,search:"Apple",verSearch:["Version","iPhone OS","CPU OS"]},Firefox:null,Explorer:{search:"MSIE",verSearch:"MSIE"}},e={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:vs,search:"Win"},Mac:{str:vs},Linux:{str:vs}};let i="unknownBrowser",n=0,r="unknownOS";for(let s in t){const a=t[s]||{};let f=a.str||Li,_=a.search||s,y=a.verStr||Li,w=a.verSearch||s;if(w instanceof Array||(w=[w]),f.indexOf(_)!=-1){i=s;for(let x of w){let E=y.indexOf(x);if(E!=-1){n=parseFloat(y.substring(E+x.length+1));break}}break}}for(let s in e){const a=e[s]||{};let f=a.str||Li,_=a.search||s;if(f.indexOf(_)!=-1){r=s;break}}r=="Linux"&&Li.indexOf("Windows NT")!=-1&&(r="HarmonyOS"),ut={browser:i,version:n,OS:r}}Wn&&(ut={browser:"ssr",version:0,OS:"ssr"});const CT=typeof WebAssembly<"u"&&Li&&!(/Safari/.test(Li)&&!/Chrome/.test(Li)&&/\(.+\s11_2_([2-6]).*\)/.test(Li)),xT=!(typeof Worker>"u"),A_=!(!ba||!ba.getUserMedia),TT=async()=>{let t=!1;if(A_)try{(await ba.getUserMedia({video:!0})).getTracks().forEach(e=>{e.stop()}),t=!0}catch(e){}return t};ut.browser==="Chrome"&&ut.version>66||ut.browser==="Safari"&&ut.version>13||ut.browser==="OPR"&&ut.version>43||ut.browser==="Edge"&&ut.version;const ET=(()=>{if(!Wn&&document.currentScript){let t=document.currentScript.src,e=t.indexOf("?");if(e!=-1)t=t.substring(0,e);else{let i=t.indexOf("#");i!=-1&&(t=t.substring(0,i))}return t.substring(0,t.lastIndexOf("/")+1)}return"./"})(),Xr=" is not allowed to change after `createInstance` or `loadWasm` is called.",IT=!Wn&&document.currentScript&&(document.currentScript.getAttribute("data-license")||document.currentScript.getAttribute("data-productKeys")||document.currentScript.getAttribute("data-licenseKey")||document.currentScript.getAttribute("data-handshakeCode")||document.currentScript.getAttribute("data-organizationID"))||"",OT=!Wn&&document.currentScript&&document.currentScript.getAttribute("data-sessionPassword")||"",fp=t=>{if(t==null)t=[];else{t=t instanceof Array?[...t]:[t];for(let e=0;e<t.length;++e){if(!Wn){let i=document.createElement("a");i.href=t[e],t[e]=i.href}t[e].endsWith("/")||(t[e]+="/")}}return t};var Ne,wa,cu,Nt,kr;(function(t){t[t.IPF_Binary=0]="IPF_Binary",t[t.IPF_BinaryInverted=1]="IPF_BinaryInverted",t[t.IPF_GrayScaled=2]="IPF_GrayScaled",t[t.IPF_NV21=3]="IPF_NV21",t[t.IPF_RGB_565=4]="IPF_RGB_565",t[t.IPF_RGB_555=5]="IPF_RGB_555",t[t.IPF_RGB_888=6]="IPF_RGB_888",t[t.IPF_ARGB_8888=7]="IPF_ARGB_8888",t[t.IPF_RGB_161616=8]="IPF_RGB_161616",t[t.IPF_ARGB_16161616=9]="IPF_ARGB_16161616",t[t.IPF_ABGR_8888=10]="IPF_ABGR_8888",t[t.IPF_ABGR_16161616=11]="IPF_ABGR_16161616",t[t.IPF_BGR_888=12]="IPF_BGR_888"})(Ne||(Ne={})),function(t){t[t.DBR_SYSTEM_EXCEPTION=1]="DBR_SYSTEM_EXCEPTION",t[t.DBR_SUCCESS=0]="DBR_SUCCESS",t[t.DBR_UNKNOWN=-1e4]="DBR_UNKNOWN",t[t.DBR_NO_MEMORY=-10001]="DBR_NO_MEMORY",t[t.DBR_NULL_REFERENCE=-10002]="DBR_NULL_REFERENCE",t[t.DBR_LICENSE_INVALID=-10003]="DBR_LICENSE_INVALID",t[t.DBR_LICENSE_EXPIRED=-10004]="DBR_LICENSE_EXPIRED",t[t.DBR_FILE_NOT_FOUND=-10005]="DBR_FILE_NOT_FOUND",t[t.DBR_FILETYPE_NOT_SUPPORTED=-10006]="DBR_FILETYPE_NOT_SUPPORTED",t[t.DBR_BPP_NOT_SUPPORTED=-10007]="DBR_BPP_NOT_SUPPORTED",t[t.DBR_INDEX_INVALID=-10008]="DBR_INDEX_INVALID",t[t.DBR_BARCODE_FORMAT_INVALID=-10009]="DBR_BARCODE_FORMAT_INVALID",t[t.DBR_CUSTOM_REGION_INVALID=-10010]="DBR_CUSTOM_REGION_INVALID",t[t.DBR_MAX_BARCODE_NUMBER_INVALID=-10011]="DBR_MAX_BARCODE_NUMBER_INVALID",t[t.DBR_IMAGE_READ_FAILED=-10012]="DBR_IMAGE_READ_FAILED",t[t.DBR_TIFF_READ_FAILED=-10013]="DBR_TIFF_READ_FAILED",t[t.DBR_QR_LICENSE_INVALID=-10016]="DBR_QR_LICENSE_INVALID",t[t.DBR_1D_LICENSE_INVALID=-10017]="DBR_1D_LICENSE_INVALID",t[t.DBR_DIB_BUFFER_INVALID=-10018]="DBR_DIB_BUFFER_INVALID",t[t.DBR_PDF417_LICENSE_INVALID=-10019]="DBR_PDF417_LICENSE_INVALID",t[t.DBR_DATAMATRIX_LICENSE_INVALID=-10020]="DBR_DATAMATRIX_LICENSE_INVALID",t[t.DBR_PDF_READ_FAILED=-10021]="DBR_PDF_READ_FAILED",t[t.DBR_PDF_DLL_MISSING=-10022]="DBR_PDF_DLL_MISSING",t[t.DBR_PAGE_NUMBER_INVALID=-10023]="DBR_PAGE_NUMBER_INVALID",t[t.DBR_CUSTOM_SIZE_INVALID=-10024]="DBR_CUSTOM_SIZE_INVALID",t[t.DBR_CUSTOM_MODULESIZE_INVALID=-10025]="DBR_CUSTOM_MODULESIZE_INVALID",t[t.DBR_RECOGNITION_TIMEOUT=-10026]="DBR_RECOGNITION_TIMEOUT",t[t.DBR_JSON_PARSE_FAILED=-10030]="DBR_JSON_PARSE_FAILED",t[t.DBR_JSON_TYPE_INVALID=-10031]="DBR_JSON_TYPE_INVALID",t[t.DBR_JSON_KEY_INVALID=-10032]="DBR_JSON_KEY_INVALID",t[t.DBR_JSON_VALUE_INVALID=-10033]="DBR_JSON_VALUE_INVALID",t[t.DBR_JSON_NAME_KEY_MISSING=-10034]="DBR_JSON_NAME_KEY_MISSING",t[t.DBR_JSON_NAME_VALUE_DUPLICATED=-10035]="DBR_JSON_NAME_VALUE_DUPLICATED",t[t.DBR_TEMPLATE_NAME_INVALID=-10036]="DBR_TEMPLATE_NAME_INVALID",t[t.DBR_JSON_NAME_REFERENCE_INVALID=-10037]="DBR_JSON_NAME_REFERENCE_INVALID",t[t.DBR_PARAMETER_VALUE_INVALID=-10038]="DBR_PARAMETER_VALUE_INVALID",t[t.DBR_DOMAIN_NOT_MATCHED=-10039]="DBR_DOMAIN_NOT_MATCHED",t[t.DBR_RESERVEDINFO_NOT_MATCHED=-10040]="DBR_RESERVEDINFO_NOT_MATCHED",t[t.DBR_AZTEC_LICENSE_INVALID=-10041]="DBR_AZTEC_LICENSE_INVALID",t[t.DBR_LICENSE_DLL_MISSING=-10042]="DBR_LICENSE_DLL_MISSING",t[t.DBR_LICENSEKEY_NOT_MATCHED=-10043]="DBR_LICENSEKEY_NOT_MATCHED",t[t.DBR_REQUESTED_FAILED=-10044]="DBR_REQUESTED_FAILED",t[t.DBR_LICENSE_INIT_FAILED=-10045]="DBR_LICENSE_INIT_FAILED",t[t.DBR_PATCHCODE_LICENSE_INVALID=-10046]="DBR_PATCHCODE_LICENSE_INVALID",t[t.DBR_POSTALCODE_LICENSE_INVALID=-10047]="DBR_POSTALCODE_LICENSE_INVALID",t[t.DBR_DPM_LICENSE_INVALID=-10048]="DBR_DPM_LICENSE_INVALID",t[t.DBR_FRAME_DECODING_THREAD_EXISTS=-10049]="DBR_FRAME_DECODING_THREAD_EXISTS",t[t.DBR_STOP_DECODING_THREAD_FAILED=-10050]="DBR_STOP_DECODING_THREAD_FAILED",t[t.DBR_SET_MODE_ARGUMENT_ERROR=-10051]="DBR_SET_MODE_ARGUMENT_ERROR",t[t.DBR_LICENSE_CONTENT_INVALID=-10052]="DBR_LICENSE_CONTENT_INVALID",t[t.DBR_LICENSE_KEY_INVALID=-10053]="DBR_LICENSE_KEY_INVALID",t[t.DBR_LICENSE_DEVICE_RUNS_OUT=-10054]="DBR_LICENSE_DEVICE_RUNS_OUT",t[t.DBR_GET_MODE_ARGUMENT_ERROR=-10055]="DBR_GET_MODE_ARGUMENT_ERROR",t[t.DBR_IRT_LICENSE_INVALID=-10056]="DBR_IRT_LICENSE_INVALID",t[t.DBR_MAXICODE_LICENSE_INVALID=-10057]="DBR_MAXICODE_LICENSE_INVALID",t[t.DBR_GS1_DATABAR_LICENSE_INVALID=-10058]="DBR_GS1_DATABAR_LICENSE_INVALID",t[t.DBR_GS1_COMPOSITE_LICENSE_INVALID=-10059]="DBR_GS1_COMPOSITE_LICENSE_INVALID",t[t.DBR_PANORAMA_LICENSE_INVALID=-10060]="DBR_PANORAMA_LICENSE_INVALID",t[t.DBR_DOTCODE_LICENSE_INVALID=-10061]="DBR_DOTCODE_LICENSE_INVALID",t[t.DBR_PHARMACODE_LICENSE_INVALID=-10062]="DBR_PHARMACODE_LICENSE_INVALID",t[t.DBR_IMAGE_ORIENTATION_INVALID=-10063]="DBR_IMAGE_ORIENTATION_INVALID",t[t.DMERR_NO_LICENSE=-2e4]="DMERR_NO_LICENSE",t[t.DMERR_LICENSE_SYNC_FAILED=-20003]="DMERR_LICENSE_SYNC_FAILED",t[t.DMERR_TRIAL_LICENSE=-20010]="DMERR_TRIAL_LICENSE",t[t.DMERR_FAILED_TO_REACH_LTS=-20200]="DMERR_FAILED_TO_REACH_LTS"}(wa||(wa={})),function(t){t[t.IMRDT_IMAGE=1]="IMRDT_IMAGE",t[t.IMRDT_CONTOUR=2]="IMRDT_CONTOUR",t[t.IMRDT_LINESEGMENT=4]="IMRDT_LINESEGMENT",t[t.IMRDT_LOCALIZATIONRESULT=8]="IMRDT_LOCALIZATIONRESULT",t[t.IMRDT_REGIONOFINTEREST=16]="IMRDT_REGIONOFINTEREST",t[t.IMRDT_QUADRILATERAL=32]="IMRDT_QUADRILATERAL"}(cu||(cu={})),function(t){t[t.BF_ALL=-29360129]="BF_ALL",t[t.BF_ONED=3147775]="BF_ONED",t[t.BF_GS1_DATABAR=260096]="BF_GS1_DATABAR",t[t.BF_CODE_39=1]="BF_CODE_39",t[t.BF_CODE_128=2]="BF_CODE_128",t[t.BF_CODE_93=4]="BF_CODE_93",t[t.BF_CODABAR=8]="BF_CODABAR",t[t.BF_ITF=16]="BF_ITF",t[t.BF_EAN_13=32]="BF_EAN_13",t[t.BF_EAN_8=64]="BF_EAN_8",t[t.BF_UPC_A=128]="BF_UPC_A",t[t.BF_UPC_E=256]="BF_UPC_E",t[t.BF_INDUSTRIAL_25=512]="BF_INDUSTRIAL_25",t[t.BF_CODE_39_EXTENDED=1024]="BF_CODE_39_EXTENDED",t[t.BF_GS1_DATABAR_OMNIDIRECTIONAL=2048]="BF_GS1_DATABAR_OMNIDIRECTIONAL",t[t.BF_GS1_DATABAR_TRUNCATED=4096]="BF_GS1_DATABAR_TRUNCATED",t[t.BF_GS1_DATABAR_STACKED=8192]="BF_GS1_DATABAR_STACKED",t[t.BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL=16384]="BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL",t[t.BF_GS1_DATABAR_EXPANDED=32768]="BF_GS1_DATABAR_EXPANDED",t[t.BF_GS1_DATABAR_EXPANDED_STACKED=65536]="BF_GS1_DATABAR_EXPANDED_STACKED",t[t.BF_GS1_DATABAR_LIMITED=131072]="BF_GS1_DATABAR_LIMITED",t[t.BF_PATCHCODE=262144]="BF_PATCHCODE",t[t.BF_PDF417=33554432]="BF_PDF417",t[t.BF_QR_CODE=67108864]="BF_QR_CODE",t[t.BF_DATAMATRIX=134217728]="BF_DATAMATRIX",t[t.BF_AZTEC=268435456]="BF_AZTEC",t[t.BF_MAXICODE=536870912]="BF_MAXICODE",t[t.BF_MICRO_QR=1073741824]="BF_MICRO_QR",t[t.BF_MICRO_PDF417=524288]="BF_MICRO_PDF417",t[t.BF_GS1_COMPOSITE=-2147483648]="BF_GS1_COMPOSITE",t[t.BF_MSI_CODE=1048576]="BF_MSI_CODE",t[t.BF_CODE_11=2097152]="BF_CODE_11",t[t.BF_NULL=0]="BF_NULL"}(Nt||(Nt={})),function(t){t[t.IRT_NO_RESULT=0]="IRT_NO_RESULT",t[t.IRT_ORIGINAL_IMAGE=1]="IRT_ORIGINAL_IMAGE",t[t.IRT_COLOUR_CLUSTERED_IMAGE=2]="IRT_COLOUR_CLUSTERED_IMAGE",t[t.IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE=4]="IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE",t[t.IRT_TRANSFORMED_GRAYSCALE_IMAGE=8]="IRT_TRANSFORMED_GRAYSCALE_IMAGE",t[t.IRT_PREDETECTED_REGION=16]="IRT_PREDETECTED_REGION",t[t.IRT_PREPROCESSED_IMAGE=32]="IRT_PREPROCESSED_IMAGE",t[t.IRT_BINARIZED_IMAGE=64]="IRT_BINARIZED_IMAGE",t[t.IRT_TEXT_ZONE=128]="IRT_TEXT_ZONE",t[t.IRT_CONTOUR=256]="IRT_CONTOUR",t[t.IRT_LINE_SEGMENT=512]="IRT_LINE_SEGMENT",t[t.IRT_FORM=1024]="IRT_FORM",t[t.IRT_SEGMENTATION_BLOCK=2048]="IRT_SEGMENTATION_BLOCK",t[t.IRT_TYPED_BARCODE_ZONE=4096]="IRT_TYPED_BARCODE_ZONE",t[t.IRT_PREDETECTED_QUADRILATERAL=8192]="IRT_PREDETECTED_QUADRILATERAL"}(kr||(kr={}));const pp=t=>t&&typeof t=="object"&&typeof t.then=="function";class k_ extends Promise{constructor(e){let i,n;super((r,s)=>{i=r,n=s}),this._s="pending",this.resolve=r=>{this.isPending&&(pp(r)?this.task=r:(this._s="fulfilled",i(r)))},this.reject=r=>{this.isPending&&(this._s="rejected",n(r))},this.task=e}get status(){return this._s}get isPending(){return this._s==="pending"}get isFulfilled(){return this._s==="fulfilled"}get isRejected(){return this._s==="rejected"}get task(){return this._task}set task(e){let i;this._task=e,pp(e)?i=e:typeof e=="function"&&(i=new Promise(e)),i&&(async()=>{try{const n=await i;e===this._task&&this.resolve(n)}catch(n){e===this._task&&this.reject(n)}})()}get isEmpty(){return this._task==null}}const ic=["iPhone","iPad","Android","HarmonyOS"].includes(ut.OS)?2048:4096;class ${constructor(){this._instanceID=void 0,this._ifSaveOriginalImageInACanvas=!1,this.oriCanvas=null,this.oriCanvasData=null,this.canvas=null,this.bFilterRegionInJs=!1,this._region=null,this._timeStartDecode=null,this._timeEnterInnerDBR=null,this._timeGetMessage=null,this.decodeRecords={},this.bDestroyed=!1,this._lastErrorCode=0,this._lastErrorString="",this._lastInnerDecodeDuration=0,this.intervalTime=0,this._intervalGetVideoFrame=0,this.array_getFrameTimeCost=[],this.array_decodeFrameTimeCost=[],this._indexCurrentDecodingFrame=0,this._arrPolygons=[],this._bPauseScan=!1,this._intervalDetectVideoPause=1e3,this._soundSource="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",this.bPlaySoundOnSuccessfulRead=!1,this.bVibrateOnSuccessfulRead=!1,this.vibrateDuration=300,this.captureAndDecodeInParallel=!0,this.autoSuggestTip=!1,this.suggestTipFrameArray=[],this.suggestTipFrameLimit=[5,3],this.noIntermediateResultsCount=0,this.noIntermediateResultsTipLimit=100,this.tinyBarcodeTipModuleSizeLimit=3,this.hugeBarcodeTipLimit=.9,this.autoZoomInFrameArray=[],this.autoZoomInFrameLimit=[5,3],this.autoZoomInStepRate=1/3,this.autoZoomInMaxStep=1.5,this.autoZoomInMaxTimes=5,this.autoZoomInMinStep=Math.pow(10,1/this.autoZoomInMaxTimes),this.autoZoomInIdealModuleSize=6,this.autoZoomOutFrameCount=0,this.autoZoomOutFrameLimit=3,this.autoZoomOutStepRate=1/3,this.autoZoomOutMinValue=1,this.autoZoomOutMinStep=2,this.autoZoomOutStepRate_2=.05,this.autoZoomOutMinValue_2=2,this.frameArrayInIdealZoom=[],this.frameLimitInIdealZoom=[5,3],this.enableZoomOutInIdealZoom=!1,this.nextActionInIdealZoom="focus",this.autoFocusFrameArray=[],this.autoFocusFrameLimit=[5,3],this.autoZoomIdealArea=[0,.05],this.autoZoomTargetBorder=.9,this.autoZoomDetectionArea=.5,this.autoZoom=!1,this.autoFocus=!1,this._resultHighlightingDuration=-1,this._dce=null,this._imgSource=null,this._maxCvsSideLength=ic,this._promiseStartScan=null,this.beepSound=new _a({src:[this._soundSource],onplayerror:(e,i)=>{console.warn(`Sound '${e}' playback failure: ${i}`)}})}static get version(){return this._version}static get license(){return this._license}static set license(e){((i,n)=>{const r=i;if(!r._pLoad.isEmpty)throw new Error("`license`"+Xr);r._license=n})($,e)}static get productKeys(){return this._license}static set productKeys(e){$.license=e}static get handshakeCode(){return this._license}static set handshakeCode(e){$.license=e}static get organizationID(){return this._license}static set organizationID(e){$.license=e}static set sessionPassword(e){((i,n)=>{const r=i;if(!r._pLoad.isEmpty)throw new Error("`sessionPassword`"+Xr);r._sessionPassword=n})($,e)}static get sessionPassword(){return this._sessionPassword}static async detectEnvironment(){return await(async()=>({wasm:CT,worker:xT,getUserMedia:A_,camera:await TT(),browser:ut.browser,version:ut.version,OS:ut.OS}))()}static get engineResourcePath(){return this._engineResourcePath}static set engineResourcePath(e){if(!this._pLoad.isEmpty)throw new Error("`engineResourcePath` is not allowed to change after `createInstance` or `loadWasm` is called.");$._engineResourcePath=(i=>{if(i==null&&(i="./"),!Wn){let n=document.createElement("a");n.href=i,i=n.href}return i.endsWith("/")||(i+="/"),i})(e)}static get licenseServer(){return this._licenseServer}static set licenseServer(e){((i,n)=>{const r=i;if(!r._pLoad.isEmpty)throw new Error("`licenseServer`"+Xr);r._licenseServer=fp(n)})($,e)}static get deviceFriendlyName(){return this._deviceFriendlyName}static set deviceFriendlyName(e){((i,n)=>{const r=i;if(!r._pLoad.isEmpty)throw new Error("`deviceFriendlyName`"+Xr);r._deviceFriendlyName=n||""})($,e)}static get _bUseFullFeature(){return this.__bUseFullFeature}static set _bUseFullFeature(e){if(!this._pLoad.isEmpty)throw new Error("`_bUseFullFeature` is not allowed to change after `createInstance` or `loadWasm` is called.");$.__bUseFullFeature=e}static isImageSource(e){return!(!e||typeof e!="object"||Array.isArray(e))&&"getImage"in e}static isDSImage(e){return!(!e||typeof e!="object"||Array.isArray(e))&&"data"in e&&"width"in e&&"height"in e&&"pixelFormat"in e}static isDCEFrame(e){return!(!e||typeof e!="object"||Array.isArray(e))&&"data"in e&&"region"in e&&"sx"in e&&"sy"in e&&"width"in e&&"height"in e&&("colorMode"in e||"pixelFormat"in e)&&"timeSpent"in e&&"timeStamp"in e&&"isCropped"in e&&"toCanvas"in e&&"_sWidth"in e&&"_sHeight"in e&&"_bUseWebGL"in e}get ifSaveOriginalImageInACanvas(){return this._ifSaveOriginalImageInACanvas}set ifSaveOriginalImageInACanvas(e){this._ifSaveOriginalImageInACanvas=e}getOriginalImageInACanvas(){return!this.oriCanvas&&this.oriCanvasData?this.oriCanvasData.toCanvas():this.oriCanvas}set region(e){this._region=e,this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}get region(){return this._region}static isWasmLoaded(){return this._pLoad.isFulfilled}isContextDestroyed(){return this.bDestroyed}static get lastErrorCode(){return this._lastErrorCode}static get lastErrorString(){return this._lastErrorString}get lastErrorCode(){return this._lastErrorCode}get lastErrorString(){return this._lastErrorString}static get defaultUIElementURL(){var e;return(e=$._defaultUIElementURL)===null||e===void 0?void 0:e.replace("@engineResourcePath/",$.engineResourcePath)}static set defaultUIElementURL(e){$._defaultUIElementURL=e}static _fireHTTPSWarnning(){$.onWarning&&location&&location.protocol!=="https:"&&setTimeout(()=>{$.onWarning&&$.onWarning({id:2,message:"Not connected via SSL (HTTPS), the SDK may not work correctly."})},0)}get soundSource(){return this._soundSource}set soundSource(e){this._soundSource=e,this.beepSound=new _a({src:[this._soundSource],onplayerror:(i,n)=>{console.warn(`Sound '${i}' playback failure: ${n}`)}})}get whenToPlaySoundforSuccessfulRead(){return this.bPlaySoundOnSuccessfulRead===!0?"frame":this.bPlaySoundOnSuccessfulRead?this.bPlaySoundOnSuccessfulRead:"never"}set whenToPlaySoundforSuccessfulRead(e){this.bPlaySoundOnSuccessfulRead=e!=="never"&&e}get whenToVibrateforSuccessfulRead(){return this.bVibrateOnSuccessfulRead===!0?"frame":this.bVibrateOnSuccessfulRead?this.bVibrateOnSuccessfulRead:"never"}set whenToVibrateforSuccessfulRead(e){this.bVibrateOnSuccessfulRead=e!=="never"&&e}set dce(e){this._dce=e}get dce(){return!this._dce||this._dce.isDisposed||this._dce.disposed?null:this._dce}set maxCvsSideLength(e){this._maxCvsSideLength=e,this._dceControler&&this._dceControler.setDisiredValue(this,"maxCvsSideLength",e)}get maxCvsSideLength(){return this._maxCvsSideLength}async _registerDCEControler(){if(!this.dce)return;$._onLog&&$._onLog("_registerDCEControler()");const e=this.dce;this._dceControler=e._createControler();const i=this._dceControler;i.register(this),i.setDisiredValue(this,"refreshInterval",200),i.setDisiredValue(this,"maxCvsSideLength",this._maxCvsSideLength),this._styleIdBeforeVerification=this.dce.createDrawingStyle({fillStyle:"rgba(248,252,0,0.2)",strokeStyle:"transparent",paintMode:"strokeAndFill"});try{}catch(s){s.name==="ReferenceError"&&window&&(window.ResizeObserver=void 0)}const n=e.getUIElement(),r=this.dce.constructor;if(r._defaultUIElementURL==="@engineResourcePath/dce.ui.html")try{n?n===i._innerSetUI&&(await e.setUIElement(`${r.engineResourcePath}dce.ui.html`),i._innerSetUI=e.getUIElement()):(await e.setUIElement(`${r.engineResourcePath}dbr.ui.html`),i._innerSetUI=e.getUIElement())}catch(s){await e.setUIElement(r.defaultUIElementURL)}else n||await e.setUIElement(r.defaultUIElementURL);this.callbackCameraChange=()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this.callbackResolutionChange=()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this.callbackCameraClose=()=>{this.stopScanning(!0),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0,this._bPauseScan=!1},this.callbackSingleFrameAcquired=async s=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null);let a=await this._decode_DCEFrame(s,{bCopyData:!1}),f=null;if(a&&a.length){const{sx:_,sy:y,width:w,height:x,_sWidth:E,_sHeight:k}=s;f=a.map(P=>({localizationResult:JSON.parse(JSON.stringify(P.localizationResult))})),$.recalculateResultLocation(f,_,y,E,k,w,x)}if(this._drawResults(f,a),await this.clearMapDecodeRecord(),this.onImageRead&&this.dce.isOpen()&&!this._bPauseScan){let _=this._cloneDecodeResults(a);this.onImageRead(_)}if(this.onUniqueRead&&this.dce.isOpen()&&!this._bPauseScan)for(let _ of a)this.onUniqueRead(_.barcodeText,this._cloneDecodeResults(_))},e.on("cameraChange",this.callbackCameraChange),e.on("resolutionChange",this.callbackResolutionChange),e.on("cameraClose",this.callbackCameraClose),e.on("singleFrameAcquired",this.callbackSingleFrameAcquired)}_logoutDCEControler(){this.dce&&this._dceControler&&($._onLog&&$._onLog("_logoutDCEControler()"),this._dceControler.logout(this),this.dce.off("cameraChange",this.callbackCameraChange),this.dce.off("resolutionChange",this.callbackResolutionChange),this.dce.off("cameraClose",this.callbackCameraClose),this.dce.off("singleFrameAcquired",this.callbackSingleFrameAcquired),this._dceControler=null,this.dce=null)}async setImageSource(e,i){if(e==null)return this._imgSource=null,this._logoutDCEControler(),void(this._drawingItemNamespace=null);if(e&&e.isCameraEnhancer)this.dce=e,await this._registerDCEControler(),this._imgSource=null;else{if(!$.isImageSource(e))throw new Error("Invalid value.");this._logoutDCEControler(),this._imgSource=e}i&&i.resultsHighlightBaseShapes&&(this._drawingItemNamespace=i.resultsHighlightBaseShapes)}static async loadWasm(){if(this._pLoad.isEmpty){let{lt:e,l:i,ls:n,sp:r,rmk:s}=(a=>{const f=a;if(f._pLoad.isEmpty){let _,y,w=f._license||"",x=JSON.parse(JSON.stringify(f._licenseServer)),E=f._sessionPassword,k=0;if(w.startsWith("t")||w.startsWith("f"))k=0;else if(w.length===0||w.startsWith("P")||w.startsWith("L")||w.startsWith("Y")||w.startsWith("A"))k=1;else{k=2;const P=w.indexOf(":");if(P!=-1&&(w=w.substring(P+1)),w.startsWith("DLS2")){let M;try{let V=w.substring(4);V=atob(V),M=JSON.parse(V)}catch(V){throw new Error("Format Error: The license string you specified is invalid, please check to make sure it is correct.")}if(w=M.handshakeCode?M.handshakeCode:M.organizationID?M.organizationID:"",typeof w=="number"&&(w=JSON.stringify(w)),x.length===0){let V=[];M.mainServerURL&&(V[0]=M.mainServerURL),M.standbyServerURL&&(V[1]=M.standbyServerURL),x=fp(V)}!E&&M.sessionPassword&&(E=M.sessionPassword),_=M.remark}(w==="200001"||w.startsWith("200001-"))&&(x&&x.length||(w="")),w||(k=1)}if(k&&(globalThis.crypto||(y="Please upgrade your browser to support online key."),globalThis.crypto.subtle||(y="Require https to use online key in this browser.")),y){if(k!==1)throw new Error(y);k=0,console.warn(y),f._lastErrorCode=-1,f._lastErrorString=y}return k===1&&(w="",console.warn("Applying for a public trial license ...")),{lt:k,l:w,ls:x,sp:E,rmk:_}}throw new Error("Can't preprocess license again"+Xr)})($);this._pLoad.task=async(a,f)=>{let _=$.engineResourcePath+$._workerName;$.engineResourcePath.startsWith(location.origin)||(_=await fetch(_).then(y=>y.blob()).then(y=>URL.createObjectURL(y))),$._dbrWorker=new Worker(_),$._dbrWorker.onerror=y=>{let w=new Error(y.message);f(w)},$._dbrWorker.onmessage=async y=>{let w=y.data?y.data:y;switch(w.type){case"log":$._onLog&&$._onLog(w.message);break;case"load":{w.message&&(w.message=w.message.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamsoft-barcode-reader/#javascript)"));let x,E=!1;e===1&&(E=!0,w.message||(w.message="Using a temporary license. [Register for a 30-day trial license >>>](https://www.dynamsoft.com/customer/license/trialLicense?product=dbr&deploymenttype=browser)")),w.success?($._dbrWorker.onerror=null,$._version=w.version+"(JS "+$._jsVersion+"."+$._jsEditVersion+")",$._onLog&&$._onLog("load dbr worker success"),w.message&&console.warn(w.message)):(x=new Error(w.message),x.stack=w.stack+`
`+x.stack,x.ltsErrorCode=w.ltsErrorCode,E||w.ltsErrorCode==111&&w.message.toLowerCase().indexOf("trial license")!=-1&&(E=!0)),E&&$.showDialog(w.success?"warn":"error",w.message),w.success?a():f(x);break}case"task":{let x=w.id,E=w.body;try{$._taskCallbackMap.get(x)(E),$._taskCallbackMap.delete(x)}catch(k){throw $._taskCallbackMap.delete(x),k}break}default:$._onLog&&$._onLog(y)}},$._dbrWorker.postMessage({type:"loadWasm",engineResourcePath:$.engineResourcePath,bUseFullFeature:$._bUseFullFeature,bd:$._bWasmDebug,v:$._jsVersion,brtk:!!e,bptk:e===1,l:i,dm:location.origin.startsWith("http")?location.origin:"https://localhost",os:ut,cv:$.authCacheVersion,fn:$.deviceFriendlyName,ls:n,sp:r,rmk:s})}}await this._pLoad}static async showDialog(e,i){await(async(n,r,s)=>{if(!n._bNeverShowDialog)try{let a=await fetch(n.engineResourcePath+"dls.license.dialog.html");if(!a.ok)throw Error("Get license dialog fail. Network Error: "+a.statusText);let f=await a.text();if(!f.trim().startsWith("<"))throw Error("Get license dialog fail. Can't get valid HTMLElement.");let _=document.createElement("div");_.innerHTML=f;let y=[];for(let R=0;R<_.childElementCount;++R){let D=_.children[R];D instanceof HTMLStyleElement&&(y.push(D),document.head.append(D))}let w=_.childElementCount==1?_.children[0]:_;w.remove();let x,E,k,P,M,V=[w],L=w.children;for(let R of L)V.push(R);for(let R=0;R<V.length;++R)for(let D of V[R].children)V.push(D);for(let R of V)if(!x&&R.classList.contains("dls-license-mask"))x=R,R.addEventListener("click",D=>{if(R==D.target){w.remove();for(let Y of y)Y.remove()}});else if(!E&&R.classList.contains("dls-license-icon-close"))E=R,R.addEventListener("click",()=>{w.remove();for(let D of y)D.remove()});else if(!k&&R.classList.contains("dls-license-icon-error"))k=R,r!="error"&&R.remove();else if(!P&&R.classList.contains("dls-license-icon-warn"))P=R,r!="warn"&&R.remove();else if(!M&&R.classList.contains("dls-license-msg-content")){M=R;let D=s;for(;D;){let Y=D.indexOf("["),ie=D.indexOf("]",Y),oe=D.indexOf("(",ie),z=D.indexOf(")",oe);if(Y==-1||ie==-1||oe==-1||z==-1){R.appendChild(new Text(D));break}Y>0&&R.appendChild(new Text(D.substring(0,Y)));let S=document.createElement("a"),he=D.substring(Y+1,ie);S.innerText=he;let le=D.substring(oe+1,z);S.setAttribute("href",le),S.setAttribute("target","_blank"),R.appendChild(S),D=D.substring(z+1)}}document.body.appendChild(w)}catch(a){n._onLog&&n._onLog(a.message||a)}})(this,e,i)}static async createInstanceInWorker(e=!1){return await $.loadWasm(),await new Promise((i,n)=>{let r=$._nextTaskID++;$._taskCallbackMap.set(r,s=>{if(s.success)return i(s.instanceID);{let a=new Error(s.message);return a.stack=s.stack+`
`+a.stack,n(a)}}),$._dbrWorker.postMessage({type:"createInstance",id:r,bScanner:e})})}static async createInstance(){const e=new $;return e._instanceID=await $.createInstanceInWorker(),$._fireHTTPSWarnning(),e}async clearMapDecodeRecord(){return await new Promise((e,i)=>{let n=$._nextTaskID++;$._taskCallbackMap.set(n,r=>{if(r.success)return e();{let s=new Error(r.message);return s.stack=r.stack+`
`+s.stack,i(s)}}),$._dbrWorker.postMessage({type:"clearMapDecodeRecord",id:n,instanceID:this._instanceID})})}async decode(e){$._onLog&&$._onLog("decode(source: any)"),$._onLog&&(this._timeStartDecode=Date.now());{let i={};return!this.region||this.region instanceof Array||(i.region=JSON.parse(JSON.stringify(this.region))),e instanceof Blob?await this._decode_Blob(e,i):e instanceof ArrayBuffer?await this._decode_ArrayBuffer(e,i):e instanceof Uint8Array||e instanceof Uint8ClampedArray?await this._decode_Uint8Array(e,i):e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?await this._decode_Image(e,i):e instanceof HTMLCanvasElement?await this._decode_Canvas(e,i):e instanceof HTMLVideoElement?await this._decode_Video(e,i):typeof e=="string"?e.substring(0,11)=="data:image/"?await this._decode_Base64(e,i):await this._decode_Url(e,i):$.isDCEFrame(e)?(i.bCopyData=!0,await this._decode_DCEFrame(e,i)):$.isDSImage(e)?(i.bCopyData=!0,await this._decode_DSImage(e,i)):await Promise.reject(TypeError("'_decode(source, config)': Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'."))}}async decodeBase64String(e){let i={};return!this.region||this.region instanceof Array||(i.region=JSON.parse(JSON.stringify(this.region))),this._decode_Base64(e,i)}async decodeUrl(e){let i={};return!this.region||this.region instanceof Array||(i.region=JSON.parse(JSON.stringify(this.region))),this._decode_Url(e,i)}async _decodeBuffer_Uint8Array(e,i,n,r,s,a,f){return await new Promise((_,y)=>{let w=$._nextTaskID++;$._taskCallbackMap.set(w,x=>{if(x.success){let E,k=$._onLog?Date.now():0;$._onLog&&$._onLog("worker return result: "+k),this._lastInnerDecodeDuration=x.duration;try{E=this._handleRetJsonString(x.decodeReturn)}catch(P){return y(P)}if($._onLog){let P=Date.now();$._onLog("DBR getting message from worker timestamp: "+k),$._onLog("From DBR staring decoding to entering worker costs: "+(this._timeEnterInnerDBR-this._timeStartDecode)),$._onLog("From DBR entering worker to returning message from worker costs: "+(k-this._timeEnterInnerDBR)),$._onLog("Handling results from DBR worker costs: "+(P-k)),$._onLog("Total decoding image costs: "+(P-this._timeStartDecode))}return _(E)}{let E=new Error(x.message);return E.stack=x.stack+`
`+E.stack,y(E)}}),this._timeEnterInnerDBR=Date.now(),$._onLog&&$._onLog("Sending buffer to worker timestamp:"+this._timeEnterInnerDBR),$._dbrWorker.postMessage({type:"decodeBuffer",id:w,instanceID:this._instanceID,body:{buffer:e,width:i,height:n,stride:r,format:s,orientation:a,config:f}},[e.buffer]),$._onLog&&f&&f.timeStamp&&$._onLog("Delay of decoding image: "+(this._timeEnterInnerDBR-f.timeStamp))})}async _decodeBuffer_Blob(e,i,n,r,s,a,f){$._onLog&&$._onLog("_decodeBuffer_Blob(buffer,width,height,stride,format)");const _=e.arrayBuffer?await e.arrayBuffer():await new Promise((y,w)=>{let x=new FileReader;x.readAsArrayBuffer(e),x.onload=()=>{y(x.result)},x.onerror=()=>{w(x.error)}});return await this._decodeBuffer_Uint8Array(new Uint8Array(_),i,n,r,s,a,f)}async decodeBuffer(e,i,n,r,s,a,f){let _;return $._onLog&&$._onLog("decodeBuffer(buffer,width,height,stride,format)"),$._onLog&&(this._timeStartDecode=Date.now()),e instanceof Uint8Array||e instanceof Uint8ClampedArray?_=await this._decodeBuffer_Uint8Array(e,i,n,r,s,a,f):e instanceof ArrayBuffer?_=await this._decodeBuffer_Uint8Array(new Uint8Array(e),i,n,r,s,a,f):e instanceof Blob&&(_=await this._decodeBuffer_Blob(e,i,n,r,s,a,f)),_}async _decodeFileInMemory_Uint8Array(e){return await new Promise((i,n)=>{let r=$._nextTaskID++;$._taskCallbackMap.set(r,s=>{if(s.success){let a;this._lastInnerDecodeDuration=s.duration;try{a=this._handleRetJsonString(s.decodeReturn)}catch(f){return n(f)}return i(a)}{let a=new Error(s.message);return a.stack=s.stack+`
`+a.stack,n(a)}}),$._dbrWorker.postMessage({type:"decodeFileInMemory",id:r,instanceID:this._instanceID,body:{bytes:e}})})}async getRuntimeSettings(){return await new Promise((e,i)=>{let n=$._nextTaskID++;$._taskCallbackMap.set(n,r=>{if(r.success){let s=JSON.parse(r.results);return this.userDefinedRegion!=null&&(s.region=JSON.parse(JSON.stringify(this.userDefinedRegion))),e(s)}{let s=new Error(r.message);return s.stack=r.stack+`
`+s.stack,i(s)}}),$._dbrWorker.postMessage({type:"getRuntimeSettings",id:n,instanceID:this._instanceID})})}async updateRuntimeSettings(e){let i;if(typeof e=="string")if(e=="speed"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,i.region=n.region,i.deblurLevel=3,i.expectedBarcodesCount=0,i.localizationModes=[2,0,0,0,0,0,0,0]}else if(e=="balance"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,i.region=n.region,i.deblurLevel=5,i.expectedBarcodesCount=512,i.localizationModes=[2,16,0,0,0,0,0,0]}else if(e=="coverage"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,i.region=n.region}else if(e=="dense"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),this.maxCvsSideLength=4096,i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,i.region=n.region,i.deblurLevel=9,i.expectedBarcodesCount=0,i.localizationModes=[2,8,0,0,0,0,0,0]}else if(e=="distance"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),this.maxCvsSideLength=4096,i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,i.region=n.region,i.deblurLevel=3,i.expectedBarcodesCount=0,i.localizationModes=[2,8,0,0,0,0,0,0]}else i=JSON.parse(e);else{if(typeof e!="object")throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");if(i=JSON.parse(JSON.stringify(e)),i.region instanceof Array){let n=i.region;[n.regionLeft,n.regionTop,n.regionLeft,n.regionBottom,n.regionMeasuredByPercentage].some(r=>r!==void 0)&&(i.region={regionLeft:n.regionLeft||0,regionTop:n.regionTop||0,regionRight:n.regionRight||0,regionBottom:n.regionBottom||0,regionMeasuredByPercentage:n.regionMeasuredByPercentage||0})}}if(!$._bUseFullFeature){if(i.barcodeFormatIds&~(Nt.BF_ONED|Nt.BF_QR_CODE|Nt.BF_PDF417|Nt.BF_DATAMATRIX)||i.barcodeFormatIds_2!=0)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(i.intermediateResultTypes!=0)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}if(this.bFilterRegionInJs){let n=i.region;if(n instanceof Array)throw Error("The `region` of type `Array` is only allowed in `BarcodeScanner`.");this.userDefinedRegion=JSON.parse(JSON.stringify(n)),(n.regionLeft||n.regionTop||n.regionRight||n.regionBottom||n.regionMeasuredByPercentage)&&(n.regionLeft||n.regionTop||n.regionRight!=100||n.regionBottom!=100||!n.regionMeasuredByPercentage)?this.region=n:this.region=null,i.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0}}else this.userDefinedRegion=null,this.region=null;return(this.autoZoom||this.autoFocus)&&(i.intermediateResultTypes|=kr.IRT_TYPED_BARCODE_ZONE),await new Promise((n,r)=>{let s=$._nextTaskID++;$._taskCallbackMap.set(s,a=>{if(a.success){try{this._handleRetJsonString(a.updateReturn)}catch(f){r(f)}return n()}{let f=new Error(a.message);return f.stack=a.stack+`
`+f.stack,r(f)}}),$._dbrWorker.postMessage({type:"updateRuntimeSettings",id:s,instanceID:this._instanceID,body:{settings:JSON.stringify(i)}})})}async resetRuntimeSettings(){return this.userDefinedRegion=null,this.region=null,this.maxCvsSideLength=ic,await new Promise((e,i)=>{let n=$._nextTaskID++;$._taskCallbackMap.set(n,r=>{if(r.success)return e();{let s=new Error(r.message);return s.stack=r.stack+`
`+s.stack,i(s)}}),$._dbrWorker.postMessage({type:"resetRuntimeSettings",id:n,instanceID:this._instanceID})})}async _resetRuntimeSettingsToCppDefault(){return this.userDefinedRegion=null,this.region=null,this.maxCvsSideLength=ic,await new Promise((e,i)=>{let n=$._nextTaskID++;$._taskCallbackMap.set(n,r=>{if(r.success)return e();{let s=new Error(r.message);return s.stack=r.stack+`
`+s.stack,i(s)}}),$._dbrWorker.postMessage({type:"resetRuntimeSettingsToCppDefault",id:n,instanceID:this._instanceID})})}async outputRuntimeSettingsToString(){if(!$._bUseFullFeature)throw Error("outputRuntimeSettingsToString() is not supported in the compact version. Please try the full-featured version.");return await new Promise((e,i)=>{let n=$._nextTaskID++;$._taskCallbackMap.set(n,r=>{if(r.success)return e(r.results);{let s=new Error(r.message);return s.stack=r.stack+`
`+s.stack,i(s)}}),$._dbrWorker.postMessage({type:"outputRuntimeSettingsToString",id:n,instanceID:this._instanceID})})}async initRuntimeSettingsWithString(e){if(!$._bUseFullFeature)throw Error("initRuntimeSettingsWithString() is not supported in the compact version. Please try the full-featured version.");if(typeof e=="string")e=e;else{if(typeof e!="object")throw TypeError("'initRuntimeSettingstWithString(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");e=JSON.stringify(e)}return await new Promise((i,n)=>{let r=$._nextTaskID++;$._taskCallbackMap.set(r,s=>{if(s.success){try{this._handleRetJsonString(s.initReturn)}catch(a){n(a)}return i()}{let a=new Error(s.message);return a.stack=s.stack+`
`+a.stack,n(a)}}),$._dbrWorker.postMessage({type:"initRuntimeSettingsWithString",id:r,instanceID:this._instanceID,body:{settings:e}})})}async _decode_Blob(e,i){$._onLog&&$._onLog("_decode_Blob(blob: Blob)");let n=null,r=null;if(typeof createImageBitmap<"u")try{n=await createImageBitmap(e)}catch(a){}n||(r=await function(a){return new Promise((f,_)=>{let y=URL.createObjectURL(a),w=new Image;w.dbrObjUrl=y,w.src=y,w.onload=()=>{f(w)},w.onerror=x=>{_(new Error("Can't convert blob to image : "+(x instanceof Event?x.type:x)))}})}(e));let s=await this._decode_Image(n||r,i);return n&&n.close(),s}async _decode_ArrayBuffer(e,i){return await this._decode_Blob(new Blob([e]),i)}async _decode_Uint8Array(e,i){return await this._decode_Blob(new Blob([e]),i)}async _decode_Image(e,i){$._onLog&&$._onLog("_decode_Image(image: HTMLImageElement|ImageBitmap)"),i=i||{};let n,r,s=e instanceof HTMLImageElement?e.naturalWidth:e.width,a=e instanceof HTMLImageElement?e.naturalHeight:e.height,f=Math.max(s,a);if(f>this._maxCvsSideLength){let w=this._maxCvsSideLength/f;n=Math.round(s*w),r=Math.round(a*w)}else n=s,r=a;this.canvas||(this.canvas=document.createElement("canvas"));const _=this.canvas;_.width===n&&_.height===r||(_.width=n,_.height=r),_.ctx2d||(_.ctx2d=_.getContext("2d",{willReadFrequently:!0})),_.ctx2d.drawImage(e,0,0,s,a,0,0,n,r),e.dbrObjUrl&&URL.revokeObjectURL(e.dbrObjUrl);let y=await this._decode_Canvas(_,i);if(this.ifSaveOriginalImageInACanvas){const w=document.createElement("canvas");w.width=e.width,w.height=e.height,w.getContext("2d").drawImage(e,0,0),this.oriCanvas=w,this.oriCanvasData=null}return $.recalculateResultLocation(y,0,0,s,a,n,r),y}async _decode_Canvas(e,i){if($._onLog&&$._onLog("_decode_Canvas(canvas:HTMLCanvasElement)"),e.crossOrigin&&e.crossOrigin!="anonymous")throw"cors";if(e.width===0||e.height===0)throw Error("The width or height of the 'canvas' is 0.");this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=e,this.oriCanvasData=null);let n=(e.ctx2d||e.getContext("2d",{willReadFrequently:!0})).getImageData(0,0,e.width,e.height).data;return await this._decodeBuffer_Uint8Array(n,e.width,e.height,4*e.width,Ne.IPF_ABGR_8888,0,i)}async _decode_Video(e,i){if($._onLog&&$._onLog("_decode_Video(video)"),!(e instanceof HTMLVideoElement))throw TypeError("'_decode_Video(video [, config] )': Type of 'video' should be 'HTMLVideoElement'.");if(e.crossOrigin&&e.crossOrigin!="anonymous")throw"cors";i=i||{};let n,r,s=e.videoWidth,a=e.videoHeight,f=Math.max(s,a);if(f>this._maxCvsSideLength){let w=this._maxCvsSideLength/f;n=Math.round(s*w),r=Math.round(a*w)}else n=s,r=a;this.canvas||(this.canvas=document.createElement("canvas"));const _=this.canvas;_.width===n&&_.height===r||(_.width=n,_.height=r),_.ctx2d||(_.ctx2d=_.getContext("2d",{willReadFrequently:!0})),_.ctx2d.drawImage(e,0,0,s,a,0,0,n,r);let y=await this._decode_Canvas(_,i);if(this.ifSaveOriginalImageInACanvas){const w=document.createElement("canvas");w.width=e.videoWidth,w.height=e.videoHeight,w.getContext("2d").drawImage(e,0,0),this.oriCanvas=w,this.oriCanvasData=null}return $.recalculateResultLocation(y,0,0,s,a,n,r),y}async _decode_DCEFrame(e,i){if($._onLog&&$._onLog("_decode_DCEFrame(dceFrame)"),!$.isDCEFrame(e))return[];let n=[];this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=null,this.oriCanvasData={width:e.width,height:e.height,colorMode:e.colorMode,pixelFormat:e.pixelFormat,data:new Uint8Array(e.data),toCanvas:e.toCanvas});const{width:r,height:s,colorMode:a,pixelFormat:f,stride:_,timeStamp:y}=e;let w;w=i&&i.bCopyData?new Uint8Array(e.data):e.data;let x=null;if(i?(x=JSON.parse(JSON.stringify(i)),x.timeStamp=y):x={timeStamp:y},f&&_)if(f==="grey")n=await this._decodeBuffer_Uint8Array(w,r,s,_,Ne.IPF_GrayScaled,0,x);else if(f==="rgba")n=await this._decodeBuffer_Uint8Array(w,r,s,_,Ne.IPF_ABGR_8888,0,x);else{if(f!=="bgra")throw new Error(`Pixel format '${f}' is not supported to decode.`);n=await this._decodeBuffer_Uint8Array(w,r,s,_,Ne.IPF_ARGB_8888,0,x)}else if(a==="grey")n=await this._decodeBuffer_Uint8Array(w,r,s,r,Ne.IPF_GrayScaled,0,x);else if(a==="rgba")n=await this._decodeBuffer_Uint8Array(w,r,s,4*r,Ne.IPF_ABGR_8888,0,x);else{if(a!=="bgra")throw new Error(`Color mode '${a}' is not supported to decode.`);n=await this._decodeBuffer_Uint8Array(w,r,s,4*r,Ne.IPF_ARGB_8888,0,x)}return n}async _decode_DSImage(e,i){if($._onLog&&$._onLog("_decode_DSImage(dsImage)"),!$.isDSImage(e))return null;this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=null,this.oriCanvasData={width:e.width,height:e.height,pixelFormat:e.pixelFormat.toLowerCase(),data:new Uint8Array(e.data),toCanvas:function(){const y=document.createElement("canvas");let w;switch(y.width=this.width,y.height=this.height,this.pixelFormat){case"grey":w=new Uint8ClampedArray(this.width*this.height*4);for(let E=0;E<w.length;E+=4)w[E]=this.data[E/4],w[E+1]=this.data[E/4],w[E+2]=this.data[E/4],w[E+3]=255;break;case"rgb":w=new Uint8ClampedArray(this.width*this.height*4);for(let E=0;E<w.length;E+=4)w[E]=this.data[E],w[E+1]=this.data[E+1],w[E+2]=this.data[E+2],w[E+3]=255;break;case"bgr":w=new Uint8ClampedArray(this.width*this.height*4);for(let E=0;E<w.length;E+=4)w[E]=this.data[E],w[E+1]=this.data[E+1],w[E+2]=this.data[E+2],w[E+3]=255;break;case"rgba":case"bgra":w=new Uint8ClampedArray(this.data);break;default:throw new Error("The content of 2D Canvas is currently limited to the sRGB color space.")}const x=new ImageData(w,this.width,this.height);return y.getContext("2d").putImageData(x,0,0),y}});const{width:n,height:r}=e;let s,a,f,_=e.pixelFormat.toLowerCase();switch(s=i&&i.bCopyData?new Uint8Array(e.data):e.data,_){case"grey":f=Ne.IPF_GrayScaled,a=n;break;case"rgb":f=Ne.IPF_BGR_888,a=3*n;break;case"bgr":f=Ne.IPF_RGB_888,a=3*n;break;case"rgba":f=Ne.IPF_ABGR_8888,a=4*n;break;case"bgra":f=Ne.IPF_ARGB_8888,a=4*n;break;default:throw new Error("The pixel format is not supported to decode.")}return await this._decodeBuffer_Uint8Array(s,n,r,a,f,0,i)}async _decode_Base64(e,i){if($._onLog&&$._onLog("_decode_Base64(base64Str)"),typeof e!="string")return Promise.reject("'_decode_Base64(base64Str, config)': Type of 'base64Str' should be 'string'.");e.substring(0,11)=="data:image/"&&(e=e.substring(e.indexOf(",")+1));{let n=atob(e),r=n.length,s=new Uint8Array(r);for(;r--;)s[r]=n.charCodeAt(r);return await this._decode_Blob(new Blob([s]),i)}}async _decode_Url(e,i){if($._onLog&&$._onLog("_decode_Url(url)"),typeof e!="string")throw TypeError("'_decode_Url(url, config)': Type of 'url' should be 'string'.");e=e;{let n=await new Promise((r,s)=>{let a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.send(),a.onloadend=async()=>{r(a.response)},a.onerror=()=>{s(new Error("Network Error: "+a.statusText))}});return await this._decode_Blob(n,i)}}async _decode_FilePath(e,i){throw $._onLog&&$._onLog("_decode_FilePath(path)"),Error("'_decode_FilePath(path, config)': The method is only supported in node environment.")}static recalculateResultLocation(e,i,n,r,s,a,f){if(e.length>0)for(let _ of e){let y=_.localizationResult;y.resultCoordinateType==2&&(y.x1*=.01*a,y.x2*=.01*a,y.x3*=.01*a,y.x4*=.01*a,y.y1*=.01*f,y.y2*=.01*f,y.y3*=.01*f,y.y4*=.01*f);let w=a/r,x=f/s;y.x1=y.x1/w+i,y.x2=y.x2/w+i,y.x3=y.x3/w+i,y.x4=y.x4/w+i,y.y1=y.y1/x+n,y.y2=y.y2/x+n,y.y3=y.y3/x+n,y.y4=y.y4/x+n,y.resultCoordinateType==2&&(y.x1*=100/r,y.x2*=100/r,y.x3*=100/r,y.x4*=100/r,y.y1*=100/s,y.y2*=100/s,y.y3*=100/s,y.y4*=100/s),y.x1=Math.round(y.x1),y.x2=Math.round(y.x2),y.x3=Math.round(y.x3),y.x4=Math.round(y.x4),y.y1=Math.round(y.y1),y.y2=Math.round(y.y2),y.y3=Math.round(y.y3),y.y4=Math.round(y.y4)}}static BarcodeReaderException(e,i){let n,r=wa.DBR_UNKNOWN;return typeof e=="number"?(r=e,n=new Error(i)):n=new Error(e),n.code=r,n}_handleRetJsonString(e){let i=wa;if(e.textResults){for(let n=0;n<e.textResults.length;n++){let r=e.textResults[n];try{let s=r.barcodeText,a="";for(let f=0;f<s.length;f++)a+=String.fromCharCode(s[f]);try{r.barcodeText=decodeURIComponent(escape(a))}catch(f){r.barcodeText=a}}catch(s){r.barcodeText=""}if(r.exception!=null){$._setWarnnedEx.has(r.exception)||($._setWarnnedEx.add(r.exception),console.warn(r.exception));let s={};r.exception.split(";").forEach(a=>{let f=a.indexOf(":");s[a.substring(0,f)]=a.substring(f+1)}),r.exception=s}}return e.decodeRecords?this.decodeRecords=e.decodeRecords:this.decodeRecords={},this._lastErrorCode=e.exception,this._lastErrorString=e.description,e.exception&&!$._setWarnnedEx.has(e.description)&&($._setWarnnedEx.add(e.description),console.warn(e.description)),e.textResults}if(e.exception==i.DBR_SUCCESS)return e.data;throw $.BarcodeReaderException(e.exception,e.description)}async setModeArgument(e,i,n,r){return await new Promise((s,a)=>{let f=$._nextTaskID++;$._taskCallbackMap.set(f,_=>{if(_.success){try{this._handleRetJsonString(_.setReturn)}catch(y){return a(y)}return s()}{let y=new Error(_.message);return y.stack=_.stack+`
`+y.stack,a(y)}}),$._dbrWorker.postMessage({type:"setModeArgument",id:f,instanceID:this._instanceID,body:{modeName:e,index:i,argumentName:n,argumentValue:r}})})}async getModeArgument(e,i,n){return await new Promise((r,s)=>{let a=$._nextTaskID++;$._taskCallbackMap.set(a,f=>{if(f.success){let _;try{_=this._handleRetJsonString(f.getReturn)}catch(y){return s(y)}return r(_)}{let _=new Error(f.message);return _.stack=f.stack+`
`+_.stack,s(_)}}),$._dbrWorker.postMessage({type:"getModeArgument",id:a,instanceID:this._instanceID,body:{modeName:e,index:i,argumentName:n}})})}async getIntermediateResults(){return await new Promise((e,i)=>{let n=$._nextTaskID++;$._taskCallbackMap.set(n,r=>{if(r.success)return e(r.results);{let s=new Error(r.message);return s.stack=r.stack+`
`+s.stack,i(s)}}),$._dbrWorker.postMessage({type:"getIntermediateResults",id:n,instanceID:this._instanceID})})}async getIntermediateCanvas(){let e=await this.getIntermediateResults(),i=[];for(let n of e)if(n.dataType==cu.IMRDT_IMAGE)for(let r of n.results){const s=r.bytes;let a;switch($._onLog&&$._onLog(" "+s.length+" "+s.byteLength+" "+r.width+" "+r.height+" "+r.stride+" "+r.format),r.format){case Ne.IPF_ABGR_8888:a=new Uint8ClampedArray(s);break;case Ne.IPF_RGB_888:{const y=s.length/3;a=new Uint8ClampedArray(4*y);for(let w=0;w<y;++w)a[4*w]=s[3*w+2],a[4*w+1]=s[3*w+1],a[4*w+2]=s[3*w],a[4*w+3]=255;break}case Ne.IPF_GrayScaled:{const y=s.length;a=new Uint8ClampedArray(4*y);for(let w=0;w<y;w++)a[4*w]=a[4*w+1]=a[4*w+2]=s[w],a[4*w+3]=255;break}case Ne.IPF_Binary:case Ne.IPF_BinaryInverted:{const y=s.length,w=r.width,x=r.height,E=r.stride;a=new Uint8ClampedArray(w*x*4);for(let k=0;k<y;k++){let P=s[k],M=k%E*8,V=Math.floor(k/E);for(let L=0;L<8;L++){let R=M+L,D=4*(V*w+R);if(R>=w)break;a[D]=a[D+1]=a[D+2]=(128&P)/128*255,a[D+3]=255,P<<=1}}break}default:console.warn("unknow intermediate image",r)}if(!a)continue;let f=new ImageData(a,r.width,r.height),_=document.createElement("canvas");_.width=r.width,_.height=r.height,_.getContext("2d").putImageData(f,0,0),i.push(_)}return i}async getScanSettings(){return await new Promise((e,i)=>{let n=$._nextTaskID++;$._taskCallbackMap.set(n,r=>{if(r.success){let s=r.results;return s.intervalTime=this.intervalTime,s.whenToPlaySoundforSuccessfulRead=this.whenToPlaySoundforSuccessfulRead,s.soundOnSuccessfullRead=this.soundSource,s.whenToVibrateforSuccessfulRead=this.whenToVibrateforSuccessfulRead,s.vibrateDuration=this.vibrateDuration,s.captureAndDecodeInParallel=this.captureAndDecodeInParallel,s.autoZoom=this.autoZoom,s.autoFocus=this.autoFocus,s.autoSuggestTip=this.autoSuggestTip,e(s)}{let s=new Error(r.message);return s.stack+=`
`+r.stack,i(s)}}),$._dbrWorker.postMessage({type:"getScanSettings",id:n,instanceID:this._instanceID})})}async updateScanSettings(e){if(!e)return;const i=JSON.parse(JSON.stringify(e));if(i.autoZoom||i.autoFocus||i.autoSuggestTip){if(!$._bUseFullFeature)throw new Error("'autoZoom', 'autoFocus' and 'autoSuggestTip' are not supported in the compact version. Please try the full-featured version.");const n=await this.getRuntimeSettings();n.intermediateResultTypes|=kr.IRT_TYPED_BARCODE_ZONE,await this.updateRuntimeSettings(n)}return i.hasOwnProperty("intervalTime")&&(this.intervalTime=Math.max(i.intervalTime,0),delete i.intervalTime),i.hasOwnProperty("whenToPlaySoundforSuccessfulRead")&&(this.whenToPlaySoundforSuccessfulRead=i.whenToPlaySoundforSuccessfulRead,delete i.whenToPlaySoundforSuccessfulRead),i.hasOwnProperty("soundOnSuccessfullRead")&&(this.soundSource=i.soundOnSuccessfullRead,delete i.soundOnSuccessfullRead),i.hasOwnProperty("whenToVibrateforSuccessfulRead")&&(this.whenToVibrateforSuccessfulRead=i.whenToVibrateforSuccessfulRead,delete i.whenToVibrateforSuccessfulRead),i.hasOwnProperty("vibrateDuration")&&(this.vibrateDuration=i.vibrateDuration,delete i.vibrateDuration),i.hasOwnProperty("captureAndDecodeInParallel")&&(this.captureAndDecodeInParallel=i.captureAndDecodeInParallel,delete i.captureAndDecodeInParallel),i.hasOwnProperty("autoZoom")&&(this.autoZoom&&this.autoZoom!=i.autoZoom&&this.dce&&this.dce.setZoom({factor:1}).catch(()=>{}),this.autoZoom=i.autoZoom,delete i.autoZoom),i.hasOwnProperty("autoFocus")&&(this.autoFocus=i.autoFocus,this.dce&&this.dce.setFocus({mode:"continuous"}).catch(()=>{}),delete i.autoFocus),i.hasOwnProperty("autoSuggestTip")&&(this.autoSuggestTip=i.autoSuggestTip,delete i.autoFocus),await new Promise((n,r)=>{let s=$._nextTaskID++;$._taskCallbackMap.set(s,a=>{if(a.success)return n();{let f=new Error(a.message);return f.stack+=`
`+a.stack,r(f)}}),$._dbrWorker.postMessage({type:"updateScanSettings",id:s,instanceID:this._instanceID,body:{settings:i}})})}_cloneDecodeResults(e){if(e instanceof Array){let i=[];for(let n of e)i.push(this._cloneDecodeResults(n));return i}return JSON.parse(JSON.stringify(e,(r,s)=>r=="oriVideoCanvas"||r=="searchRegionCanvas"?void 0:s))}async _loopReadVideo(){if(this.bDestroyed)return this.dce&&this._dceControler&&this._dceControler.setDisiredAction(this,"stopFetchingLoop"),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),void this._drawResults(null);if(this.dce&&!this.dce.isOpen())return this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),void await this.clearMapDecodeRecord();if(!this.dce&&!this._imgSource||this._bPauseScan)return $._onLog&&$._onLog("Scan is paused, or imageSource is not set. Ask in 1s."),await this.clearMapDecodeRecord(),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},this._intervalDetectVideoPause));$._onLog&&$._onLog("======= once read ======="),$._onLog&&(this._timeStartDecode=Date.now());let e=null,i=null;if(this.dce)e=this._getVideoFrame();else if(this._imgSource&&(i=await this._imgSource.getImage(),!$.isDSImage(i)))throw new Error("Invalid DSImage.");if(!e&&!i)return $._onLog&&$._onLog("Get invalid frame."),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},0));(async()=>{let n=[];if(e){n=await this._decode_DCEFrame(e,{bScanner:!0,bCopyData:!1});let r=null;if(n&&n.length){const{sx:s,sy:a,width:f,height:_,_sWidth:y,_sHeight:w}=e;r=n.map(x=>({resultState:x.resultState,localizationResult:JSON.parse(JSON.stringify(x.localizationResult))})),$.recalculateResultLocation(r,s,a,y,w,f,_)}this._resultHighlightingDuration==0?this._drawResults(null):this._drawResults(r,n),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._resultHighlightingDuration>0&&(this._clearResultsCanvasTimeoutId=setTimeout(()=>{this.bDestroyed||this._drawResults(null)},this._resultHighlightingDuration))}else i&&(n=await this._decode_DSImage(i,{bScanner:!0,bCopyData:!1}));return n})().then(n=>{if($._onLog&&$._onLog(n),this.dce&&this.captureAndDecodeInParallel){let r=this.array_decodeFrameTimeCost,s=this.array_getFrameTimeCost;const a=()=>{let f=0;if(s&&s.length){let _=Math.min(...r),y=Math.max(...s);_&&y&&(f=_-y)}else f=0;return f>0?f:0};(()=>{for(;r.length>=5;)r.shift();r.push(this._lastInnerDecodeDuration)})(),this._intervalGetVideoFrame=a()+this.intervalTime}if((this.dce&&this.dce.isOpen()||this._imgSource)&&!this._bPauseScan){if(this.bPlaySoundOnSuccessfulRead&&n.length){let r=!1;this.bPlaySoundOnSuccessfulRead===!0||this.bPlaySoundOnSuccessfulRead==="frame"?r=n.some(s=>s.resultState>=0):this.bPlaySoundOnSuccessfulRead==="unique"&&(r=n.some(s=>s.resultState==0)),r&&this.beepSound&&(this.beepSound.stop(),this.beepSound.play())}if(navigator.vibrate&&this.bVibrateOnSuccessfulRead&&n.length){let r=!1;if(this.bVibrateOnSuccessfulRead===!0||this.bVibrateOnSuccessfulRead==="frame"?r=n.some(s=>s.resultState>=0):this.bVibrateOnSuccessfulRead==="unique"&&(r=n.some(s=>s.resultState==0)),r)try{navigator.vibrate(this.vibrateDuration)}catch(s){console.warn("Vibration not allowed. User interaction required: "+(s.message||s))}}if(this.onImageRead){n=n.filter(s=>s.resultState>=0);const r=this._cloneDecodeResults(n);this.onImageRead(r)}if(this.onUniqueRead){n=n.filter(s=>s.resultState==0);const r=this._cloneDecodeResults(n);for(let s of r)this.onUniqueRead(s.barcodeText,s)}}this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.intervalTime?this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},this.intervalTime):this._loopReadVideo()}).catch(n=>{this.dce&&this._dceControler&&this._dceControler.setDisiredAction(this,"stopFetchingLoop"),$._onLog&&$._onLog(n.message||n),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout(()=>{this.dce&&(this.dce.startFetchingLoop(),this._dceControler&&this._dceControler.clearUserDisiredAction({user:this,actionName:"stopFetchingLoop"})),this._loopReadVideo()},Math.max(this.intervalTime,1e3)),n.message=="platform error"||console.warn(n.message)})}_getVideoFrame(){if(!this.dce)return null;let e;if(this.captureAndDecodeInParallel){if($._onLog&&$._onLog("Get frame in parallel."),this._dceControler&&this._dceControler.setDisiredValue(this,"loopInterval",this._intervalGetVideoFrame),!this.dce.numberOfFramesInBuffer)return this._dceControler&&this._dceControler.setDisiredValue(this,"loopInterval",0),null;e=this.dce.getFrameFromBuffer(),(n=>{if(!n)return;let r=n.timeSpent,s=this.array_getFrameTimeCost;for(;s.length>=5;)s.shift();s.push(r)})(e)}else $._onLog&&$._onLog("Get frame in serial."),this._dceControler&&this._dceControler.setDisiredAction(this,"stopFetchingLoop"),e=this.dce.getFrame();return e}_drawResults(e,i){if(!this.dce||this.dce.disposed||this._bPauseScan||!this._drawingItemNamespace||!this._drawingItemNamespace.DT_Polygon)return;if(!this._dbrDrawingLayer){if(!this.dce.isOpen()||!(this.dce.singleFrameMode||this.dce.video&&this.dce._videoTrack))return;this._dbrDrawingLayer=this.dce.getDrawingLayer(3)}const n=this._dbrDrawingLayer;e||(e=[]);let r=this._arrPolygons;for(let s=0;s<e.length;s++){let a,f=e[s].localizationResult;r[s]?(a=r[s],n.hasDrawingItem(a)||n.addDrawingItem(a),a.set("vertices",[{x:f.x1,y:f.y1},{x:f.x2,y:f.y2},{x:f.x3,y:f.y3},{x:f.x4,y:f.y4}]),(a.set||a.setAttribute).call(a,"vertices",[{x:f.x1,y:f.y1},{x:f.x2,y:f.y2},{x:f.x3,y:f.y3},{x:f.x4,y:f.y4}])):(a=new this._drawingItemNamespace.DT_Polygon([{x:f.x1,y:f.y1},{x:f.x2,y:f.y2},{x:f.x3,y:f.y3},{x:f.x4,y:f.y4}]),n.addDrawingItem(a),r[s]=a),e[s].resultState===-1?(a.styleId=this._styleIdBeforeVerification,a._mapStyle.set("default",this.dce.getDrawingStyle(this._styleIdBeforeVerification)),a._mapStyle.set("selected",this.dce.getDrawingStyle(this._styleIdBeforeVerification))):(a.styleId=null,a._mapStyle.set("default",this.dce.getDrawingStyle(3)),a._mapStyle.set("selected",this.dce.getDrawingStyle(7))),i&&i[s]?a.addNote({name:"Barcode_Result",content:i[s]},!0):a.addNote({name:"Barcode_Result",content:e[s]},!0)}for(let s=e.length;s<r.length;s++)r[s].deleteNote("Barcode_Result"),n.removeDrawingItem(r[s]);n.renderAll()}async startScanning(e){if(!this.dce&&!this._imgSource)throw new Error("'imageSource' is not set. call 'setImageSource()' before 'startScanning()'.");if(this._promiseStartScan&&this._promiseStartScan.isPending)return this._promiseStartScan;this._promiseStartScan=new k_;let i=null;if(this.dce){if(this.dce.isOpen())if(e&&this.dce.appendAndShowUI(),this.dce.playCallbackInfo)i=JSON.parse(JSON.stringify(this.dce.playCallbackInfo));else{const n=this.dce.getSelectedCamera();i={width:this.dce.video.videoWidth,height:this.dce.video.videoHeight,deviceId:n&&n.deviceId}}else if(i=await this.dce.open(e),!this._promiseStartScan)return null;this._dceControler&&(this._dceControler.clearUserDisiredAction({user:this,actionName:"close"}),this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!0),this.dce.ifShowScanRegionLaser&&this.dce.showScanRegionLaser())}return this._bPauseScan=!1,this.dce&&this.dce.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout(()=>{this.dce&&(this.dce.startFetchingLoop(),this._dceControler&&this._dceControler.clearUserDisiredAction({user:this,actionName:"stopFetchingLoop"})),this._loopReadVideo()},0)),this._promiseStartScan.resolve(i),i}stopScanning(e){this.dce&&(this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this._dceControler&&(this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!1),this.dce.ifShowScanRegionLaser||this.dce.hideScanRegionLaser(),this._dceControler.setDisiredAction(this,"close",[e]))),this._bPauseScan=!0,this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0,this._promiseStartScan=null}pauseScanning(e){if(this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),e&&e.keepResultsHighlighted||this._drawResults(null),this._bPauseScan=!0,this.dce){if(this.dce.singleFrameMode)throw new Error("'pauseScanning()' is unavailable when property 'singleFrameMode' of the 'CameraEnhancer' instance is true.");this._dceControler&&(this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!1),this.dce.ifShowScanRegionLaser||this.dce.hideScanRegionLaser(),this._dceControler.setDisiredAction(this,"stopFetchingLoop"))}}resumeScanning(){if(this._bPauseScan=!1,this.dce){if(this.dce.singleFrameMode)throw new Error("'resumeScanning()' is unavailable when property 'singleFrameMode' of the 'CameraEnhancer' instance is true.");this.dce.startFetchingLoop(),this._dceControler&&(this._dceControler.clearUserDisiredAction({user:this,actionName:"stopFetchingLoop"}),this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!0),this.dce.ifShowScanRegionLaser&&this.dce.showScanRegionLaser())}}destroyContext(){if($._onLog&&$._onLog("destroyContext()"),this.bDestroyed)return;this.bDestroyed=!0,(this.dce||this._promiseStartScan)&&this.stopScanning(),this.setImageSource(null);let e=$._nextTaskID++;$._taskCallbackMap.set(e,i=>{if(!i.success){let n=new Error(i.message);throw n.stack=i.stack+`
`+n.stack,n}}),$._dbrWorker.postMessage({type:"destroyContext",id:e,instanceID:this._instanceID})}}$._jsVersion="9.6.20",$._jsEditVersion="20230410",$._version=`loading...(JS ${$._jsVersion}.${$._jsEditVersion})`,$._license=IT,$._sessionPassword=OT,$.browserInfo=ut,$._workerName=`dbr-${$._jsVersion}.browser.worker.js`,$._engineResourcePath=ET,$._licenseServer=[],$._deviceFriendlyName="",$._isShowRelDecodeTimeInResults=!1,$._bWasmDebug=!1,$._bNeverShowDialog=!1,$.__bUseFullFeature=!0,$._nextTaskID=0,$._taskCallbackMap=new Map,$._pLoad=new k_,$._lastErrorCode=0,$._lastErrorString="",$._setWarnnedEx=new Set,$._defaultUIElementURL="@engineResourcePath/dbr.ui.html";var RT={653:(t,e,i)=>{var n,r,s,a,f,_,y,w,x,E,k,P,M,V,L,R,D,Y,ie,oe,z,S=S||{version:"5.2.1"};if(e.fabric=S,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?S.document=document:S.document=document.implementation.createHTMLDocument(""),S.window=window;else{var he=new(i(192)).JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;S.document=he.document,S.jsdomImplForWrapper=i(898).implForWrapper,S.nodeCanvas=i(245).Canvas,S.window=he,DOMParser=S.window.DOMParser}function le(h,c){var u=h.canvas,g=c.targetCanvas,o=g.getContext("2d");o.translate(0,g.height),o.scale(1,-1);var l=u.height-g.height;o.drawImage(u,0,l,g.width,g.height,0,0,g.width,g.height)}function ue(h,c){var u=c.targetCanvas.getContext("2d"),g=c.destinationWidth,o=c.destinationHeight,l=g*o*4,d=new Uint8Array(this.imageBuffer,0,l),v=new Uint8ClampedArray(this.imageBuffer,0,l);h.readPixels(0,0,g,o,h.RGBA,h.UNSIGNED_BYTE,d);var p=new ImageData(v,g,o);u.putImageData(p,0,0)}S.isTouchSupported="ontouchstart"in S.window||"ontouchstart"in S.document||S.window&&S.window.navigator&&S.window.navigator.maxTouchPoints>0,S.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",S.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],S.DPI=96,S.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",S.commaWsp="(?:\\s+,?\\s*|,\\s*)",S.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,S.reNonWord=/[ \n\.,;!\?\-]/,S.fontPaths={},S.iMatrix=[1,0,0,1,0,0],S.svgNS="http://www.w3.org/2000/svg",S.perfLimitSizeTotal=2097152,S.maxCacheSideLimit=4096,S.minCacheSideLimit=256,S.charWidthsCache={},S.textureSize=2048,S.disableStyleCopyPaste=!1,S.enableGLFiltering=!0,S.devicePixelRatio=S.window.devicePixelRatio||S.window.webkitDevicePixelRatio||S.window.mozDevicePixelRatio||1,S.browserShadowBlurConstant=1,S.arcToSegmentsCache={},S.boundsOfCurveCache={},S.cachesBoundsOfCurve=!0,S.forceGLPutImageData=!1,S.initFilterBackend=function(){return S.enableGLFiltering&&S.isWebglSupported&&S.isWebglSupported(S.textureSize)?(console.log("max texture size: "+S.maxTextureSize),new S.WebglFilterBackend({tileSize:S.textureSize})):S.Canvas2dFilterBackend?new S.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=S),function(){function h(u,g){if(this.__eventListeners[u]){var o=this.__eventListeners[u];g?o[o.indexOf(g)]=!1:S.util.array.fill(o,!1)}}function c(u,g){var o=function(){g.apply(this,arguments),this.off(u,o)}.bind(this);this.on(u,o)}S.Observable={fire:function(u,g){if(!this.__eventListeners)return this;var o=this.__eventListeners[u];if(!o)return this;for(var l=0,d=o.length;l<d;l++)o[l]&&o[l].call(this,g||{});return this.__eventListeners[u]=o.filter(function(v){return v!==!1}),this},on:function(u,g){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var o in u)this.on(o,u[o]);else this.__eventListeners[u]||(this.__eventListeners[u]=[]),this.__eventListeners[u].push(g);return this},once:function(u,g){if(arguments.length===1)for(var o in u)c.call(this,o,u[o]);else c.call(this,u,g);return this},off:function(u,g){if(!this.__eventListeners)return this;if(arguments.length===0)for(u in this.__eventListeners)h.call(this,u);else if(arguments.length===1&&typeof arguments[0]=="object")for(var o in u)h.call(this,o,u[o]);else h.call(this,u,g);return this}}}(),S.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,c=arguments.length;h<c;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,c,u){var g=this._objects;return u?g[c]=h:g.splice(c,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h,c=this._objects,u=!1,g=0,o=arguments.length;g<o;g++)(h=c.indexOf(arguments[g]))!==-1&&(u=!0,c.splice(h,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[g]));return this.renderOnAddRemove&&u&&this.requestRenderAll(),this},forEachObject:function(h,c){for(var u=this.getObjects(),g=0,o=u.length;g<o;g++)h.call(c,u[g],g,u);return this},getObjects:function(h){return h===void 0?this._objects.concat():this._objects.filter(function(c){return c.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(h,c){return this._objects.indexOf(h)>-1||!!c&&this._objects.some(function(u){return typeof u.contains=="function"&&u.contains(h,!0)})},complexity:function(){return this._objects.reduce(function(h,c){return h+(c.complexity?c.complexity():0)},0)}},S.CommonMethods={_setOptions:function(h){for(var c in h)this.set(c,h[c])},_initGradient:function(h,c){!h||!h.colorStops||h instanceof S.Gradient||this.set(c,new S.Gradient(h))},_initPattern:function(h,c,u){!h||!h.source||h instanceof S.Pattern?u&&u():this.set(c,new S.Pattern(h,u))},_setObject:function(h){for(var c in h)this._set(c,h[c])},set:function(h,c){return typeof h=="object"?this._setObject(h):this._set(h,c),this},_set:function(h,c){this[h]=c},toggle:function(h){var c=this.get(h);return typeof c=="boolean"&&this.set(h,!c),this},get:function(h){return this[h]}},n=e,r=Math.sqrt,s=Math.atan2,a=Math.pow,f=Math.PI/180,_=Math.PI/2,S.util={cos:function(h){if(h===0)return 1;switch(h<0&&(h=-h),h/_){case 1:case 3:return 0;case 2:return-1}return Math.cos(h)},sin:function(h){if(h===0)return 0;var c=1;switch(h<0&&(c=-1),h/_){case 1:return c;case 2:return 0;case 3:return-c}return Math.sin(h)},removeFromArray:function(h,c){var u=h.indexOf(c);return u!==-1&&h.splice(u,1),h},getRandomInt:function(h,c){return Math.floor(Math.random()*(c-h+1))+h},degreesToRadians:function(h){return h*f},radiansToDegrees:function(h){return h/f},rotatePoint:function(h,c,u){var g=new S.Point(h.x-c.x,h.y-c.y),o=S.util.rotateVector(g,u);return new S.Point(o.x,o.y).addEquals(c)},rotateVector:function(h,c){var u=S.util.sin(c),g=S.util.cos(c);return{x:h.x*g-h.y*u,y:h.x*u+h.y*g}},createVector:function(h,c){return new S.Point(c.x-h.x,c.y-h.y)},calcAngleBetweenVectors:function(h,c){return Math.acos((h.x*c.x+h.y*c.y)/(Math.hypot(h.x,h.y)*Math.hypot(c.x,c.y)))},getHatVector:function(h){return new S.Point(h.x,h.y).multiply(1/Math.hypot(h.x,h.y))},getBisector:function(h,c,u){var g=S.util.createVector(h,c),o=S.util.createVector(h,u),l=S.util.calcAngleBetweenVectors(g,o),d=l*(S.util.calcAngleBetweenVectors(S.util.rotateVector(g,l),o)===0?1:-1)/2;return{vector:S.util.getHatVector(S.util.rotateVector(g,d)),angle:l}},projectStrokeOnPoints:function(h,c,u){var g=[],o=c.strokeWidth/2,l=c.strokeUniform?new S.Point(1/c.scaleX,1/c.scaleY):new S.Point(1,1),d=function(v){var p=o/Math.hypot(v.x,v.y);return new S.Point(v.x*p*l.x,v.y*p*l.y)};return h.length<=1||h.forEach(function(v,p){var m,b,C=new S.Point(v.x,v.y);p===0?(b=h[p+1],m=u?d(S.util.createVector(b,C)).addEquals(C):h[h.length-1]):p===h.length-1?(m=h[p-1],b=u?d(S.util.createVector(m,C)).addEquals(C):h[0]):(m=h[p-1],b=h[p+1]);var T,I,O=S.util.getBisector(C,m,b),A=O.vector,F=O.angle;if(c.strokeLineJoin==="miter"&&(T=-o/Math.sin(F/2),I=new S.Point(A.x*T*l.x,A.y*T*l.y),Math.hypot(I.x,I.y)/o<=c.strokeMiterLimit))return g.push(C.add(I)),void g.push(C.subtract(I));T=-o*Math.SQRT2,I=new S.Point(A.x*T*l.x,A.y*T*l.y),g.push(C.add(I)),g.push(C.subtract(I))}),g},transformPoint:function(h,c,u){return u?new S.Point(c[0]*h.x+c[2]*h.y,c[1]*h.x+c[3]*h.y):new S.Point(c[0]*h.x+c[2]*h.y+c[4],c[1]*h.x+c[3]*h.y+c[5])},makeBoundingBoxFromPoints:function(h,c){if(c)for(var u=0;u<h.length;u++)h[u]=S.util.transformPoint(h[u],c);var g=[h[0].x,h[1].x,h[2].x,h[3].x],o=S.util.array.min(g),l=S.util.array.max(g)-o,d=[h[0].y,h[1].y,h[2].y,h[3].y],v=S.util.array.min(d);return{left:o,top:v,width:l,height:S.util.array.max(d)-v}},invertTransform:function(h){var c=1/(h[0]*h[3]-h[1]*h[2]),u=[c*h[3],-c*h[1],-c*h[2],c*h[0]],g=S.util.transformPoint({x:h[4],y:h[5]},u,!0);return u[4]=-g.x,u[5]=-g.y,u},toFixed:function(h,c){return parseFloat(Number(h).toFixed(c))},parseUnit:function(h,c){var u=/\D{0,2}$/.exec(h),g=parseFloat(h);switch(c||(c=S.Text.DEFAULT_SVG_FONT_SIZE),u[0]){case"mm":return g*S.DPI/25.4;case"cm":return g*S.DPI/2.54;case"in":return g*S.DPI;case"pt":return g*S.DPI/72;case"pc":return g*S.DPI/72*12;case"em":return g*c;default:return g}},falseFunction:function(){return!1},getKlass:function(h,c){return h=S.util.string.camelize(h.charAt(0).toUpperCase()+h.slice(1)),S.util.resolveNamespace(c)[h]},getSvgAttributes:function(h){var c=["instantiated_by_use","style","id","class"];switch(h){case"linearGradient":c=c.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":c=c.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":c=c.concat(["offset","stop-color","stop-opacity"])}return c},resolveNamespace:function(h){if(!h)return S;var c,u=h.split("."),g=u.length,o=n||S.window;for(c=0;c<g;++c)o=o[u[c]];return o},loadImage:function(h,c,u,g){if(h){var o=S.util.createImage(),l=function(){c&&c.call(u,o,!1),o=o.onload=o.onerror=null};o.onload=l,o.onerror=function(){S.log("Error loading "+o.src),c&&c.call(u,null,!0),o=o.onload=o.onerror=null},h.indexOf("data")!==0&&g!=null&&(o.crossOrigin=g),h.substring(0,14)==="data:image/svg"&&(o.onload=null,S.util.loadImageInDom(o,l)),o.src=h}else c&&c.call(u,h)},loadImageInDom:function(h,c){var u=S.document.createElement("div");u.style.width=u.style.height="1px",u.style.left=u.style.top="-100%",u.style.position="absolute",u.appendChild(h),S.document.querySelector("body").appendChild(u),h.onload=function(){c(),u.parentNode.removeChild(u),u=null}},enlivenObjects:function(h,c,u,g){var o=[],l=0,d=(h=h||[]).length;function v(){++l===d&&c&&c(o.filter(function(p){return p}))}d?h.forEach(function(p,m){p&&p.type?S.util.getKlass(p.type,u).fromObject(p,function(b,C){C||(o[m]=b),g&&g(p,b,C),v()}):v()}):c&&c(o)},enlivenObjectEnlivables:function(h,c,u){var g=S.Object.ENLIVEN_PROPS.filter(function(o){return!!h[o]});S.util.enlivenObjects(g.map(function(o){return h[o]}),function(o){var l={};g.forEach(function(d,v){l[d]=o[v],c&&(c[d]=o[v])}),u&&u(l)})},enlivenPatterns:function(h,c){function u(){++o===l&&c&&c(g)}var g=[],o=0,l=(h=h||[]).length;l?h.forEach(function(d,v){d&&d.source?new S.Pattern(d,function(p){g[v]=p,u()}):(g[v]=d,u())}):c&&c(g)},groupSVGElements:function(h,c,u){var g;return h&&h.length===1?h[0]:(c&&(c.width&&c.height?c.centerPoint={x:c.width/2,y:c.height/2}:(delete c.width,delete c.height)),g=new S.Group(h,c),u!==void 0&&(g.sourcePath=u),g)},populateWithProperties:function(h,c,u){if(u&&Array.isArray(u))for(var g=0,o=u.length;g<o;g++)u[g]in h&&(c[u[g]]=h[u[g]])},createCanvasElement:function(){return S.document.createElement("canvas")},copyCanvasElement:function(h){var c=S.util.createCanvasElement();return c.width=h.width,c.height=h.height,c.getContext("2d").drawImage(h,0,0),c},toDataURL:function(h,c,u){return h.toDataURL("image/"+c,u)},createImage:function(){return S.document.createElement("img")},multiplyTransformMatrices:function(h,c,u){return[h[0]*c[0]+h[2]*c[1],h[1]*c[0]+h[3]*c[1],h[0]*c[2]+h[2]*c[3],h[1]*c[2]+h[3]*c[3],u?0:h[0]*c[4]+h[2]*c[5]+h[4],u?0:h[1]*c[4]+h[3]*c[5]+h[5]]},qrDecompose:function(h){var c=s(h[1],h[0]),u=a(h[0],2)+a(h[1],2),g=r(u),o=(h[0]*h[3]-h[2]*h[1])/g,l=s(h[0]*h[2]+h[1]*h[3],u);return{angle:c/f,scaleX:g,scaleY:o,skewX:l/f,skewY:0,translateX:h[4],translateY:h[5]}},calcRotateMatrix:function(h){if(!h.angle)return S.iMatrix.concat();var c=S.util.degreesToRadians(h.angle),u=S.util.cos(c),g=S.util.sin(c);return[u,g,-g,u,0,0]},calcDimensionsMatrix:function(h){var c=h.scaleX===void 0?1:h.scaleX,u=h.scaleY===void 0?1:h.scaleY,g=[h.flipX?-c:c,0,0,h.flipY?-u:u,0,0],o=S.util.multiplyTransformMatrices,l=S.util.degreesToRadians;return h.skewX&&(g=o(g,[1,0,Math.tan(l(h.skewX)),1],!0)),h.skewY&&(g=o(g,[1,Math.tan(l(h.skewY)),0,1],!0)),g},composeMatrix:function(h){var c=[1,0,0,1,h.translateX||0,h.translateY||0],u=S.util.multiplyTransformMatrices;return h.angle&&(c=u(c,S.util.calcRotateMatrix(h))),(h.scaleX!==1||h.scaleY!==1||h.skewX||h.skewY||h.flipX||h.flipY)&&(c=u(c,S.util.calcDimensionsMatrix(h))),c},resetObjectTransform:function(h){h.scaleX=1,h.scaleY=1,h.skewX=0,h.skewY=0,h.flipX=!1,h.flipY=!1,h.rotate(0)},saveObjectTransform:function(h){return{scaleX:h.scaleX,scaleY:h.scaleY,skewX:h.skewX,skewY:h.skewY,angle:h.angle,left:h.left,flipX:h.flipX,flipY:h.flipY,top:h.top}},isTransparent:function(h,c,u,g){g>0&&(c>g?c-=g:c=0,u>g?u-=g:u=0);var o,l=!0,d=h.getImageData(c,u,2*g||1,2*g||1),v=d.data.length;for(o=3;o<v&&(l=d.data[o]<=0)!=0;o+=4);return d=null,l},parsePreserveAspectRatioAttribute:function(h){var c,u="meet",g=h.split(" ");return g&&g.length&&((u=g.pop())!=="meet"&&u!=="slice"?(c=u,u="meet"):g.length&&(c=g.pop())),{meetOrSlice:u,alignX:c!=="none"?c.slice(1,4):"none",alignY:c!=="none"?c.slice(5,8):"none"}},clearFabricFontCache:function(h){(h=(h||"").toLowerCase())?S.charWidthsCache[h]&&delete S.charWidthsCache[h]:S.charWidthsCache={}},limitDimsByArea:function(h,c){var u=Math.sqrt(c*h),g=Math.floor(c/u);return{x:Math.floor(u),y:g}},capValue:function(h,c,u){return Math.max(h,Math.min(c,u))},findScaleToFit:function(h,c){return Math.min(c.width/h.width,c.height/h.height)},findScaleToCover:function(h,c){return Math.max(c.width/h.width,c.height/h.height)},matrixToSVG:function(h){return"matrix("+h.map(function(c){return S.util.toFixed(c,S.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(h,c){var u=S.util.invertTransform(c),g=S.util.multiplyTransformMatrices(u,h.calcOwnMatrix());S.util.applyTransformToObject(h,g)},addTransformToObject:function(h,c){S.util.applyTransformToObject(h,S.util.multiplyTransformMatrices(c,h.calcOwnMatrix()))},applyTransformToObject:function(h,c){var u=S.util.qrDecompose(c),g=new S.Point(u.translateX,u.translateY);h.flipX=!1,h.flipY=!1,h.set("scaleX",u.scaleX),h.set("scaleY",u.scaleY),h.skewX=u.skewX,h.skewY=u.skewY,h.angle=u.angle,h.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(h,c,u){var g=h/2,o=c/2,l=[{x:-g,y:-o},{x:g,y:-o},{x:-g,y:o},{x:g,y:o}],d=S.util.calcDimensionsMatrix(u),v=S.util.makeBoundingBoxFromPoints(l,d);return{x:v.width,y:v.height}},mergeClipPaths:function(h,c){var u=h,g=c;u.inverted&&!g.inverted&&(u=c,g=h),S.util.applyTransformToObject(g,S.util.multiplyTransformMatrices(S.util.invertTransform(u.calcTransformMatrix()),g.calcTransformMatrix()));var o=u.inverted&&g.inverted;return o&&(u.inverted=g.inverted=!1),new S.Group([u],{clipPath:g,inverted:o})}},function(){var h=Array.prototype.join,c={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:"l",M:"L"};function g(I,O,A,F,U,H,J,q,X,N,B){var G=S.util.cos(I),Q=S.util.sin(I),ee=S.util.cos(O),W=S.util.sin(O),j=A*U*ee-F*H*W+J,K=F*U*ee+A*H*W+q;return["C",N+X*(-A*U*Q-F*H*G),B+X*(-F*U*Q+A*H*G),j+X*(A*U*W+F*H*ee),K+X*(F*U*W-A*H*ee),j,K]}function o(I,O,A,F){var U=Math.atan2(O,I),H=Math.atan2(F,A);return H>=U?H-U:2*Math.PI-(U-H)}function l(I,O,A){for(var F=A[1],U=A[2],H=A[3],J=A[4],q=A[5],X=function(G,Q,ee,W,j,K,ne){var Z=Math.PI,se=ne*Z/180,me=S.util.sin(se),pe=S.util.cos(se),ce=0,ge=0,fe=-pe*G*.5-me*Q*.5,ye=-pe*Q*.5+me*G*.5,be=(ee=Math.abs(ee))*ee,ve=(W=Math.abs(W))*W,Te=ye*ye,ke=fe*fe,bt=be*ve-be*Te-ve*ke,ni=0;if(bt<0){var Hi=Math.sqrt(1-bt/(be*ve));ee*=Hi,W*=Hi}else ni=(j===K?-1:1)*Math.sqrt(bt/(be*Te+ve*ke));var Me=ni*ee*ye/W,wt=-ni*W*fe/ee,_n=pe*Me-me*wt+.5*G,zi=me*Me+pe*wt+.5*Q,Ii=o(1,0,(fe-Me)/ee,(ye-wt)/W),Gi=o((fe-Me)/ee,(ye-wt)/W,(-fe-Me)/ee,(-ye-wt)/W);K===0&&Gi>0?Gi-=2*Z:K===1&&Gi<0&&(Gi+=2*Z);for(var Yo=Math.ceil(Math.abs(Gi/Z*2)),Hn=[],yn=Gi/Yo,fl=8/3*Math.sin(yn/4)*Math.sin(yn/4)/Math.sin(yn/2),yi=Ii+yn,Yi=0;Yi<Yo;Yi++)Hn[Yi]=g(Ii,yi,pe,me,ee,W,_n,zi,fl,ce,ge),ce=Hn[Yi][5],ge=Hn[Yi][6],Ii=yi,yi+=yn;return Hn}(A[6]-I,A[7]-O,F,U,J,q,H),N=0,B=X.length;N<B;N++)X[N][1]+=I,X[N][2]+=O,X[N][3]+=I,X[N][4]+=O,X[N][5]+=I,X[N][6]+=O;return X}function d(I,O,A,F){return Math.sqrt((A-I)*(A-I)+(F-O)*(F-O))}function v(I,O,A,F,U,H,J,q){return function(X){var N,B=(N=X)*N*N,G=function(W){return 3*W*W*(1-W)}(X),Q=function(W){return 3*W*(1-W)*(1-W)}(X),ee=function(W){return(1-W)*(1-W)*(1-W)}(X);return{x:J*B+U*G+A*Q+I*ee,y:q*B+H*G+F*Q+O*ee}}}function p(I,O,A,F,U,H,J,q){return function(X){var N=1-X,B=3*N*N*(A-I)+6*N*X*(U-A)+3*X*X*(J-U),G=3*N*N*(F-O)+6*N*X*(H-F)+3*X*X*(q-H);return Math.atan2(G,B)}}function m(I,O,A,F,U,H){return function(J){var q,X=(q=J)*q,N=function(G){return 2*G*(1-G)}(J),B=function(G){return(1-G)*(1-G)}(J);return{x:U*X+A*N+I*B,y:H*X+F*N+O*B}}}function b(I,O,A,F,U,H){return function(J){var q=1-J,X=2*q*(A-I)+2*J*(U-A),N=2*q*(F-O)+2*J*(H-F);return Math.atan2(N,X)}}function C(I,O,A){var F,U,H={x:O,y:A},J=0;for(U=1;U<=100;U+=1)F=I(U/100),J+=d(H.x,H.y,F.x,F.y),H=F;return J}function T(I){for(var O,A,F,U,H=0,J=I.length,q=0,X=0,N=0,B=0,G=[],Q=0;Q<J;Q++){switch(F={x:q,y:X,command:(O=I[Q])[0]},O[0]){case"M":F.length=0,N=q=O[1],B=X=O[2];break;case"L":F.length=d(q,X,O[1],O[2]),q=O[1],X=O[2];break;case"C":A=v(q,X,O[1],O[2],O[3],O[4],O[5],O[6]),U=p(q,X,O[1],O[2],O[3],O[4],O[5],O[6]),F.iterator=A,F.angleFinder=U,F.length=C(A,q,X),q=O[5],X=O[6];break;case"Q":A=m(q,X,O[1],O[2],O[3],O[4]),U=b(q,X,O[1],O[2],O[3],O[4]),F.iterator=A,F.angleFinder=U,F.length=C(A,q,X),q=O[3],X=O[4];break;case"Z":case"z":F.destX=N,F.destY=B,F.length=d(q,X,N,B),q=N,X=B}H+=F.length,G.push(F)}return G.push({length:H,x:q,y:X}),G}S.util.joinPath=function(I){return I.map(function(O){return O.join(" ")}).join(" ")},S.util.parsePath=function(I){var O,A,F,U,H,J=[],q=[],X=S.rePathCommand,N="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",B="("+N+")"+S.commaWsp,G="([01])"+S.commaWsp+"?",Q=new RegExp(B+"?"+B+"?"+B+G+G+B+"?("+N+")","g");if(!I||!I.match)return J;for(var ee,W=0,j=(H=I.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;W<j;W++){U=(O=H[W]).slice(1).trim(),q.length=0;var K=O.charAt(0);if(ee=[K],K.toLowerCase()==="a")for(var ne;ne=Q.exec(U);)for(var Z=1;Z<ne.length;Z++)q.push(ne[Z]);else for(;F=X.exec(U);)q.push(F[0]);Z=0;for(var se=q.length;Z<se;Z++)A=parseFloat(q[Z]),isNaN(A)||ee.push(A);var me=c[K.toLowerCase()],pe=u[K]||K;if(ee.length-1>me)for(var ce=1,ge=ee.length;ce<ge;ce+=me)J.push([K].concat(ee.slice(ce,ce+me))),K=pe;else J.push(ee)}return J},S.util.makePathSimpler=function(I){var O,A,F,U,H,J,q=0,X=0,N=I.length,B=0,G=0,Q=[];for(A=0;A<N;++A){switch(F=!1,(O=I[A].slice(0))[0]){case"l":O[0]="L",O[1]+=q,O[2]+=X;case"L":q=O[1],X=O[2];break;case"h":O[1]+=q;case"H":O[0]="L",O[2]=X,q=O[1];break;case"v":O[1]+=X;case"V":O[0]="L",X=O[1],O[1]=q,O[2]=X;break;case"m":O[0]="M",O[1]+=q,O[2]+=X;case"M":q=O[1],X=O[2],B=O[1],G=O[2];break;case"c":O[0]="C",O[1]+=q,O[2]+=X,O[3]+=q,O[4]+=X,O[5]+=q,O[6]+=X;case"C":H=O[3],J=O[4],q=O[5],X=O[6];break;case"s":O[0]="S",O[1]+=q,O[2]+=X,O[3]+=q,O[4]+=X;case"S":U==="C"?(H=2*q-H,J=2*X-J):(H=q,J=X),q=O[3],X=O[4],O[0]="C",O[5]=O[3],O[6]=O[4],O[3]=O[1],O[4]=O[2],O[1]=H,O[2]=J,H=O[3],J=O[4];break;case"q":O[0]="Q",O[1]+=q,O[2]+=X,O[3]+=q,O[4]+=X;case"Q":H=O[1],J=O[2],q=O[3],X=O[4];break;case"t":O[0]="T",O[1]+=q,O[2]+=X;case"T":U==="Q"?(H=2*q-H,J=2*X-J):(H=q,J=X),O[0]="Q",q=O[1],X=O[2],O[1]=H,O[2]=J,O[3]=q,O[4]=X;break;case"a":O[0]="A",O[6]+=q,O[7]+=X;case"A":F=!0,Q=Q.concat(l(q,X,O)),q=O[6],X=O[7];break;case"z":case"Z":q=B,X=G}F||Q.push(O),U=O[0]}return Q},S.util.getSmoothPathFromPoints=function(I,O){var A,F=[],U=new S.Point(I[0].x,I[0].y),H=new S.Point(I[1].x,I[1].y),J=I.length,q=1,X=0,N=J>2;for(O=O||0,N&&(q=I[2].x<H.x?-1:I[2].x===H.x?0:1,X=I[2].y<H.y?-1:I[2].y===H.y?0:1),F.push(["M",U.x-q*O,U.y-X*O]),A=1;A<J;A++){if(!U.eq(H)){var B=U.midPointFrom(H);F.push(["Q",U.x,U.y,B.x,B.y])}U=I[A],A+1<I.length&&(H=I[A+1])}return N&&(q=U.x>I[A-2].x?1:U.x===I[A-2].x?0:-1,X=U.y>I[A-2].y?1:U.y===I[A-2].y?0:-1),F.push(["L",U.x+q*O,U.y+X*O]),F},S.util.getPathSegmentsInfo=T,S.util.getBoundsOfCurve=function(I,O,A,F,U,H,J,q){var X;if(S.cachesBoundsOfCurve&&(X=h.call(arguments),S.boundsOfCurveCache[X]))return S.boundsOfCurveCache[X];var N,B,G,Q,ee,W,j,K,ne=Math.sqrt,Z=Math.min,se=Math.max,me=Math.abs,pe=[],ce=[[],[]];B=6*I-12*A+6*U,N=-3*I+9*A-9*U+3*J,G=3*A-3*I;for(var ge=0;ge<2;++ge)if(ge>0&&(B=6*O-12*F+6*H,N=-3*O+9*F-9*H+3*q,G=3*F-3*O),me(N)<1e-12){if(me(B)<1e-12)continue;0<(Q=-G/B)&&Q<1&&pe.push(Q)}else(j=B*B-4*G*N)<0||(0<(ee=(-B+(K=ne(j)))/(2*N))&&ee<1&&pe.push(ee),0<(W=(-B-K)/(2*N))&&W<1&&pe.push(W));for(var fe,ye,be,ve=pe.length,Te=ve;ve--;)fe=(be=1-(Q=pe[ve]))*be*be*I+3*be*be*Q*A+3*be*Q*Q*U+Q*Q*Q*J,ce[0][ve]=fe,ye=be*be*be*O+3*be*be*Q*F+3*be*Q*Q*H+Q*Q*Q*q,ce[1][ve]=ye;ce[0][Te]=I,ce[1][Te]=O,ce[0][Te+1]=J,ce[1][Te+1]=q;var ke=[{x:Z.apply(null,ce[0]),y:Z.apply(null,ce[1])},{x:se.apply(null,ce[0]),y:se.apply(null,ce[1])}];return S.cachesBoundsOfCurve&&(S.boundsOfCurveCache[X]=ke),ke},S.util.getPointOnPath=function(I,O,A){A||(A=T(I));for(var F=0;O-A[F].length>0&&F<A.length-2;)O-=A[F].length,F++;var U,H=A[F],J=O/H.length,q=H.command,X=I[F];switch(q){case"M":return{x:H.x,y:H.y,angle:0};case"Z":case"z":return(U=new S.Point(H.x,H.y).lerp(new S.Point(H.destX,H.destY),J)).angle=Math.atan2(H.destY-H.y,H.destX-H.x),U;case"L":return(U=new S.Point(H.x,H.y).lerp(new S.Point(X[1],X[2]),J)).angle=Math.atan2(X[2]-H.y,X[1]-H.x),U;case"C":case"Q":return function(N,B){for(var G,Q,ee,W=0,j=0,K=N.iterator,ne={x:N.x,y:N.y},Z=.01,se=N.angleFinder;j<B&&Z>1e-4;)G=K(W),ee=W,(Q=d(ne.x,ne.y,G.x,G.y))+j>B?(W-=Z,Z/=2):(ne=G,W+=Z,j+=Q);return G.angle=se(ee),G}(H,O)}},S.util.transformPath=function(I,O,A){return A&&(O=S.util.multiplyTransformMatrices(O,[1,0,0,1,-A.x,-A.y])),I.map(function(F){for(var U=F.slice(0),H={},J=1;J<F.length-1;J+=2)H.x=F[J],H.y=F[J+1],H=S.util.transformPoint(H,O),U[J]=H.x,U[J+1]=H.y;return U})}}(),function(){var h=Array.prototype.slice;function c(u,g,o){if(u&&u.length!==0){var l=u.length-1,d=g?u[l][g]:u[l];if(g)for(;l--;)o(u[l][g],d)&&(d=u[l][g]);else for(;l--;)o(u[l],d)&&(d=u[l]);return d}}S.util.array={fill:function(u,g){for(var o=u.length;o--;)u[o]=g;return u},invoke:function(u,g){for(var o=h.call(arguments,2),l=[],d=0,v=u.length;d<v;d++)l[d]=o.length?u[d][g].apply(u[d],o):u[d][g].call(u[d]);return l},min:function(u,g){return c(u,g,function(o,l){return o<l})},max:function(u,g){return c(u,g,function(o,l){return o>=l})}}}(),function(){function h(c,u,g){if(g)if(!S.isLikelyNode&&u instanceof Element)c=u;else if(u instanceof Array){c=[];for(var o=0,l=u.length;o<l;o++)c[o]=h({},u[o],g)}else if(u&&typeof u=="object")for(var d in u)d==="canvas"||d==="group"?c[d]=null:u.hasOwnProperty(d)&&(c[d]=h({},u[d],g));else c=u;else for(var d in u)c[d]=u[d];return c}S.util.object={extend:h,clone:function(c,u){return h({},c,u)}},S.util.object.extend(S.util,S.Observable)}(),function(){function h(c,u){var g=c.charCodeAt(u);if(isNaN(g))return"";if(g<55296||g>57343)return c.charAt(u);if(55296<=g&&g<=56319){if(c.length<=u+1)throw"High surrogate without following low surrogate";var o=c.charCodeAt(u+1);if(56320>o||o>57343)throw"High surrogate without following low surrogate";return c.charAt(u)+c.charAt(u+1)}if(u===0)throw"Low surrogate without preceding high surrogate";var l=c.charCodeAt(u-1);if(55296>l||l>56319)throw"Low surrogate without preceding high surrogate";return!1}S.util.string={camelize:function(c){return c.replace(/-+(.)?/g,function(u,g){return g?g.toUpperCase():""})},capitalize:function(c,u){return c.charAt(0).toUpperCase()+(u?c.slice(1):c.slice(1).toLowerCase())},escapeXml:function(c){return c.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(c){var u,g=0,o=[];for(g=0;g<c.length;g++)(u=h(c,g))!==!1&&o.push(u);return o}}}(),function(){var h=Array.prototype.slice,c=function(){},u=function(){for(var d in{toString:1})if(d==="toString")return!1;return!0}(),g=function(d,v,p){for(var m in v)m in d.prototype&&typeof d.prototype[m]=="function"&&(v[m]+"").indexOf("callSuper")>-1?d.prototype[m]=function(b){return function(){var C=this.constructor.superclass;this.constructor.superclass=p;var T=v[b].apply(this,arguments);if(this.constructor.superclass=C,b!=="initialize")return T}}(m):d.prototype[m]=v[m],u&&(v.toString!==Object.prototype.toString&&(d.prototype.toString=v.toString),v.valueOf!==Object.prototype.valueOf&&(d.prototype.valueOf=v.valueOf))};function o(){}function l(d){for(var v=null,p=this;p.constructor.superclass;){var m=p.constructor.superclass.prototype[d];if(p[d]!==m){v=m;break}p=p.constructor.superclass.prototype}return v?arguments.length>1?v.apply(this,h.call(arguments,1)):v.call(this):console.log("tried to callSuper "+d+", method not found in prototype chain",this)}S.util.createClass=function(){var d=null,v=h.call(arguments,0);function p(){this.initialize.apply(this,arguments)}typeof v[0]=="function"&&(d=v.shift()),p.superclass=d,p.subclasses=[],d&&(o.prototype=d.prototype,p.prototype=new o,d.subclasses.push(p));for(var m=0,b=v.length;m<b;m++)g(p,v[m],d);return p.prototype.initialize||(p.prototype.initialize=c),p.prototype.constructor=p,p.prototype.callSuper=l,p}}(),y=!!S.document.createElement("div").attachEvent,w=["touchstart","touchmove","touchend"],S.util.addListener=function(h,c,u,g){h&&h.addEventListener(c,u,!y&&g)},S.util.removeListener=function(h,c,u,g){h&&h.removeEventListener(c,u,!y&&g)},S.util.getPointer=function(h){var c=h.target,u=S.util.getScrollLeftTop(c),g=function(o){var l=o.changedTouches;return l&&l[0]?l[0]:o}(h);return{x:g.clientX+u.left,y:g.clientY+u.top}},S.util.isTouchEvent=function(h){return w.indexOf(h.type)>-1||h.pointerType==="touch"},E=typeof(x=S.document.createElement("div")).style.opacity=="string",k=typeof x.style.filter=="string",P=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,M=function(h){return h},E?M=function(h,c){return h.style.opacity=c,h}:k&&(M=function(h,c){var u=h.style;return h.currentStyle&&!h.currentStyle.hasLayout&&(u.zoom=1),P.test(u.filter)?(c=c>=.9999?"":"alpha(opacity="+100*c+")",u.filter=u.filter.replace(P,c)):u.filter+=" alpha(opacity="+100*c+")",h}),S.util.setStyle=function(h,c){var u=h.style;if(!u)return h;if(typeof c=="string")return h.style.cssText+=";"+c,c.indexOf("opacity")>-1?M(h,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):h;for(var g in c)g==="opacity"?M(h,c[g]):u[g==="float"||g==="cssFloat"?u.styleFloat===void 0?"cssFloat":"styleFloat":g]=c[g];return h},function(){var h,c,u,g,o=Array.prototype.slice,l=function(p){return o.call(p,0)};try{h=l(S.document.childNodes)instanceof Array}catch(p){}function d(p,m){var b=S.document.createElement(p);for(var C in m)C==="class"?b.className=m[C]:C==="for"?b.htmlFor=m[C]:b.setAttribute(C,m[C]);return b}function v(p){for(var m=0,b=0,C=S.document.documentElement,T=S.document.body||{scrollLeft:0,scrollTop:0};p&&(p.parentNode||p.host)&&((p=p.parentNode||p.host)===S.document?(m=T.scrollLeft||C.scrollLeft||0,b=T.scrollTop||C.scrollTop||0):(m+=p.scrollLeft||0,b+=p.scrollTop||0),p.nodeType!==1||p.style.position!=="fixed"););return{left:m,top:b}}h||(l=function(p){for(var m=new Array(p.length),b=p.length;b--;)m[b]=p[b];return m}),c=S.document.defaultView&&S.document.defaultView.getComputedStyle?function(p,m){var b=S.document.defaultView.getComputedStyle(p,null);return b?b[m]:void 0}:function(p,m){var b=p.style[m];return!b&&p.currentStyle&&(b=p.currentStyle[m]),b},u=S.document.documentElement.style,g="userSelect"in u?"userSelect":"MozUserSelect"in u?"MozUserSelect":"WebkitUserSelect"in u?"WebkitUserSelect":"KhtmlUserSelect"in u?"KhtmlUserSelect":"",S.util.makeElementUnselectable=function(p){return p.onselectstart!==void 0&&(p.onselectstart=S.util.falseFunction),g?p.style[g]="none":typeof p.unselectable=="string"&&(p.unselectable="on"),p},S.util.makeElementSelectable=function(p){return p.onselectstart!==void 0&&(p.onselectstart=null),g?p.style[g]="":typeof p.unselectable=="string"&&(p.unselectable=""),p},S.util.setImageSmoothing=function(p,m){p.imageSmoothingEnabled=p.imageSmoothingEnabled||p.webkitImageSmoothingEnabled||p.mozImageSmoothingEnabled||p.msImageSmoothingEnabled||p.oImageSmoothingEnabled,p.imageSmoothingEnabled=m},S.util.getById=function(p){return typeof p=="string"?S.document.getElementById(p):p},S.util.toArray=l,S.util.addClass=function(p,m){p&&(" "+p.className+" ").indexOf(" "+m+" ")===-1&&(p.className+=(p.className?" ":"")+m)},S.util.makeElement=d,S.util.wrapElement=function(p,m,b){return typeof m=="string"&&(m=d(m,b)),p.parentNode&&p.parentNode.replaceChild(m,p),m.appendChild(p),m},S.util.getScrollLeftTop=v,S.util.getElementOffset=function(p){var m,b,C=p&&p.ownerDocument,T={left:0,top:0},I={left:0,top:0},O={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!C)return I;for(var A in O)I[O[A]]+=parseInt(c(p,A),10)||0;return m=C.documentElement,p.getBoundingClientRect!==void 0&&(T=p.getBoundingClientRect()),b=v(p),{left:T.left+b.left-(m.clientLeft||0)+I.left,top:T.top+b.top-(m.clientTop||0)+I.top}},S.util.getNodeCanvas=function(p){var m=S.jsdomImplForWrapper(p);return m._canvas||m._image},S.util.cleanUpJsdomNode=function(p){if(S.isLikelyNode){var m=S.jsdomImplForWrapper(p);m&&(m._image=null,m._canvas=null,m._currentSrc=null,m._attributes=null,m._classList=null)}}}(),function(){function h(){}S.util.request=function(c,u){u||(u={});var g=u.method?u.method.toUpperCase():"GET",o=u.onComplete||function(){},l=new S.window.XMLHttpRequest,d=u.body||u.parameters;return l.onreadystatechange=function(){l.readyState===4&&(o(l),l.onreadystatechange=h)},g==="GET"&&(d=null,typeof u.parameters=="string"&&(c=function(v,p){return v+(/\?/.test(v)?"&":"?")+p}(c,u.parameters))),l.open(g,c,!0),g!=="POST"&&g!=="PUT"||l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(d),l}}(),S.log=console.log,S.warn=console.warn,function(){var h=S.util.object.extend,c=S.util.object.clone,u=[];function g(){return!1}function o(p,m,b,C){return-b*Math.cos(p/C*(Math.PI/2))+b+m}S.util.object.extend(u,{cancelAll:function(){var p=this.splice(0);return p.forEach(function(m){m.cancel()}),p},cancelByCanvas:function(p){if(!p)return[];var m=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===p});return m.forEach(function(b){b.cancel()}),m},cancelByTarget:function(p){var m=this.findAnimationsByTarget(p);return m.forEach(function(b){b.cancel()}),m},findAnimationIndex:function(p){return this.indexOf(this.findAnimation(p))},findAnimation:function(p){return this.find(function(m){return m.cancel===p})},findAnimationsByTarget:function(p){return p?this.filter(function(m){return m.target===p}):[]}});var l=S.window.requestAnimationFrame||S.window.webkitRequestAnimationFrame||S.window.mozRequestAnimationFrame||S.window.oRequestAnimationFrame||S.window.msRequestAnimationFrame||function(p){return S.window.setTimeout(p,1e3/60)},d=S.window.cancelAnimationFrame||S.window.clearTimeout;function v(){return l.apply(S.window,arguments)}S.util.animate=function(p){p||(p={});var m,b=!1,C=function(){var T=S.runningAnimations.indexOf(m);return T>-1&&S.runningAnimations.splice(T,1)[0]};return m=h(c(p),{cancel:function(){return b=!0,C()},currentValue:"startValue"in p?p.startValue:0,completionRate:0,durationRate:0}),S.runningAnimations.push(m),v(function(T){var I,O=T||+new Date,A=p.duration||500,F=O+A,U=p.onChange||g,H=p.abort||g,J=p.onComplete||g,q=p.easing||o,X="startValue"in p&&p.startValue.length>0,N="startValue"in p?p.startValue:0,B="endValue"in p?p.endValue:100,G=p.byValue||(X?N.map(function(Q,ee){return B[ee]-N[ee]}):B-N);p.onStart&&p.onStart(),function Q(ee){var W=(I=ee||+new Date)>F?A:I-O,j=W/A,K=X?N.map(function(Z,se){return q(W,N[se],G[se],A)}):q(W,N,G,A),ne=Math.abs(X?(K[0]-N[0])/G[0]:(K-N)/G);if(m.currentValue=X?K.slice():K,m.completionRate=ne,m.durationRate=j,!b){if(!H(K,ne,j))return I>F?(m.currentValue=X?B.slice():B,m.completionRate=1,m.durationRate=1,U(X?B.slice():B,1,1),J(B,1,1),void C()):(U(K,ne,j),void v(Q));C()}}(O)}),m.cancel},S.util.requestAnimFrame=v,S.util.cancelAnimFrame=function(){return d.apply(S.window,arguments)},S.runningAnimations=u}(),function(){function h(c,u,g){var o="rgba("+parseInt(c[0]+g*(u[0]-c[0]),10)+","+parseInt(c[1]+g*(u[1]-c[1]),10)+","+parseInt(c[2]+g*(u[2]-c[2]),10);return(o+=","+(c&&u?parseFloat(c[3]+g*(u[3]-c[3])):1))+")"}S.util.animateColor=function(c,u,g,o){var l=new S.Color(c).getSource(),d=new S.Color(u).getSource(),v=o.onComplete,p=o.onChange;return o=o||{},S.util.animate(S.util.object.extend(o,{duration:g||500,startValue:l,endValue:d,byValue:d,easing:function(m,b,C,T){return h(b,C,o.colorEasing?o.colorEasing(m,T):1-Math.cos(m/T*(Math.PI/2)))},onComplete:function(m,b,C){if(v)return v(h(d,d,0),b,C)},onChange:function(m,b,C){if(p){if(Array.isArray(m))return p(h(m,m,0),b,C);p(m,b,C)}}}))}}(),function(){function h(o,l,d,v){return o<Math.abs(l)?(o=l,v=d/4):v=l===0&&o===0?d/(2*Math.PI)*Math.asin(1):d/(2*Math.PI)*Math.asin(l/o),{a:o,c:l,p:d,s:v}}function c(o,l,d){return o.a*Math.pow(2,10*(l-=1))*Math.sin((l*d-o.s)*(2*Math.PI)/o.p)}function u(o,l,d,v){return d-g(v-o,0,d,v)+l}function g(o,l,d,v){return(o/=v)<1/2.75?d*(7.5625*o*o)+l:o<2/2.75?d*(7.5625*(o-=1.5/2.75)*o+.75)+l:o<2.5/2.75?d*(7.5625*(o-=2.25/2.75)*o+.9375)+l:d*(7.5625*(o-=2.625/2.75)*o+.984375)+l}S.util.ease={easeInQuad:function(o,l,d,v){return d*(o/=v)*o+l},easeOutQuad:function(o,l,d,v){return-d*(o/=v)*(o-2)+l},easeInOutQuad:function(o,l,d,v){return(o/=v/2)<1?d/2*o*o+l:-d/2*(--o*(o-2)-1)+l},easeInCubic:function(o,l,d,v){return d*(o/=v)*o*o+l},easeOutCubic:function(o,l,d,v){return d*((o=o/v-1)*o*o+1)+l},easeInOutCubic:function(o,l,d,v){return(o/=v/2)<1?d/2*o*o*o+l:d/2*((o-=2)*o*o+2)+l},easeInQuart:function(o,l,d,v){return d*(o/=v)*o*o*o+l},easeOutQuart:function(o,l,d,v){return-d*((o=o/v-1)*o*o*o-1)+l},easeInOutQuart:function(o,l,d,v){return(o/=v/2)<1?d/2*o*o*o*o+l:-d/2*((o-=2)*o*o*o-2)+l},easeInQuint:function(o,l,d,v){return d*(o/=v)*o*o*o*o+l},easeOutQuint:function(o,l,d,v){return d*((o=o/v-1)*o*o*o*o+1)+l},easeInOutQuint:function(o,l,d,v){return(o/=v/2)<1?d/2*o*o*o*o*o+l:d/2*((o-=2)*o*o*o*o+2)+l},easeInSine:function(o,l,d,v){return-d*Math.cos(o/v*(Math.PI/2))+d+l},easeOutSine:function(o,l,d,v){return d*Math.sin(o/v*(Math.PI/2))+l},easeInOutSine:function(o,l,d,v){return-d/2*(Math.cos(Math.PI*o/v)-1)+l},easeInExpo:function(o,l,d,v){return o===0?l:d*Math.pow(2,10*(o/v-1))+l},easeOutExpo:function(o,l,d,v){return o===v?l+d:d*(1-Math.pow(2,-10*o/v))+l},easeInOutExpo:function(o,l,d,v){return o===0?l:o===v?l+d:(o/=v/2)<1?d/2*Math.pow(2,10*(o-1))+l:d/2*(2-Math.pow(2,-10*--o))+l},easeInCirc:function(o,l,d,v){return-d*(Math.sqrt(1-(o/=v)*o)-1)+l},easeOutCirc:function(o,l,d,v){return d*Math.sqrt(1-(o=o/v-1)*o)+l},easeInOutCirc:function(o,l,d,v){return(o/=v/2)<1?-d/2*(Math.sqrt(1-o*o)-1)+l:d/2*(Math.sqrt(1-(o-=2)*o)+1)+l},easeInElastic:function(o,l,d,v){var p=0;return o===0?l:(o/=v)==1?l+d:(p||(p=.3*v),-c(h(d,d,p,1.70158),o,v)+l)},easeOutElastic:function(o,l,d,v){var p=0;if(o===0)return l;if((o/=v)==1)return l+d;p||(p=.3*v);var m=h(d,d,p,1.70158);return m.a*Math.pow(2,-10*o)*Math.sin((o*v-m.s)*(2*Math.PI)/m.p)+m.c+l},easeInOutElastic:function(o,l,d,v){var p=0;if(o===0)return l;if((o/=v/2)==2)return l+d;p||(p=v*(.3*1.5));var m=h(d,d,p,1.70158);return o<1?-.5*c(m,o,v)+l:m.a*Math.pow(2,-10*(o-=1))*Math.sin((o*v-m.s)*(2*Math.PI)/m.p)*.5+m.c+l},easeInBack:function(o,l,d,v,p){return p===void 0&&(p=1.70158),d*(o/=v)*o*((p+1)*o-p)+l},easeOutBack:function(o,l,d,v,p){return p===void 0&&(p=1.70158),d*((o=o/v-1)*o*((p+1)*o+p)+1)+l},easeInOutBack:function(o,l,d,v,p){return p===void 0&&(p=1.70158),(o/=v/2)<1?d/2*(o*o*((1+(p*=1.525))*o-p))+l:d/2*((o-=2)*o*((1+(p*=1.525))*o+p)+2)+l},easeInBounce:u,easeOutBounce:g,easeInOutBounce:function(o,l,d,v){return o<v/2?.5*u(2*o,0,d,v)+l:.5*g(2*o-v,0,d,v)+.5*d+l}}}(),function(h){var c=h.fabric||(h.fabric={}),u=c.util.object.extend,g=c.util.object.clone,o=c.util.toFixed,l=c.util.parseUnit,d=c.util.multiplyTransformMatrices,v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},p={stroke:"strokeOpacity",fill:"fillOpacity"},m="font-size",b="clip-path";function C(N){return N in v?v[N]:N}function T(N,B,G,Q){var ee,W=Array.isArray(B);if(N!=="fill"&&N!=="stroke"||B!=="none"){if(N==="strokeUniform")return B==="non-scaling-stroke";if(N==="strokeDashArray")B=B==="none"?null:B.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(N==="transformMatrix")B=G&&G.transformMatrix?d(G.transformMatrix,c.parseTransformAttribute(B)):c.parseTransformAttribute(B);else if(N==="visible")B=B!=="none"&&B!=="hidden",G&&G.visible===!1&&(B=!1);else if(N==="opacity")B=parseFloat(B),G&&G.opacity!==void 0&&(B*=G.opacity);else if(N==="textAnchor")B=B==="start"?"left":B==="end"?"right":"center";else if(N==="charSpacing")ee=l(B,Q)/Q*1e3;else if(N==="paintFirst"){var j=B.indexOf("fill"),K=B.indexOf("stroke");B="fill",(j>-1&&K>-1&&K<j||j===-1&&K>-1)&&(B="stroke")}else{if(N==="href"||N==="xlink:href"||N==="font")return B;if(N==="imageSmoothing")return B==="optimizeQuality";ee=W?B.map(l):l(B,Q)}}else B="";return!W&&isNaN(ee)?B:ee}function I(N){return new RegExp("^("+N.join("|")+")\\b","i")}function O(N,B){var G,Q,ee,W,j=[];for(ee=0,W=B.length;ee<W;ee++)G=B[ee],Q=N.getElementsByTagName(G),j=j.concat(Array.prototype.slice.call(Q));return j}function A(N,B){var G,Q=!0;return(G=F(N,B.pop()))&&B.length&&(Q=function(ee,W){for(var j,K=!0;ee.parentNode&&ee.parentNode.nodeType===1&&W.length;)K&&(j=W.pop()),K=F(ee=ee.parentNode,j);return W.length===0}(N,B)),G&&Q&&B.length===0}function F(N,B){var G,Q,ee=N.nodeName,W=N.getAttribute("class"),j=N.getAttribute("id");if(G=new RegExp("^"+ee,"i"),B=B.replace(G,""),j&&B.length&&(G=new RegExp("#"+j+"(?![a-zA-Z\\-]+)","i"),B=B.replace(G,"")),W&&B.length)for(Q=(W=W.split(" ")).length;Q--;)G=new RegExp("\\."+W[Q]+"(?![a-zA-Z\\-]+)","i"),B=B.replace(G,"");return B.length===0}function U(N,B){var G;if(N.getElementById&&(G=N.getElementById(B)),G)return G;var Q,ee,W,j=N.getElementsByTagName("*");for(ee=0,W=j.length;ee<W;ee++)if(B===(Q=j[ee]).getAttribute("id"))return Q}c.svgValidTagNamesRegEx=I(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),c.svgViewBoxElementsRegEx=I(["symbol","image","marker","pattern","view","svg"]),c.svgInvalidAncestorsRegEx=I(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),c.svgValidParentsRegEx=I(["symbol","g","a","svg","clipPath","defs"]),c.cssRules={},c.gradientDefs={},c.clipPaths={},c.parseTransformAttribute=function(){function N(K,ne,Z){K[Z]=Math.tan(c.util.degreesToRadians(ne[0]))}var B=c.iMatrix,G=c.reNum,Q=c.commaWsp,ee="(?:(?:(matrix)\\s*\\(\\s*("+G+")"+Q+"("+G+")"+Q+"("+G+")"+Q+"("+G+")"+Q+"("+G+")"+Q+"("+G+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+G+")(?:"+Q+"("+G+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+G+")(?:"+Q+"("+G+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+G+")(?:"+Q+"("+G+")"+Q+"("+G+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+G+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+G+")\\s*\\)))",W=new RegExp("^\\s*(?:(?:"+ee+"(?:"+Q+"*"+ee+")*)?)\\s*$"),j=new RegExp(ee,"g");return function(K){var ne=B.concat(),Z=[];if(!K||K&&!W.test(K))return ne;K.replace(j,function(me){var pe=new RegExp(ee).exec(me).filter(function(fe){return!!fe}),ce=pe[1],ge=pe.slice(2).map(parseFloat);switch(ce){case"translate":(function(fe,ye){fe[4]=ye[0],ye.length===2&&(fe[5]=ye[1])})(ne,ge);break;case"rotate":ge[0]=c.util.degreesToRadians(ge[0]),function(fe,ye){var be=c.util.cos(ye[0]),ve=c.util.sin(ye[0]),Te=0,ke=0;ye.length===3&&(Te=ye[1],ke=ye[2]),fe[0]=be,fe[1]=ve,fe[2]=-ve,fe[3]=be,fe[4]=Te-(be*Te-ve*ke),fe[5]=ke-(ve*Te+be*ke)}(ne,ge);break;case"scale":(function(fe,ye){var be=ye[0],ve=ye.length===2?ye[1]:ye[0];fe[0]=be,fe[3]=ve})(ne,ge);break;case"skewX":N(ne,ge,2);break;case"skewY":N(ne,ge,1);break;case"matrix":ne=ge}Z.push(ne.concat()),ne=B.concat()});for(var se=Z[0];Z.length>1;)Z.shift(),se=c.util.multiplyTransformMatrices(se,Z[0]);return se}}();var H=new RegExp("^\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*$");function J(N){if(!c.svgViewBoxElementsRegEx.test(N.nodeName))return{};var B,G,Q,ee,W,j,K=N.getAttribute("viewBox"),ne=1,Z=1,se=N.getAttribute("width"),me=N.getAttribute("height"),pe=N.getAttribute("x")||0,ce=N.getAttribute("y")||0,ge=N.getAttribute("preserveAspectRatio")||"",fe=!K||!(K=K.match(H)),ye=!se||!me||se==="100%"||me==="100%",be=fe&&ye,ve={},Te="",ke=0,bt=0;if(ve.width=0,ve.height=0,ve.toBeParsed=be,fe&&(pe||ce)&&N.parentNode&&N.parentNode.nodeName!=="#document"&&(Te=" translate("+l(pe)+" "+l(ce)+") ",W=(N.getAttribute("transform")||"")+Te,N.setAttribute("transform",W),N.removeAttribute("x"),N.removeAttribute("y")),be)return ve;if(fe)return ve.width=l(se),ve.height=l(me),ve;if(B=-parseFloat(K[1]),G=-parseFloat(K[2]),Q=parseFloat(K[3]),ee=parseFloat(K[4]),ve.minX=B,ve.minY=G,ve.viewBoxWidth=Q,ve.viewBoxHeight=ee,ye?(ve.width=Q,ve.height=ee):(ve.width=l(se),ve.height=l(me),ne=ve.width/Q,Z=ve.height/ee),(ge=c.util.parsePreserveAspectRatioAttribute(ge)).alignX!=="none"&&(ge.meetOrSlice==="meet"&&(Z=ne=ne>Z?Z:ne),ge.meetOrSlice==="slice"&&(Z=ne=ne>Z?ne:Z),ke=ve.width-Q*ne,bt=ve.height-ee*ne,ge.alignX==="Mid"&&(ke/=2),ge.alignY==="Mid"&&(bt/=2),ge.alignX==="Min"&&(ke=0),ge.alignY==="Min"&&(bt=0)),ne===1&&Z===1&&B===0&&G===0&&pe===0&&ce===0)return ve;if((pe||ce)&&N.parentNode.nodeName!=="#document"&&(Te=" translate("+l(pe)+" "+l(ce)+") "),W=Te+" matrix("+ne+" 0 0 "+Z+" "+(B*ne+ke)+" "+(G*Z+bt)+") ",N.nodeName==="svg"){for(j=N.ownerDocument.createElementNS(c.svgNS,"g");N.firstChild;)j.appendChild(N.firstChild);N.appendChild(j)}else(j=N).removeAttribute("x"),j.removeAttribute("y"),W=j.getAttribute("transform")+W;return j.setAttribute("transform",W),ve}function q(N,B){var G="xlink:href",Q=U(N,B.getAttribute(G).slice(1));if(Q&&Q.getAttribute(G)&&q(N,Q),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(W){Q&&!B.hasAttribute(W)&&Q.hasAttribute(W)&&B.setAttribute(W,Q.getAttribute(W))}),!B.children.length)for(var ee=Q.cloneNode(!0);ee.firstChild;)B.appendChild(ee.firstChild);B.removeAttribute(G)}c.parseSVGDocument=function(N,B,G,Q){if(N){(function(pe){for(var ce=O(pe,["use","svg:use"]),ge=0;ce.length&&ge<ce.length;){var fe=ce[ge],ye=fe.getAttribute("xlink:href")||fe.getAttribute("href");if(ye===null)return;var be,ve,Te,ke,bt=ye.slice(1),ni=fe.getAttribute("x")||0,Hi=fe.getAttribute("y")||0,Me=U(pe,bt).cloneNode(!0),wt=(Me.getAttribute("transform")||"")+" translate("+ni+", "+Hi+")",_n=ce.length,zi=c.svgNS;if(J(Me),/^svg$/i.test(Me.nodeName)){var Ii=Me.ownerDocument.createElementNS(zi,"g");for(ve=0,ke=(Te=Me.attributes).length;ve<ke;ve++)be=Te.item(ve),Ii.setAttributeNS(zi,be.nodeName,be.nodeValue);for(;Me.firstChild;)Ii.appendChild(Me.firstChild);Me=Ii}for(ve=0,ke=(Te=fe.attributes).length;ve<ke;ve++)(be=Te.item(ve)).nodeName!=="x"&&be.nodeName!=="y"&&be.nodeName!=="xlink:href"&&be.nodeName!=="href"&&(be.nodeName==="transform"?wt=be.nodeValue+" "+wt:Me.setAttribute(be.nodeName,be.nodeValue));Me.setAttribute("transform",wt),Me.setAttribute("instantiated_by_use","1"),Me.removeAttribute("id"),fe.parentNode.replaceChild(Me,fe),ce.length===_n&&ge++}})(N);var ee,W,j=c.Object.__uid++,K=J(N),ne=c.util.toArray(N.getElementsByTagName("*"));if(K.crossOrigin=Q&&Q.crossOrigin,K.svgUid=j,ne.length===0&&c.isLikelyNode){var Z=[];for(ee=0,W=(ne=N.selectNodes('//*[name(.)!="svg"]')).length;ee<W;ee++)Z[ee]=ne[ee];ne=Z}var se=ne.filter(function(pe){return J(pe),c.svgValidTagNamesRegEx.test(pe.nodeName.replace("svg:",""))&&!function(ce,ge){for(;ce&&(ce=ce.parentNode);)if(ce.nodeName&&ge.test(ce.nodeName.replace("svg:",""))&&!ce.getAttribute("instantiated_by_use"))return!0;return!1}(pe,c.svgInvalidAncestorsRegEx)});if(!se||se&&!se.length)B&&B([],{});else{var me={};ne.filter(function(pe){return pe.nodeName.replace("svg:","")==="clipPath"}).forEach(function(pe){var ce=pe.getAttribute("id");me[ce]=c.util.toArray(pe.getElementsByTagName("*")).filter(function(ge){return c.svgValidTagNamesRegEx.test(ge.nodeName.replace("svg:",""))})}),c.gradientDefs[j]=c.getGradientDefs(N),c.cssRules[j]=c.getCSSRules(N),c.clipPaths[j]=me,c.parseElements(se,function(pe,ce){B&&(B(pe,K,ce,ne),delete c.gradientDefs[j],delete c.cssRules[j],delete c.clipPaths[j])},g(K),G,Q)}}};var X=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+c.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+c.reNum+"))?\\s+(.*)");u(c,{parseFontDeclaration:function(N,B){var G=N.match(X);if(G){var Q=G[1],ee=G[3],W=G[4],j=G[5],K=G[6];Q&&(B.fontStyle=Q),ee&&(B.fontWeight=isNaN(parseFloat(ee))?ee:parseFloat(ee)),W&&(B.fontSize=l(W)),K&&(B.fontFamily=K),j&&(B.lineHeight=j==="normal"?1:j)}},getGradientDefs:function(N){var B,G=O(N,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),Q=0,ee={};for(Q=G.length;Q--;)(B=G[Q]).getAttribute("xlink:href")&&q(N,B),ee[B.getAttribute("id")]=B;return ee},parseAttributes:function(N,B,G){if(N){var Q,ee,W,j={};G===void 0&&(G=N.getAttribute("svgUid")),N.parentNode&&c.svgValidParentsRegEx.test(N.parentNode.nodeName)&&(j=c.parseAttributes(N.parentNode,B,G));var K=B.reduce(function(ge,fe){return(Q=N.getAttribute(fe))&&(ge[fe]=Q),ge},{}),ne=u(function(ge,fe){var ye={};for(var be in c.cssRules[fe])if(A(ge,be.split(" ")))for(var ve in c.cssRules[fe][be])ye[ve]=c.cssRules[fe][be][ve];return ye}(N,G),c.parseStyleAttribute(N));K=u(K,ne),ne[b]&&N.setAttribute(b,ne[b]),ee=W=j.fontSize||c.Text.DEFAULT_SVG_FONT_SIZE,K[m]&&(K[m]=ee=l(K[m],W));var Z,se,me={};for(var pe in K)se=T(Z=C(pe),K[pe],j,ee),me[Z]=se;me&&me.font&&c.parseFontDeclaration(me.font,me);var ce=u(j,me);return c.svgValidParentsRegEx.test(N.nodeName)?ce:function(ge){for(var fe in p)if(ge[p[fe]]!==void 0&&ge[fe]!==""){if(ge[fe]===void 0){if(!c.Object.prototype[fe])continue;ge[fe]=c.Object.prototype[fe]}if(ge[fe].indexOf("url(")!==0){var ye=new c.Color(ge[fe]);ge[fe]=ye.setAlpha(o(ye.getAlpha()*ge[p[fe]],2)).toRgba()}}return ge}(ce)}},parseElements:function(N,B,G,Q,ee){new c.ElementsParser(N,B,G,Q,ee).parse()},parseStyleAttribute:function(N){var B={},G=N.getAttribute("style");return G&&(typeof G=="string"?function(Q,ee){var W,j;Q.replace(/;\s*$/,"").split(";").forEach(function(K){var ne=K.split(":");W=ne[0].trim().toLowerCase(),j=ne[1].trim(),ee[W]=j})}(G,B):function(Q,ee){var W,j;for(var K in Q)Q[K]!==void 0&&(W=K.toLowerCase(),j=Q[K],ee[W]=j)}(G,B)),B},parsePointsAttribute:function(N){if(!N)return null;var B,G,Q=[];for(B=0,G=(N=(N=N.replace(/,/g," ").trim()).split(/\s+/)).length;B<G;B+=2)Q.push({x:parseFloat(N[B]),y:parseFloat(N[B+1])});return Q},getCSSRules:function(N){var B,G,Q=N.getElementsByTagName("style"),ee={};for(B=0,G=Q.length;B<G;B++){var W=Q[B].textContent;(W=W.replace(/\/\*[\s\S]*?\*\//g,"")).trim()!==""&&W.split("}").filter(function(j){return j.trim()}).forEach(function(j){var K=j.split("{"),ne={},Z=K[1].trim().split(";").filter(function(ce){return ce.trim()});for(B=0,G=Z.length;B<G;B++){var se=Z[B].split(":"),me=se[0].trim(),pe=se[1].trim();ne[me]=pe}(j=K[0].trim()).split(",").forEach(function(ce){(ce=ce.replace(/^svg/i,"").trim())!==""&&(ee[ce]?c.util.object.extend(ee[ce],ne):ee[ce]=c.util.object.clone(ne))})})}return ee},loadSVGFromURL:function(N,B,G,Q){N=N.replace(/^\n\s*/,"").trim(),new c.util.request(N,{method:"get",onComplete:function(ee){var W=ee.responseXML;if(!W||!W.documentElement)return B&&B(null),!1;c.parseSVGDocument(W.documentElement,function(j,K,ne,Z){B&&B(j,K,ne,Z)},G,Q)}})},loadSVGFromString:function(N,B,G,Q){var ee=new c.window.DOMParser().parseFromString(N.trim(),"text/xml");c.parseSVGDocument(ee.documentElement,function(W,j,K,ne){B(W,j,K,ne)},G,Q)}})}(e),S.ElementsParser=function(h,c,u,g,o,l){this.elements=h,this.callback=c,this.options=u,this.reviver=g,this.svgUid=u&&u.svgUid||0,this.parsingOptions=o,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},(V=S.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},V.createObjects=function(){var h=this;this.elements.forEach(function(c,u){c.setAttribute("svgUid",h.svgUid),h.createObject(c,u)})},V.findTag=function(h){return S[S.util.string.capitalize(h.tagName.replace("svg:",""))]},V.createObject=function(h,c){var u=this.findTag(h);if(u&&u.fromElement)try{u.fromElement(h,this.createCallback(c,h),this.options)}catch(g){S.log(g)}else this.checkIfDone()},V.createCallback=function(h,c){var u=this;return function(g){var o;u.resolveGradient(g,c,"fill"),u.resolveGradient(g,c,"stroke"),g instanceof S.Image&&g._originalElement&&(o=g.parsePreserveAspectRatioAttribute(c)),g._removeTransformMatrix(o),u.resolveClipPath(g,c),u.reviver&&u.reviver(c,g),u.instances[h]=g,u.checkIfDone()}},V.extractPropertyDefinition=function(h,c,u){var g=h[c],o=this.regexUrl;if(o.test(g)){o.lastIndex=0;var l=o.exec(g)[1];return o.lastIndex=0,S[u][this.svgUid][l]}},V.resolveGradient=function(h,c,u){var g=this.extractPropertyDefinition(h,u,"gradientDefs");if(g){var o=c.getAttribute(u+"-opacity"),l=S.Gradient.fromElement(g,h,o,this.options);h.set(u,l)}},V.createClipPathCallback=function(h,c){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,c.push(u)}},V.resolveClipPath=function(h,c){var u,g,o,l,d=this.extractPropertyDefinition(h,"clipPath","clipPaths");if(d){o=[],g=S.util.invertTransform(h.calcTransformMatrix());for(var v=d[0].parentNode,p=c;p.parentNode&&p.getAttribute("clip-path")!==h.clipPath;)p=p.parentNode;p.parentNode.appendChild(v);for(var m=0;m<d.length;m++)u=d[m],this.findTag(u).fromElement(u,this.createClipPathCallback(h,o),this.options);d=o.length===1?o[0]:new S.Group(o),l=S.util.multiplyTransformMatrices(g,d.calcTransformMatrix()),d.clipPath&&this.resolveClipPath(d,p);var b=S.util.qrDecompose(l);d.flipX=!1,d.flipY=!1,d.set("scaleX",b.scaleX),d.set("scaleY",b.scaleY),d.angle=b.angle,d.skewX=b.skewX,d.skewY=0,d.setPositionByOrigin({x:b.translateX,y:b.translateY},"center","center"),h.clipPath=d}else delete h.clipPath},V.checkIfDone=function(){--this.numElements==0&&(this.instances=this.instances.filter(function(h){return h!=null}),this.callback(this.instances,this.elements))},function(h){var c=h.fabric||(h.fabric={});function u(g,o){this.x=g,this.y=o}c.Point?c.warn("fabric.Point is already defined"):(c.Point=u,u.prototype={type:"point",constructor:u,add:function(g){return new u(this.x+g.x,this.y+g.y)},addEquals:function(g){return this.x+=g.x,this.y+=g.y,this},scalarAdd:function(g){return new u(this.x+g,this.y+g)},scalarAddEquals:function(g){return this.x+=g,this.y+=g,this},subtract:function(g){return new u(this.x-g.x,this.y-g.y)},subtractEquals:function(g){return this.x-=g.x,this.y-=g.y,this},scalarSubtract:function(g){return new u(this.x-g,this.y-g)},scalarSubtractEquals:function(g){return this.x-=g,this.y-=g,this},multiply:function(g){return new u(this.x*g,this.y*g)},multiplyEquals:function(g){return this.x*=g,this.y*=g,this},divide:function(g){return new u(this.x/g,this.y/g)},divideEquals:function(g){return this.x/=g,this.y/=g,this},eq:function(g){return this.x===g.x&&this.y===g.y},lt:function(g){return this.x<g.x&&this.y<g.y},lte:function(g){return this.x<=g.x&&this.y<=g.y},gt:function(g){return this.x>g.x&&this.y>g.y},gte:function(g){return this.x>=g.x&&this.y>=g.y},lerp:function(g,o){return o===void 0&&(o=.5),o=Math.max(Math.min(1,o),0),new u(this.x+(g.x-this.x)*o,this.y+(g.y-this.y)*o)},distanceFrom:function(g){var o=this.x-g.x,l=this.y-g.y;return Math.sqrt(o*o+l*l)},midPointFrom:function(g){return this.lerp(g)},min:function(g){return new u(Math.min(this.x,g.x),Math.min(this.y,g.y))},max:function(g){return new u(Math.max(this.x,g.x),Math.max(this.y,g.y))},toString:function(){return this.x+","+this.y},setXY:function(g,o){return this.x=g,this.y=o,this},setX:function(g){return this.x=g,this},setY:function(g){return this.y=g,this},setFromPoint:function(g){return this.x=g.x,this.y=g.y,this},swap:function(g){var o=this.x,l=this.y;this.x=g.x,this.y=g.y,g.x=o,g.y=l},clone:function(){return new u(this.x,this.y)}})}(e),function(h){var c=h.fabric||(h.fabric={});function u(g){this.status=g,this.points=[]}c.Intersection?c.warn("fabric.Intersection is already defined"):(c.Intersection=u,c.Intersection.prototype={constructor:u,appendPoint:function(g){return this.points.push(g),this},appendPoints:function(g){return this.points=this.points.concat(g),this}},c.Intersection.intersectLineLine=function(g,o,l,d){var v,p=(d.x-l.x)*(g.y-l.y)-(d.y-l.y)*(g.x-l.x),m=(o.x-g.x)*(g.y-l.y)-(o.y-g.y)*(g.x-l.x),b=(d.y-l.y)*(o.x-g.x)-(d.x-l.x)*(o.y-g.y);if(b!==0){var C=p/b,T=m/b;0<=C&&C<=1&&0<=T&&T<=1?(v=new u("Intersection")).appendPoint(new c.Point(g.x+C*(o.x-g.x),g.y+C*(o.y-g.y))):v=new u}else v=new u(p===0||m===0?"Coincident":"Parallel");return v},c.Intersection.intersectLinePolygon=function(g,o,l){var d,v,p,m,b=new u,C=l.length;for(m=0;m<C;m++)d=l[m],v=l[(m+1)%C],p=u.intersectLineLine(g,o,d,v),b.appendPoints(p.points);return b.points.length>0&&(b.status="Intersection"),b},c.Intersection.intersectPolygonPolygon=function(g,o){var l,d=new u,v=g.length;for(l=0;l<v;l++){var p=g[l],m=g[(l+1)%v],b=u.intersectLinePolygon(p,m,o);d.appendPoints(b.points)}return d.points.length>0&&(d.status="Intersection"),d},c.Intersection.intersectPolygonRectangle=function(g,o,l){var d=o.min(l),v=o.max(l),p=new c.Point(v.x,d.y),m=new c.Point(d.x,v.y),b=u.intersectLinePolygon(d,p,g),C=u.intersectLinePolygon(p,v,g),T=u.intersectLinePolygon(v,m,g),I=u.intersectLinePolygon(m,d,g),O=new u;return O.appendPoints(b.points),O.appendPoints(C.points),O.appendPoints(T.points),O.appendPoints(I.points),O.points.length>0&&(O.status="Intersection"),O})}(e),function(h){var c=h.fabric||(h.fabric={});function u(o){o?this._tryParsingColor(o):this.setSource([0,0,0,1])}function g(o,l,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?o+6*(l-o)*d:d<.5?l:d<2/3?o+(l-o)*(2/3-d)*6:o}c.Color?c.warn("fabric.Color is already defined."):(c.Color=u,c.Color.prototype={_tryParsingColor:function(o){var l;o in u.colorNameMap&&(o=u.colorNameMap[o]),o==="transparent"&&(l=[255,255,255,0]),l||(l=u.sourceFromHex(o)),l||(l=u.sourceFromRgb(o)),l||(l=u.sourceFromHsl(o)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(o,l,d){o/=255,l/=255,d/=255;var v,p,m,b=c.util.array.max([o,l,d]),C=c.util.array.min([o,l,d]);if(m=(b+C)/2,b===C)v=p=0;else{var T=b-C;switch(p=m>.5?T/(2-b-C):T/(b+C),b){case o:v=(l-d)/T+(l<d?6:0);break;case l:v=(d-o)/T+2;break;case d:v=(o-l)/T+4}v/=6}return[Math.round(360*v),Math.round(100*p),Math.round(100*m)]},getSource:function(){return this._source},setSource:function(o){this._source=o},toRgb:function(){var o=this.getSource();return"rgb("+o[0]+","+o[1]+","+o[2]+")"},toRgba:function(){var o=this.getSource();return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},toHsl:function(){var o=this.getSource(),l=this._rgbToHsl(o[0],o[1],o[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var o=this.getSource(),l=this._rgbToHsl(o[0],o[1],o[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+o[3]+")"},toHex:function(){var o,l,d,v=this.getSource();return o=(o=v[0].toString(16)).length===1?"0"+o:o,l=(l=v[1].toString(16)).length===1?"0"+l:l,d=(d=v[2].toString(16)).length===1?"0"+d:d,o.toUpperCase()+l.toUpperCase()+d.toUpperCase()},toHexa:function(){var o,l=this.getSource();return o=(o=(o=Math.round(255*l[3])).toString(16)).length===1?"0"+o:o,this.toHex()+o.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(o){var l=this.getSource();return l[3]=o,this.setSource(l),this},toGrayscale:function(){var o=this.getSource(),l=parseInt((.3*o[0]+.59*o[1]+.11*o[2]).toFixed(0),10),d=o[3];return this.setSource([l,l,l,d]),this},toBlackWhite:function(o){var l=this.getSource(),d=(.3*l[0]+.59*l[1]+.11*l[2]).toFixed(0),v=l[3];return o=o||127,d=Number(d)<Number(o)?0:255,this.setSource([d,d,d,v]),this},overlayWith:function(o){o instanceof u||(o=new u(o));var l,d=[],v=this.getAlpha(),p=this.getSource(),m=o.getSource();for(l=0;l<3;l++)d.push(Math.round(.5*p[l]+.5*m[l]));return d[3]=v,this.setSource(d),this}},c.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,c.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,c.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,c.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},c.Color.fromRgb=function(o){return u.fromSource(u.sourceFromRgb(o))},c.Color.sourceFromRgb=function(o){var l=o.match(u.reRGBa);if(l){var d=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),v=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),p=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(d,10),parseInt(v,10),parseInt(p,10),l[4]?parseFloat(l[4]):1]}},c.Color.fromRgba=u.fromRgb,c.Color.fromHsl=function(o){return u.fromSource(u.sourceFromHsl(o))},c.Color.sourceFromHsl=function(o){var l=o.match(u.reHSLa);if(l){var d,v,p,m=(parseFloat(l[1])%360+360)%360/360,b=parseFloat(l[2])/(/%$/.test(l[2])?100:1),C=parseFloat(l[3])/(/%$/.test(l[3])?100:1);if(b===0)d=v=p=C;else{var T=C<=.5?C*(b+1):C+b-C*b,I=2*C-T;d=g(I,T,m+1/3),v=g(I,T,m),p=g(I,T,m-1/3)}return[Math.round(255*d),Math.round(255*v),Math.round(255*p),l[4]?parseFloat(l[4]):1]}},c.Color.fromHsla=u.fromHsl,c.Color.fromHex=function(o){return u.fromSource(u.sourceFromHex(o))},c.Color.sourceFromHex=function(o){if(o.match(u.reHex)){var l=o.slice(o.indexOf("#")+1),d=l.length===3||l.length===4,v=l.length===8||l.length===4,p=d?l.charAt(0)+l.charAt(0):l.substring(0,2),m=d?l.charAt(1)+l.charAt(1):l.substring(2,4),b=d?l.charAt(2)+l.charAt(2):l.substring(4,6),C=v?d?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(p,16),parseInt(m,16),parseInt(b,16),parseFloat((parseInt(C,16)/255).toFixed(2))]}},c.Color.fromSource=function(o){var l=new u;return l.setSource(o),l})}(e),function(h){var c=h.fabric||(h.fabric={}),u=["e","se","s","sw","w","nw","n","ne","e"],g=["ns","nesw","ew","nwse"],o={},l="left",d="top",v="right",p="bottom",m="center",b={top:p,bottom:d,left:v,right:l,center:m},C=c.util.radiansToDegrees,T=Math.sign||function(W){return(W>0)-(W<0)||+W};function I(W,j){var K=W.angle+C(Math.atan2(j.y,j.x))+360;return Math.round(K%360/45)}function O(W,j){var K=j.transform.target,ne=K.canvas,Z=c.util.object.clone(j);Z.target=K,ne&&ne.fire("object:"+W,Z),K.fire(W,j)}function A(W,j){var K=j.canvas,ne=W[K.uniScaleKey];return K.uniformScaling&&!ne||!K.uniformScaling&&ne}function F(W){return W.originX===m&&W.originY===m}function U(W,j,K){var ne=W.lockScalingX,Z=W.lockScalingY;return!((!ne||!Z)&&(j||!ne&&!Z||!K)&&(!ne||j!=="x")&&(!Z||j!=="y"))}function H(W,j,K,ne){return{e:W,transform:j,pointer:{x:K,y:ne}}}function J(W){return function(j,K,ne,Z){var se=K.target,me=se.getCenterPoint(),pe=se.translateToOriginPoint(me,K.originX,K.originY),ce=W(j,K,ne,Z);return se.setPositionByOrigin(pe,K.originX,K.originY),ce}}function q(W,j){return function(K,ne,Z,se){var me=j(K,ne,Z,se);return me&&O(W,H(K,ne,Z,se)),me}}function X(W,j,K,ne,Z){var se=W.target,me=se.controls[W.corner],pe=se.canvas.getZoom(),ce=se.padding/pe,ge=se.toLocalPoint(new c.Point(ne,Z),j,K);return ge.x>=ce&&(ge.x-=ce),ge.x<=-ce&&(ge.x+=ce),ge.y>=ce&&(ge.y-=ce),ge.y<=ce&&(ge.y+=ce),ge.x-=me.offsetX,ge.y-=me.offsetY,ge}function N(W){return W.flipX!==W.flipY}function B(W,j,K,ne,Z){if(W[j]!==0){var se=Z/W._getTransformedDimensions()[ne]*W[K];W.set(K,se)}}function G(W,j,K,ne){var Z,se=j.target,me=se._getTransformedDimensions(0,se.skewY),pe=X(j,j.originX,j.originY,K,ne),ce=Math.abs(2*pe.x)-me.x,ge=se.skewX;ce<2?Z=0:(Z=C(Math.atan2(ce/se.scaleX,me.y/se.scaleY)),j.originX===l&&j.originY===p&&(Z=-Z),j.originX===v&&j.originY===d&&(Z=-Z),N(se)&&(Z=-Z));var fe=ge!==Z;if(fe){var ye=se._getTransformedDimensions().y;se.set("skewX",Z),B(se,"skewY","scaleY","y",ye)}return fe}function Q(W,j,K,ne){var Z,se=j.target,me=se._getTransformedDimensions(se.skewX,0),pe=X(j,j.originX,j.originY,K,ne),ce=Math.abs(2*pe.y)-me.y,ge=se.skewY;ce<2?Z=0:(Z=C(Math.atan2(ce/se.scaleY,me.x/se.scaleX)),j.originX===l&&j.originY===p&&(Z=-Z),j.originX===v&&j.originY===d&&(Z=-Z),N(se)&&(Z=-Z));var fe=ge!==Z;if(fe){var ye=se._getTransformedDimensions().x;se.set("skewY",Z),B(se,"skewX","scaleX","x",ye)}return fe}function ee(W,j,K,ne,Z){Z=Z||{};var se,me,pe,ce,ge,fe,ye=j.target,be=ye.lockScalingX,ve=ye.lockScalingY,Te=Z.by,ke=A(W,ye),bt=U(ye,Te,ke),ni=j.gestureScale;if(bt)return!1;if(ni)me=j.scaleX*ni,pe=j.scaleY*ni;else{if(se=X(j,j.originX,j.originY,K,ne),ge=Te!=="y"?T(se.x):1,fe=Te!=="x"?T(se.y):1,j.signX||(j.signX=ge),j.signY||(j.signY=fe),ye.lockScalingFlip&&(j.signX!==ge||j.signY!==fe))return!1;if(ce=ye._getTransformedDimensions(),ke&&!Te){var Hi=Math.abs(se.x)+Math.abs(se.y),Me=j.original,wt=Hi/(Math.abs(ce.x*Me.scaleX/ye.scaleX)+Math.abs(ce.y*Me.scaleY/ye.scaleY));me=Me.scaleX*wt,pe=Me.scaleY*wt}else me=Math.abs(se.x*ye.scaleX/ce.x),pe=Math.abs(se.y*ye.scaleY/ce.y);F(j)&&(me*=2,pe*=2),j.signX!==ge&&Te!=="y"&&(j.originX=b[j.originX],me*=-1,j.signX=ge),j.signY!==fe&&Te!=="x"&&(j.originY=b[j.originY],pe*=-1,j.signY=fe)}var _n=ye.scaleX,zi=ye.scaleY;return Te?(Te==="x"&&ye.set("scaleX",me),Te==="y"&&ye.set("scaleY",pe)):(!be&&ye.set("scaleX",me),!ve&&ye.set("scaleY",pe)),_n!==ye.scaleX||zi!==ye.scaleY}o.scaleCursorStyleHandler=function(W,j,K){var ne=A(W,K),Z="";if(j.x!==0&&j.y===0?Z="x":j.x===0&&j.y!==0&&(Z="y"),U(K,Z,ne))return"not-allowed";var se=I(K,j);return u[se]+"-resize"},o.skewCursorStyleHandler=function(W,j,K){var ne="not-allowed";if(j.x!==0&&K.lockSkewingY||j.y!==0&&K.lockSkewingX)return ne;var Z=I(K,j)%4;return g[Z]+"-resize"},o.scaleSkewCursorStyleHandler=function(W,j,K){return W[K.canvas.altActionKey]?o.skewCursorStyleHandler(W,j,K):o.scaleCursorStyleHandler(W,j,K)},o.rotationWithSnapping=q("rotating",J(function(W,j,K,ne){var Z=j,se=Z.target,me=se.translateToOriginPoint(se.getCenterPoint(),Z.originX,Z.originY);if(se.lockRotation)return!1;var pe,ce=Math.atan2(Z.ey-me.y,Z.ex-me.x),ge=Math.atan2(ne-me.y,K-me.x),fe=C(ge-ce+Z.theta);if(se.snapAngle>0){var ye=se.snapAngle,be=se.snapThreshold||ye,ve=Math.ceil(fe/ye)*ye,Te=Math.floor(fe/ye)*ye;Math.abs(fe-Te)<be?fe=Te:Math.abs(fe-ve)<be&&(fe=ve)}return fe<0&&(fe=360+fe),fe%=360,pe=se.angle!==fe,se.angle=fe,pe})),o.scalingEqually=q("scaling",J(function(W,j,K,ne){return ee(W,j,K,ne)})),o.scalingX=q("scaling",J(function(W,j,K,ne){return ee(W,j,K,ne,{by:"x"})})),o.scalingY=q("scaling",J(function(W,j,K,ne){return ee(W,j,K,ne,{by:"y"})})),o.scalingYOrSkewingX=function(W,j,K,ne){return W[j.target.canvas.altActionKey]?o.skewHandlerX(W,j,K,ne):o.scalingY(W,j,K,ne)},o.scalingXOrSkewingY=function(W,j,K,ne){return W[j.target.canvas.altActionKey]?o.skewHandlerY(W,j,K,ne):o.scalingX(W,j,K,ne)},o.changeWidth=q("resizing",J(function(W,j,K,ne){var Z=j.target,se=X(j,j.originX,j.originY,K,ne),me=Z.strokeWidth/(Z.strokeUniform?Z.scaleX:1),pe=F(j)?2:1,ce=Z.width,ge=Math.abs(se.x*pe/Z.scaleX)-me;return Z.set("width",Math.max(ge,0)),ce!==ge})),o.skewHandlerX=function(W,j,K,ne){var Z,se=j.target,me=se.skewX,pe=j.originY;return!se.lockSkewingX&&(me===0?Z=X(j,m,m,K,ne).x>0?l:v:(me>0&&(Z=pe===d?l:v),me<0&&(Z=pe===d?v:l),N(se)&&(Z=Z===l?v:l)),j.originX=Z,q("skewing",J(G))(W,j,K,ne))},o.skewHandlerY=function(W,j,K,ne){var Z,se=j.target,me=se.skewY,pe=j.originX;return!se.lockSkewingY&&(me===0?Z=X(j,m,m,K,ne).y>0?d:p:(me>0&&(Z=pe===l?d:p),me<0&&(Z=pe===l?p:d),N(se)&&(Z=Z===d?p:d)),j.originY=Z,q("skewing",J(Q))(W,j,K,ne))},o.dragHandler=function(W,j,K,ne){var Z=j.target,se=K-j.offsetX,me=ne-j.offsetY,pe=!Z.get("lockMovementX")&&Z.left!==se,ce=!Z.get("lockMovementY")&&Z.top!==me;return pe&&Z.set("left",se),ce&&Z.set("top",me),(pe||ce)&&O("moving",H(W,j,K,ne)),pe||ce},o.scaleOrSkewActionName=function(W,j,K){var ne=W[K.canvas.altActionKey];return j.x===0?ne?"skewX":"scaleY":j.y===0?ne?"skewY":"scaleX":void 0},o.rotationStyleHandler=function(W,j,K){return K.lockRotation?"not-allowed":j.cursorStyle},o.fireEvent=O,o.wrapWithFixedAnchor=J,o.wrapWithFireEvent=q,o.getLocalPoint=X,c.controlsUtils=o}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.degreesToRadians,g=c.controlsUtils;g.renderCircleControl=function(o,l,d,v,p){v=v||{};var m,b=this.sizeX||v.cornerSize||p.cornerSize,C=this.sizeY||v.cornerSize||p.cornerSize,T=v.transparentCorners!==void 0?v.transparentCorners:p.transparentCorners,I=T?"stroke":"fill",O=!T&&(v.cornerStrokeColor||p.cornerStrokeColor),A=l,F=d;o.save(),o.fillStyle=v.cornerColor||p.cornerColor,o.strokeStyle=v.cornerStrokeColor||p.cornerStrokeColor,b>C?(m=b,o.scale(1,C/b),F=d*b/C):C>b?(m=C,o.scale(b/C,1),A=l*C/b):m=b,o.lineWidth=1,o.beginPath(),o.arc(A,F,m/2,0,2*Math.PI,!1),o[I](),O&&o.stroke(),o.restore()},g.renderSquareControl=function(o,l,d,v,p){v=v||{};var m=this.sizeX||v.cornerSize||p.cornerSize,b=this.sizeY||v.cornerSize||p.cornerSize,C=v.transparentCorners!==void 0?v.transparentCorners:p.transparentCorners,T=C?"stroke":"fill",I=!C&&(v.cornerStrokeColor||p.cornerStrokeColor),O=m/2,A=b/2;o.save(),o.fillStyle=v.cornerColor||p.cornerColor,o.strokeStyle=v.cornerStrokeColor||p.cornerStrokeColor,o.lineWidth=1,o.translate(l,d),o.rotate(u(p.angle)),o[T+"Rect"](-O,-A,m,b),I&&o.strokeRect(-O,-A,m,b),o.restore()}}(e),function(h){var c=h.fabric||(h.fabric={});c.Control=function(u){for(var g in u)this[g]=u[g]},c.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,g){return g.cursorStyle},getActionName:function(u,g){return g.actionName},getVisibility:function(u,g){var o=u._controlsVisibility;return o&&o[g]!==void 0?o[g]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,g){return c.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},g)},calcCornerCoords:function(u,g,o,l,d){var v,p,m,b,C=d?this.touchSizeX:this.sizeX,T=d?this.touchSizeY:this.sizeY;if(C&&T&&C!==T){var I=Math.atan2(T,C),O=Math.sqrt(C*C+T*T)/2,A=I-c.util.degreesToRadians(u),F=Math.PI/2-I-c.util.degreesToRadians(u);v=O*c.util.cos(A),p=O*c.util.sin(A),m=O*c.util.cos(F),b=O*c.util.sin(F)}else O=.7071067812*(C&&T?C:g),A=c.util.degreesToRadians(45-u),v=m=O*c.util.cos(A),p=b=O*c.util.sin(A);return{tl:{x:o-b,y:l-m},tr:{x:o+v,y:l-p},bl:{x:o-v,y:l+p},br:{x:o+b,y:l+m}}},render:function(u,g,o,l,d){((l=l||{}).cornerStyle||d.cornerStyle)==="circle"?c.controlsUtils.renderCircleControl.call(this,u,g,o,l,d):c.controlsUtils.renderSquareControl.call(this,u,g,o,l,d)}}}(e),function(){function h(u,g){var o,l,d,v,p=u.getAttribute("style"),m=u.getAttribute("offset")||0;if(m=(m=parseFloat(m)/(/%$/.test(m)?100:1))<0?0:m>1?1:m,p){var b=p.split(/\s*;\s*/);for(b[b.length-1]===""&&b.pop(),v=b.length;v--;){var C=b[v].split(/\s*:\s*/),T=C[0].trim(),I=C[1].trim();T==="stop-color"?o=I:T==="stop-opacity"&&(d=I)}}return o||(o=u.getAttribute("stop-color")||"rgb(0,0,0)"),d||(d=u.getAttribute("stop-opacity")),l=(o=new S.Color(o)).getAlpha(),d=isNaN(parseFloat(d))?1:parseFloat(d),d*=l*g,{offset:m,color:o.toRgb(),opacity:d}}var c=S.util.object.clone;S.Gradient=S.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var g,o=this;Object.keys(u).forEach(function(l){o[l]=u[l]}),this.id?this.id+="_"+S.Object.__uid++:this.id=S.Object.__uid++,g={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},this.type==="radial"&&(g.r1=u.coords.r1||0,g.r2=u.coords.r2||0),this.coords=g,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var g in u){var o=new S.Color(u[g]);this.colorStops.push({offset:parseFloat(g),color:o.toRgb(),opacity:o.getAlpha()})}return this},toObject:function(u){var g={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return S.util.populateWithProperties(this,g,u),g},toSVG:function(u,g){var o,l,d,v,p=c(this.coords,!0),m=(g=g||{},c(this.colorStops,!0)),b=p.r1>p.r2,C=this.gradientTransform?this.gradientTransform.concat():S.iMatrix.concat(),T=-this.offsetX,I=-this.offsetY,O=!!g.additionalTransform,A=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(m.sort(function(J,q){return J.offset-q.offset}),A==="objectBoundingBox"?(T/=u.width,I/=u.height):(T+=u.width/2,I+=u.height/2),u.type==="path"&&this.gradientUnits!=="percentage"&&(T-=u.pathOffset.x,I-=u.pathOffset.y),C[4]-=T,C[5]-=I,v='id="SVGID_'+this.id+'" gradientUnits="'+A+'"',v+=' gradientTransform="'+(O?g.additionalTransform+" ":"")+S.util.matrixToSVG(C)+'" ',this.type==="linear"?d=["<linearGradient ",v,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(d=["<radialGradient ",v,' cx="',b?p.x1:p.x2,'" cy="',b?p.y1:p.y2,'" r="',b?p.r1:p.r2,'" fx="',b?p.x2:p.x1,'" fy="',b?p.y2:p.y1,`">
`]),this.type==="radial"){if(b)for((m=m.concat()).reverse(),o=0,l=m.length;o<l;o++)m[o].offset=1-m[o].offset;var F=Math.min(p.r1,p.r2);if(F>0){var U=F/Math.max(p.r1,p.r2);for(o=0,l=m.length;o<l;o++)m[o].offset+=U*(1-m[o].offset)}}for(o=0,l=m.length;o<l;o++){var H=m[o];d.push("<stop ",'offset="',100*H.offset+"%",'" style="stop-color:',H.color,H.opacity!==void 0?";stop-opacity: "+H.opacity:";",`"/>
`)}return d.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),d.join("")},toLive:function(u){var g,o,l,d=S.util.object.clone(this.coords);if(this.type){for(this.type==="linear"?g=u.createLinearGradient(d.x1,d.y1,d.x2,d.y2):this.type==="radial"&&(g=u.createRadialGradient(d.x1,d.y1,d.r1,d.x2,d.y2,d.r2)),o=0,l=this.colorStops.length;o<l;o++){var v=this.colorStops[o].color,p=this.colorStops[o].opacity,m=this.colorStops[o].offset;p!==void 0&&(v=new S.Color(v).setAlpha(p).toRgba()),g.addColorStop(m,v)}return g}}}),S.util.object.extend(S.Gradient,{fromElement:function(u,g,o,l){var d=parseFloat(o)/(/%$/.test(o)?100:1);d=d<0?0:d>1?1:d,isNaN(d)&&(d=1);var v,p,m,b,C=u.getElementsByTagName("stop"),T=u.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",I=u.getAttribute("gradientTransform")||"",O=[],A=0,F=0;for(u.nodeName==="linearGradient"||u.nodeName==="LINEARGRADIENT"?(v="linear",p=function(U){return{x1:U.getAttribute("x1")||0,y1:U.getAttribute("y1")||0,x2:U.getAttribute("x2")||"100%",y2:U.getAttribute("y2")||0}}(u)):(v="radial",p=function(U){return{x1:U.getAttribute("fx")||U.getAttribute("cx")||"50%",y1:U.getAttribute("fy")||U.getAttribute("cy")||"50%",r1:0,x2:U.getAttribute("cx")||"50%",y2:U.getAttribute("cy")||"50%",r2:U.getAttribute("r")||"50%"}}(u)),m=C.length;m--;)O.push(h(C[m],d));return b=S.parseTransformAttribute(I),function(U,H,J,q){var X,N;Object.keys(H).forEach(function(B){(X=H[B])==="Infinity"?N=1:X==="-Infinity"?N=0:(N=parseFloat(H[B],10),typeof X=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(X)&&(N*=.01,q==="pixels"&&(B!=="x1"&&B!=="x2"&&B!=="r2"||(N*=J.viewBoxWidth||J.width),B!=="y1"&&B!=="y2"||(N*=J.viewBoxHeight||J.height)))),H[B]=N})}(0,p,l,T),T==="pixels"&&(A=-g.left,F=-g.top),new S.Gradient({id:u.getAttribute("id"),type:v,coords:p,colorStops:O,gradientUnits:T,gradientTransform:b,offsetX:A,offsetY:F})}})}(),L=S.util.toFixed,S.Pattern=S.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(h,c){if(h||(h={}),this.id=S.Object.__uid++,this.setOptions(h),!h.source||h.source&&typeof h.source!="string")c&&c(this);else{var u=this;this.source=S.util.createImage(),S.util.loadImage(h.source,function(g,o){u.source=g,c&&c(u,o)},null,this.crossOrigin)}},toObject:function(h){var c,u,g=S.Object.NUM_FRACTION_DIGITS;return typeof this.source.src=="string"?c=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(c=this.source.toDataURL()),u={type:"pattern",source:c,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:L(this.offsetX,g),offsetY:L(this.offsetY,g),patternTransform:this.patternTransform?this.patternTransform.concat():null},S.util.populateWithProperties(this,u,h),u},toSVG:function(h){var c=typeof this.source=="function"?this.source():this.source,u=c.width/h.width,g=c.height/h.height,o=this.offsetX/h.width,l=this.offsetY/h.height,d="";return this.repeat!=="repeat-x"&&this.repeat!=="no-repeat"||(g=1,l&&(g+=Math.abs(l))),this.repeat!=="repeat-y"&&this.repeat!=="no-repeat"||(u=1,o&&(u+=Math.abs(o))),c.src?d=c.src:c.toDataURL&&(d=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+l+'" width="'+u+'" height="'+g+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+d+`"></image>
</pattern>
`},setOptions:function(h){for(var c in h)this[c]=h[c]},toLive:function(h){var c=this.source;return!c||c.src!==void 0&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":h.createPattern(c,this.repeat)}}),function(h){var c=h.fabric||(h.fabric={}),u=c.util.toFixed;c.Shadow?c.warn("fabric.Shadow is already defined."):(c.Shadow=c.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(g){for(var o in typeof g=="string"&&(g=this._parseShadow(g)),g)this[o]=g[o];this.id=c.Object.__uid++},_parseShadow:function(g){var o=g.trim(),l=c.Shadow.reOffsetsAndBlur.exec(o)||[];return{color:(o.replace(c.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(g){var o=40,l=40,d=c.Object.NUM_FRACTION_DIGITS,v=c.util.rotateVector({x:this.offsetX,y:this.offsetY},c.util.degreesToRadians(-g.angle)),p=new c.Color(this.color);return g.width&&g.height&&(o=100*u((Math.abs(v.x)+this.blur)/g.width,d)+20,l=100*u((Math.abs(v.y)+this.blur)/g.height,d)+20),g.flipX&&(v.x*=-1),g.flipY&&(v.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+o+'%" width="'+(100+2*o)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+u(this.blur?this.blur/2:0,d)+`"></feGaussianBlur>
	<feOffset dx="`+u(v.x,d)+'" dy="'+u(v.y,d)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+p.toRgb()+'" flood-opacity="'+p.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var g={},o=c.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==o[l]&&(g[l]=this[l])},this),g}}),c.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){if(S.StaticCanvas)S.warn("fabric.StaticCanvas is already defined.");else{var h=S.util.object.extend,c=S.util.getElementOffset,u=S.util.removeFromArray,g=S.util.toFixed,o=S.util.transformPoint,l=S.util.invertTransform,d=S.util.getNodeCanvas,v=S.util.createCanvasElement,p=new Error("Could not initialize `canvas` element");S.StaticCanvas=S.util.createClass(S.CommonMethods,{initialize:function(m,b){b||(b={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(m,b)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:S.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(m,b){var C=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(m),this._initOptions(b),this.interactive||this._initRetinaScaling(),b.overlayImage&&this.setOverlayImage(b.overlayImage,C),b.backgroundImage&&this.setBackgroundImage(b.backgroundImage,C),b.backgroundColor&&this.setBackgroundColor(b.backgroundColor,C),b.overlayColor&&this.setOverlayColor(b.overlayColor,C),this.calcOffset()},_isRetinaScaling:function(){return S.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,S.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var m=S.devicePixelRatio;this.__initRetinaScaling(m,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(m,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(m,b,C){b.setAttribute("width",this.width*m),b.setAttribute("height",this.height*m),C.scale(m,m)},calcOffset:function(){return this._offset=c(this.lowerCanvasEl),this},setOverlayImage:function(m,b,C){return this.__setBgOverlayImage("overlayImage",m,b,C)},setBackgroundImage:function(m,b,C){return this.__setBgOverlayImage("backgroundImage",m,b,C)},setOverlayColor:function(m,b){return this.__setBgOverlayColor("overlayColor",m,b)},setBackgroundColor:function(m,b){return this.__setBgOverlayColor("backgroundColor",m,b)},__setBgOverlayImage:function(m,b,C,T){return typeof b=="string"?S.util.loadImage(b,function(I,O){if(I){var A=new S.Image(I,T);this[m]=A,A.canvas=this}C&&C(I,O)},this,T&&T.crossOrigin):(T&&b.setOptions(T),this[m]=b,b&&(b.canvas=this),C&&C(b,!1)),this},__setBgOverlayColor:function(m,b,C){return this[m]=b,this._initGradient(b,m),this._initPattern(b,m,C),this},_createCanvasElement:function(){var m=v();if(!m||(m.style||(m.style={}),m.getContext===void 0))throw p;return m},_initOptions:function(m){var b=this.lowerCanvasEl;this._setOptions(m),this.width=this.width||parseInt(b.width,10)||0,this.height=this.height||parseInt(b.height,10)||0,this.lowerCanvasEl.style&&(b.width=this.width,b.height=this.height,b.style.width=this.width+"px",b.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(m){m&&m.getContext?this.lowerCanvasEl=m:this.lowerCanvasEl=S.util.getById(m)||this._createCanvasElement(),S.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(m,b){return this.setDimensions({width:m},b)},setHeight:function(m,b){return this.setDimensions({height:m},b)},setDimensions:function(m,b){var C;for(var T in b=b||{},m)C=m[T],b.cssOnly||(this._setBackstoreDimension(T,m[T]),C+="px",this.hasLostContext=!0),b.backstoreOnly||this._setCssDimension(T,C);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),b.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(m,b){return this.lowerCanvasEl[m]=b,this.upperCanvasEl&&(this.upperCanvasEl[m]=b),this.cacheCanvasEl&&(this.cacheCanvasEl[m]=b),this[m]=b,this},_setCssDimension:function(m,b){return this.lowerCanvasEl.style[m]=b,this.upperCanvasEl&&(this.upperCanvasEl.style[m]=b),this.wrapperEl&&(this.wrapperEl.style[m]=b),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(m){var b,C,T,I=this._activeObject,O=this.backgroundImage,A=this.overlayImage;for(this.viewportTransform=m,C=0,T=this._objects.length;C<T;C++)(b=this._objects[C]).group||b.setCoords(!0);return I&&I.setCoords(),O&&O.setCoords(!0),A&&A.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(m,b){var C=m,T=this.viewportTransform.slice(0);m=o(m,l(this.viewportTransform)),T[0]=b,T[3]=b;var I=o(m,T);return T[4]+=C.x-I.x,T[5]+=C.y-I.y,this.setViewportTransform(T)},setZoom:function(m){return this.zoomToPoint(new S.Point(0,0),m),this},absolutePan:function(m){var b=this.viewportTransform.slice(0);return b[4]=-m.x,b[5]=-m.y,this.setViewportTransform(b)},relativePan:function(m){return this.absolutePan(new S.Point(-m.x-this.viewportTransform[4],-m.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(m){this.stateful&&m.setupState(),m._set("canvas",this),m.setCoords(),this.fire("object:added",{target:m}),m.fire("added")},_onObjectRemoved:function(m){this.fire("object:removed",{target:m}),m.fire("removed"),delete m.canvas},clearContext:function(m){return m.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var m=this.contextContainer;return this.renderCanvas(m,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=S.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var m={},b=this.width,C=this.height,T=l(this.viewportTransform);return m.tl=o({x:0,y:0},T),m.br=o({x:b,y:C},T),m.tr=new S.Point(m.br.x,m.tl.y),m.bl=new S.Point(m.tl.x,m.br.y),this.vptCoords=m,m},cancelRequestedRender:function(){this.isRendering&&(S.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(m,b){var C=this.viewportTransform,T=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(m),S.util.setImageSmoothing(m,this.imageSmoothingEnabled),this.fire("before:render",{ctx:m}),this._renderBackground(m),m.save(),m.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._renderObjects(m,b),m.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(m),T&&(T.canvas=this,T.shouldCache(),T._transformDone=!0,T.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(m)),this._renderOverlay(m),this.controlsAboveOverlay&&this.interactive&&this.drawControls(m),this.fire("after:render",{ctx:m})},drawClipPathOnCanvas:function(m){var b=this.viewportTransform,C=this.clipPath;m.save(),m.transform(b[0],b[1],b[2],b[3],b[4],b[5]),m.globalCompositeOperation="destination-in",C.transform(m),m.scale(1/C.zoomX,1/C.zoomY),m.drawImage(C._cacheCanvas,-C.cacheTranslationX,-C.cacheTranslationY),m.restore()},_renderObjects:function(m,b){var C,T;for(C=0,T=b.length;C<T;++C)b[C]&&b[C].render(m)},_renderBackgroundOrOverlay:function(m,b){var C=this[b+"Color"],T=this[b+"Image"],I=this.viewportTransform,O=this[b+"Vpt"];if(C||T){if(C){m.save(),m.beginPath(),m.moveTo(0,0),m.lineTo(this.width,0),m.lineTo(this.width,this.height),m.lineTo(0,this.height),m.closePath(),m.fillStyle=C.toLive?C.toLive(m,this):C,O&&m.transform(I[0],I[1],I[2],I[3],I[4],I[5]),m.transform(1,0,0,1,C.offsetX||0,C.offsetY||0);var A=C.gradientTransform||C.patternTransform;A&&m.transform(A[0],A[1],A[2],A[3],A[4],A[5]),m.fill(),m.restore()}T&&(m.save(),O&&m.transform(I[0],I[1],I[2],I[3],I[4],I[5]),T.render(m),m.restore())}},_renderBackground:function(m){this._renderBackgroundOrOverlay(m,"background")},_renderOverlay:function(m){this._renderBackgroundOrOverlay(m,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new S.Point(this.width/2,this.height/2)},centerObjectH:function(m){return this._centerObject(m,new S.Point(this.getCenterPoint().x,m.getCenterPoint().y))},centerObjectV:function(m){return this._centerObject(m,new S.Point(m.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(m){var b=this.getCenterPoint();return this._centerObject(m,b)},viewportCenterObject:function(m){var b=this.getVpCenter();return this._centerObject(m,b)},viewportCenterObjectH:function(m){var b=this.getVpCenter();return this._centerObject(m,new S.Point(b.x,m.getCenterPoint().y)),this},viewportCenterObjectV:function(m){var b=this.getVpCenter();return this._centerObject(m,new S.Point(m.getCenterPoint().x,b.y))},getVpCenter:function(){var m=this.getCenterPoint(),b=l(this.viewportTransform);return o(m,b)},_centerObject:function(m,b){return m.setPositionByOrigin(b,"center","center"),m.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(m){return this.toDatalessObject(m)},toObject:function(m){return this._toObjectMethod("toObject",m)},toDatalessObject:function(m){return this._toObjectMethod("toDatalessObject",m)},_toObjectMethod:function(m,b){var C=this.clipPath,T={version:S.version,objects:this._toObjects(m,b)};return C&&!C.excludeFromExport&&(T.clipPath=this._toObject(this.clipPath,m,b)),h(T,this.__serializeBgOverlay(m,b)),S.util.populateWithProperties(this,T,b),T},_toObjects:function(m,b){return this._objects.filter(function(C){return!C.excludeFromExport}).map(function(C){return this._toObject(C,m,b)},this)},_toObject:function(m,b,C){var T;this.includeDefaultValues||(T=m.includeDefaultValues,m.includeDefaultValues=!1);var I=m[b](C);return this.includeDefaultValues||(m.includeDefaultValues=T),I},__serializeBgOverlay:function(m,b){var C={},T=this.backgroundImage,I=this.overlayImage,O=this.backgroundColor,A=this.overlayColor;return O&&O.toObject?O.excludeFromExport||(C.background=O.toObject(b)):O&&(C.background=O),A&&A.toObject?A.excludeFromExport||(C.overlay=A.toObject(b)):A&&(C.overlay=A),T&&!T.excludeFromExport&&(C.backgroundImage=this._toObject(T,m,b)),I&&!I.excludeFromExport&&(C.overlayImage=this._toObject(I,m,b)),C},svgViewportTransformation:!0,toSVG:function(m,b){m||(m={}),m.reviver=b;var C=[];return this._setSVGPreamble(C,m),this._setSVGHeader(C,m),this.clipPath&&C.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(C,"background"),this._setSVGBgOverlayImage(C,"backgroundImage",b),this._setSVGObjects(C,b),this.clipPath&&C.push(`</g>
`),this._setSVGBgOverlayColor(C,"overlay"),this._setSVGBgOverlayImage(C,"overlayImage",b),C.push("</svg>"),C.join("")},_setSVGPreamble:function(m,b){b.suppressPreamble||m.push('<?xml version="1.0" encoding="',b.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(m,b){var C,T=b.width||this.width,I=b.height||this.height,O='viewBox="0 0 '+this.width+" "+this.height+'" ',A=S.Object.NUM_FRACTION_DIGITS;b.viewBox?O='viewBox="'+b.viewBox.x+" "+b.viewBox.y+" "+b.viewBox.width+" "+b.viewBox.height+'" ':this.svgViewportTransformation&&(C=this.viewportTransform,O='viewBox="'+g(-C[4]/C[0],A)+" "+g(-C[5]/C[3],A)+" "+g(this.width/C[0],A)+" "+g(this.height/C[3],A)+'" '),m.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',T,'" ','height="',I,'" ',O,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",S.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(b),`</defs>
`)},createSVGClipPathMarkup:function(m){var b=this.clipPath;return b?(b.clipPathId="CLIPPATH_"+S.Object.__uid++,'<clipPath id="'+b.clipPathId+`" >
`+this.clipPath.toClipPathSVG(m.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var m=this;return["background","overlay"].map(function(b){var C=m[b+"Color"];if(C&&C.toLive){var T=m[b+"Vpt"],I=m.viewportTransform,O={width:m.width/(T?I[0]:1),height:m.height/(T?I[3]:1)};return C.toSVG(O,{additionalTransform:T?S.util.matrixToSVG(I):""})}}).join("")},createSVGFontFacesMarkup:function(){var m,b,C,T,I,O,A,F,U="",H={},J=S.fontPaths,q=[];for(this._objects.forEach(function N(B){q.push(B),B._objects&&B._objects.forEach(N)}),A=0,F=q.length;A<F;A++)if(b=(m=q[A]).fontFamily,m.type.indexOf("text")!==-1&&!H[b]&&J[b]&&(H[b]=!0,m.styles))for(I in C=m.styles)for(O in T=C[I])!H[b=T[O].fontFamily]&&J[b]&&(H[b]=!0);for(var X in H)U+=[`		@font-face {
`,"			font-family: '",X,`';
`,"			src: url('",J[X],`');
`,`		}
`].join("");return U&&(U=['	<style type="text/css">',`<![CDATA[
`,U,"]]>",`</style>
`].join("")),U},_setSVGObjects:function(m,b){var C,T,I,O=this._objects;for(T=0,I=O.length;T<I;T++)(C=O[T]).excludeFromExport||this._setSVGObject(m,C,b)},_setSVGObject:function(m,b,C){m.push(b.toSVG(C))},_setSVGBgOverlayImage:function(m,b,C){this[b]&&!this[b].excludeFromExport&&this[b].toSVG&&m.push(this[b].toSVG(C))},_setSVGBgOverlayColor:function(m,b){var C=this[b+"Color"],T=this.viewportTransform,I=this.width,O=this.height;if(C)if(C.toLive){var A=C.repeat,F=S.util.invertTransform(T),U=this[b+"Vpt"]?S.util.matrixToSVG(F):"";m.push('<rect transform="'+U+" translate(",I/2,",",O/2,')"',' x="',C.offsetX-I/2,'" y="',C.offsetY-O/2,'" ','width="',A==="repeat-y"||A==="no-repeat"?C.source.width:I,'" height="',A==="repeat-x"||A==="no-repeat"?C.source.height:O,'" fill="url(#SVGID_'+C.id+')"',`></rect>
`)}else m.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',C,'"',`></rect>
`)},sendToBack:function(m){if(!m)return this;var b,C,T,I=this._activeObject;if(m===I&&m.type==="activeSelection")for(b=(T=I._objects).length;b--;)C=T[b],u(this._objects,C),this._objects.unshift(C);else u(this._objects,m),this._objects.unshift(m);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(m){if(!m)return this;var b,C,T,I=this._activeObject;if(m===I&&m.type==="activeSelection")for(T=I._objects,b=0;b<T.length;b++)C=T[b],u(this._objects,C),this._objects.push(C);else u(this._objects,m),this._objects.push(m);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(m,b){if(!m)return this;var C,T,I,O,A,F=this._activeObject,U=0;if(m===F&&m.type==="activeSelection")for(A=F._objects,C=0;C<A.length;C++)T=A[C],(I=this._objects.indexOf(T))>0+U&&(O=I-1,u(this._objects,T),this._objects.splice(O,0,T)),U++;else(I=this._objects.indexOf(m))!==0&&(O=this._findNewLowerIndex(m,I,b),u(this._objects,m),this._objects.splice(O,0,m));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(m,b,C){var T,I;if(C){for(T=b,I=b-1;I>=0;--I)if(m.intersectsWithObject(this._objects[I])||m.isContainedWithinObject(this._objects[I])||this._objects[I].isContainedWithinObject(m)){T=I;break}}else T=b-1;return T},bringForward:function(m,b){if(!m)return this;var C,T,I,O,A,F=this._activeObject,U=0;if(m===F&&m.type==="activeSelection")for(C=(A=F._objects).length;C--;)T=A[C],(I=this._objects.indexOf(T))<this._objects.length-1-U&&(O=I+1,u(this._objects,T),this._objects.splice(O,0,T)),U++;else(I=this._objects.indexOf(m))!==this._objects.length-1&&(O=this._findNewUpperIndex(m,I,b),u(this._objects,m),this._objects.splice(O,0,m));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(m,b,C){var T,I,O;if(C){for(T=b,I=b+1,O=this._objects.length;I<O;++I)if(m.intersectsWithObject(this._objects[I])||m.isContainedWithinObject(this._objects[I])||this._objects[I].isContainedWithinObject(m)){T=I;break}}else T=b+1;return T},moveTo:function(m,b){return u(this._objects,m),this._objects.splice(b,0,m),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(S.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(m){m.dispose&&m.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),S.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),S.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(S.StaticCanvas.prototype,S.Observable),h(S.StaticCanvas.prototype,S.Collection),h(S.StaticCanvas.prototype,S.DataURLExporter),h(S.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(m){var b=v();if(!b||!b.getContext)return null;var C=b.getContext("2d");return C&&m==="setLineDash"?C.setLineDash!==void 0:null}}),S.StaticCanvas.prototype.toJSON=S.StaticCanvas.prototype.toObject,S.isLikelyNode&&(S.StaticCanvas.prototype.createPNGStream=function(){var m=d(this.lowerCanvasEl);return m&&m.createPNGStream()},S.StaticCanvas.prototype.createJPEGStream=function(m){var b=d(this.lowerCanvasEl);return b&&b.createJPEGStream(m)})}}(),S.BaseBrush=S.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var c=this.canvas.viewportTransform;h.save(),h.transform(c[0],c[1],c[2],c[3],c[4],c[5])},_setShadow:function(){if(this.shadow){var h=this.canvas,c=this.shadow,u=h.contextTop,g=h.getZoom();h&&h._isRetinaScaling()&&(g*=S.devicePixelRatio),u.shadowColor=c.color,u.shadowBlur=c.blur*g,u.shadowOffsetX=c.offsetX*g,u.shadowOffsetY=c.offsetY*g}},needsFullRender:function(){return new S.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),S.PencilBrush=S.util.createClass(S.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,c,u){var g=c.midPointFrom(u);return h.quadraticCurveTo(c.x,c.y,g.x,g.y),g},onMouseDown:function(h,c){this.canvas._isMainEvent(c.e)&&(this.drawStraightLine=c.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,c){if(this.canvas._isMainEvent(c.e)&&(this.drawStraightLine=c.e[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var u=this._points,g=u.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(o,u[g-2],u[g-1],!0),o.stroke(),o.restore()}},onMouseUp:function(h){return!this.canvas._isMainEvent(h.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(h){var c=new S.Point(h.x,h.y);this._reset(),this._addPoint(c),this.canvas.contextTop.moveTo(c.x,c.y)},_addPoint:function(h){return!(this._points.length>1&&h.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var c=new S.Point(h.x,h.y);return this._addPoint(c)},_render:function(h){var c,u,g=this._points[0],o=this._points[1];if(h=h||this.canvas.contextTop,this._saveAndTransform(h),h.beginPath(),this._points.length===2&&g.x===o.x&&g.y===o.y){var l=this.width/1e3;g=new S.Point(g.x,g.y),o=new S.Point(o.x,o.y),g.x-=l,o.x+=l}for(h.moveTo(g.x,g.y),c=1,u=this._points.length;c<u;c++)this._drawSegment(h,g,o),g=this._points[c],o=this._points[c+1];h.lineTo(g.x,g.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){var c=this.width/1e3;return S.util.getSmoothPathFromPoints(h,c)},_isEmptySVGPath:function(h){return S.util.joinPath(h)==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(h){var c=new S.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,c.shadow=new S.Shadow(this.shadow)),c},decimatePoints:function(h,c){if(h.length<=2)return h;var u,g=this.canvas.getZoom(),o=Math.pow(c/g,2),l=h.length-1,d=h[0],v=[d];for(u=1;u<l-1;u++)Math.pow(d.x-h[u].x,2)+Math.pow(d.y-h[u].y,2)>=o&&(d=h[u],v.push(d));return v.push(h[l]),v},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var h=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(h))this.canvas.requestRenderAll();else{var c=this.createPath(h);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}}}),S.CircleBrush=S.util.createClass(S.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var c=this.addPoint(h),u=this.canvas.contextTop;this._saveAndTransform(u),this.dot(u,c),u.restore()},dot:function(h,c){h.fillStyle=c.fill,h.beginPath(),h.arc(c.x,c.y,c.radius,0,2*Math.PI,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h,c,u=this.canvas.contextTop,g=this.points;for(this._saveAndTransform(u),h=0,c=g.length;h<c;h++)this.dot(u,g[h]);u.restore()},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h,c,u=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var g=[];for(h=0,c=this.points.length;h<c;h++){var o=this.points[h],l=new S.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&(l.shadow=new S.Shadow(this.shadow)),g.push(l)}var d=new S.Group(g);d.canvas=this.canvas,this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=u,this.canvas.requestRenderAll()},addPoint:function(h){var c=new S.Point(h.x,h.y),u=S.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,g=new S.Color(this.color).setAlpha(S.util.getRandomInt(0,100)/100).toRgba();return c.radius=u,c.fill=g,this.points.push(c),c}}),S.SprayBrush=S.util.createClass(S.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var c=[],u=0,g=this.sprayChunks.length;u<g;u++)for(var o=this.sprayChunks[u],l=0,d=o.length;l<d;l++){var v=new S.Rect({width:o[l].width,height:o[l].width,left:o[l].x+1,top:o[l].y+1,originX:"center",originY:"center",fill:this.color});c.push(v)}this.optimizeOverlapping&&(c=this._getOptimizedRects(c));var p=new S.Group(c);this.shadow&&p.set("shadow",new S.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.fire("path:created",{path:p}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var c,u,g,o={};for(u=0,g=h.length;u<g;u++)o[c=h[u].left+""+h[u].top]||(o[c]=h[u]);var l=[];for(c in o)l.push(o[c]);return l},render:function(h){var c,u,g=this.canvas.contextTop;for(g.fillStyle=this.color,this._saveAndTransform(g),c=0,u=h.length;c<u;c++){var o=h[c];o.opacity!==void 0&&(g.globalAlpha=o.opacity),g.fillRect(o.x,o.y,o.width,o.width)}g.restore()},_render:function(){var h,c,u=this.canvas.contextTop;for(u.fillStyle=this.color,this._saveAndTransform(u),h=0,c=this.sprayChunks.length;h<c;h++)this.render(this.sprayChunks[h]);u.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var c,u,g,o,l=this.width/2;for(o=0;o<this.density;o++){c=S.util.getRandomInt(h.x-l,h.x+l),u=S.util.getRandomInt(h.y-l,h.y+l),g=this.dotWidthVariance?S.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var d=new S.Point(c,u);d.width=g,this.randomOpacity&&(d.opacity=S.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(d)}this.sprayChunks.push(this.sprayChunkPoints)}}),S.PatternBrush=S.util.createClass(S.PencilBrush,{getPatternSrc:function(){var h=S.util.createCanvasElement(),c=h.getContext("2d");return h.width=h.height=25,c.fillStyle=this.color,c.beginPath(),c.arc(10,10,10,0,2*Math.PI,!1),c.closePath(),c.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var c=this.callSuper("createPath",h),u=c._getLeftTopCoords().scalarAdd(c.strokeWidth/2);return c.stroke=new S.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-u.x,offsetY:-u.y}),c}}),function(){var h=S.util.getPointer,c=S.util.degreesToRadians,u=S.util.isTouchEvent;for(var g in S.Canvas=S.util.createClass(S.StaticCanvas,{initialize:function(o,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=S.PencilBrush&&new S.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var o,l,d,v=this.getActiveObjects();if(v.length>0&&!this.preserveObjectStacking){l=[],d=[];for(var p=0,m=this._objects.length;p<m;p++)o=this._objects[p],v.indexOf(o)===-1?l.push(o):d.push(o);v.length>1&&(this._activeObject._objects=d),l.push.apply(l,d)}else l=this._objects;return l},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var o=this.contextContainer;return this.renderCanvas(o,this._chooseObjectsToRender()),this},renderTopLayer:function(o){o.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(o),this.contextTopDirty=!0),o.restore()},renderTop:function(){var o=this.contextTop;return this.clearContext(o),this.renderTopLayer(o),this.fire("after:render"),this},_normalizePointer:function(o,l){var d=o.calcTransformMatrix(),v=S.util.invertTransform(d),p=this.restorePointerVpt(l);return S.util.transformPoint(p,v)},isTargetTransparent:function(o,l,d){if(o.shouldCache()&&o._cacheCanvas&&o!==this._activeObject){var v=this._normalizePointer(o,{x:l,y:d}),p=Math.max(o.cacheTranslationX+v.x*o.zoomX,0),m=Math.max(o.cacheTranslationY+v.y*o.zoomY,0);return S.util.isTransparent(o._cacheContext,Math.round(p),Math.round(m),this.targetFindTolerance)}var b=this.contextCache,C=o.selectionBackgroundColor,T=this.viewportTransform;return o.selectionBackgroundColor="",this.clearContext(b),b.save(),b.transform(T[0],T[1],T[2],T[3],T[4],T[5]),o.render(b),b.restore(),o.selectionBackgroundColor=C,S.util.isTransparent(b,l,d,this.targetFindTolerance)},_isSelectionKeyPressed:function(o){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(l){return o[l]===!0}):o[this.selectionKey]},_shouldClearSelection:function(o,l){var d=this.getActiveObjects(),v=this._activeObject;return!l||l&&v&&d.length>1&&d.indexOf(l)===-1&&v!==l&&!this._isSelectionKeyPressed(o)||l&&!l.evented||l&&!l.selectable&&v&&v!==l},_shouldCenterTransform:function(o,l,d){var v;if(o)return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?v=this.centeredScaling||o.centeredScaling:l==="rotate"&&(v=this.centeredRotation||o.centeredRotation),v?!d:d},_getOriginFromCorner:function(o,l){var d={x:o.originX,y:o.originY};return l==="ml"||l==="tl"||l==="bl"?d.x="right":l!=="mr"&&l!=="tr"&&l!=="br"||(d.x="left"),l==="tl"||l==="mt"||l==="tr"?d.y="bottom":l!=="bl"&&l!=="mb"&&l!=="br"||(d.y="top"),d},_getActionFromCorner:function(o,l,d,v){if(!l||!o)return"drag";var p=v.controls[l];return p.getActionName(d,p,v)},_setupCurrentTransform:function(o,l,d){if(l){var v=this.getPointer(o),p=l.__corner,m=l.controls[p],b=d&&p?m.getActionHandler(o,l,m):S.controlsUtils.dragHandler,C=this._getActionFromCorner(d,p,o,l),T=this._getOriginFromCorner(l,p),I=o[this.centeredKey],O={target:l,action:C,actionHandler:b,corner:p,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:v.x-l.left,offsetY:v.y-l.top,originX:T.x,originY:T.y,ex:v.x,ey:v.y,lastX:v.x,lastY:v.y,theta:c(l.angle),width:l.width*l.scaleX,shiftKey:o.shiftKey,altKey:I,original:S.util.saveObjectTransform(l)};this._shouldCenterTransform(l,C,I)&&(O.originX="center",O.originY="center"),O.original.originX=T.x,O.original.originY=T.y,this._currentTransform=O,this._beforeTransform(o)}},setCursor:function(o){this.upperCanvasEl.style.cursor=o},_drawSelection:function(o){var l=this._groupSelector,d=new S.Point(l.ex,l.ey),v=S.util.transformPoint(d,this.viewportTransform),p=new S.Point(l.ex+l.left,l.ey+l.top),m=S.util.transformPoint(p,this.viewportTransform),b=Math.min(v.x,m.x),C=Math.min(v.y,m.y),T=Math.max(v.x,m.x),I=Math.max(v.y,m.y),O=this.selectionLineWidth/2;this.selectionColor&&(o.fillStyle=this.selectionColor,o.fillRect(b,C,T-b,I-C)),this.selectionLineWidth&&this.selectionBorderColor&&(o.lineWidth=this.selectionLineWidth,o.strokeStyle=this.selectionBorderColor,b+=O,C+=O,T-=O,I-=O,S.Object.prototype._setLineDash.call(this,o,this.selectionDashArray),o.strokeRect(b,C,T-b,I-C))},findTarget:function(o,l){if(!this.skipTargetFind){var d,v,p=this.getPointer(o,!0),m=this._activeObject,b=this.getActiveObjects(),C=u(o),T=b.length>1&&!l||b.length===1;if(this.targets=[],T&&m._findTargetCorner(p,C)||b.length>1&&!l&&m===this._searchPossibleTargets([m],p))return m;if(b.length===1&&m===this._searchPossibleTargets([m],p)){if(!this.preserveObjectStacking)return m;d=m,v=this.targets,this.targets=[]}var I=this._searchPossibleTargets(this._objects,p);return o[this.altSelectionKey]&&I&&d&&I!==d&&(I=d,this.targets=v),I}},_checkTarget:function(o,l,d){if(l&&l.visible&&l.evented&&l.containsPoint(o)&&(!this.perPixelTargetFind&&!l.perPixelTargetFind||l.isEditing||!this.isTargetTransparent(l,d.x,d.y)))return!0},_searchPossibleTargets:function(o,l){for(var d,v,p=o.length;p--;){var m=o[p],b=m.group?this._normalizePointer(m.group,l):l;if(this._checkTarget(b,m,l)){(d=o[p]).subTargetCheck&&d instanceof S.Group&&(v=this._searchPossibleTargets(d._objects,l))&&this.targets.push(v);break}}return d},restorePointerVpt:function(o){return S.util.transformPoint(o,S.util.invertTransform(this.viewportTransform))},getPointer:function(o,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var d,v=h(o),p=this.upperCanvasEl,m=p.getBoundingClientRect(),b=m.width||0,C=m.height||0;b&&C||("top"in m&&"bottom"in m&&(C=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(b=Math.abs(m.right-m.left))),this.calcOffset(),v.x=v.x-this._offset.left,v.y=v.y-this._offset.top,l||(v=this.restorePointerVpt(v));var T=this.getRetinaScaling();return T!==1&&(v.x/=T,v.y/=T),d=b===0||C===0?{width:1,height:1}:{width:p.width/b,height:p.height/C},{x:v.x*d.width,y:v.y*d.height}},_createUpperCanvas:function(){var o=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,d=this.upperCanvasEl;d?d.className="":(d=this._createCanvasElement(),this.upperCanvasEl=d),S.util.addClass(d,"upper-canvas "+o),this.wrapperEl.appendChild(d),this._copyCanvasStyle(l,d),this._applyCanvasStyle(d),this.contextTop=d.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=S.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),S.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),S.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(o){var l=this.width||o.width,d=this.height||o.height;S.util.setStyle(o,{position:"absolute",width:l+"px",height:d+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),o.width=l,o.height=d,S.util.makeElementUnselectable(o)},_copyCanvasStyle:function(o,l){l.style.cssText=o.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var o=this._activeObject;return o?o.type==="activeSelection"&&o._objects?o._objects.slice(0):[o]:[]},_onObjectRemoved:function(o){o===this._activeObject&&(this.fire("before:selection:cleared",{target:o}),this._discardActiveObject(),this.fire("selection:cleared",{target:o}),o.fire("deselected")),o===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",o)},_fireSelectionEvents:function(o,l){var d=!1,v=this.getActiveObjects(),p=[],m=[];o.forEach(function(b){v.indexOf(b)===-1&&(d=!0,b.fire("deselected",{e:l,target:b}),m.push(b))}),v.forEach(function(b){o.indexOf(b)===-1&&(d=!0,b.fire("selected",{e:l,target:b}),p.push(b))}),o.length>0&&v.length>0?d&&this.fire("selection:updated",{e:l,selected:p,deselected:m}):v.length>0?this.fire("selection:created",{e:l,selected:p}):o.length>0&&this.fire("selection:cleared",{e:l,deselected:m})},setActiveObject:function(o,l){var d=this.getActiveObjects();return this._setActiveObject(o,l),this._fireSelectionEvents(d,l),this},_setActiveObject:function(o,l){return this._activeObject!==o&&!!this._discardActiveObject(l,o)&&!o.onSelect({e:l})&&(this._activeObject=o,!0)},_discardActiveObject:function(o,l){var d=this._activeObject;if(d){if(d.onDeselect({e:o,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(o){var l=this.getActiveObjects(),d=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:d,e:o}),this._discardActiveObject(o),this._fireSelectionEvents(l,o),this},dispose:function(){var o=this.wrapperEl;return this.removeListeners(),o.removeChild(this.upperCanvasEl),o.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(l){S.util.cleanUpJsdomNode(this[l]),this[l]=void 0}.bind(this)),o.parentNode&&o.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,S.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(o){var l=this._activeObject;l&&l._renderControls(o)},_toObject:function(o,l,d){var v=this._realizeGroupTransformOnObject(o),p=this.callSuper("_toObject",o,l,d);return this._unwindGroupTransformOnObject(o,v),p},_realizeGroupTransformOnObject:function(o){if(o.group&&o.group.type==="activeSelection"&&this._activeObject===o.group){var l={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(d){l[d]=o[d]}),S.util.addTransformToObject(o,this._activeObject.calcOwnMatrix()),l}return null},_unwindGroupTransformOnObject:function(o,l){l&&o.set(l)},_setSVGObject:function(o,l,d){var v=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",o,l,d),this._unwindGroupTransformOnObject(l,v)},setViewportTransform:function(o){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),S.StaticCanvas.prototype.setViewportTransform.call(this,o)}}),S.StaticCanvas)g!=="prototype"&&(S.Canvas[g]=S.StaticCanvas[g])}(),function(){var h=S.util.addListener,c=S.util.removeListener,u={passive:!1};function g(o,l){return o.button&&o.button===l-1}S.util.object.extend(S.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(o,l){var d=this.upperCanvasEl,v=this._getEventPrefix();o(S.window,"resize",this._onResize),o(d,v+"down",this._onMouseDown),o(d,v+"move",this._onMouseMove,u),o(d,v+"out",this._onMouseOut),o(d,v+"enter",this._onMouseEnter),o(d,"wheel",this._onMouseWheel),o(d,"contextmenu",this._onContextMenu),o(d,"dblclick",this._onDoubleClick),o(d,"dragover",this._onDragOver),o(d,"dragenter",this._onDragEnter),o(d,"dragleave",this._onDragLeave),o(d,"drop",this._onDrop),this.enablePointerEvents||o(d,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&l in eventjs&&(eventjs[l](d,"gesture",this._onGesture),eventjs[l](d,"drag",this._onDrag),eventjs[l](d,"orientation",this._onOrientationChange),eventjs[l](d,"shake",this._onShake),eventjs[l](d,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(c,"remove");var o=this._getEventPrefix();c(S.document,o+"up",this._onMouseUp),c(S.document,"touchend",this._onTouchEnd,u),c(S.document,o+"move",this._onMouseMove,u),c(S.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(o,l){this.__onTransformGesture&&this.__onTransformGesture(o,l)},_onDrag:function(o,l){this.__onDrag&&this.__onDrag(o,l)},_onMouseWheel:function(o){this.__onMouseWheel(o)},_onMouseOut:function(o){var l=this._hoveredTarget;this.fire("mouse:out",{target:l,e:o}),this._hoveredTarget=null,l&&l.fire("mouseout",{e:o});var d=this;this._hoveredTargets.forEach(function(v){d.fire("mouse:out",{target:l,e:o}),v&&l.fire("mouseout",{e:o})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(v){v.isEditing&&v.hiddenTextarea.focus()})},_onMouseEnter:function(o){this._currentTransform||this.findTarget(o)||(this.fire("mouse:over",{target:null,e:o}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(o,l){this.__onOrientationChange&&this.__onOrientationChange(o,l)},_onShake:function(o,l){this.__onShake&&this.__onShake(o,l)},_onLongPress:function(o,l){this.__onLongPress&&this.__onLongPress(o,l)},_onDragOver:function(o){o.preventDefault();var l=this._simpleEventHandler("dragover",o);this._fireEnterLeaveEvents(l,o)},_onDrop:function(o){return this._simpleEventHandler("drop:before",o),this._simpleEventHandler("drop",o)},_onContextMenu:function(o){return this.stopContextMenu&&(o.stopPropagation(),o.preventDefault()),!1},_onDoubleClick:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"dblclick"),this._resetTransformEventData(o)},getPointerId:function(o){var l=o.changedTouches;return l?l[0]&&l[0].identifier:this.enablePointerEvents?o.pointerId:-1},_isMainEvent:function(o){return o.isPrimary===!0||o.isPrimary!==!1&&(o.type==="touchend"&&o.touches.length===0||!o.changedTouches||o.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(o){o.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(o)),this.__onMouseDown(o),this._resetTransformEventData();var l=this.upperCanvasEl,d=this._getEventPrefix();h(S.document,"touchend",this._onTouchEnd,u),h(S.document,"touchmove",this._onMouseMove,u),c(l,d+"down",this._onMouseDown)},_onMouseDown:function(o){this.__onMouseDown(o),this._resetTransformEventData();var l=this.upperCanvasEl,d=this._getEventPrefix();c(l,d+"move",this._onMouseMove,u),h(S.document,d+"up",this._onMouseUp),h(S.document,d+"move",this._onMouseMove,u)},_onTouchEnd:function(o){if(!(o.touches.length>0)){this.__onMouseUp(o),this._resetTransformEventData(),this.mainTouchId=null;var l=this._getEventPrefix();c(S.document,"touchend",this._onTouchEnd,u),c(S.document,"touchmove",this._onMouseMove,u);var d=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(d.upperCanvasEl,l+"down",d._onMouseDown),d._willAddMouseDown=0},400)}},_onMouseUp:function(o){this.__onMouseUp(o),this._resetTransformEventData();var l=this.upperCanvasEl,d=this._getEventPrefix();this._isMainEvent(o)&&(c(S.document,d+"up",this._onMouseUp),c(S.document,d+"move",this._onMouseMove,u),h(l,d+"move",this._onMouseMove,u))},_onMouseMove:function(o){!this.allowTouchScrolling&&o.preventDefault&&o.preventDefault(),this.__onMouseMove(o)},_onResize:function(){this.calcOffset()},_shouldRender:function(o){var l=this._activeObject;return!!(!!l!=!!o||l&&o&&l!==o)||(l&&l.isEditing,!1)},__onMouseUp:function(o){var l,d=this._currentTransform,v=this._groupSelector,p=!1,m=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(o),l=this._target,this._handleEvent(o,"up:before"),g(o,3))this.fireRightClick&&this._handleEvent(o,"up",3,m);else{if(g(o,2))return this.fireMiddleClick&&this._handleEvent(o,"up",2,m),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(o);else if(this._isMainEvent(o)){if(d&&(this._finalizeCurrentTransform(o),p=d.actionPerformed),!m){var b=l===this._activeObject;this._maybeGroupObjects(o),p||(p=this._shouldRender(l)||!b&&l===this._activeObject)}var C,T;if(l){if(C=l._findTargetCorner(this.getPointer(o,!0),S.util.isTouchEvent(o)),l.selectable&&l!==this._activeObject&&l.activeOn==="up")this.setActiveObject(l,o),p=!0;else{var I=l.controls[C],O=I&&I.getMouseUpHandler(o,l,I);O&&O(o,d,(T=this.getPointer(o)).x,T.y)}l.isMoving=!1}if(d&&(d.target!==l||d.corner!==C)){var A=d.target&&d.target.controls[d.corner],F=A&&A.getMouseUpHandler(o,l,I);T=T||this.getPointer(o),F&&F(o,d,T.x,T.y)}this._setCursorFromEvent(o,l),this._handleEvent(o,"up",1,m),this._groupSelector=null,this._currentTransform=null,l&&(l.__corner=0),p?this.requestRenderAll():m||this.renderTop()}}},_simpleEventHandler:function(o,l){var d=this.findTarget(l),v=this.targets,p={e:l,target:d,subTargets:v};if(this.fire(o,p),d&&d.fire(o,p),!v)return d;for(var m=0;m<v.length;m++)v[m].fire(o,p);return d},_handleEvent:function(o,l,d,v){var p=this._target,m=this.targets||[],b={e:o,target:p,subTargets:m,button:d||1,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};l==="up"&&(b.currentTarget=this.findTarget(o),b.currentSubTargets=this.targets),this.fire("mouse:"+l,b),p&&p.fire("mouse"+l,b);for(var C=0;C<m.length;C++)m[C].fire("mouse"+l,b)},_finalizeCurrentTransform:function(o){var l=this._currentTransform,d=l.target,v={e:o,target:d,transform:l,action:l.action};d._scaling&&(d._scaling=!1),d.setCoords(),(l.actionPerformed||this.stateful&&d.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(o){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(o).requestRenderAll();var l=this.getPointer(o);this.freeDrawingBrush.onMouseDown(l,{e:o,pointer:l}),this._handleEvent(o,"down")},_onMouseMoveInDrawingMode:function(o){if(this._isCurrentlyDrawing){var l=this.getPointer(o);this.freeDrawingBrush.onMouseMove(l,{e:o,pointer:l})}this.setCursor(this.freeDrawingCursor),this._handleEvent(o,"move")},_onMouseUpInDrawingMode:function(o){var l=this.getPointer(o);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:o,pointer:l}),this._handleEvent(o,"up")},__onMouseDown:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"down:before");var l=this._target;if(g(o,3))this.fireRightClick&&this._handleEvent(o,"down",3);else if(g(o,2))this.fireMiddleClick&&this._handleEvent(o,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(o);else if(this._isMainEvent(o)&&!this._currentTransform){var d=this._pointer;this._previousPointer=d;var v=this._shouldRender(l),p=this._shouldGroup(o,l);if(this._shouldClearSelection(o,l)?this.discardActiveObject(o):p&&(this._handleGrouping(o,l),l=this._activeObject),!this.selection||l&&(l.selectable||l.isEditing||l===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),l){var m=l===this._activeObject;l.selectable&&l.activeOn==="down"&&this.setActiveObject(l,o);var b=l._findTargetCorner(this.getPointer(o,!0),S.util.isTouchEvent(o));if(l.__corner=b,l===this._activeObject&&(b||!p)){this._setupCurrentTransform(o,l,m);var C=l.controls[b],T=(d=this.getPointer(o),C&&C.getMouseDownHandler(o,l,C));T&&T(o,this._currentTransform,d.x,d.y)}}this._handleEvent(o,"down"),(v||p)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(o){this._resetTransformEventData(),this._pointer=this.getPointer(o,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(o)||null},_beforeTransform:function(o){var l=this._currentTransform;this.stateful&&l.target.saveState(),this.fire("before:transform",{e:o,transform:l})},__onMouseMove:function(o){var l,d;if(this._handleEvent(o,"move:before"),this._cacheTransformEventData(o),this.isDrawingMode)this._onMouseMoveInDrawingMode(o);else if(this._isMainEvent(o)){var v=this._groupSelector;v?(d=this._absolutePointer,v.left=d.x-v.ex,v.top=d.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(o):(l=this.findTarget(o)||null,this._setCursorFromEvent(o,l),this._fireOverOutEvents(l,o)),this._handleEvent(o,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(o,l){var d=this._hoveredTarget,v=this._hoveredTargets,p=this.targets,m=Math.max(v.length,p.length);this.fireSyntheticInOutEvents(o,l,{oldTarget:d,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var b=0;b<m;b++)this.fireSyntheticInOutEvents(p[b],l,{oldTarget:v[b],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=o,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(o,l){var d=this._draggedoverTarget,v=this._hoveredTargets,p=this.targets,m=Math.max(v.length,p.length);this.fireSyntheticInOutEvents(o,l,{oldTarget:d,evtOut:"dragleave",evtIn:"dragenter"});for(var b=0;b<m;b++)this.fireSyntheticInOutEvents(p[b],l,{oldTarget:v[b],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=o},fireSyntheticInOutEvents:function(o,l,d){var v,p,m,b=d.oldTarget,C=b!==o,T=d.canvasEvtIn,I=d.canvasEvtOut;C&&(v={e:l,target:o,previousTarget:b},p={e:l,target:b,nextTarget:o}),m=o&&C,b&&C&&(I&&this.fire(I,p),b.fire(d.evtOut,p)),m&&(T&&this.fire(T,v),o.fire(d.evtIn,v))},__onMouseWheel:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"wheel"),this._resetTransformEventData()},_transformObject:function(o){var l=this.getPointer(o),d=this._currentTransform;d.reset=!1,d.shiftKey=o.shiftKey,d.altKey=o[this.centeredKey],this._performTransformAction(o,d,l),d.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(o,l,d){var v=d.x,p=d.y,m=l.action,b=!1,C=l.actionHandler;C&&(b=C(o,l,v,p)),m==="drag"&&b&&(l.target.isMoving=!0,this.setCursor(l.target.moveCursor||this.moveCursor)),l.actionPerformed=l.actionPerformed||b},_fire:S.controlsUtils.fireEvent,_setCursorFromEvent:function(o,l){if(!l)return this.setCursor(this.defaultCursor),!1;var d=l.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,p=(!v||!v.contains(l))&&l._findTargetCorner(this.getPointer(o,!0));p?this.setCursor(this.getCornerCursor(p,l,o)):(l.subTargetCheck&&this.targets.concat().reverse().map(function(m){d=m.hoverCursor||d}),this.setCursor(d))},getCornerCursor:function(o,l,d){var v=l.controls[o];return v.cursorStyleHandler(d,v,l)}})}(),R=Math.min,D=Math.max,S.util.object.extend(S.Canvas.prototype,{_shouldGroup:function(h,c){var u=this._activeObject;return u&&this._isSelectionKeyPressed(h)&&c&&c.selectable&&this.selection&&(u!==c||u.type==="activeSelection")&&!c.onSelect({e:h})},_handleGrouping:function(h,c){var u=this._activeObject;u.__corner||(c!==u||(c=this.findTarget(h,!0))&&c.selectable)&&(u&&u.type==="activeSelection"?this._updateActiveSelection(c,h):this._createActiveSelection(c,h))},_updateActiveSelection:function(h,c){var u=this._activeObject,g=u._objects.slice(0);u.contains(h)?(u.removeWithUpdate(h),this._hoveredTarget=h,this._hoveredTargets=this.targets.concat(),u.size()===1&&this._setActiveObject(u.item(0),c)):(u.addWithUpdate(h),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(g,c)},_createActiveSelection:function(h,c){var u=this.getActiveObjects(),g=this._createGroup(h);this._hoveredTarget=g,this._setActiveObject(g,c),this._fireSelectionEvents(u,c)},_createGroup:function(h){var c=this._objects,u=c.indexOf(this._activeObject)<c.indexOf(h)?[this._activeObject,h]:[h,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new S.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(h){var c,u=this._collectObjects(h);u.length===1?this.setActiveObject(u[0],h):u.length>1&&(c=new S.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(c,h))},_collectObjects:function(h){for(var c,u=[],g=this._groupSelector.ex,o=this._groupSelector.ey,l=g+this._groupSelector.left,d=o+this._groupSelector.top,v=new S.Point(R(g,l),R(o,d)),p=new S.Point(D(g,l),D(o,d)),m=!this.selectionFullyContained,b=g===l&&o===d,C=this._objects.length;C--&&!((c=this._objects[C])&&c.selectable&&c.visible&&(m&&c.intersectsWithRect(v,p,!0)||c.isContainedWithinRect(v,p,!0)||m&&c.containsPoint(v,null,!0)||m&&c.containsPoint(p,null,!0))&&(u.push(c),b)););return u.length>1&&(u=u.filter(function(T){return!T.onSelect({e:h})})),u},_maybeGroupObjects:function(h){this.selection&&this._groupSelector&&this._groupSelectedObjects(h),this.setCursor(this.defaultCursor),this._groupSelector=null}}),S.util.object.extend(S.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var c=h.format||"png",u=h.quality||1,g=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),o=this.toCanvasElement(g,h);return S.util.toDataURL(o,c,u)},toCanvasElement:function(h,c){h=h||1;var u=((c=c||{}).width||this.width)*h,g=(c.height||this.height)*h,o=this.getZoom(),l=this.width,d=this.height,v=o*h,p=this.viewportTransform,m=(p[4]-(c.left||0))*h,b=(p[5]-(c.top||0))*h,C=this.interactive,T=[v,0,0,v,m,b],I=this.enableRetinaScaling,O=S.util.createCanvasElement(),A=this.contextTop;return O.width=u,O.height=g,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=T,this.width=u,this.height=g,this.calcViewportBoundaries(),this.renderCanvas(O.getContext("2d"),this._objects),this.viewportTransform=p,this.width=l,this.height=d,this.calcViewportBoundaries(),this.interactive=C,this.enableRetinaScaling=I,this.contextTop=A,O}}),S.util.object.extend(S.StaticCanvas.prototype,{loadFromJSON:function(h,c,u){if(h){var g=typeof h=="string"?JSON.parse(h):S.util.object.clone(h),o=this,l=g.clipPath,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete g.clipPath,this._enlivenObjects(g.objects,function(v){o.clear(),o._setBgOverlay(g,function(){l?o._enlivenObjects([l],function(p){o.clipPath=p[0],o.__setupCanvas.call(o,g,v,d,c)}):o.__setupCanvas.call(o,g,v,d,c)})},u),this}},__setupCanvas:function(h,c,u,g){var o=this;c.forEach(function(l,d){o.insertAt(l,d)}),this.renderOnAddRemove=u,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),g&&g()},_setBgOverlay:function(h,c){var u={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(h.backgroundImage||h.overlayImage||h.background||h.overlay){var g=function(){u.backgroundImage&&u.overlayImage&&u.backgroundColor&&u.overlayColor&&c&&c()};this.__setBgOverlay("backgroundImage",h.backgroundImage,u,g),this.__setBgOverlay("overlayImage",h.overlayImage,u,g),this.__setBgOverlay("backgroundColor",h.background,u,g),this.__setBgOverlay("overlayColor",h.overlay,u,g)}else c&&c()},__setBgOverlay:function(h,c,u,g){var o=this;if(!c)return u[h]=!0,void(g&&g());h==="backgroundImage"||h==="overlayImage"?S.util.enlivenObjects([c],function(l){o[h]=l[0],u[h]=!0,g&&g()}):this["set"+S.util.string.capitalize(h,!0)](c,function(){u[h]=!0,g&&g()})},_enlivenObjects:function(h,c,u){h&&h.length!==0?S.util.enlivenObjects(h,function(g){c&&c(g)},null,u):c&&c([])},_toDataURL:function(h,c){this.clone(function(u){c(u.toDataURL(h))})},_toDataURLWithMultiplier:function(h,c,u){this.clone(function(g){u(g.toDataURLWithMultiplier(h,c))})},clone:function(h,c){var u=JSON.stringify(this.toJSON(c));this.cloneWithoutData(function(g){g.loadFromJSON(u,function(){h&&h(g)})})},cloneWithoutData:function(h){var c=S.util.createCanvasElement();c.width=this.width,c.height=this.height;var u=new S.Canvas(c);this.backgroundImage?(u.setBackgroundImage(this.backgroundImage.src,function(){u.renderAll(),h&&h(u)}),u.backgroundImageOpacity=this.backgroundImageOpacity,u.backgroundImageStretch=this.backgroundImageStretch):h&&h(u)}}),function(h){var c=h.fabric||(h.fabric={}),u=c.util.object.extend,g=c.util.object.clone,o=c.util.toFixed,l=c.util.string.capitalize,d=c.util.degreesToRadians,v=!c.isLikelyNode;c.Object||(c.Object=c.util.createClass(c.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:v,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(p){p&&this.setOptions(p)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=c.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(p){var m=c.perfLimitSizeTotal,b=p.width,C=p.height,T=c.maxCacheSideLimit,I=c.minCacheSideLimit;if(b<=T&&C<=T&&b*C<=m)return b<I&&(p.width=I),C<I&&(p.height=I),p;var O=b/C,A=c.util.limitDimsByArea(O,m),F=c.util.capValue,U=F(I,A.x,T),H=F(I,A.y,T);return b>U&&(p.zoomX/=b/U,p.width=U,p.capped=!0),C>H&&(p.zoomY/=C/H,p.height=H,p.capped=!0),p},_getCacheCanvasDimensions:function(){var p=this.getTotalObjectScaling(),m=this._getTransformedDimensions(0,0),b=m.x*p.scaleX/this.scaleX,C=m.y*p.scaleY/this.scaleY;return{width:b+2,height:C+2,zoomX:p.scaleX,zoomY:p.scaleY,x:b,y:C}},_updateCacheCanvas:function(){var p=this.canvas;if(this.noScaleCache&&p&&p._currentTransform){var m=p._currentTransform.target,b=p._currentTransform.action;if(this===m&&b.slice&&b.slice(0,5)==="scale")return!1}var C,T,I=this._cacheCanvas,O=this._limitCacheSize(this._getCacheCanvasDimensions()),A=c.minCacheSideLimit,F=O.width,U=O.height,H=O.zoomX,J=O.zoomY,q=F!==this.cacheWidth||U!==this.cacheHeight,X=this.zoomX!==H||this.zoomY!==J,N=q||X,B=0,G=0,Q=!1;if(q){var ee=this._cacheCanvas.width,W=this._cacheCanvas.height,j=F>ee||U>W;Q=j||(F<.9*ee||U<.9*W)&&ee>A&&W>A,j&&!O.capped&&(F>A||U>A)&&(B=.1*F,G=.1*U)}return this instanceof c.Text&&this.path&&(N=!0,Q=!0,B+=this.getHeightOfLine(0)*this.zoomX,G+=this.getHeightOfLine(0)*this.zoomY),!!N&&(Q?(I.width=Math.ceil(F+B),I.height=Math.ceil(U+G)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,I.width,I.height)),C=O.x/2,T=O.y/2,this.cacheTranslationX=Math.round(I.width/2-C)+C,this.cacheTranslationY=Math.round(I.height/2-T)+T,this.cacheWidth=F,this.cacheHeight=U,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(H,J),this.zoomX=H,this.zoomY=J,!0)},setOptions:function(p){this._setOptions(p),this._initGradient(p.fill,"fill"),this._initGradient(p.stroke,"stroke"),this._initPattern(p.fill,"fill"),this._initPattern(p.stroke,"stroke")},transform:function(p){var m=this.group&&!this.group._transformDone||this.group&&this.canvas&&p===this.canvas.contextTop,b=this.calcTransformMatrix(!m);p.transform(b[0],b[1],b[2],b[3],b[4],b[5])},toObject:function(p){var m=c.Object.NUM_FRACTION_DIGITS,b={type:this.type,version:c.version,originX:this.originX,originY:this.originY,left:o(this.left,m),top:o(this.top,m),width:o(this.width,m),height:o(this.height,m),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,m),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:o(this.strokeMiterLimit,m),scaleX:o(this.scaleX,m),scaleY:o(this.scaleY,m),angle:o(this.angle,m),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,m),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:o(this.skewX,m),skewY:o(this.skewY,m)};return this.clipPath&&!this.clipPath.excludeFromExport&&(b.clipPath=this.clipPath.toObject(p),b.clipPath.inverted=this.clipPath.inverted,b.clipPath.absolutePositioned=this.clipPath.absolutePositioned),c.util.populateWithProperties(this,b,p),this.includeDefaultValues||(b=this._removeDefaultValues(b)),b},toDatalessObject:function(p){return this.toObject(p)},_removeDefaultValues:function(p){var m=c.util.getKlass(p.type).prototype;return m.stateProperties.forEach(function(b){b!=="left"&&b!=="top"&&(p[b]===m[b]&&delete p[b],Array.isArray(p[b])&&Array.isArray(m[b])&&p[b].length===0&&m[b].length===0&&delete p[b])}),p},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var p=c.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(p.scaleX),scaleY:Math.abs(p.scaleY)}},getTotalObjectScaling:function(){var p=this.getObjectScaling(),m=p.scaleX,b=p.scaleY;if(this.canvas){var C=this.canvas.getZoom(),T=this.canvas.getRetinaScaling();m*=C*T,b*=C*T}return{scaleX:m,scaleY:b}},getObjectOpacity:function(){var p=this.opacity;return this.group&&(p*=this.group.getObjectOpacity()),p},_set:function(p,m){var b=p==="scaleX"||p==="scaleY",C=this[p]!==m,T=!1;return b&&(m=this._constrainScale(m)),p==="scaleX"&&m<0?(this.flipX=!this.flipX,m*=-1):p==="scaleY"&&m<0?(this.flipY=!this.flipY,m*=-1):p!=="shadow"||!m||m instanceof c.Shadow?p==="dirty"&&this.group&&this.group.set("dirty",m):m=new c.Shadow(m),this[p]=m,C&&(T=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(p)>-1?(this.dirty=!0,T&&this.group.set("dirty",!0)):T&&this.stateProperties.indexOf(p)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:c.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(p){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(p.save(),this._setupCompositeOperation(p),this.drawSelectionBackground(p),this.transform(p),this._setOpacity(p),this._setShadow(p,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(p)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(p),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),p.restore())},renderCache:function(p){p=p||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,p.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!(this.paintFirst!=="stroke"||!this.hasFill()||!this.hasStroke()||typeof this.shadow!="object")||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(p,m){if(p.save(),m.inverted?p.globalCompositeOperation="destination-out":p.globalCompositeOperation="destination-in",m.absolutePositioned){var b=c.util.invertTransform(this.calcTransformMatrix());p.transform(b[0],b[1],b[2],b[3],b[4],b[5])}m.transform(p),p.scale(1/m.zoomX,1/m.zoomY),p.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),p.restore()},drawObject:function(p,m){var b=this.fill,C=this.stroke;m?(this.fill="black",this.stroke="",this._setClippingProperties(p)):this._renderBackground(p),this._render(p),this._drawClipPath(p,this.clipPath),this.fill=b,this.stroke=C},_drawClipPath:function(p,m){m&&(m.canvas=this.canvas,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCache(p,m))},drawCacheOnCanvas:function(p){p.scale(1/this.zoomX,1/this.zoomY),p.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(p){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!p&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!p){var m=this.cacheWidth/this.zoomX,b=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-b/2,m,b)}return!0}return!1},_renderBackground:function(p){if(this.backgroundColor){var m=this._getNonTransformedDimensions();p.fillStyle=this.backgroundColor,p.fillRect(-m.x/2,-m.y/2,m.x,m.y),this._removeShadow(p)}},_setOpacity:function(p){this.group&&!this.group._transformDone?p.globalAlpha=this.getObjectOpacity():p.globalAlpha*=this.opacity},_setStrokeStyles:function(p,m){var b=m.stroke;b&&(p.lineWidth=m.strokeWidth,p.lineCap=m.strokeLineCap,p.lineDashOffset=m.strokeDashOffset,p.lineJoin=m.strokeLineJoin,p.miterLimit=m.strokeMiterLimit,b.toLive?b.gradientUnits==="percentage"||b.gradientTransform||b.patternTransform?this._applyPatternForTransformedGradient(p,b):(p.strokeStyle=b.toLive(p,this),this._applyPatternGradientTransform(p,b)):p.strokeStyle=m.stroke)},_setFillStyles:function(p,m){var b=m.fill;b&&(b.toLive?(p.fillStyle=b.toLive(p,this),this._applyPatternGradientTransform(p,m.fill)):p.fillStyle=b)},_setClippingProperties:function(p){p.globalAlpha=1,p.strokeStyle="transparent",p.fillStyle="#000000"},_setLineDash:function(p,m){m&&m.length!==0&&(1&m.length&&m.push.apply(m,m),p.setLineDash(m))},_renderControls:function(p,m){var b,C,T,I=this.getViewportTransform(),O=this.calcTransformMatrix();C=(m=m||{}).hasBorders!==void 0?m.hasBorders:this.hasBorders,T=m.hasControls!==void 0?m.hasControls:this.hasControls,O=c.util.multiplyTransformMatrices(I,O),b=c.util.qrDecompose(O),p.save(),p.translate(b.translateX,b.translateY),p.lineWidth=1*this.borderScaleFactor,this.group||(p.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(b.angle-=180),p.rotate(d(this.group?b.angle:this.angle)),m.forActiveSelection||this.group?C&&this.drawBordersInGroup(p,b,m):C&&this.drawBorders(p,m),T&&this.drawControls(p,m),p.restore()},_setShadow:function(p){if(this.shadow){var m,b=this.shadow,C=this.canvas,T=C&&C.viewportTransform[0]||1,I=C&&C.viewportTransform[3]||1;m=b.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),C&&C._isRetinaScaling()&&(T*=c.devicePixelRatio,I*=c.devicePixelRatio),p.shadowColor=b.color,p.shadowBlur=b.blur*c.browserShadowBlurConstant*(T+I)*(m.scaleX+m.scaleY)/4,p.shadowOffsetX=b.offsetX*T*m.scaleX,p.shadowOffsetY=b.offsetY*I*m.scaleY}},_removeShadow:function(p){this.shadow&&(p.shadowColor="",p.shadowBlur=p.shadowOffsetX=p.shadowOffsetY=0)},_applyPatternGradientTransform:function(p,m){if(!m||!m.toLive)return{offsetX:0,offsetY:0};var b=m.gradientTransform||m.patternTransform,C=-this.width/2+m.offsetX||0,T=-this.height/2+m.offsetY||0;return m.gradientUnits==="percentage"?p.transform(this.width,0,0,this.height,C,T):p.transform(1,0,0,1,C,T),b&&p.transform(b[0],b[1],b[2],b[3],b[4],b[5]),{offsetX:C,offsetY:T}},_renderPaintInOrder:function(p){this.paintFirst==="stroke"?(this._renderStroke(p),this._renderFill(p)):(this._renderFill(p),this._renderStroke(p))},_render:function(){},_renderFill:function(p){this.fill&&(p.save(),this._setFillStyles(p,this),this.fillRule==="evenodd"?p.fill("evenodd"):p.fill(),p.restore())},_renderStroke:function(p){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(p),p.save(),this.strokeUniform&&this.group){var m=this.getObjectScaling();p.scale(1/m.scaleX,1/m.scaleY)}else this.strokeUniform&&p.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(p,this.strokeDashArray),this._setStrokeStyles(p,this),p.stroke(),p.restore()}},_applyPatternForTransformedGradient:function(p,m){var b,C=this._limitCacheSize(this._getCacheCanvasDimensions()),T=c.util.createCanvasElement(),I=this.canvas.getRetinaScaling(),O=C.x/this.scaleX/I,A=C.y/this.scaleY/I;T.width=O,T.height=A,(b=T.getContext("2d")).beginPath(),b.moveTo(0,0),b.lineTo(O,0),b.lineTo(O,A),b.lineTo(0,A),b.closePath(),b.translate(O/2,A/2),b.scale(C.zoomX/this.scaleX/I,C.zoomY/this.scaleY/I),this._applyPatternGradientTransform(b,m),b.fillStyle=m.toLive(p),b.fill(),p.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),p.scale(I*this.scaleX/C.zoomX,I*this.scaleY/C.zoomY),p.strokeStyle=b.createPattern(T,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var p=c.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",p.scaleX),this.set("scaleY",p.scaleY),this.angle=p.angle,this.skewX=p.skewX,this.skewY=0}},_removeTransformMatrix:function(p){var m=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),m=c.util.transformPoint(m,this.transformMatrix)),this.transformMatrix=null,p&&(this.scaleX*=p.scaleX,this.scaleY*=p.scaleY,this.cropX=p.cropX,this.cropY=p.cropY,m.x+=p.offsetLeft,m.y+=p.offsetTop,this.width=p.width,this.height=p.height),this.setPositionByOrigin(m,"center","center")},clone:function(p,m){var b=this.toObject(m);this.constructor.fromObject?this.constructor.fromObject(b,p):c.Object._fromObject("Object",b,p)},cloneAsImage:function(p,m){var b=this.toCanvasElement(m);return p&&p(new c.Image(b)),this},toCanvasElement:function(p){p||(p={});var m=c.util,b=m.saveObjectTransform(this),C=this.group,T=this.shadow,I=Math.abs,O=(p.multiplier||1)*(p.enableRetinaScaling?c.devicePixelRatio:1);delete this.group,p.withoutTransform&&m.resetObjectTransform(this),p.withoutShadow&&(this.shadow=null);var A,F,U,H,J=c.util.createCanvasElement(),q=this.getBoundingRect(!0,!0),X=this.shadow,N={x:0,y:0};X&&(F=X.blur,A=X.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),N.x=2*Math.round(I(X.offsetX)+F)*I(A.scaleX),N.y=2*Math.round(I(X.offsetY)+F)*I(A.scaleY)),U=q.width+N.x,H=q.height+N.y,J.width=Math.ceil(U),J.height=Math.ceil(H);var B=new c.StaticCanvas(J,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});p.format==="jpeg"&&(B.backgroundColor="#fff"),this.setPositionByOrigin(new c.Point(B.width/2,B.height/2),"center","center");var G=this.canvas;B.add(this);var Q=B.toCanvasElement(O||1,p);return this.shadow=T,this.set("canvas",G),C&&(this.group=C),this.set(b).setCoords(),B._objects=[],B.dispose(),B=null,Q},toDataURL:function(p){return p||(p={}),c.util.toDataURL(this.toCanvasElement(p),p.format||"png",p.quality||1)},isType:function(p){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===p},complexity:function(){return 1},toJSON:function(p){return this.toObject(p)},rotate:function(p){var m=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return m&&this._setOriginToCenter(),this.set("angle",p),m&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(p,m){m=m||this.canvas.getPointer(p);var b=new c.Point(m.x,m.y),C=this._getLeftTopCoords();return this.angle&&(b=c.util.rotatePoint(b,C,d(-this.angle))),{x:b.x-C.x,y:b.y-C.y}},_setupCompositeOperation:function(p){this.globalCompositeOperation&&(p.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){c.runningAnimations&&c.runningAnimations.cancelByTarget(this)}}),c.util.createAccessors&&c.util.createAccessors(c.Object),u(c.Object.prototype,c.Observable),c.Object.NUM_FRACTION_DIGITS=2,c.Object.ENLIVEN_PROPS=["clipPath"],c.Object._fromObject=function(p,m,b,C){var T=c[p];m=g(m,!0),c.util.enlivenPatterns([m.fill,m.stroke],function(I){I[0]!==void 0&&(m.fill=I[0]),I[1]!==void 0&&(m.stroke=I[1]),c.util.enlivenObjectEnlivables(m,m,function(){var O=C?new T(m[C],m):new T(m);b&&b(O)})})},c.Object.__uid=0)}(e),Y=S.util.degreesToRadians,ie={left:-.5,center:0,right:.5},oe={top:-.5,center:0,bottom:.5},S.util.object.extend(S.Object.prototype,{translateToGivenOrigin:function(h,c,u,g,o){var l,d,v,p=h.x,m=h.y;return typeof c=="string"?c=ie[c]:c-=.5,typeof g=="string"?g=ie[g]:g-=.5,typeof u=="string"?u=oe[u]:u-=.5,typeof o=="string"?o=oe[o]:o-=.5,d=o-u,((l=g-c)||d)&&(v=this._getTransformedDimensions(),p=h.x+l*v.x,m=h.y+d*v.y),new S.Point(p,m)},translateToCenterPoint:function(h,c,u){var g=this.translateToGivenOrigin(h,c,u,"center","center");return this.angle?S.util.rotatePoint(g,h,Y(this.angle)):g},translateToOriginPoint:function(h,c,u){var g=this.translateToGivenOrigin(h,"center","center",c,u);return this.angle?S.util.rotatePoint(g,h,Y(this.angle)):g},getCenterPoint:function(){var h=new S.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,c){var u=this.getCenterPoint();return this.translateToOriginPoint(u,h,c)},toLocalPoint:function(h,c,u){var g,o,l=this.getCenterPoint();return g=c!==void 0&&u!==void 0?this.translateToGivenOrigin(l,"center","center",c,u):new S.Point(this.left,this.top),o=new S.Point(h.x,h.y),this.angle&&(o=S.util.rotatePoint(o,l,-Y(this.angle))),o.subtractEquals(g)},setPositionByOrigin:function(h,c,u){var g=this.translateToCenterPoint(h,c,u),o=this.translateToOriginPoint(g,this.originX,this.originY);this.set("left",o.x),this.set("top",o.y)},adjustPosition:function(h){var c,u,g=Y(this.angle),o=this.getScaledWidth(),l=S.util.cos(g)*o,d=S.util.sin(g)*o;c=typeof this.originX=="string"?ie[this.originX]:this.originX-.5,u=typeof h=="string"?ie[h]:h-.5,this.left+=l*(u-c),this.top+=d*(u-c),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),function(){var h=S.util,c=h.degreesToRadians,u=h.multiplyTransformMatrices,g=h.transformPoint;h.object.extend(S.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(o,l){return l?o?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),o?this.aCoords:this.lineCoords)},getCoords:function(o,l){return d=this._getCoords(o,l),[new S.Point(d.tl.x,d.tl.y),new S.Point(d.tr.x,d.tr.y),new S.Point(d.br.x,d.br.y),new S.Point(d.bl.x,d.bl.y)];var d},intersectsWithRect:function(o,l,d,v){var p=this.getCoords(d,v);return S.Intersection.intersectPolygonRectangle(p,o,l).status==="Intersection"},intersectsWithObject:function(o,l,d){return S.Intersection.intersectPolygonPolygon(this.getCoords(l,d),o.getCoords(l,d)).status==="Intersection"||o.isContainedWithinObject(this,l,d)||this.isContainedWithinObject(o,l,d)},isContainedWithinObject:function(o,l,d){for(var v=this.getCoords(l,d),p=l?o.aCoords:o.lineCoords,m=0,b=o._getImageLines(p);m<4;m++)if(!o.containsPoint(v[m],b))return!1;return!0},isContainedWithinRect:function(o,l,d,v){var p=this.getBoundingRect(d,v);return p.left>=o.x&&p.left+p.width<=l.x&&p.top>=o.y&&p.top+p.height<=l.y},containsPoint:function(o,l,d,v){var p=this._getCoords(d,v),m=(l=l||this._getImageLines(p),this._findCrossPoints(o,l));return m!==0&&m%2==1},isOnScreen:function(o){if(!this.canvas)return!1;var l=this.canvas.vptCoords.tl,d=this.canvas.vptCoords.br;return!!this.getCoords(!0,o).some(function(v){return v.x<=d.x&&v.x>=l.x&&v.y<=d.y&&v.y>=l.y})||!!this.intersectsWithRect(l,d,!0,o)||this._containsCenterOfCanvas(l,d,o)},_containsCenterOfCanvas:function(o,l,d){var v={x:(o.x+l.x)/2,y:(o.y+l.y)/2};return!!this.containsPoint(v,null,!0,d)},isPartiallyOnScreen:function(o){if(!this.canvas)return!1;var l=this.canvas.vptCoords.tl,d=this.canvas.vptCoords.br;return!!this.intersectsWithRect(l,d,!0,o)||this.getCoords(!0,o).every(function(v){return(v.x>=d.x||v.x<=l.x)&&(v.y>=d.y||v.y<=l.y)})&&this._containsCenterOfCanvas(l,d,o)},_getImageLines:function(o){return{topline:{o:o.tl,d:o.tr},rightline:{o:o.tr,d:o.br},bottomline:{o:o.br,d:o.bl},leftline:{o:o.bl,d:o.tl}}},_findCrossPoints:function(o,l){var d,v,p,m=0;for(var b in l)if(!((p=l[b]).o.y<o.y&&p.d.y<o.y||p.o.y>=o.y&&p.d.y>=o.y||(p.o.x===p.d.x&&p.o.x>=o.x?v=p.o.x:(d=(p.d.y-p.o.y)/(p.d.x-p.o.x),v=-(o.y-0*o.x-(p.o.y-d*p.o.x))/(0-d)),v>=o.x&&(m+=1),m!==2)))break;return m},getBoundingRect:function(o,l){var d=this.getCoords(o,l);return h.makeBoundingBoxFromPoints(d)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(o){return Math.abs(o)<this.minScaleLimit?o<0?-this.minScaleLimit:this.minScaleLimit:o===0?1e-4:o},scale:function(o){return this._set("scaleX",o),this._set("scaleY",o),this.setCoords()},scaleToWidth:function(o,l){var d=this.getBoundingRect(l).width/this.getScaledWidth();return this.scale(o/this.width/d)},scaleToHeight:function(o,l){var d=this.getBoundingRect(l).height/this.getScaledHeight();return this.scale(o/this.height/d)},calcLineCoords:function(){var o=this.getViewportTransform(),l=this.padding,d=c(this.angle),v=h.cos(d)*l,p=h.sin(d)*l,m=v+p,b=v-p,C=this.calcACoords(),T={tl:g(C.tl,o),tr:g(C.tr,o),bl:g(C.bl,o),br:g(C.br,o)};return l&&(T.tl.x-=b,T.tl.y-=m,T.tr.x+=m,T.tr.y-=b,T.bl.x-=m,T.bl.y+=b,T.br.x+=b,T.br.y+=m),T},calcOCoords:function(){var o=this._calcRotateMatrix(),l=this._calcTranslateMatrix(),d=this.getViewportTransform(),v=u(d,l),p=u(v,o),m=(p=u(p,[1/d[0],0,0,1/d[3],0,0]),this._calculateCurrentDimensions()),b={};return this.forEachControl(function(C,T,I){b[T]=C.positionHandler(m,p,I)}),b},calcACoords:function(){var o=this._calcRotateMatrix(),l=this._calcTranslateMatrix(),d=u(l,o),v=this._getTransformedDimensions(),p=v.x/2,m=v.y/2;return{tl:g({x:-p,y:-m},d),tr:g({x:p,y:-m},d),bl:g({x:-p,y:m},d),br:g({x:p,y:m},d)}},setCoords:function(o){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),o||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return h.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var o=this.getCenterPoint();return[1,0,0,1,o.x,o.y]},transformMatrixKey:function(o){var l="_",d="";return!o&&this.group&&(d=this.group.transformMatrixKey(o)+l),d+this.top+l+this.left+l+this.scaleX+l+this.scaleY+l+this.skewX+l+this.skewY+l+this.angle+l+this.originX+l+this.originY+l+this.width+l+this.height+l+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(o){var l=this.calcOwnMatrix();if(o||!this.group)return l;var d=this.transformMatrixKey(o),v=this.matrixCache||(this.matrixCache={});return v.key===d?v.value:(this.group&&(l=u(this.group.calcTransformMatrix(!1),l)),v.key=d,v.value=l,l)},calcOwnMatrix:function(){var o=this.transformMatrixKey(!0),l=this.ownMatrixCache||(this.ownMatrixCache={});if(l.key===o)return l.value;var d=this._calcTranslateMatrix(),v={angle:this.angle,translateX:d[4],translateY:d[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return l.key=o,l.value=h.composeMatrix(v),l.value},_getNonTransformedDimensions:function(){var o=this.strokeWidth;return{x:this.width+o,y:this.height+o}},_getTransformedDimensions:function(o,l){o===void 0&&(o=this.skewX),l===void 0&&(l=this.skewY);var d,v,p,m=o===0&&l===0;if(this.strokeUniform?(v=this.width,p=this.height):(v=(d=this._getNonTransformedDimensions()).x,p=d.y),m)return this._finalizeDimensions(v*this.scaleX,p*this.scaleY);var b=h.sizeAfterTransform(v,p,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:o,skewY:l});return this._finalizeDimensions(b.x,b.y)},_finalizeDimensions:function(o,l){return this.strokeUniform?{x:o+this.strokeWidth,y:l+this.strokeWidth}:{x:o,y:l}},_calculateCurrentDimensions:function(){var o=this.getViewportTransform(),l=this._getTransformedDimensions();return g(l,o,!0).scalarAdd(2*this.padding)}})}(),S.util.object.extend(S.Object.prototype,{sendToBack:function(){return this.group?S.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?S.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?S.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?S.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&this.group.type!=="activeSelection"?S.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(u,g){if(g){if(g.toLive)return u+": url(#SVGID_"+g.id+"); ";var o=new S.Color(g),l=u+": "+o.toRgb()+"; ",d=o.getAlpha();return d!==1&&(l+=u+"-opacity: "+d.toString()+"; "),l}return u+": none; "}var c=S.util.toFixed;S.util.object.extend(S.Object.prototype,{getSvgStyles:function(u){var g=this.fillRule?this.fillRule:"nonzero",o=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",d=this.strokeDashOffset?this.strokeDashOffset:"0",v=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",m=this.strokeMiterLimit?this.strokeMiterLimit:"4",b=this.opacity!==void 0?this.opacity:"1",C=this.visible?"":" visibility: hidden;",T=u?"":this.getSvgFilter(),I=h("fill",this.fill);return[h("stroke",this.stroke),"stroke-width: ",o,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",v,"; ","stroke-dashoffset: ",d,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",m,"; ",I,"fill-rule: ",g,"; ","opacity: ",b,";",T,C].join("")},getSvgSpanStyles:function(u,g){var o="; ",l=u.fontFamily?"font-family: "+(u.fontFamily.indexOf("'")===-1&&u.fontFamily.indexOf('"')===-1?"'"+u.fontFamily+"'":u.fontFamily)+o:"",d=u.strokeWidth?"stroke-width: "+u.strokeWidth+o:"",v=u.fontSize?"font-size: "+u.fontSize+"px"+o:"",p=u.fontStyle?"font-style: "+u.fontStyle+o:"",m=u.fontWeight?"font-weight: "+u.fontWeight+o:"",b=u.fill?h("fill",u.fill):"",C=u.stroke?h("stroke",u.stroke):"",T=this.getSvgTextDecoration(u);return T&&(T="text-decoration: "+T+o),[C,d,l,v,p,m,T,b,u.deltaY?"baseline-shift: "+-u.deltaY+"; ":"",g?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(u){return["overline","underline","line-through"].filter(function(g){return u[g.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(u,g){var o=u?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+S.util.matrixToSVG(o)+(g||"")+'" '},_setSVGBg:function(u){if(this.backgroundColor){var g=S.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',c(-this.width/2,g),'" y="',c(-this.height/2,g),'" width="',c(this.width,g),'" height="',c(this.height,g),`"></rect>
`)}},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(u),{reviver:u})},toClipPathSVG:function(u){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(u),{reviver:u})},_createBaseClipPathSVGMarkup:function(u,g){var o=(g=g||{}).reviver,l=g.additionalTransform||"",d=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),v=u.indexOf("COMMON_PARTS");return u[v]=d,o?o(u.join("")):u.join("")},_createBaseSVGMarkup:function(u,g){var o,l,d=(g=g||{}).noStyle,v=g.reviver,p=d?"":'style="'+this.getSvgStyles()+'" ',m=g.withShadow?'style="'+this.getSvgFilter()+'" ':"",b=this.clipPath,C=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",T=b&&b.absolutePositioned,I=this.stroke,O=this.fill,A=this.shadow,F=[],U=u.indexOf("COMMON_PARTS"),H=g.additionalTransform;return b&&(b.clipPathId="CLIPPATH_"+S.Object.__uid++,l='<clipPath id="'+b.clipPathId+`" >
`+b.toClipPathSVG(v)+`</clipPath>
`),T&&F.push("<g ",m,this.getSvgCommons(),` >
`),F.push("<g ",this.getSvgTransform(!1),T?"":m+this.getSvgCommons(),` >
`),o=[p,C,d?"":this.addPaintOrder()," ",H?'transform="'+H+'" ':""].join(""),u[U]=o,O&&O.toLive&&F.push(O.toSVG(this)),I&&I.toLive&&F.push(I.toSVG(this)),A&&F.push(A.toSVG(this)),b&&F.push(l),F.push(u.join("")),F.push(`</g>
`),T&&F.push(`</g>
`),v?v(F.join("")):F.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=S.util.object.extend,c="stateProperties";function u(o,l,d){var v={};d.forEach(function(p){v[p]=o[p]}),h(o[l],v,!0)}function g(o,l,d){if(o===l)return!0;if(Array.isArray(o)){if(!Array.isArray(l)||o.length!==l.length)return!1;for(var v=0,p=o.length;v<p;v++)if(!g(o[v],l[v]))return!1;return!0}if(o&&typeof o=="object"){var m,b=Object.keys(o);if(!l||typeof l!="object"||!d&&b.length!==Object.keys(l).length)return!1;for(v=0,p=b.length;v<p;v++)if((m=b[v])!=="canvas"&&m!=="group"&&!g(o[m],l[m]))return!1;return!0}}S.util.object.extend(S.Object.prototype,{hasStateChanged:function(o){var l="_"+(o=o||c);return Object.keys(this[l]).length<this[o].length||!g(this[l],this,!0)},saveState:function(o){var l=o&&o.propertySet||c,d="_"+l;return this[d]?(u(this,d,this[l]),o&&o.stateProperties&&u(this,d,o.stateProperties),this):this.setupState(o)},setupState:function(o){var l=(o=o||{}).propertySet||c;return o.propertySet=l,this["_"+l]={},this.saveState(o),this}})}(),function(){var h=S.util.degreesToRadians;S.util.object.extend(S.Object.prototype,{_findTargetCorner:function(c,u){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var g,o,l,d=c.x,v=c.y,p=Object.keys(this.oCoords),m=p.length-1;for(this.__corner=0;m>=0;m--)if(l=p[m],this.isControlVisible(l)&&(o=this._getImageLines(u?this.oCoords[l].touchCorner:this.oCoords[l].corner),(g=this._findCrossPoints({x:d,y:v},o))!==0&&g%2==1))return this.__corner=l,l;return!1},forEachControl:function(c){for(var u in this.controls)c(this.controls[u],u,this)},_setCornerCoords:function(){var c=this.oCoords;for(var u in c){var g=this.controls[u];c[u].corner=g.calcCornerCoords(this.angle,this.cornerSize,c[u].x,c[u].y,!1),c[u].touchCorner=g.calcCornerCoords(this.angle,this.touchCornerSize,c[u].x,c[u].y,!0)}},drawSelectionBackground:function(c){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;c.save();var u=this.getCenterPoint(),g=this._calculateCurrentDimensions(),o=this.canvas.viewportTransform;return c.translate(u.x,u.y),c.scale(1/o[0],1/o[3]),c.rotate(h(this.angle)),c.fillStyle=this.selectionBackgroundColor,c.fillRect(-g.x/2,-g.y/2,g.x,g.y),c.restore(),this},drawBorders:function(c,u){u=u||{};var g=this._calculateCurrentDimensions(),o=this.borderScaleFactor,l=g.x+o,d=g.y+o,v=u.hasControls!==void 0?u.hasControls:this.hasControls,p=!1;return c.save(),c.strokeStyle=u.borderColor||this.borderColor,this._setLineDash(c,u.borderDashArray||this.borderDashArray),c.strokeRect(-l/2,-d/2,l,d),v&&(c.beginPath(),this.forEachControl(function(m,b,C){m.withConnection&&m.getVisibility(C,b)&&(p=!0,c.moveTo(m.x*l,m.y*d),c.lineTo(m.x*l+m.offsetX,m.y*d+m.offsetY))}),p&&c.stroke()),c.restore(),this},drawBordersInGroup:function(c,u,g){g=g||{};var o=S.util.sizeAfterTransform(this.width,this.height,u),l=this.strokeWidth,d=this.strokeUniform,v=this.borderScaleFactor,p=o.x+l*(d?this.canvas.getZoom():u.scaleX)+v,m=o.y+l*(d?this.canvas.getZoom():u.scaleY)+v;return c.save(),this._setLineDash(c,g.borderDashArray||this.borderDashArray),c.strokeStyle=g.borderColor||this.borderColor,c.strokeRect(-p/2,-m/2,p,m),c.restore(),this},drawControls:function(c,u){u=u||{},c.save();var g,o,l=this.canvas.getRetinaScaling();return c.setTransform(l,0,0,l,0,0),c.strokeStyle=c.fillStyle=u.cornerColor||this.cornerColor,this.transparentCorners||(c.strokeStyle=u.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(c,u.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(g=this.group.calcTransformMatrix()),this.forEachControl(function(d,v,p){o=p.oCoords[v],d.getVisibility(p,v)&&(g&&(o=S.util.transformPoint(o,g)),d.render(c,o.x,o.y,u,p))}),c.restore(),this},isControlVisible:function(c){return this.controls[c]&&this.controls[c].getVisibility(this,c)},setControlVisible:function(c,u){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[c]=u,this},setControlsVisibility:function(c){for(var u in c||(c={}),c)this.setControlVisible(u,c[u]);return this},onDeselect:function(){},onSelect:function(){}})}(),S.util.object.extend(S.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,c){var u=function(){},g=(c=c||{}).onComplete||u,o=c.onChange||u,l=this;return S.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(d){h.set("left",d),l.requestRenderAll(),o()},onComplete:function(){h.setCoords(),g()}})},fxCenterObjectV:function(h,c){var u=function(){},g=(c=c||{}).onComplete||u,o=c.onChange||u,l=this;return S.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(d){h.set("top",d),l.requestRenderAll(),o()},onComplete:function(){h.setCoords(),g()}})},fxRemove:function(h,c){var u=function(){},g=(c=c||{}).onComplete||u,o=c.onChange||u,l=this;return S.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(d){h.set("opacity",d),l.requestRenderAll(),o()},onComplete:function(){l.remove(h),g()}})}}),S.util.object.extend(S.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var h,c,u=[],g=[];for(h in arguments[0])u.push(h);for(var o=0,l=u.length;o<l;o++)h=u[o],c=o!==l-1,g.push(this._animate(h,arguments[0][h],arguments[1],c));return g}return this._animate.apply(this,arguments)},_animate:function(h,c,u,g){var o,l=this;c=c.toString(),u=u?S.util.object.clone(u):{},~h.indexOf(".")&&(o=h.split("."));var d=l.colorProperties.indexOf(h)>-1||o&&l.colorProperties.indexOf(o[1])>-1,v=o?this.get(o[0])[o[1]]:this.get(h);"from"in u||(u.from=v),d||(c=~c.indexOf("=")?v+parseFloat(c.replace("=","")):parseFloat(c));var p={target:this,startValue:u.from,endValue:c,byValue:u.by,easing:u.easing,duration:u.duration,abort:u.abort&&function(m,b,C){return u.abort.call(l,m,b,C)},onChange:function(m,b,C){o?l[o[0]][o[1]]=m:l.set(h,m),g||u.onChange&&u.onChange(m,b,C)},onComplete:function(m,b,C){g||(l.setCoords(),u.onComplete&&u.onComplete(m,b,C))}};return d?S.util.animateColor(p.startValue,p.endValue,p.duration,p):S.util.animate(p)}}),function(h){var c=h.fabric||(h.fabric={}),u=c.util.object.extend,g=c.util.object.clone,o={x1:1,x2:1,y1:1,y2:1};function l(d,v){var p=d.origin,m=d.axis1,b=d.axis2,C=d.dimension,T=v.nearest,I=v.center,O=v.farthest;return function(){switch(this.get(p)){case T:return Math.min(this.get(m),this.get(b));case I:return Math.min(this.get(m),this.get(b))+.5*this.get(C);case O:return Math.max(this.get(m),this.get(b))}}}c.Line?c.warn("fabric.Line is already defined"):(c.Line=c.util.createClass(c.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:c.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(d,v){d||(d=[0,0,0,0]),this.callSuper("initialize",v),this.set("x1",d[0]),this.set("y1",d[1]),this.set("x2",d[2]),this.set("y2",d[3]),this._setWidthHeight(v)},_setWidthHeight:function(d){d||(d={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in d?d.left:this._getLeftToOriginX(),this.top="top"in d?d.top:this._getTopToOriginY()},_set:function(d,v){return this.callSuper("_set",d,v),o[d]!==void 0&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(d){d.beginPath();var v=this.calcLinePoints();d.moveTo(v.x1,v.y1),d.lineTo(v.x2,v.y2),d.lineWidth=this.strokeWidth;var p=d.strokeStyle;d.strokeStyle=this.stroke||d.fillStyle,this.stroke&&this._renderStroke(d),d.strokeStyle=p},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(d){return u(this.callSuper("toObject",d),this.calcLinePoints())},_getNonTransformedDimensions:function(){var d=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(d.y-=this.strokeWidth),this.height===0&&(d.x-=this.strokeWidth)),d},calcLinePoints:function(){var d=this.x1<=this.x2?-1:1,v=this.y1<=this.y2?-1:1,p=d*this.width*.5,m=v*this.height*.5;return{x1:p,x2:d*this.width*-.5,y1:m,y2:v*this.height*-.5}},_toSVG:function(){var d=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`" />
`]}}),c.Line.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),c.Line.fromElement=function(d,v,p){p=p||{};var m=c.parseAttributes(d,c.Line.ATTRIBUTE_NAMES),b=[m.x1||0,m.y1||0,m.x2||0,m.y2||0];v(new c.Line(b,u(m,p)))},c.Line.fromObject=function(d,v){var p=g(d,!0);p.points=[d.x1,d.y1,d.x2,d.y2],c.Object._fromObject("Line",p,function(m){delete m.points,v&&v(m)},"points")})}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.degreesToRadians;c.Circle?c.warn("fabric.Circle is already defined."):(c.Circle=c.util.createClass(c.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:c.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(g,o){return this.callSuper("_set",g,o),g==="radius"&&this.setRadius(o),this},toObject:function(g){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(g))},_toSVG:function(){var g,o=(this.endAngle-this.startAngle)%360;if(o===0)g=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,`" />
`];else{var l=u(this.startAngle),d=u(this.endAngle),v=this.radius;g=['<path d="M '+c.util.cos(l)*v+" "+c.util.sin(l)*v," A "+v+" "+v," 0 ",+(o>180?"1":"0")+" 1"," "+c.util.cos(d)*v+" "+c.util.sin(d)*v,'" ',"COMMON_PARTS",` />
`]}return g},_render:function(g){g.beginPath(),g.arc(0,0,this.radius,u(this.startAngle),u(this.endAngle),!1),this._renderPaintInOrder(g)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(g){return this.radius=g,this.set("width",2*g).set("height",2*g)}}),c.Circle.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),c.Circle.fromElement=function(g,o){var l,d=c.parseAttributes(g,c.Circle.ATTRIBUTE_NAMES);if(!("radius"in(l=d)&&l.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");d.left=(d.left||0)-d.radius,d.top=(d.top||0)-d.radius,o(new c.Circle(d))},c.Circle.fromObject=function(g,o){c.Object._fromObject("Circle",g,o)})}(e),function(h){var c=h.fabric||(h.fabric={});c.Triangle?c.warn("fabric.Triangle is already defined"):(c.Triangle=c.util.createClass(c.Object,{type:"triangle",width:100,height:100,_render:function(u){var g=this.width/2,o=this.height/2;u.beginPath(),u.moveTo(-g,o),u.lineTo(0,-o),u.lineTo(g,o),u.closePath(),this._renderPaintInOrder(u)},_toSVG:function(){var u=this.width/2,g=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-u+" "+g,"0 "+-g,u+" "+g].join(","),'" />']}}),c.Triangle.fromObject=function(u,g){return c.Object._fromObject("Triangle",u,g)})}(e),function(h){var c=h.fabric||(h.fabric={}),u=2*Math.PI;c.Ellipse?c.warn("fabric.Ellipse is already defined."):(c.Ellipse=c.util.createClass(c.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:c.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(g){this.callSuper("initialize",g),this.set("rx",g&&g.rx||0),this.set("ry",g&&g.ry||0)},_set:function(g,o){switch(this.callSuper("_set",g,o),g){case"rx":this.rx=o,this.set("width",2*o);break;case"ry":this.ry=o,this.set("height",2*o)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(g){return this.callSuper("toObject",["rx","ry"].concat(g))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(g){g.beginPath(),g.save(),g.transform(1,0,0,this.ry/this.rx,0,0),g.arc(0,0,this.rx,0,u,!1),g.restore(),this._renderPaintInOrder(g)}}),c.Ellipse.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),c.Ellipse.fromElement=function(g,o){var l=c.parseAttributes(g,c.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,o(new c.Ellipse(l))},c.Ellipse.fromObject=function(g,o){c.Object._fromObject("Ellipse",g,o)})}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.object.extend;c.Rect?c.warn("fabric.Rect is already defined"):(c.Rect=c.util.createClass(c.Object,{stateProperties:c.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:c.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(g){this.callSuper("initialize",g),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(g){var o=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,d=this.width,v=this.height,p=-this.width/2,m=-this.height/2,b=o!==0||l!==0,C=.4477152502;g.beginPath(),g.moveTo(p+o,m),g.lineTo(p+d-o,m),b&&g.bezierCurveTo(p+d-C*o,m,p+d,m+C*l,p+d,m+l),g.lineTo(p+d,m+v-l),b&&g.bezierCurveTo(p+d,m+v-C*l,p+d-C*o,m+v,p+d-o,m+v),g.lineTo(p+o,m+v),b&&g.bezierCurveTo(p+C*o,m+v,p,m+v-C*l,p,m+v-l),g.lineTo(p,m+l),b&&g.bezierCurveTo(p,m+C*l,p+C*o,m,p+o,m),g.closePath(),this._renderPaintInOrder(g)},toObject:function(g){return this.callSuper("toObject",["rx","ry"].concat(g))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),c.Rect.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),c.Rect.fromElement=function(g,o,l){if(!g)return o(null);l=l||{};var d=c.parseAttributes(g,c.Rect.ATTRIBUTE_NAMES);d.left=d.left||0,d.top=d.top||0,d.height=d.height||0,d.width=d.width||0;var v=new c.Rect(u(l?c.util.object.clone(l):{},d));v.visible=v.visible&&v.width>0&&v.height>0,o(v)},c.Rect.fromObject=function(g,o){return c.Object._fromObject("Rect",g,o)})}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.object.extend,g=c.util.array.min,o=c.util.array.max,l=c.util.toFixed,d=c.util.projectStrokeOnPoints;c.Polyline?c.warn("fabric.Polyline is already defined"):(c.Polyline=c.util.createClass(c.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:c.Object.prototype.cacheProperties.concat("points"),initialize:function(v,p){p=p||{},this.points=v||[],this.callSuper("initialize",p),this._setPositionDimensions(p)},_projectStrokeOnPoints:function(){return d(this.points,this,!0)},_setPositionDimensions:function(v){var p,m=this._calcDimensions(v),b=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-b,this.height=m.height-b,v.fromSVG||(p=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+b/2,y:m.top-this.strokeWidth/2+b/2},"left","top",this.originX,this.originY)),v.left===void 0&&(this.left=v.fromSVG?m.left:p.x),v.top===void 0&&(this.top=v.fromSVG?m.top:p.y),this.pathOffset={x:m.left+this.width/2+b/2,y:m.top+this.height/2+b/2}},_calcDimensions:function(){var v=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,p=g(v,"x")||0,m=g(v,"y")||0;return{left:p,top:m,width:(o(v,"x")||0)-p,height:(o(v,"y")||0)-m}},toObject:function(v){return u(this.callSuper("toObject",v),{points:this.points.concat()})},_toSVG:function(){for(var v=[],p=this.pathOffset.x,m=this.pathOffset.y,b=c.Object.NUM_FRACTION_DIGITS,C=0,T=this.points.length;C<T;C++)v.push(l(this.points[C].x-p,b),",",l(this.points[C].y-m,b)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',v.join(""),`" />
`]},commonRender:function(v){var p,m=this.points.length,b=this.pathOffset.x,C=this.pathOffset.y;if(!m||isNaN(this.points[m-1].y))return!1;v.beginPath(),v.moveTo(this.points[0].x-b,this.points[0].y-C);for(var T=0;T<m;T++)p=this.points[T],v.lineTo(p.x-b,p.y-C);return!0},_render:function(v){this.commonRender(v)&&this._renderPaintInOrder(v)},complexity:function(){return this.get("points").length}}),c.Polyline.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polyline.fromElementGenerator=function(v){return function(p,m,b){if(!p)return m(null);b||(b={});var C=c.parsePointsAttribute(p.getAttribute("points")),T=c.parseAttributes(p,c[v].ATTRIBUTE_NAMES);T.fromSVG=!0,m(new c[v](C,u(T,b)))}},c.Polyline.fromElement=c.Polyline.fromElementGenerator("Polyline"),c.Polyline.fromObject=function(v,p){return c.Object._fromObject("Polyline",v,p,"points")})}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.projectStrokeOnPoints;c.Polygon?c.warn("fabric.Polygon is already defined"):(c.Polygon=c.util.createClass(c.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return u(this.points,this)},_render:function(g){this.commonRender(g)&&(g.closePath(),this._renderPaintInOrder(g))}}),c.Polygon.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polygon.fromElement=c.Polyline.fromElementGenerator("Polygon"),c.Polygon.fromObject=function(g,o){c.Object._fromObject("Polygon",g,o,"points")})}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.array.min,g=c.util.array.max,o=c.util.object.extend,l=c.util.object.clone,d=c.util.toFixed;c.Path?c.warn("fabric.Path is already defined"):(c.Path=c.util.createClass(c.Object,{type:"path",path:null,cacheProperties:c.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:c.Object.prototype.stateProperties.concat("path"),initialize:function(v,p){delete(p=l(p||{})).path,this.callSuper("initialize",p),this._setPath(v||[],p)},_setPath:function(v,p){this.path=c.util.makePathSimpler(Array.isArray(v)?v:c.util.parsePath(v)),c.Polyline.prototype._setPositionDimensions.call(this,p||{})},_renderPathCommands:function(v){var p,m=0,b=0,C=0,T=0,I=0,O=0,A=-this.pathOffset.x,F=-this.pathOffset.y;v.beginPath();for(var U=0,H=this.path.length;U<H;++U)switch((p=this.path[U])[0]){case"L":C=p[1],T=p[2],v.lineTo(C+A,T+F);break;case"M":m=C=p[1],b=T=p[2],v.moveTo(C+A,T+F);break;case"C":C=p[5],T=p[6],I=p[3],O=p[4],v.bezierCurveTo(p[1]+A,p[2]+F,I+A,O+F,C+A,T+F);break;case"Q":v.quadraticCurveTo(p[1]+A,p[2]+F,p[3]+A,p[4]+F),C=p[3],T=p[4],I=p[1],O=p[2];break;case"z":case"Z":C=m,T=b,v.closePath()}},_render:function(v){this._renderPathCommands(v),this._renderPaintInOrder(v)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(v){return o(this.callSuper("toObject",v),{path:this.path.map(function(p){return p.slice()})})},toDatalessObject:function(v){var p=this.toObject(["sourcePath"].concat(v));return p.sourcePath&&delete p.path,p},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',c.util.joinPath(this.path),'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var v=c.Object.NUM_FRACTION_DIGITS;return" translate("+d(-this.pathOffset.x,v)+", "+d(-this.pathOffset.y,v)+")"},toClipPathSVG:function(v){var p=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:v,additionalTransform:p})},toSVG:function(v){var p=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:v,additionalTransform:p})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var v,p,m=[],b=[],C=0,T=0,I=0,O=0,A=0,F=this.path.length;A<F;++A){switch((v=this.path[A])[0]){case"L":I=v[1],O=v[2],p=[];break;case"M":C=I=v[1],T=O=v[2],p=[];break;case"C":p=c.util.getBoundsOfCurve(I,O,v[1],v[2],v[3],v[4],v[5],v[6]),I=v[5],O=v[6];break;case"Q":p=c.util.getBoundsOfCurve(I,O,v[1],v[2],v[1],v[2],v[3],v[4]),I=v[3],O=v[4];break;case"z":case"Z":I=C,O=T}p.forEach(function(J){m.push(J.x),b.push(J.y)}),m.push(I),b.push(O)}var U=u(m)||0,H=u(b)||0;return{left:U,top:H,width:(g(m)||0)-U,height:(g(b)||0)-H}}}),c.Path.fromObject=function(v,p){if(typeof v.sourcePath=="string"){var m=v.sourcePath;c.loadSVGFromURL(m,function(b){var C=b[0];C.setOptions(v),p&&p(C)})}else c.Object._fromObject("Path",v,p,"path")},c.Path.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(["d"]),c.Path.fromElement=function(v,p,m){var b=c.parseAttributes(v,c.Path.ATTRIBUTE_NAMES);b.fromSVG=!0,p(new c.Path(b.d,o(b,m)))})}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.array.min,g=c.util.array.max;c.Group||(c.Group=c.util.createClass(c.Object,c.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(o,l,d){l=l||{},this._objects=[],d&&this.callSuper("initialize",l),this._objects=o||[];for(var v=this._objects.length;v--;)this._objects[v].group=this;if(d)this._updateObjectsACoords();else{var p=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),p||this._calcBounds(),this._updateObjectsCoords(p),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var o=this._objects.length;o--;)this._objects[o].setCoords(!0)},_updateObjectsCoords:function(o){o=o||this.getCenterPoint();for(var l=this._objects.length;l--;)this._updateObjectCoords(this._objects[l],o)},_updateObjectCoords:function(o,l){var d=o.left,v=o.top;o.set({left:d-l.x,top:v-l.y}),o.group=this,o.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(o){var l=!!this.group;return this._restoreObjectsState(),c.util.resetObjectTransform(this),o&&(l&&c.util.removeTransformFromObject(o,this.group.calcTransformMatrix()),this._objects.push(o),o.group=this,o._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(o){return this._restoreObjectsState(),c.util.resetObjectTransform(this),this.remove(o),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(o){this.dirty=!0,o.group=this,o._set("canvas",this.canvas)},_onObjectRemoved:function(o){this.dirty=!0,delete o.group},_set:function(o,l){var d=this._objects.length;if(this.useSetOnGroup)for(;d--;)this._objects[d].setOnGroup(o,l);if(o==="canvas")for(;d--;)this._objects[d]._set(o,l);c.Object.prototype._set.call(this,o,l)},toObject:function(o){var l=this.includeDefaultValues,d=this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){var m=p.includeDefaultValues;p.includeDefaultValues=l;var b=p.toObject(o);return p.includeDefaultValues=m,b}),v=c.Object.prototype.toObject.call(this,o);return v.objects=d,v},toDatalessObject:function(o){var l,d=this.sourcePath;if(d)l=d;else{var v=this.includeDefaultValues;l=this._objects.map(function(m){var b=m.includeDefaultValues;m.includeDefaultValues=v;var C=m.toDatalessObject(o);return m.includeDefaultValues=b,C})}var p=c.Object.prototype.toDatalessObject.call(this,o);return p.objects=l,p},render:function(o){this._transformDone=!0,this.callSuper("render",o),this._transformDone=!1},shouldCache:function(){var o=c.Object.prototype.shouldCache.call(this);if(o){for(var l=0,d=this._objects.length;l<d;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return o},willDrawShadow:function(){if(c.Object.prototype.willDrawShadow.call(this))return!0;for(var o=0,l=this._objects.length;o<l;o++)if(this._objects[o].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(o){for(var l=0,d=this._objects.length;l<d;l++)this._objects[l].render(o);this._drawClipPath(o,this.clipPath)},isCacheDirty:function(o){if(this.callSuper("isCacheDirty",o))return!0;if(!this.statefullCache)return!1;for(var l=0,d=this._objects.length;l<d;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var v=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-p/2,v,p)}return!0}return!1},_restoreObjectsState:function(){var o=this.calcOwnMatrix();return this._objects.forEach(function(l){c.util.addTransformToObject(l,o),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(o){o.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var o=this._objects,l=this.canvas;this._objects=[];var d=this.toObject();delete d.objects;var v=new c.ActiveSelection([]);return v.set(d),v.type="activeSelection",l.remove(this),o.forEach(function(p){p.group=v,p.dirty=!0,l.add(p)}),v.canvas=l,v._objects=o,l._activeObject=v,v.setCoords(),v}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(o){o.setCoords(!0)}),this},_calcBounds:function(o){for(var l,d,v,p,m=[],b=[],C=["tr","br","bl","tl"],T=0,I=this._objects.length,O=C.length;T<I;++T){for(v=(l=this._objects[T]).calcACoords(),p=0;p<O;p++)d=C[p],m.push(v[d].x),b.push(v[d].y);l.aCoords=v}this._getBounds(m,b,o)},_getBounds:function(o,l,d){var v=new c.Point(u(o),u(l)),p=new c.Point(g(o),g(l)),m=v.y||0,b=v.x||0,C=p.x-v.x||0,T=p.y-v.y||0;this.width=C,this.height=T,d||this.setPositionByOrigin({x:b,y:m},"left","top")},_toSVG:function(o){for(var l=["<g ","COMMON_PARTS",` >
`],d=0,v=this._objects.length;d<v;d++)l.push("		",this._objects[d].toSVG(o));return l.push(`</g>
`),l},getSvgStyles:function(){var o=this.opacity!==void 0&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[o,this.getSvgFilter(),l].join("")},toClipPathSVG:function(o){for(var l=[],d=0,v=this._objects.length;d<v;d++)l.push("	",this._objects[d].toClipPathSVG(o));return this._createBaseClipPathSVGMarkup(l,{reviver:o})}}),c.Group.fromObject=function(o,l){var d=o.objects,v=c.util.object.clone(o,!0);delete v.objects,typeof d!="string"?c.util.enlivenObjects(d,function(p){var m=c.util.object.clone(o,!0);delete m.objects,c.util.enlivenObjectEnlivables(o,m,function(){l&&l(new c.Group(p,m,!0))})}):c.loadSVGFromURL(d,function(p){var m=c.util.groupSVGElements(p,o,d);m.set(v),l&&l(m)})})}(e),function(h){var c=h.fabric||(h.fabric={});c.ActiveSelection||(c.ActiveSelection=c.util.createClass(c.Group,{type:"activeSelection",initialize:function(u,g){g=g||{},this._objects=u||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;g.originX&&(this.originX=g.originX),g.originY&&(this.originY=g.originY),this._calcBounds(),this._updateObjectsCoords(),c.Object.prototype.initialize.call(this,g),this.setCoords()},toGroup:function(){var u=this._objects.concat();this._objects=[];var g=c.Object.prototype.toObject.call(this),o=new c.Group([]);if(delete g.type,o.set(g),u.forEach(function(d){d.canvas.remove(d),d.group=o}),o._objects=u,!this.canvas)return o;var l=this.canvas;return l.add(o),l._activeObject=o,o.setCoords(),o},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(u,g,o){u.save(),u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",u,g),(o=o||{}).hasControls===void 0&&(o.hasControls=!1),o.forActiveSelection=!0;for(var l=0,d=this._objects.length;l<d;l++)this._objects[l]._renderControls(u,o);u.restore()}}),c.ActiveSelection.fromObject=function(u,g){c.util.enlivenObjects(u.objects,function(o){delete u.objects,g&&g(new c.ActiveSelection(o,u,!0))})})}(e),function(h){var c=S.util.object.extend;h.fabric||(h.fabric={}),h.fabric.Image?S.warn("fabric.Image is already defined."):(S.Image=S.util.createClass(S.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:S.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:S.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(u,g){g||(g={}),this.filters=[],this.cacheKey="texture"+S.Object.__uid++,this.callSuper("initialize",g),this._initElement(u,g)},getElement:function(){return this._element||{}},setElement:function(u,g){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=u,this._originalElement=u,this._initConfig(g),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(u){var g=S.filterBackend;g&&g.evictCachesForKey&&g.evictCachesForKey(u)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(u){S.util.cleanUpJsdomNode(this[u]),this[u]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var u=this.getElement();return{width:u.naturalWidth||u.width,height:u.naturalHeight||u.height}},_stroke:function(u){if(this.stroke&&this.strokeWidth!==0){var g=this.width/2,o=this.height/2;u.beginPath(),u.moveTo(-g,-o),u.lineTo(g,-o),u.lineTo(g,o),u.lineTo(-g,o),u.lineTo(-g,-o),u.closePath()}},toObject:function(u){var g=[];this.filters.forEach(function(l){l&&g.push(l.toObject())});var o=c(this.callSuper("toObject",["cropX","cropY"].concat(u)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:g});return this.resizeFilter&&(o.resizeFilter=this.resizeFilter.toObject()),o},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var u,g=[],o=[],l=this._element,d=-this.width/2,v=-this.height/2,p="",m="";if(!l)return[];if(this.hasCrop()){var b=S.Object.__uid++;g.push('<clipPath id="imageCrop_'+b+`">
`,'	<rect x="'+d+'" y="'+v+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+b+')" '}if(this.imageSmoothing||(m='" image-rendering="optimizeSpeed'),o.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',d-this.cropX,'" y="',v-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,m,'"',p,`></image>
`),this.stroke||this.strokeDashArray){var C=this.fill;this.fill=null,u=["	<rect ",'x="',d,'" y="',v,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=C}return this.paintFirst!=="fill"?g.concat(u,o):g.concat(o,u)},getSrc:function(u){var g=u?this._element:this._originalElement;return g?g.toDataURL?g.toDataURL():this.srcFromAttribute?g.getAttribute("src"):g.src:this.src||""},setSrc:function(u,g,o){return S.util.loadImage(u,function(l,d){this.setElement(l,o),this._setWidthHeight(),g&&g(this,d)},this,o&&o.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var u=this.resizeFilter,g=this.minimumScaleTrigger,o=this.getTotalObjectScaling(),l=o.scaleX,d=o.scaleY,v=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!u||l>g&&d>g)return this._element=v,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,void(this._lastScaleY=d);S.filterBackend||(S.filterBackend=S.initFilterBackend());var p=S.util.createCanvasElement(),m=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,b=v.width,C=v.height;p.width=b,p.height=C,this._element=p,this._lastScaleX=u.scaleX=l,this._lastScaleY=u.scaleY=d,S.filterBackend.applyFilters([u],v,b,C,this._element,m),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height},applyFilters:function(u){if(u=(u=u||this.filters||[]).filter(function(v){return v&&!v.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),u.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var g=this._originalElement,o=g.naturalWidth||g.width,l=g.naturalHeight||g.height;if(this._element===this._originalElement){var d=S.util.createCanvasElement();d.width=o,d.height=l,this._element=d,this._filteredEl=d}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,o,l),this._lastScaleX=1,this._lastScaleY=1;return S.filterBackend||(S.filterBackend=S.initFilterBackend()),S.filterBackend.applyFilters(u,this._originalElement,o,l,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(u){S.util.setImageSmoothing(u,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(u),this._renderPaintInOrder(u)},drawCacheOnCanvas:function(u){S.util.setImageSmoothing(u,this.imageSmoothing),S.Object.prototype.drawCacheOnCanvas.call(this,u)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(u){var g=this._element;if(g){var o=this._filterScalingX,l=this._filterScalingY,d=this.width,v=this.height,p=Math.min,m=Math.max,b=m(this.cropX,0),C=m(this.cropY,0),T=g.naturalWidth||g.width,I=g.naturalHeight||g.height,O=b*o,A=C*l,F=p(d*o,T-O),U=p(v*l,I-A),H=-d/2,J=-v/2,q=p(d,T/o-b),X=p(v,I/l-C);g&&u.drawImage(g,O,A,F,U,H,J,q,X)}},_needsResize:function(){var u=this.getTotalObjectScaling();return u.scaleX!==this._lastScaleX||u.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(u,g){this.setElement(S.util.getById(u),g),S.util.addClass(this.getElement(),S.Image.CSS_CANVAS)},_initConfig:function(u){u||(u={}),this.setOptions(u),this._setWidthHeight(u)},_initFilters:function(u,g){u&&u.length?S.util.enlivenObjects(u,function(o){g&&g(o)},"fabric.Image.filters"):g&&g()},_setWidthHeight:function(u){u||(u={});var g=this.getElement();this.width=u.width||g.naturalWidth||g.width||0,this.height=u.height||g.naturalHeight||g.height||0},parsePreserveAspectRatioAttribute:function(){var u,g=S.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),o=this._element.width,l=this._element.height,d=1,v=1,p=0,m=0,b=0,C=0,T=this.width,I=this.height,O={width:T,height:I};return!g||g.alignX==="none"&&g.alignY==="none"?(d=T/o,v=I/l):(g.meetOrSlice==="meet"&&(u=(T-o*(d=v=S.util.findScaleToFit(this._element,O)))/2,g.alignX==="Min"&&(p=-u),g.alignX==="Max"&&(p=u),u=(I-l*v)/2,g.alignY==="Min"&&(m=-u),g.alignY==="Max"&&(m=u)),g.meetOrSlice==="slice"&&(u=o-T/(d=v=S.util.findScaleToCover(this._element,O)),g.alignX==="Mid"&&(b=u/2),g.alignX==="Max"&&(b=u),u=l-I/v,g.alignY==="Mid"&&(C=u/2),g.alignY==="Max"&&(C=u),o=T/d,l=I/v)),{width:o,height:l,scaleX:d,scaleY:v,offsetLeft:p,offsetTop:m,cropX:b,cropY:C}}}),S.Image.CSS_CANVAS="canvas-img",S.Image.prototype.getSvgSrc=S.Image.prototype.getSrc,S.Image.fromObject=function(u,g){var o=S.util.object.clone(u);S.util.loadImage(o.src,function(l,d){d?g&&g(null,!0):S.Image.prototype._initFilters.call(o,o.filters,function(v){o.filters=v||[],S.Image.prototype._initFilters.call(o,[o.resizeFilter],function(p){o.resizeFilter=p[0],S.util.enlivenObjectEnlivables(o,o,function(){var m=new S.Image(l,o);g(m,!1)})})})},null,o.crossOrigin)},S.Image.fromURL=function(u,g,o){S.util.loadImage(u,function(l,d){g&&g(new S.Image(l,o),d)},null,o&&o.crossOrigin)},S.Image.ATTRIBUTE_NAMES=S.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),S.Image.fromElement=function(u,g,o){var l=S.parseAttributes(u,S.Image.ATTRIBUTE_NAMES);S.Image.fromURL(l["xlink:href"],g,c(o?S.util.object.clone(o):{},l))})}(e),S.util.object.extend(S.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return h>0?90*Math.round((h-1)/90):90*Math.round(h/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){var c=function(){},u=(h=h||{}).onComplete||c,g=h.onChange||c,o=this;return S.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){o.rotate(l),g()},onComplete:function(){o.setCoords(),u()}})}}),S.util.object.extend(S.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function h(u,g){var o="precision "+g+` float;
void main(){}`,l=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(l,o),u.compileShader(l),!!u.getShaderParameter(l,u.COMPILE_STATUS)}function c(u){u&&u.tileSize&&(this.tileSize=u.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}S.isWebglSupported=function(u){if(S.isLikelyNode)return!1;u=u||S.WebglFilterBackend.prototype.tileSize;var g=document.createElement("canvas"),o=g.getContext("webgl")||g.getContext("experimental-webgl"),l=!1;if(o){S.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),l=S.maxTextureSize>=u;for(var d=["highp","mediump","lowp"],v=0;v<3;v++)if(h(o,d[v])){S.webGlPrecision=d[v];break}}return this.isSupported=l,l},S.WebglFilterBackend=c,c.prototype={tileSize:2048,resources:{},setupGLContext:function(u,g){this.dispose(),this.createWebGLCanvas(u,g),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(u,g)},chooseFastestCopyGLTo2DMethod:function(u,g){var o,l=window.performance!==void 0;try{new ImageData(1,1),o=!0}catch(I){o=!1}var d=typeof ArrayBuffer<"u",v=typeof Uint8ClampedArray<"u";if(l&&o&&d&&v){var p=S.util.createCanvasElement(),m=new ArrayBuffer(u*g*4);if(S.forceGLPutImageData)return this.imageBuffer=m,void(this.copyGLTo2D=ue);var b,C,T={imageBuffer:m,destinationWidth:u,destinationHeight:g,targetCanvas:p};p.width=u,p.height=g,b=window.performance.now(),le.call(T,this.gl,T),C=window.performance.now()-b,b=window.performance.now(),ue.call(T,this.gl,T),C>window.performance.now()-b?(this.imageBuffer=m,this.copyGLTo2D=ue):this.copyGLTo2D=le}},createWebGLCanvas:function(u,g){var o=S.util.createCanvasElement();o.width=u,o.height=g;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},d=o.getContext("webgl",l);d||(d=o.getContext("experimental-webgl",l)),d&&(d.clearColor(0,0,0,0),this.canvas=o,this.gl=d)},applyFilters:function(u,g,o,l,d,v){var p,m=this.gl;v&&(p=this.getCachedTexture(v,g));var b={originalWidth:g.width||g.originalWidth,originalHeight:g.height||g.originalHeight,sourceWidth:o,sourceHeight:l,destinationWidth:o,destinationHeight:l,context:m,sourceTexture:this.createTexture(m,o,l,!p&&g),targetTexture:this.createTexture(m,o,l),originalTexture:p||this.createTexture(m,o,l,!p&&g),passes:u.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:d},C=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,C),u.forEach(function(T){T&&T.applyTo(b)}),function(T){var I=T.targetCanvas,O=I.width,A=I.height,F=T.destinationWidth,U=T.destinationHeight;O===F&&A===U||(I.width=F,I.height=U)}(b),this.copyGLTo2D(m,b),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(b.sourceTexture),m.deleteTexture(b.targetTexture),m.deleteFramebuffer(C),d.getContext("2d").setTransform(1,0,0,1,0,0),b},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(u,g,o,l){var d=u.createTexture();return u.bindTexture(u.TEXTURE_2D,d),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),l?u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,l):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,g,o,0,u.RGBA,u.UNSIGNED_BYTE,null),d},getCachedTexture:function(u,g){if(this.textureCache[u])return this.textureCache[u];var o=this.createTexture(this.gl,g.width,g.height,g);return this.textureCache[u]=o,o},evictCachesForKey:function(u){this.textureCache[u]&&(this.gl.deleteTexture(this.textureCache[u]),delete this.textureCache[u])},copyGLTo2D:le,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var u=this.gl,g={renderer:"",vendor:""};if(!u)return g;var o=u.getExtension("WEBGL_debug_renderer_info");if(o){var l=u.getParameter(o.UNMASKED_RENDERER_WEBGL),d=u.getParameter(o.UNMASKED_VENDOR_WEBGL);l&&(g.renderer=l.toLowerCase()),d&&(g.vendor=d.toLowerCase())}return this.gpuInfo=g,g}}}(),function(){var h=function(){};function c(){}S.Canvas2dFilterBackend=c,c.prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(u,g,o,l,d){var v=d.getContext("2d");v.drawImage(g,0,0,o,l);var p={sourceWidth:o,sourceHeight:l,imageData:v.getImageData(0,0,o,l),originalEl:g,originalImageData:v.getImageData(0,0,o,l),canvasEl:d,ctx:v,filterBackend:this};return u.forEach(function(m){m.applyTo(p)}),p.imageData.width===o&&p.imageData.height===l||(d.width=p.imageData.width,d.height=p.imageData.height),v.putImageData(p.imageData,0,0),p}}}(),S.Image=S.Image||{},S.Image.filters=S.Image.filters||{},S.Image.filters.BaseFilter=S.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var c in h)this[c]=h[c]},createProgram:function(h,c,u){c=c||this.fragmentSource,u=u||this.vertexSource,S.webGlPrecision!=="highp"&&(c=c.replace(/precision highp float/g,"precision "+S.webGlPrecision+" float"));var g=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(g,u),h.compileShader(g),!h.getShaderParameter(g,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(g));var o=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(o,c),h.compileShader(o),!h.getShaderParameter(o,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(o));var l=h.createProgram();if(h.attachShader(l,g),h.attachShader(l,o),h.linkProgram(l),!h.getProgramParameter(l,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(l));var d=this.getAttributeLocations(h,l),v=this.getUniformLocations(h,l)||{};return v.uStepW=h.getUniformLocation(l,"uStepW"),v.uStepH=h.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:d,uniformLocations:v}},getAttributeLocations:function(h,c){return{aPosition:h.getAttribLocation(c,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,c,u){var g=c.aPosition,o=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,o),h.enableVertexAttribArray(g),h.vertexAttribPointer(g,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,u,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var c,u,g=h.context;h.passes>1?(c=h.destinationWidth,u=h.destinationHeight,h.sourceWidth===c&&h.sourceHeight===u||(g.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(g,c,u)),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,h.targetTexture,0)):(g.bindFramebuffer(g.FRAMEBUFFER,null),g.finish())},_swapTextures:function(h){h.passes--,h.pass++;var c=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=c},isNeutralState:function(){var h=this.mainParameter,c=S.Image.filters[this.type].prototype;if(h){if(Array.isArray(c[h])){for(var u=c[h].length;u--;)if(this[h][u]!==c[h][u])return!1;return!0}return c[h]===this[h]}return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var c=h.context,u=this.retrieveShader(h);h.pass===0&&h.originalTexture?c.bindTexture(c.TEXTURE_2D,h.originalTexture):c.bindTexture(c.TEXTURE_2D,h.sourceTexture),c.useProgram(u.program),this.sendAttributeData(c,u.attributeLocations,h.aPosition),c.uniform1f(u.uniformLocations.uStepW,1/h.sourceWidth),c.uniform1f(u.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(c,u.uniformLocations),c.viewport(0,0,h.destinationWidth,h.destinationHeight),c.drawArrays(c.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,c,u){h.activeTexture(u),h.bindTexture(h.TEXTURE_2D,c),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,c){h.activeTexture(c),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var c=document.createElement("canvas");c.width=h.sourceWidth,c.height=h.sourceHeight,h.helpLayer=c}},toObject:function(){var h={type:this.type},c=this.mainParameter;return c&&(h[c]=this[c]),h},toJSON:function(){return this.toObject()}}),S.Image.filters.BaseFilter.fromObject=function(h,c){var u=new S.Image.filters[h.type](h);return c&&c(u),u},function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.ColorMatrix=g(u.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(o){this.callSuper("initialize",o),this.matrix=this.matrix.slice(0)},applyTo2d:function(o){var l,d,v,p,m,b=o.imageData.data,C=b.length,T=this.matrix,I=this.colorsOnly;for(m=0;m<C;m+=4)l=b[m],d=b[m+1],v=b[m+2],I?(b[m]=l*T[0]+d*T[1]+v*T[2]+255*T[4],b[m+1]=l*T[5]+d*T[6]+v*T[7]+255*T[9],b[m+2]=l*T[10]+d*T[11]+v*T[12]+255*T[14]):(p=b[m+3],b[m]=l*T[0]+d*T[1]+v*T[2]+p*T[3]+255*T[4],b[m+1]=l*T[5]+d*T[6]+v*T[7]+p*T[8]+255*T[9],b[m+2]=l*T[10]+d*T[11]+v*T[12]+p*T[13]+255*T[14],b[m+3]=l*T[15]+d*T[16]+v*T[17]+p*T[18]+255*T[19])},getUniformLocations:function(o,l){return{uColorMatrix:o.getUniformLocation(l,"uColorMatrix"),uConstants:o.getUniformLocation(l,"uConstants")}},sendUniformData:function(o,l){var d=this.matrix,v=[d[0],d[1],d[2],d[3],d[5],d[6],d[7],d[8],d[10],d[11],d[12],d[13],d[15],d[16],d[17],d[18]],p=[d[4],d[9],d[14],d[19]];o.uniformMatrix4fv(l.uColorMatrix,!1,v),o.uniform4fv(l.uConstants,p)}}),c.Image.filters.ColorMatrix.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.Brightness=g(u.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(o){if(this.brightness!==0){var l,d=o.imageData.data,v=d.length,p=Math.round(255*this.brightness);for(l=0;l<v;l+=4)d[l]=d[l]+p,d[l+1]=d[l+1]+p,d[l+2]=d[l+2]+p}},getUniformLocations:function(o,l){return{uBrightness:o.getUniformLocation(l,"uBrightness")}},sendUniformData:function(o,l){o.uniform1f(l.uBrightness,this.brightness)}}),c.Image.filters.Brightness.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.object.extend,g=c.Image.filters,o=c.util.createClass;g.Convolute=o(g.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var d=Math.sqrt(this.matrix.length),v=this.type+"_"+d+"_"+(this.opaque?1:0),p=this.fragmentSource[v];return l.programCache.hasOwnProperty(v)||(l.programCache[v]=this.createProgram(l.context,p)),l.programCache[v]},applyTo2d:function(l){var d,v,p,m,b,C,T,I,O,A,F,U,H,J=l.imageData,q=J.data,X=this.matrix,N=Math.round(Math.sqrt(X.length)),B=Math.floor(N/2),G=J.width,Q=J.height,ee=l.ctx.createImageData(G,Q),W=ee.data,j=this.opaque?1:0;for(F=0;F<Q;F++)for(A=0;A<G;A++){for(b=4*(F*G+A),d=0,v=0,p=0,m=0,H=0;H<N;H++)for(U=0;U<N;U++)C=A+U-B,(T=F+H-B)<0||T>=Q||C<0||C>=G||(I=4*(T*G+C),O=X[H*N+U],d+=q[I]*O,v+=q[I+1]*O,p+=q[I+2]*O,j||(m+=q[I+3]*O));W[b]=d,W[b+1]=v,W[b+2]=p,W[b+3]=j?q[b+3]:m}l.imageData=ee},getUniformLocations:function(l,d){return{uMatrix:l.getUniformLocation(d,"uMatrix"),uOpaque:l.getUniformLocation(d,"uOpaque"),uHalfSize:l.getUniformLocation(d,"uHalfSize"),uSize:l.getUniformLocation(d,"uSize")}},sendUniformData:function(l,d){l.uniform1fv(d.uMatrix,this.matrix)},toObject:function(){return u(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),c.Image.filters.Convolute.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.Grayscale=g(u.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(o){var l,d,v=o.imageData.data,p=v.length,m=this.mode;for(l=0;l<p;l+=4)m==="average"?d=(v[l]+v[l+1]+v[l+2])/3:m==="lightness"?d=(Math.min(v[l],v[l+1],v[l+2])+Math.max(v[l],v[l+1],v[l+2]))/2:m==="luminosity"&&(d=.21*v[l]+.72*v[l+1]+.07*v[l+2]),v[l]=d,v[l+1]=d,v[l+2]=d},retrieveShader:function(o){var l=this.type+"_"+this.mode;if(!o.programCache.hasOwnProperty(l)){var d=this.fragmentSource[this.mode];o.programCache[l]=this.createProgram(o.context,d)}return o.programCache[l]},getUniformLocations:function(o,l){return{uMode:o.getUniformLocation(l,"uMode")}},sendUniformData:function(o,l){o.uniform1i(l.uMode,1)},isNeutralState:function(){return!1}}),c.Image.filters.Grayscale.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.Invert=g(u.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(o){var l,d=o.imageData.data,v=d.length;for(l=0;l<v;l+=4)d[l]=255-d[l],d[l+1]=255-d[l+1],d[l+2]=255-d[l+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(o,l){return{uInvert:o.getUniformLocation(l,"uInvert")}},sendUniformData:function(o,l){o.uniform1i(l.uInvert,this.invert)}}),c.Image.filters.Invert.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.object.extend,g=c.Image.filters,o=c.util.createClass;g.Noise=o(g.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var d,v,p=l.imageData.data,m=p.length,b=this.noise;for(d=0,m=p.length;d<m;d+=4)v=(.5-Math.random())*b,p[d]+=v,p[d+1]+=v,p[d+2]+=v}},getUniformLocations:function(l,d){return{uNoise:l.getUniformLocation(d,"uNoise"),uSeed:l.getUniformLocation(d,"uSeed")}},sendUniformData:function(l,d){l.uniform1f(d.uNoise,this.noise/255),l.uniform1f(d.uSeed,Math.random())},toObject:function(){return u(this.callSuper("toObject"),{noise:this.noise})}}),c.Image.filters.Noise.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.Pixelate=g(u.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(o){var l,d,v,p,m,b,C,T,I,O,A,F=o.imageData,U=F.data,H=F.height,J=F.width;for(d=0;d<H;d+=this.blocksize)for(v=0;v<J;v+=this.blocksize)for(p=U[l=4*d*J+4*v],m=U[l+1],b=U[l+2],C=U[l+3],O=Math.min(d+this.blocksize,H),A=Math.min(v+this.blocksize,J),T=d;T<O;T++)for(I=v;I<A;I++)U[l=4*T*J+4*I]=p,U[l+1]=m,U[l+2]=b,U[l+3]=C},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(o,l){return{uBlocksize:o.getUniformLocation(l,"uBlocksize"),uStepW:o.getUniformLocation(l,"uStepW"),uStepH:o.getUniformLocation(l,"uStepH")}},sendUniformData:function(o,l){o.uniform1f(l.uBlocksize,this.blocksize)}}),c.Image.filters.Pixelate.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.object.extend,g=c.Image.filters,o=c.util.createClass;g.RemoveColor=o(g.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var d,v,p,m,b=l.imageData.data,C=255*this.distance,T=new c.Color(this.color).getSource(),I=[T[0]-C,T[1]-C,T[2]-C],O=[T[0]+C,T[1]+C,T[2]+C];for(d=0;d<b.length;d+=4)v=b[d],p=b[d+1],m=b[d+2],v>I[0]&&p>I[1]&&m>I[2]&&v<O[0]&&p<O[1]&&m<O[2]&&(b[d+3]=0)},getUniformLocations:function(l,d){return{uLow:l.getUniformLocation(d,"uLow"),uHigh:l.getUniformLocation(d,"uHigh")}},sendUniformData:function(l,d){var v=new c.Color(this.color).getSource(),p=parseFloat(this.distance),m=[0+v[0]/255-p,0+v[1]/255-p,0+v[2]/255-p,1],b=[v[0]/255+p,v[1]/255+p,v[2]/255+p,1];l.uniform4fv(d.uLow,m),l.uniform4fv(d.uHigh,b)},toObject:function(){return u(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),c.Image.filters.RemoveColor.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass,o={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in o)u[l]=g(u.ColorMatrix,{type:l,matrix:o[l],mainParameter:!1,colorsOnly:!0}),c.Image.filters[l].fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric,u=c.Image.filters,g=c.util.createClass;u.BlendColor=g(u.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(o){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[o]+`}
}`},retrieveShader:function(o){var l,d=this.type+"_"+this.mode;return o.programCache.hasOwnProperty(d)||(l=this.buildSource(this.mode),o.programCache[d]=this.createProgram(o.context,l)),o.programCache[d]},applyTo2d:function(o){var l,d,v,p,m,b,C,T=o.imageData.data,I=T.length,O=1-this.alpha;l=(C=new c.Color(this.color).getSource())[0]*this.alpha,d=C[1]*this.alpha,v=C[2]*this.alpha;for(var A=0;A<I;A+=4)switch(p=T[A],m=T[A+1],b=T[A+2],this.mode){case"multiply":T[A]=p*l/255,T[A+1]=m*d/255,T[A+2]=b*v/255;break;case"screen":T[A]=255-(255-p)*(255-l)/255,T[A+1]=255-(255-m)*(255-d)/255,T[A+2]=255-(255-b)*(255-v)/255;break;case"add":T[A]=p+l,T[A+1]=m+d,T[A+2]=b+v;break;case"diff":case"difference":T[A]=Math.abs(p-l),T[A+1]=Math.abs(m-d),T[A+2]=Math.abs(b-v);break;case"subtract":T[A]=p-l,T[A+1]=m-d,T[A+2]=b-v;break;case"darken":T[A]=Math.min(p,l),T[A+1]=Math.min(m,d),T[A+2]=Math.min(b,v);break;case"lighten":T[A]=Math.max(p,l),T[A+1]=Math.max(m,d),T[A+2]=Math.max(b,v);break;case"overlay":T[A]=l<128?2*p*l/255:255-2*(255-p)*(255-l)/255,T[A+1]=d<128?2*m*d/255:255-2*(255-m)*(255-d)/255,T[A+2]=v<128?2*b*v/255:255-2*(255-b)*(255-v)/255;break;case"exclusion":T[A]=l+p-2*l*p/255,T[A+1]=d+m-2*d*m/255,T[A+2]=v+b-2*v*b/255;break;case"tint":T[A]=l+p*O,T[A+1]=d+m*O,T[A+2]=v+b*O}},getUniformLocations:function(o,l){return{uColor:o.getUniformLocation(l,"uColor")}},sendUniformData:function(o,l){var d=new c.Color(this.color).getSource();d[0]=this.alpha*d[0]/255,d[1]=this.alpha*d[1]/255,d[2]=this.alpha*d[2]/255,d[3]=this.alpha,o.uniform4fv(l.uColor,d)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),c.Image.filters.BlendColor.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric,u=c.Image.filters,g=c.util.createClass;u.BlendImage=g(u.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(o){var l=this.type+"_"+this.mode,d=this.fragmentSource[this.mode];return o.programCache.hasOwnProperty(l)||(o.programCache[l]=this.createProgram(o.context,d)),o.programCache[l]},applyToWebGL:function(o){var l=o.context,d=this.createTexture(o.filterBackend,this.image);this.bindAdditionalTexture(l,d,l.TEXTURE1),this.callSuper("applyToWebGL",o),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(o,l){return o.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var o=this.image,l=o._element.width,d=o._element.height;return[1/o.scaleX,0,0,0,1/o.scaleY,0,-o.left/l,-o.top/d,1]},applyTo2d:function(o){var l,d,v,p,m,b,C,T,I,O,A,F=o.imageData,U=o.filterBackend.resources,H=F.data,J=H.length,q=F.width,X=F.height,N=this.image;U.blendImage||(U.blendImage=c.util.createCanvasElement()),O=(I=U.blendImage).getContext("2d"),I.width!==q||I.height!==X?(I.width=q,I.height=X):O.clearRect(0,0,q,X),O.setTransform(N.scaleX,0,0,N.scaleY,N.left,N.top),O.drawImage(N._element,0,0,q,X),A=O.getImageData(0,0,q,X).data;for(var B=0;B<J;B+=4)switch(m=H[B],b=H[B+1],C=H[B+2],T=H[B+3],l=A[B],d=A[B+1],v=A[B+2],p=A[B+3],this.mode){case"multiply":H[B]=m*l/255,H[B+1]=b*d/255,H[B+2]=C*v/255,H[B+3]=T*p/255;break;case"mask":H[B+3]=p}},getUniformLocations:function(o,l){return{uTransformMatrix:o.getUniformLocation(l,"uTransformMatrix"),uImage:o.getUniformLocation(l,"uImage")}},sendUniformData:function(o,l){var d=this.calculateMatrix();o.uniform1i(l.uImage,1),o.uniformMatrix3fv(l.uTransformMatrix,!1,d)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),c.Image.filters.BlendImage.fromObject=function(o,l){c.Image.fromObject(o.image,function(d){var v=c.util.object.clone(o);v.image=d,l(new c.Image.filters.BlendImage(v))})}}(e),function(h){var c=h.fabric||(h.fabric={}),u=Math.pow,g=Math.floor,o=Math.sqrt,l=Math.abs,d=Math.round,v=Math.sin,p=Math.ceil,m=c.Image.filters,b=c.util.createClass;m.Resize=b(m.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(C,T){return{uDelta:C.getUniformLocation(T,"uDelta"),uTaps:C.getUniformLocation(T,"uTaps")}},sendUniformData:function(C,T){C.uniform2fv(T.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),C.uniform1fv(T.uTaps,this.taps)},retrieveShader:function(C){var T=this.getFilterWindow(),I=this.type+"_"+T;if(!C.programCache.hasOwnProperty(I)){var O=this.generateShader(T);C.programCache[I]=this.createProgram(C.context,O)}return C.programCache[I]},getFilterWindow:function(){var C=this.tempScale;return Math.ceil(this.lanczosLobes/C)},getTaps:function(){for(var C=this.lanczosCreate(this.lanczosLobes),T=this.tempScale,I=this.getFilterWindow(),O=new Array(I),A=1;A<=I;A++)O[A-1]=C(A*T);return O},generateShader:function(C){for(var T=new Array(C),I=this.fragmentSourceTOP,O=1;O<=C;O++)T[O-1]=O+".0 * uDelta";return I+="uniform float uTaps["+C+`];
`,I+=`void main() {
`,I+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,I+=`  float sum = 1.0;
`,T.forEach(function(A,F){I+="  color += texture2D(uTexture, vTexCoord + "+A+") * uTaps["+F+`];
`,I+="  color += texture2D(uTexture, vTexCoord - "+A+") * uTaps["+F+`];
`,I+="  sum += 2.0 * uTaps["+F+`];
`}),I+=`  gl_FragColor = color / sum;
`,I+="}"},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(C){C.webgl?(C.passes++,this.width=C.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=C.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),C.destinationWidth=this.dW,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceWidth=C.destinationWidth,this.height=C.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),C.destinationHeight=this.dH,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceHeight=C.destinationHeight):this.applyTo2d(C)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(C){return function(T){if(T>=C||T<=-C)return 0;if(T<11920929e-14&&T>-11920929e-14)return 1;var I=(T*=Math.PI)/C;return v(T)/T*v(I)/I}},applyTo2d:function(C){var T=C.imageData,I=this.scaleX,O=this.scaleY;this.rcpScaleX=1/I,this.rcpScaleY=1/O;var A,F=T.width,U=T.height,H=d(F*I),J=d(U*O);this.resizeType==="sliceHack"?A=this.sliceByTwo(C,F,U,H,J):this.resizeType==="hermite"?A=this.hermiteFastResize(C,F,U,H,J):this.resizeType==="bilinear"?A=this.bilinearFiltering(C,F,U,H,J):this.resizeType==="lanczos"&&(A=this.lanczosResize(C,F,U,H,J)),C.imageData=A},sliceByTwo:function(C,T,I,O,A){var F,U,H=C.imageData,J=.5,q=!1,X=!1,N=T*J,B=I*J,G=c.filterBackend.resources,Q=0,ee=0,W=T,j=0;for(G.sliceByTwo||(G.sliceByTwo=document.createElement("canvas")),((F=G.sliceByTwo).width<1.5*T||F.height<I)&&(F.width=1.5*T,F.height=I),(U=F.getContext("2d")).clearRect(0,0,1.5*T,I),U.putImageData(H,0,0),O=g(O),A=g(A);!q||!X;)T=N,I=B,O<g(N*J)?N=g(N*J):(N=O,q=!0),A<g(B*J)?B=g(B*J):(B=A,X=!0),U.drawImage(F,Q,ee,T,I,W,j,N,B),Q=W,ee=j,j+=B;return U.getImageData(Q,ee,O,A)},lanczosResize:function(C,T,I,O,A){var F=C.imageData.data,U=C.ctx.createImageData(O,A),H=U.data,J=this.lanczosCreate(this.lanczosLobes),q=this.rcpScaleX,X=this.rcpScaleY,N=2/this.rcpScaleX,B=2/this.rcpScaleY,G=p(q*this.lanczosLobes/2),Q=p(X*this.lanczosLobes/2),ee={},W={},j={};return function K(ne){var Z,se,me,pe,ce,ge,fe,ye,be,ve,Te;for(W.x=(ne+.5)*q,j.x=g(W.x),Z=0;Z<A;Z++){for(W.y=(Z+.5)*X,j.y=g(W.y),ce=0,ge=0,fe=0,ye=0,be=0,se=j.x-G;se<=j.x+G;se++)if(!(se<0||se>=T)){ve=g(1e3*l(se-W.x)),ee[ve]||(ee[ve]={});for(var ke=j.y-Q;ke<=j.y+Q;ke++)ke<0||ke>=I||(Te=g(1e3*l(ke-W.y)),ee[ve][Te]||(ee[ve][Te]=J(o(u(ve*N,2)+u(Te*B,2))/1e3)),(me=ee[ve][Te])>0&&(ce+=me,ge+=me*F[pe=4*(ke*T+se)],fe+=me*F[pe+1],ye+=me*F[pe+2],be+=me*F[pe+3]))}H[pe=4*(Z*O+ne)]=ge/ce,H[pe+1]=fe/ce,H[pe+2]=ye/ce,H[pe+3]=be/ce}return++ne<O?K(ne):U}(0)},bilinearFiltering:function(C,T,I,O,A){var F,U,H,J,q,X,N,B,G,Q=0,ee=this.rcpScaleX,W=this.rcpScaleY,j=4*(T-1),K=C.imageData.data,ne=C.ctx.createImageData(O,A),Z=ne.data;for(H=0;H<A;H++)for(J=0;J<O;J++)for(q=ee*J-(F=g(ee*J)),X=W*H-(U=g(W*H)),G=4*(U*T+F),N=0;N<4;N++)B=K[G+N]*(1-q)*(1-X)+K[G+4+N]*q*(1-X)+K[G+j+N]*X*(1-q)+K[G+j+4+N]*q*X,Z[Q++]=B;return ne},hermiteFastResize:function(C,T,I,O,A){for(var F=this.rcpScaleX,U=this.rcpScaleY,H=p(F/2),J=p(U/2),q=C.imageData.data,X=C.ctx.createImageData(O,A),N=X.data,B=0;B<A;B++)for(var G=0;G<O;G++){for(var Q=4*(G+B*O),ee=0,W=0,j=0,K=0,ne=0,Z=0,se=0,me=(B+.5)*U,pe=g(B*U);pe<(B+1)*U;pe++)for(var ce=l(me-(pe+.5))/J,ge=(G+.5)*F,fe=ce*ce,ye=g(G*F);ye<(G+1)*F;ye++){var be=l(ge-(ye+.5))/H,ve=o(fe+be*be);ve>1&&ve<-1||(ee=2*ve*ve*ve-3*ve*ve+1)>0&&(se+=ee*q[3+(be=4*(ye+pe*T))],j+=ee,q[be+3]<255&&(ee=ee*q[be+3]/250),K+=ee*q[be],ne+=ee*q[be+1],Z+=ee*q[be+2],W+=ee)}N[Q]=K/W,N[Q+1]=ne/W,N[Q+2]=Z/W,N[Q+3]=se/j}return X},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),c.Image.filters.Resize.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.Contrast=g(u.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(o){if(this.contrast!==0){var l,d=o.imageData.data,v=d.length,p=Math.floor(255*this.contrast),m=259*(p+255)/(255*(259-p));for(l=0;l<v;l+=4)d[l]=m*(d[l]-128)+128,d[l+1]=m*(d[l+1]-128)+128,d[l+2]=m*(d[l+2]-128)+128}},getUniformLocations:function(o,l){return{uContrast:o.getUniformLocation(l,"uContrast")}},sendUniformData:function(o,l){o.uniform1f(l.uContrast,this.contrast)}}),c.Image.filters.Contrast.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.Saturation=g(u.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(o){if(this.saturation!==0){var l,d,v=o.imageData.data,p=v.length,m=-this.saturation;for(l=0;l<p;l+=4)d=Math.max(v[l],v[l+1],v[l+2]),v[l]+=d!==v[l]?(d-v[l])*m:0,v[l+1]+=d!==v[l+1]?(d-v[l+1])*m:0,v[l+2]+=d!==v[l+2]?(d-v[l+2])*m:0}},getUniformLocations:function(o,l){return{uSaturation:o.getUniformLocation(l,"uSaturation")}},sendUniformData:function(o,l){o.uniform1f(l.uSaturation,-this.saturation)}}),c.Image.filters.Saturation.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.Vibrance=g(u.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(o){if(this.vibrance!==0){var l,d,v,p,m=o.imageData.data,b=m.length,C=-this.vibrance;for(l=0;l<b;l+=4)d=Math.max(m[l],m[l+1],m[l+2]),v=(m[l]+m[l+1]+m[l+2])/3,p=2*Math.abs(d-v)/255*C,m[l]+=d!==m[l]?(d-m[l])*p:0,m[l+1]+=d!==m[l+1]?(d-m[l+1])*p:0,m[l+2]+=d!==m[l+2]?(d-m[l+2])*p:0}},getUniformLocations:function(o,l){return{uVibrance:o.getUniformLocation(l,"uVibrance")}},sendUniformData:function(o,l){o.uniform1f(l.uVibrance,-this.vibrance)}}),c.Image.filters.Vibrance.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.Blur=g(u.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(o){o.webgl?(this.aspectRatio=o.sourceWidth/o.sourceHeight,o.passes++,this._setupFrameBuffer(o),this.horizontal=!0,this.applyToWebGL(o),this._swapTextures(o),this._setupFrameBuffer(o),this.horizontal=!1,this.applyToWebGL(o),this._swapTextures(o)):this.applyTo2d(o)},applyTo2d:function(o){o.imageData=this.simpleBlur(o)},simpleBlur:function(o){var l,d,v=o.filterBackend.resources,p=o.imageData.width,m=o.imageData.height;v.blurLayer1||(v.blurLayer1=c.util.createCanvasElement(),v.blurLayer2=c.util.createCanvasElement()),l=v.blurLayer1,d=v.blurLayer2,l.width===p&&l.height===m||(d.width=l.width=p,d.height=l.height=m);var b,C,T,I,O=l.getContext("2d"),A=d.getContext("2d"),F=.06*this.blur*.5;for(O.putImageData(o.imageData,0,0),A.clearRect(0,0,p,m),I=-15;I<=15;I++)T=F*(C=I/15)*p+(b=(Math.random()-.5)/4),A.globalAlpha=1-Math.abs(C),A.drawImage(l,T,b),O.drawImage(d,0,0),A.globalAlpha=1,A.clearRect(0,0,d.width,d.height);for(I=-15;I<=15;I++)T=F*(C=I/15)*m+(b=(Math.random()-.5)/4),A.globalAlpha=1-Math.abs(C),A.drawImage(l,b,T),O.drawImage(d,0,0),A.globalAlpha=1,A.clearRect(0,0,d.width,d.height);o.ctx.drawImage(l,0,0);var U=o.ctx.getImageData(0,0,l.width,l.height);return O.globalAlpha=1,O.clearRect(0,0,l.width,l.height),U},getUniformLocations:function(o,l){return{delta:o.getUniformLocation(l,"uDelta")}},sendUniformData:function(o,l){var d=this.chooseRightDelta();o.uniform2fv(l.delta,d)},chooseRightDelta:function(){var o,l=1,d=[0,0];return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),o=l*this.blur*.12,this.horizontal?d[0]=o:d[1]=o,d}}),u.Blur.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.Gamma=g(u.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(o){this.gamma=[1,1,1],u.BaseFilter.prototype.initialize.call(this,o)},applyTo2d:function(o){var l,d=o.imageData.data,v=this.gamma,p=d.length,m=1/v[0],b=1/v[1],C=1/v[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),l=0,p=256;l<p;l++)this.rVals[l]=255*Math.pow(l/255,m),this.gVals[l]=255*Math.pow(l/255,b),this.bVals[l]=255*Math.pow(l/255,C);for(l=0,p=d.length;l<p;l+=4)d[l]=this.rVals[d[l]],d[l+1]=this.gVals[d[l+1]],d[l+2]=this.bVals[d[l+2]]},getUniformLocations:function(o,l){return{uGamma:o.getUniformLocation(l,"uGamma")}},sendUniformData:function(o,l){o.uniform3fv(l.uGamma,this.gamma)}}),c.Image.filters.Gamma.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.Composed=g(u.BaseFilter,{type:"Composed",subFilters:[],initialize:function(o){this.callSuper("initialize",o),this.subFilters=this.subFilters.slice(0)},applyTo:function(o){o.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(o)})},toObject:function(){return c.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(o){return o.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(o){return!o.isNeutralState()})}}),c.Image.filters.Composed.fromObject=function(o,l){var d=(o.subFilters||[]).map(function(p){return new c.Image.filters[p.type](p)}),v=new c.Image.filters.Composed({subFilters:d});return l&&l(v),v}}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.Image.filters,g=c.util.createClass;u.HueRotation=g(u.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var o=this.rotation*Math.PI,l=c.util.cos(o),d=c.util.sin(o),v=1/3,p=Math.sqrt(v)*d,m=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+m/3,this.matrix[1]=v*m-p,this.matrix[2]=v*m+p,this.matrix[5]=v*m+p,this.matrix[6]=l+v*m,this.matrix[7]=v*m-p,this.matrix[10]=v*m-p,this.matrix[11]=v*m+p,this.matrix[12]=l+v*m},isNeutralState:function(o){return this.calculateMatrix(),u.BaseFilter.prototype.isNeutralState.call(this,o)},applyTo:function(o){this.calculateMatrix(),u.BaseFilter.prototype.applyTo.call(this,o)}}),c.Image.filters.HueRotation.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),u=c.util.object.clone;if(c.Text)c.warn("fabric.Text is already defined");else{var g="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");c.Text=c.util.createClass(c.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:c.Object.prototype.stateProperties.concat(g),cacheProperties:c.Object.prototype.cacheProperties.concat(g),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(o,l){this.styles=l&&l.styles||{},this.text=o,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var o=this.path;o&&(o.segmentsInfo=c.util.getPathSegmentsInfo(o.path))},getMeasuringContext:function(){return c._measuringContext||(c._measuringContext=this.canvas&&this.canvas.contextCache||c.util.createCanvasElement().getContext("2d")),c._measuringContext},_splitText:function(){var o=this._splitTextIntoLines(this.text);return this.textLines=o.lines,this._textLines=o.graphemeLines,this._unwrappedTextLines=o._unwrappedLines,this._text=o.graphemeText,o},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var o,l,d,v,p,m,b,C=0,T=this._textLines.length;C<T;C++)if((this.textAlign==="justify"||C!==T-1&&!this.isEndOfWrapping(C))&&(v=0,p=this._textLines[C],(l=this.getLineWidth(C))<this.width&&(b=this.textLines[C].match(this._reSpacesAndTabs)))){d=b.length,o=(this.width-l)/d;for(var I=0,O=p.length;I<=O;I++)m=this.__charBounds[C][I],this._reSpaceAndTab.test(p[I])?(m.width+=o,m.kernedWidth+=o,m.left+=v,v+=o):m.left+=v}},isEndOfWrapping:function(o){return o===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var o=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return o.width+=l*o.zoomX,o.height+=l*o.zoomY,o},_render:function(o){var l=this.path;l&&!l.isNotVisible()&&l._render(o),this._setTextStyles(o),this._renderTextLinesBackground(o),this._renderTextDecoration(o,"underline"),this._renderText(o),this._renderTextDecoration(o,"overline"),this._renderTextDecoration(o,"linethrough")},_renderText:function(o){this.paintFirst==="stroke"?(this._renderTextStroke(o),this._renderTextFill(o)):(this._renderTextFill(o),this._renderTextStroke(o))},_setTextStyles:function(o,l,d){if(o.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":o.textBaseline="middle";break;case"ascender":o.textBaseline="top";break;case"descender":o.textBaseline="bottom"}o.font=this._getFontDeclaration(l,d)},calcTextWidth:function(){for(var o=this.getLineWidth(0),l=1,d=this._textLines.length;l<d;l++){var v=this.getLineWidth(l);v>o&&(o=v)}return o},_renderTextLine:function(o,l,d,v,p,m){this._renderChars(o,l,d,v,p,m)},_renderTextLinesBackground:function(o){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var l,d,v,p,m,b,C,T=o.fillStyle,I=this._getLeftOffset(),O=this._getTopOffset(),A=0,F=0,U=this.path,H=0,J=this._textLines.length;H<J;H++)if(l=this.getHeightOfLine(H),this.textBackgroundColor||this.styleHas("textBackgroundColor",H)){v=this._textLines[H],d=this._getLineLeftOffset(H),F=0,A=0,p=this.getValueOfPropertyAt(H,0,"textBackgroundColor");for(var q=0,X=v.length;q<X;q++)m=this.__charBounds[H][q],b=this.getValueOfPropertyAt(H,q,"textBackgroundColor"),U?(o.save(),o.translate(m.renderLeft,m.renderTop),o.rotate(m.angle),o.fillStyle=b,b&&o.fillRect(-m.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),m.width,l/this.lineHeight),o.restore()):b!==p?(C=I+d+A,this.direction==="rtl"&&(C=this.width-C-F),o.fillStyle=p,p&&o.fillRect(C,O,F,l/this.lineHeight),A=m.left,F=m.width,p=b):F+=m.kernedWidth;b&&!U&&(C=I+d+A,this.direction==="rtl"&&(C=this.width-C-F),o.fillStyle=b,o.fillRect(C,O,F,l/this.lineHeight)),O+=l}else O+=l;o.fillStyle=T,this._removeShadow(o)}},getFontCache:function(o){var l=o.fontFamily.toLowerCase();c.charWidthsCache[l]||(c.charWidthsCache[l]={});var d=c.charWidthsCache[l],v=o.fontStyle.toLowerCase()+"_"+(o.fontWeight+"").toLowerCase();return d[v]||(d[v]={}),d[v]},_measureChar:function(o,l,d,v){var p,m,b,C,T=this.getFontCache(l),I=d+o,O=this._getFontDeclaration(l)===this._getFontDeclaration(v),A=l.fontSize/this.CACHE_FONT_SIZE;if(d&&T[d]!==void 0&&(b=T[d]),T[o]!==void 0&&(C=p=T[o]),O&&T[I]!==void 0&&(C=(m=T[I])-b),p===void 0||b===void 0||m===void 0){var F=this.getMeasuringContext();this._setTextStyles(F,l,!0)}return p===void 0&&(C=p=F.measureText(o).width,T[o]=p),b===void 0&&O&&d&&(b=F.measureText(d).width,T[d]=b),O&&m===void 0&&(m=F.measureText(I).width,T[I]=m,C=m-b),{width:p*A,kernedWidth:C*A}},getHeightOfChar:function(o,l){return this.getValueOfPropertyAt(o,l,"fontSize")},measureLine:function(o){var l=this._measureLine(o);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(o){var l,d,v,p,m,b,C=0,T=this._textLines[o],I=new Array(T.length),O=0,A=this.path,F=this.pathSide==="right";for(this.__charBounds[o]=I,l=0;l<T.length;l++)d=T[l],p=this._getGraphemeBox(d,o,l,v),I[l]=p,C+=p.kernedWidth,v=d;if(I[l]={left:p?p.left+p.width:0,width:0,kernedWidth:0,height:this.fontSize},A){switch(b=A.segmentsInfo[A.segmentsInfo.length-1].length,(m=c.util.getPointOnPath(A.path,0,A.segmentsInfo)).x+=A.pathOffset.x,m.y+=A.pathOffset.y,this.textAlign){case"left":O=F?b-C:0;break;case"center":O=(b-C)/2;break;case"right":O=F?0:b-C}for(O+=this.pathStartOffset*(F?-1:1),l=F?T.length-1:0;F?l>=0:l<T.length;F?l--:l++)p=I[l],O>b?O%=b:O<0&&(O+=b),this._setGraphemeOnPath(O,p,m),O+=p.kernedWidth}return{width:C,numOfSpaces:0}},_setGraphemeOnPath:function(o,l,d){var v=o+l.kernedWidth/2,p=this.path,m=c.util.getPointOnPath(p.path,v,p.segmentsInfo);l.renderLeft=m.x-d.x,l.renderTop=m.y-d.y,l.angle=m.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(o,l,d,v,p){var m,b=this.getCompleteStyleDeclaration(l,d),C=v?this.getCompleteStyleDeclaration(l,d-1):{},T=this._measureChar(o,b,v,C),I=T.kernedWidth,O=T.width;this.charSpacing!==0&&(O+=m=this._getWidthOfCharSpacing(),I+=m);var A={width:O,left:0,height:b.fontSize,kernedWidth:I,deltaY:b.deltaY};if(d>0&&!p){var F=this.__charBounds[l][d-1];A.left=F.left+F.width+T.kernedWidth-T.width}return A},getHeightOfLine:function(o){if(this.__lineHeights[o])return this.__lineHeights[o];for(var l=this._textLines[o],d=this.getHeightOfChar(o,0),v=1,p=l.length;v<p;v++)d=Math.max(this.getHeightOfChar(o,v),d);return this.__lineHeights[o]=d*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var o,l=0,d=0,v=this._textLines.length;d<v;d++)o=this.getHeightOfLine(d),l+=d===v-1?o/this.lineHeight:o;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(o,l){o.save();for(var d=0,v=this._getLeftOffset(),p=this._getTopOffset(),m=0,b=this._textLines.length;m<b;m++){var C=this.getHeightOfLine(m),T=C/this.lineHeight,I=this._getLineLeftOffset(m);this._renderTextLine(l,o,this._textLines[m],v+I,p+d+T,m),d+=C}o.restore()},_renderTextFill:function(o){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(o,"fillText")},_renderTextStroke:function(o){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this._setLineDash(o,this.strokeDashArray),o.beginPath(),this._renderTextCommon(o,"strokeText"),o.closePath(),o.restore())},_renderChars:function(o,l,d,v,p,m){var b,C,T,I,O,A=this.getHeightOfLine(m),F=this.textAlign.indexOf("justify")!==-1,U="",H=0,J=this.path,q=!F&&this.charSpacing===0&&this.isEmptyStyles(m)&&!J,X=this.direction==="ltr",N=this.direction==="ltr"?1:-1,B=l.canvas.getAttribute("dir");if(l.save(),B!==this.direction&&(l.canvas.setAttribute("dir",X?"ltr":"rtl"),l.direction=X?"ltr":"rtl",l.textAlign=X?"left":"right"),p-=A*this._fontSizeFraction/this.lineHeight,q)return this._renderChar(o,l,m,0,d.join(""),v,p,A),void l.restore();for(var G=0,Q=d.length-1;G<=Q;G++)I=G===Q||this.charSpacing||J,U+=d[G],T=this.__charBounds[m][G],H===0?(v+=N*(T.kernedWidth-T.width),H+=T.width):H+=T.kernedWidth,F&&!I&&this._reSpaceAndTab.test(d[G])&&(I=!0),I||(b=b||this.getCompleteStyleDeclaration(m,G),C=this.getCompleteStyleDeclaration(m,G+1),I=this._hasStyleChanged(b,C)),I&&(J?(l.save(),l.translate(T.renderLeft,T.renderTop),l.rotate(T.angle),this._renderChar(o,l,m,G,U,-H/2,0,A),l.restore()):(O=v,this._renderChar(o,l,m,G,U,O,p,A)),U="",b=C,v+=N*H,H=0);l.restore()},_applyPatternGradientTransformText:function(o){var l,d=c.util.createCanvasElement(),v=this.width+this.strokeWidth,p=this.height+this.strokeWidth;return d.width=v,d.height=p,(l=d.getContext("2d")).beginPath(),l.moveTo(0,0),l.lineTo(v,0),l.lineTo(v,p),l.lineTo(0,p),l.closePath(),l.translate(v/2,p/2),l.fillStyle=o.toLive(l),this._applyPatternGradientTransform(l,o),l.fill(),l.createPattern(d,"no-repeat")},handleFiller:function(o,l,d){var v,p;return d.toLive?d.gradientUnits==="percentage"||d.gradientTransform||d.patternTransform?(v=-this.width/2,p=-this.height/2,o.translate(v,p),o[l]=this._applyPatternGradientTransformText(d),{offsetX:v,offsetY:p}):(o[l]=d.toLive(o,this),this._applyPatternGradientTransform(o,d)):(o[l]=d,{offsetX:0,offsetY:0})},_setStrokeStyles:function(o,l){return o.lineWidth=l.strokeWidth,o.lineCap=this.strokeLineCap,o.lineDashOffset=this.strokeDashOffset,o.lineJoin=this.strokeLineJoin,o.miterLimit=this.strokeMiterLimit,this.handleFiller(o,"strokeStyle",l.stroke)},_setFillStyles:function(o,l){return this.handleFiller(o,"fillStyle",l.fill)},_renderChar:function(o,l,d,v,p,m,b){var C,T,I=this._getStyleDeclaration(d,v),O=this.getCompleteStyleDeclaration(d,v),A=o==="fillText"&&O.fill,F=o==="strokeText"&&O.stroke&&O.strokeWidth;(F||A)&&(l.save(),A&&(C=this._setFillStyles(l,O)),F&&(T=this._setStrokeStyles(l,O)),l.font=this._getFontDeclaration(O),I&&I.textBackgroundColor&&this._removeShadow(l),I&&I.deltaY&&(b+=I.deltaY),A&&l.fillText(p,m-C.offsetX,b-C.offsetY),F&&l.strokeText(p,m-T.offsetX,b-T.offsetY),l.restore())},setSuperscript:function(o,l){return this._setScript(o,l,this.superscript)},setSubscript:function(o,l){return this._setScript(o,l,this.subscript)},_setScript:function(o,l,d){var v=this.get2DCursorLocation(o,!0),p=this.getValueOfPropertyAt(v.lineIndex,v.charIndex,"fontSize"),m=this.getValueOfPropertyAt(v.lineIndex,v.charIndex,"deltaY"),b={fontSize:p*d.size,deltaY:m+p*d.baseline};return this.setSelectionStyles(b,o,l),this},_hasStyleChanged:function(o,l){return o.fill!==l.fill||o.stroke!==l.stroke||o.strokeWidth!==l.strokeWidth||o.fontSize!==l.fontSize||o.fontFamily!==l.fontFamily||o.fontWeight!==l.fontWeight||o.fontStyle!==l.fontStyle||o.deltaY!==l.deltaY},_hasStyleChangedForSvg:function(o,l){return this._hasStyleChanged(o,l)||o.overline!==l.overline||o.underline!==l.underline||o.linethrough!==l.linethrough},_getLineLeftOffset:function(o){var l=this.getLineWidth(o),d=this.width-l,v=this.textAlign,p=this.direction,m=0,b=this.isEndOfWrapping(o);return v==="justify"||v==="justify-center"&&!b||v==="justify-right"&&!b||v==="justify-left"&&!b?0:(v==="center"&&(m=d/2),v==="right"&&(m=d),v==="justify-center"&&(m=d/2),v==="justify-right"&&(m=d),p==="rtl"&&(m-=d),m)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var o=this._forceClearCache;return o||(o=this.hasStateChanged("_dimensionAffectingProps")),o&&(this.dirty=!0,this._forceClearCache=!1),o},getLineWidth:function(o){if(this.__lineWidths[o]!==void 0)return this.__lineWidths[o];var l=this.measureLine(o).width;return this.__lineWidths[o]=l,l},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(o,l,d){var v=this._getStyleDeclaration(o,l);return v&&v[d]!==void 0?v[d]:this[d]},_renderTextDecoration:function(o,l){if(this[l]||this.styleHas(l)){for(var d,v,p,m,b,C,T,I,O,A,F,U,H,J,q,X,N=this._getLeftOffset(),B=this._getTopOffset(),G=this.path,Q=this._getWidthOfCharSpacing(),ee=this.offsets[l],W=0,j=this._textLines.length;W<j;W++)if(d=this.getHeightOfLine(W),this[l]||this.styleHas(l,W)){T=this._textLines[W],J=d/this.lineHeight,m=this._getLineLeftOffset(W),A=0,F=0,I=this.getValueOfPropertyAt(W,0,l),X=this.getValueOfPropertyAt(W,0,"fill"),O=B+J*(1-this._fontSizeFraction),v=this.getHeightOfChar(W,0),b=this.getValueOfPropertyAt(W,0,"deltaY");for(var K=0,ne=T.length;K<ne;K++)if(U=this.__charBounds[W][K],H=this.getValueOfPropertyAt(W,K,l),q=this.getValueOfPropertyAt(W,K,"fill"),p=this.getHeightOfChar(W,K),C=this.getValueOfPropertyAt(W,K,"deltaY"),G&&H&&q)o.save(),o.fillStyle=X,o.translate(U.renderLeft,U.renderTop),o.rotate(U.angle),o.fillRect(-U.kernedWidth/2,ee*p+C,U.kernedWidth,this.fontSize/15),o.restore();else if((H!==I||q!==X||p!==v||C!==b)&&F>0){var Z=N+m+A;this.direction==="rtl"&&(Z=this.width-Z-F),I&&X&&(o.fillStyle=X,o.fillRect(Z,O+ee*v+b,F,this.fontSize/15)),A=U.left,F=U.width,I=H,X=q,v=p,b=C}else F+=U.kernedWidth;Z=N+m+A,this.direction==="rtl"&&(Z=this.width-Z-F),o.fillStyle=q,H&&q&&o.fillRect(Z,O+ee*v+b,F-Q,this.fontSize/15),B+=d}else B+=d;this._removeShadow(o)}},_getFontDeclaration:function(o,l){var d=o||this,v=this.fontFamily,p=c.Text.genericFonts.indexOf(v.toLowerCase())>-1,m=v===void 0||v.indexOf("'")>-1||v.indexOf(",")>-1||v.indexOf('"')>-1||p?d.fontFamily:'"'+d.fontFamily+'"';return[c.isLikelyNode?d.fontWeight:d.fontStyle,c.isLikelyNode?d.fontStyle:d.fontWeight,l?this.CACHE_FONT_SIZE+"px":d.fontSize+"px",m].join(" ")},render:function(o){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",o)))},_splitTextIntoLines:function(o){for(var l=o.split(this._reNewline),d=new Array(l.length),v=[`
`],p=[],m=0;m<l.length;m++)d[m]=c.util.string.graphemeSplit(l[m]),p=p.concat(d[m],v);return p.pop(),{_unwrappedLines:d,lines:l,graphemeText:p,graphemeLines:d}},toObject:function(o){var l=g.concat(o),d=this.callSuper("toObject",l);return d.styles=u(this.styles,!0),d.path&&(d.path=this.path.toObject()),d},set:function(o,l){this.callSuper("set",o,l);var d=!1,v=!1;if(typeof o=="object")for(var p in o)p==="path"&&this.setPathInfo(),d=d||this._dimensionAffectingProps.indexOf(p)!==-1,v=v||p==="path";else d=this._dimensionAffectingProps.indexOf(o)!==-1,v=o==="path";return v&&this.setPathInfo(),d&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),c.Text.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),c.Text.DEFAULT_SVG_FONT_SIZE=16,c.Text.fromElement=function(o,l,d){if(!o)return l(null);var v=c.parseAttributes(o,c.Text.ATTRIBUTE_NAMES),p=v.textAnchor||"left";if((d=c.util.object.extend(d?u(d):{},v)).top=d.top||0,d.left=d.left||0,v.textDecoration){var m=v.textDecoration;m.indexOf("underline")!==-1&&(d.underline=!0),m.indexOf("overline")!==-1&&(d.overline=!0),m.indexOf("line-through")!==-1&&(d.linethrough=!0),delete d.textDecoration}"dx"in v&&(d.left+=v.dx),"dy"in v&&(d.top+=v.dy),"fontSize"in d||(d.fontSize=c.Text.DEFAULT_SVG_FONT_SIZE);var b="";"textContent"in o?b=o.textContent:"firstChild"in o&&o.firstChild!==null&&"data"in o.firstChild&&o.firstChild.data!==null&&(b=o.firstChild.data),b=b.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var C=d.strokeWidth;d.strokeWidth=0;var T=new c.Text(b,d),I=T.getScaledHeight()/T.height,O=((T.height+T.strokeWidth)*T.lineHeight-T.height)*I,A=T.getScaledHeight()+O,F=0;p==="center"&&(F=T.getScaledWidth()/2),p==="right"&&(F=T.getScaledWidth()),T.set({left:T.left-F,top:T.top-(A-T.fontSize*(.07+T._fontSizeFraction))/T.lineHeight,strokeWidth:C!==void 0?C:1}),l(T)},c.Text.fromObject=function(o,l){var d=u(o),v=o.path;return delete d.path,c.Object._fromObject("Text",d,function(p){v?c.Object._fromObject("Path",v,function(m){p.set("path",m),l(p)},"path"):l(p)},"text")},c.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],c.util.createAccessors&&c.util.createAccessors(c.Text)}}(e),S.util.object.extend(S.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||h!==void 0&&!this.styles[h])return!0;var c=h===void 0?this.styles:{line:this.styles[h]};for(var u in c)for(var g in c[u])for(var o in c[u][g])return!1;return!0},styleHas:function(h,c){if(!this.styles||!h||h===""||c!==void 0&&!this.styles[c])return!1;var u=c===void 0?this.styles:{0:this.styles[c]};for(var g in u)for(var o in u[g])if(u[g][o][h]!==void 0)return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||h==="")return!1;var c,u,g=this.styles,o=0,l=!0,d=0;for(var v in g){for(var p in c=0,g[v]){var m;o++,(m=g[v][p]).hasOwnProperty(h)?(u?m[h]!==u&&(l=!1):u=m[h],m[h]===this[h]&&delete m[h]):l=!1,Object.keys(m).length!==0?c++:delete g[v][p]}c===0&&delete g[v]}for(var b=0;b<this._textLines.length;b++)d+=this._textLines[b].length;l&&o===d&&(this[h]=u,this.removeStyle(h))},removeStyle:function(h){if(this.styles&&h&&h!==""){var c,u,g,o=this.styles;for(u in o){for(g in c=o[u])delete c[g][h],Object.keys(c[g]).length===0&&delete c[g];Object.keys(c).length===0&&delete o[u]}}},_extendStyles:function(h,c){var u=this.get2DCursorLocation(h);this._getLineStyle(u.lineIndex)||this._setLineStyle(u.lineIndex),this._getStyleDeclaration(u.lineIndex,u.charIndex)||this._setStyleDeclaration(u.lineIndex,u.charIndex,{}),S.util.object.extend(this._getStyleDeclaration(u.lineIndex,u.charIndex),c)},get2DCursorLocation:function(h,c){h===void 0&&(h=this.selectionStart);for(var u=c?this._unwrappedTextLines:this._textLines,g=u.length,o=0;o<g;o++){if(h<=u[o].length)return{lineIndex:o,charIndex:h};h-=u[o].length+this.missingNewlineOffset(o)}return{lineIndex:o-1,charIndex:u[o-1].length<h?u[o-1].length:h}},getSelectionStyles:function(h,c,u){h===void 0&&(h=this.selectionStart||0),c===void 0&&(c=this.selectionEnd||h);for(var g=[],o=h;o<c;o++)g.push(this.getStyleAtPosition(o,u));return g},getStyleAtPosition:function(h,c){var u=this.get2DCursorLocation(h);return(c?this.getCompleteStyleDeclaration(u.lineIndex,u.charIndex):this._getStyleDeclaration(u.lineIndex,u.charIndex))||{}},setSelectionStyles:function(h,c,u){c===void 0&&(c=this.selectionStart||0),u===void 0&&(u=this.selectionEnd||c);for(var g=c;g<u;g++)this._extendStyles(g,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,c){var u=this.styles&&this.styles[h];return u?u[c]:null},getCompleteStyleDeclaration:function(h,c){for(var u,g=this._getStyleDeclaration(h,c)||{},o={},l=0;l<this._styleProperties.length;l++)o[u=this._styleProperties[l]]=g[u]===void 0?this[u]:g[u];return o},_setStyleDeclaration:function(h,c,u){this.styles[h][c]=u},_deleteStyleDeclaration:function(h,c){delete this.styles[h][c]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}}),function(){function h(c){c.textDecoration&&(c.textDecoration.indexOf("underline")>-1&&(c.underline=!0),c.textDecoration.indexOf("line-through")>-1&&(c.linethrough=!0),c.textDecoration.indexOf("overline")>-1&&(c.overline=!0),delete c.textDecoration)}S.IText=S.util.createClass(S.Text,S.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(c,u){this.callSuper("initialize",c,u),this.initBehavior()},setSelectionStart:function(c){c=Math.max(c,0),this._updateAndFire("selectionStart",c)},setSelectionEnd:function(c){c=Math.min(c,this.text.length),this._updateAndFire("selectionEnd",c)},_updateAndFire:function(c,u){this[c]!==u&&(this._fireSelectionChanged(),this[c]=u),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(c){this.clearContextTop(),this.callSuper("render",c),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(c){this.callSuper("_render",c)},clearContextTop:function(c){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var u=this.canvas.contextTop,g=this.canvas.viewportTransform;u.save(),u.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this.transform(u),this._clearTextArea(u),c||u.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var c=this._getCursorBoundaries(),u=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(c,u):this.renderSelection(c,u),u.restore()}},_clearTextArea:function(c){var u=this.width+4,g=this.height+4;c.clearRect(-u/2,-g/2,u,g)},_getCursorBoundaries:function(c){c===void 0&&(c=this.selectionStart);var u=this._getLeftOffset(),g=this._getTopOffset(),o=this._getCursorBoundariesOffsets(c);return{left:u,top:g,leftOffset:o.left,topOffset:o.top}},_getCursorBoundariesOffsets:function(c){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var u,g,o,l,d=0,v=0,p=this.get2DCursorLocation(c);o=p.charIndex,g=p.lineIndex;for(var m=0;m<g;m++)d+=this.getHeightOfLine(m);u=this._getLineLeftOffset(g);var b=this.__charBounds[g][o];return b&&(v=b.left),this.charSpacing!==0&&o===this._textLines[g].length&&(v-=this._getWidthOfCharSpacing()),l={top:d,left:u+(v>0?v:0)},this.direction==="rtl"&&(l.left*=-1),this.cursorOffsetCache=l,this.cursorOffsetCache},renderCursor:function(c,u){var g=this.get2DCursorLocation(),o=g.lineIndex,l=g.charIndex>0?g.charIndex-1:0,d=this.getValueOfPropertyAt(o,l,"fontSize"),v=this.scaleX*this.canvas.getZoom(),p=this.cursorWidth/v,m=c.topOffset,b=this.getValueOfPropertyAt(o,l,"deltaY");m+=(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-d*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(c,u),u.fillStyle=this.cursorColor||this.getValueOfPropertyAt(o,l,"fill"),u.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,u.fillRect(c.left+c.leftOffset-p/2,m+c.top+b,p,d)},renderSelection:function(c,u){for(var g=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,o=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,d=this.get2DCursorLocation(g),v=this.get2DCursorLocation(o),p=d.lineIndex,m=v.lineIndex,b=d.charIndex<0?0:d.charIndex,C=v.charIndex<0?0:v.charIndex,T=p;T<=m;T++){var I,O=this._getLineLeftOffset(T)||0,A=this.getHeightOfLine(T),F=0,U=0;if(T===p&&(F=this.__charBounds[p][b].left),T>=p&&T<m)U=l&&!this.isEndOfWrapping(T)?this.width:this.getLineWidth(T)||5;else if(T===m)if(C===0)U=this.__charBounds[m][C].left;else{var H=this._getWidthOfCharSpacing();U=this.__charBounds[m][C-1].left+this.__charBounds[m][C-1].width-H}I=A,(this.lineHeight<1||T===m&&this.lineHeight>1)&&(A/=this.lineHeight);var J=c.left+O+F,q=U-F,X=A,N=0;this.inCompositionMode?(u.fillStyle=this.compositionColor||"black",X=1,N=A):u.fillStyle=this.selectionColor,this.direction==="rtl"&&(J=this.width-J-q),u.fillRect(J,c.top+c.topOffset+N,q,X),c.topOffset+=I}},getCurrentCharFontSize:function(){var c=this._getCurrentCharIndex();return this.getValueOfPropertyAt(c.l,c.c,"fontSize")},getCurrentCharColor:function(){var c=this._getCurrentCharIndex();return this.getValueOfPropertyAt(c.l,c.c,"fill")},_getCurrentCharIndex:function(){var c=this.get2DCursorLocation(this.selectionStart,!0),u=c.charIndex>0?c.charIndex-1:0;return{l:c.lineIndex,c:u}}}),S.IText.fromObject=function(c,u){if(h(c),c.styles)for(var g in c.styles)for(var o in c.styles[g])h(c.styles[g][o]);S.Object._fromObject("IText",c,u,"text")}}(),z=S.util.object.clone,S.util.object.extend(S.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var h=this;this.on("added",function(){var c=h.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,h._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(h))})},initRemovedHandler:function(){var h=this;this.on("removed",function(){var c=h.canvas;c&&(c._iTextInstances=c._iTextInstances||[],S.util.removeFromArray(c._iTextInstances,h),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,h._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(h){h._mouseUpITextHandler=function(){h._iTextInstances&&h._iTextInstances.forEach(function(c){c.__isMousedown=!1})},h.on("mouse:up",h._mouseUpITextHandler)},_removeCanvasHandlers:function(h){h.off("mouse:up",h._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(h,c,u,g){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},h.animate("_currentCursorOpacity",c,{duration:u,onComplete:function(){o.isAborted||h[g]()},onChange:function(){h.canvas&&h.selectionStart===h.selectionEnd&&h.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var h=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){h._currentTickCompleteState=h._animateCursor(h,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(h){var c=this,u=h?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},u)},abortCursorAnimation:function(){var h=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,h&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(h){var c=0,u=h-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)c++,u--;for(;/\S/.test(this._text[u])&&u>-1;)c++,u--;return h-c},findWordBoundaryRight:function(h){var c=0,u=h;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)c++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)c++,u++;return h+c},findLineBoundaryLeft:function(h){for(var c=0,u=h-1;!/\n/.test(this._text[u])&&u>-1;)c++,u--;return h-c},findLineBoundaryRight:function(h){for(var c=0,u=h;!/\n/.test(this._text[u])&&u<this._text.length;)c++,u++;return h+c},searchWordBoundary:function(h,c){for(var u=this._text,g=this._reSpace.test(u[h])?h-1:h,o=u[g],l=S.reNonWord;!l.test(o)&&g>0&&g<u.length;)o=u[g+=c];return l.test(o)&&(g+=c===1?0:1),g},selectWord:function(h){h=h||this.selectionStart;var c=this.searchWordBoundary(h,-1),u=this.searchWordBoundary(h,1);this.selectionStart=c,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(h){h=h||this.selectionStart;var c=this.findLineBoundaryLeft(h),u=this.findLineBoundaryRight(h);return this.selectionStart=c,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(h){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(h),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(h){h._iTextInstances&&h._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(h){if(this.__isMousedown&&this.isEditing){var c=this.getSelectionStartFromPointer(h.e),u=this.selectionStart,g=this.selectionEnd;(c===this.__selectionStartOnMouseDown&&u!==g||u!==c&&g!==c)&&(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===u&&this.selectionEnd===g||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(h,c,u){var g=u.slice(0,h),o=S.util.string.graphemeSplit(g).length;if(h===c)return{selectionStart:o,selectionEnd:o};var l=u.slice(h,c);return{selectionStart:o,selectionEnd:o+S.util.string.graphemeSplit(l).length}},fromGraphemeToStringSelection:function(h,c,u){var g=u.slice(0,h).join("").length;return h===c?{selectionStart:g,selectionEnd:g}:{selectionStart:g,selectionEnd:g+u.slice(h,c).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var h=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=h.selectionStart,this.hiddenTextarea.selectionEnd=h.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var h=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=h.selectionEnd,this.inCompositionMode||(this.selectionStart=h.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var h=this._calcTextareaPosition();this.hiddenTextarea.style.left=h.left,this.hiddenTextarea.style.top=h.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var h=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(h),u=this.get2DCursorLocation(h),g=u.lineIndex,o=u.charIndex,l=this.getValueOfPropertyAt(g,o,"fontSize")*this.lineHeight,d=c.leftOffset,v=this.calcTransformMatrix(),p={x:c.left+d,y:c.top+c.topOffset+l},m=this.canvas.getRetinaScaling(),b=this.canvas.upperCanvasEl,C=b.width/m,T=b.height/m,I=C-l,O=T-l,A=b.clientWidth/C,F=b.clientHeight/T;return p=S.util.transformPoint(p,v),(p=S.util.transformPoint(p,this.canvas.viewportTransform)).x*=A,p.y*=F,p.x<0&&(p.x=0),p.x>I&&(p.x=I),p.y<0&&(p.y=0),p.y>O&&(p.y=O),p.x+=this.canvas._offset.left,p.y+=this.canvas._offset.top,{left:p.x+"px",top:p.y+"px",fontSize:l+"px",charHeight:l}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var h=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),h&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),h&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var h in this.styles)this._textLines[h]||delete this.styles[h]},removeStyleFromTo:function(h,c){var u,g,o=this.get2DCursorLocation(h,!0),l=this.get2DCursorLocation(c,!0),d=o.lineIndex,v=o.charIndex,p=l.lineIndex,m=l.charIndex;if(d!==p){if(this.styles[d])for(u=v;u<this._unwrappedTextLines[d].length;u++)delete this.styles[d][u];if(this.styles[p])for(u=m;u<this._unwrappedTextLines[p].length;u++)(g=this.styles[p][u])&&(this.styles[d]||(this.styles[d]={}),this.styles[d][v+u-m]=g);for(u=d+1;u<=p;u++)delete this.styles[u];this.shiftLineStyles(p,d-p)}else if(this.styles[d]){g=this.styles[d];var b,C,T=m-v;for(u=v;u<m;u++)delete g[u];for(C in this.styles[d])(b=parseInt(C,10))>=m&&(g[b-T]=g[C],delete g[C])}},shiftLineStyles:function(h,c){var u=z(this.styles);for(var g in this.styles){var o=parseInt(g,10);o>h&&(this.styles[o+c]=u[o],u[o-c]||delete this.styles[o])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(h,c,u,g){var o,l={},d=!1,v=this._unwrappedTextLines[h].length===c;for(var p in u||(u=1),this.shiftLineStyles(h,u),this.styles[h]&&(o=this.styles[h][c===0?c:c-1]),this.styles[h]){var m=parseInt(p,10);m>=c&&(d=!0,l[m-c]=this.styles[h][p],v&&c===0||delete this.styles[h][p])}var b=!1;for(d&&!v&&(this.styles[h+u]=l,b=!0),b&&u--;u>0;)g&&g[u-1]?this.styles[h+u]={0:z(g[u-1])}:o?this.styles[h+u]={0:z(o)}:delete this.styles[h+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(h,c,u,g){this.styles||(this.styles={});var o=this.styles[h],l=o?z(o):{};for(var d in u||(u=1),l){var v=parseInt(d,10);v>=c&&(o[v+u]=l[v],l[v-u]||delete o[v])}if(this._forceClearCache=!0,g)for(;u--;)Object.keys(g[u]).length&&(this.styles[h]||(this.styles[h]={}),this.styles[h][c+u]=z(g[u]));else if(o)for(var p=o[c?c-1:1];p&&u--;)this.styles[h][c+u]=z(p)},insertNewStyleBlock:function(h,c,u){for(var g=this.get2DCursorLocation(c,!0),o=[0],l=0,d=0;d<h.length;d++)h[d]===`
`?o[++l]=0:o[l]++;for(o[0]>0&&(this.insertCharStyleObject(g.lineIndex,g.charIndex,o[0],u),u=u&&u.slice(o[0]+1)),l&&this.insertNewlineStyleObject(g.lineIndex,g.charIndex+o[0],l),d=1;d<l;d++)o[d]>0?this.insertCharStyleObject(g.lineIndex+d,0,o[d],u):u&&this.styles[g.lineIndex+d]&&u[0]&&(this.styles[g.lineIndex+d][0]=u[0]),u=u&&u.slice(o[d]+1);o[d]>0&&this.insertCharStyleObject(g.lineIndex+d,0,o[d],u)},setSelectionStartEndWithShift:function(h,c,u){u<=h?(c===h?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=h),this.selectionStart=u):u>h&&u<c?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(c===h?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=u)},setSelectionInBoundaries:function(){var h=this.text.length;this.selectionStart>h?this.selectionStart=h:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>h?this.selectionEnd=h:this.selectionEnd<0&&(this.selectionEnd=0)}}),S.util.object.extend(S.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(this.canvas){this.__newClickTime=+new Date;var c=h.pointer;this.isTripleClick(c)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=c,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&h.e.button!==1)){if(this.canvas){var c=this.canvas._activeObject;if(c&&c!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var c=this.getSelectionStartFromPointer(h),u=this.selectionStart,g=this.selectionEnd;h.shiftKey?this.setSelectionStartEndWithShift(u,g,c):(this.selectionStart=c,this.selectionEnd=c),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var c,u=this.getLocalPointer(h),g=0,o=0,l=0,d=0,v=0,p=0,m=this._textLines.length;p<m&&l<=u.y;p++)l+=this.getHeightOfLine(p)*this.scaleY,v=p,p>0&&(d+=this._textLines[p-1].length+this.missingNewlineOffset(p-1));o=this._getLineLeftOffset(v)*this.scaleX,c=this._textLines[v],this.direction==="rtl"&&(u.x=this.width*this.scaleX-u.x+o);for(var b=0,C=c.length;b<C&&(g=o,(o+=this.__charBounds[v][b].kernedWidth*this.scaleX)<=u.x);b++)d++;return this._getNewSelectionStartFromOffset(u,g,o,d,C)},_getNewSelectionStartFromOffset:function(h,c,u,g,o){var l=h.x-c,d=u-h.x,v=g+(d>l||d<0?0:1);return this.flipX&&(v=o-v),v>this._text.length&&(v=this._text.length),v}}),S.util.object.extend(S.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=S.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):S.document.body.appendChild(this.hiddenTextarea),S.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),S.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),S.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),S.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),S.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),S.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),S.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),S.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),S.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(S.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(this.isEditing){var c=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(h.keyCode in c)this[c[h.keyCode]](h);else{if(!(h.keyCode in this.ctrlKeysMapDown)||!h.ctrlKey&&!h.metaKey)return;this[this.ctrlKeysMapDown[h.keyCode]](h)}h.stopImmediatePropagation(),h.preventDefault(),h.keyCode>=33&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey)&&(this[this.ctrlKeysMapUp[h.keyCode]](h),h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(h){var c=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),this.isEditing){var u,g,o,l,d,v=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,p=this._text.length,m=v.length,b=m-p,C=this.selectionStart,T=this.selectionEnd,I=C!==T;if(this.hiddenTextarea.value==="")return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var O=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),A=C>O.selectionStart;I?(u=this._text.slice(C,T),b+=T-C):m<p&&(u=A?this._text.slice(T+b,T):this._text.slice(C,C-b)),g=v.slice(O.selectionEnd-b,O.selectionEnd),u&&u.length&&(g.length&&(o=this.getSelectionStyles(C,C+1,!1),o=g.map(function(){return o[0]})),I?(l=C,d=T):A?(l=T-u.length,d=T):(l=T,d=T+u.length),this.removeStyleFromTo(l,d)),g.length&&(c&&g.join("")===S.copiedText&&!S.disableStyleCopyPaste&&(o=S.copiedTextStyle),this.insertNewStyleBlock(g,C,o)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(S.copiedText=this.getSelectedText(),S.disableStyleCopyPaste?S.copiedTextStyle=null:S.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||S.window.clipboardData},_getWidthBeforeCursor:function(h,c){var u,g=this._getLineLeftOffset(h);return c>0&&(g+=(u=this.__charBounds[h][c-1]).left+u.width),g},getDownCursorOffset:function(h,c){var u=this._getSelectionForOffset(h,c),g=this.get2DCursorLocation(u),o=g.lineIndex;if(o===this._textLines.length-1||h.metaKey||h.keyCode===34)return this._text.length-u;var l=g.charIndex,d=this._getWidthBeforeCursor(o,l),v=this._getIndexOnLine(o+1,d);return this._textLines[o].slice(l).length+v+1+this.missingNewlineOffset(o)},_getSelectionForOffset:function(h,c){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&c?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,c){var u=this._getSelectionForOffset(h,c),g=this.get2DCursorLocation(u),o=g.lineIndex;if(o===0||h.metaKey||h.keyCode===33)return-u;var l=g.charIndex,d=this._getWidthBeforeCursor(o,l),v=this._getIndexOnLine(o-1,d),p=this._textLines[o].slice(0,l),m=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+v-p.length+(1-m)},_getIndexOnLine:function(h,c){for(var u,g,o=this._textLines[h],l=this._getLineLeftOffset(h),d=0,v=0,p=o.length;v<p;v++)if((l+=u=this.__charBounds[h][v].width)>c){g=!0;var m=l-u,b=l,C=Math.abs(m-c);d=Math.abs(b-c)<C?v:v-1;break}return g||(d=o.length-1),d},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,c){var u=this["get"+h+"CursorOffset"](c,this._selectionDirection==="right");c.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){var c=this._selectionDirection==="left"?this.selectionStart+h:this.selectionEnd+h;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,c),h!==0},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),h!==0},moveCursorLeft:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",h)},_move:function(h,c,u){var g;if(h.altKey)g=this["findWordBoundary"+u](this[c]);else{if(!h.metaKey&&h.keyCode!==35&&h.keyCode!==36)return this[c]+=u==="Left"?-1:1,!0;g=this["findLineBoundary"+u](this[c])}if(typeof g!==void 0&&this[c]!==g)return this[c]=g,!0},_moveLeft:function(h,c){return this._move(h,c,"Left")},_moveRight:function(h,c){return this._move(h,c,"Right")},moveCursorLeftWithoutShift:function(h){var c=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(c=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,c},moveCursorLeftWithShift:function(h){return this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd?this._moveLeft(h,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection="left",this._moveLeft(h,"selectionStart")):void 0},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,c){var u="moveCursor"+h+"With";this._currentCursorOpacity=1,c.shiftKey?u+="Shift":u+="outShift",this[u](c)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){return this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd?this._moveRight(h,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(h,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(h){var c=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(c=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,c},removeChars:function(h,c){c===void 0&&(c=h+1),this.removeStyleFromTo(h,c),this._text.splice(h,c-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,c,u,g){g===void 0&&(g=u),g>u&&this.removeStyleFromTo(u,g);var o=S.util.string.graphemeSplit(h);this.insertNewStyleBlock(o,u,c),this._text=[].concat(this._text.slice(0,u),o,this._text.slice(g)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=S.util.toFixed,c=/  +/g;S.util.object.extend(S.Text.prototype,{_toSVG:function(){var u=this._getSVGLeftTopOffsets(),g=this._getSVGTextAndBg(u.textTop,u.textLeft);return this._wrapSVGTextAndBg(g)},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(u){var g=this.getSvgTextDecoration(this);return[u.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",g?'text-decoration="'+g+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",u.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(u,g){var o,l=[],d=[],v=u;this._setSVGBg(d);for(var p=0,m=this._textLines.length;p<m;p++)o=this._getLineLeftOffset(p),(this.textBackgroundColor||this.styleHas("textBackgroundColor",p))&&this._setSVGTextLineBg(d,p,g+o,v),this._setSVGTextLineText(l,p,g+o,v),v+=this.getHeightOfLine(p);return{textSpans:l,textBgRects:d}},_createTextCharSpan:function(u,g,o,l){var d=u!==u.trim()||u.match(c),v=this.getSvgSpanStyles(g,d),p=v?'style="'+v+'"':"",m=g.deltaY,b="",C=S.Object.NUM_FRACTION_DIGITS;return m&&(b=' dy="'+h(m,C)+'" '),['<tspan x="',h(o,C),'" y="',h(l,C),'" ',b,p,">",S.util.string.escapeXml(u),"</tspan>"].join("")},_setSVGTextLineText:function(u,g,o,l){var d,v,p,m,b,C=this.getHeightOfLine(g),T=this.textAlign.indexOf("justify")!==-1,I="",O=0,A=this._textLines[g];l+=C*(1-this._fontSizeFraction)/this.lineHeight;for(var F=0,U=A.length-1;F<=U;F++)b=F===U||this.charSpacing,I+=A[F],p=this.__charBounds[g][F],O===0?(o+=p.kernedWidth-p.width,O+=p.width):O+=p.kernedWidth,T&&!b&&this._reSpaceAndTab.test(A[F])&&(b=!0),b||(d=d||this.getCompleteStyleDeclaration(g,F),v=this.getCompleteStyleDeclaration(g,F+1),b=this._hasStyleChangedForSvg(d,v)),b&&(m=this._getStyleDeclaration(g,F)||{},u.push(this._createTextCharSpan(I,m,o,l)),I="",d=v,o+=O,O=0)},_pushTextBgRect:function(u,g,o,l,d,v){var p=S.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(g),' x="',h(o,p),'" y="',h(l,p),'" width="',h(d,p),'" height="',h(v,p),`"></rect>
`)},_setSVGTextLineBg:function(u,g,o,l){for(var d,v,p=this._textLines[g],m=this.getHeightOfLine(g)/this.lineHeight,b=0,C=0,T=this.getValueOfPropertyAt(g,0,"textBackgroundColor"),I=0,O=p.length;I<O;I++)d=this.__charBounds[g][I],(v=this.getValueOfPropertyAt(g,I,"textBackgroundColor"))!==T?(T&&this._pushTextBgRect(u,T,o+C,l,b,m),C=d.left,b=d.width,T=v):b+=d.kernedWidth;v&&this._pushTextBgRect(u,v,o+C,l,b,m)},_getFillAttributes:function(u){var g=u&&typeof u=="string"?new S.Color(u):"";return g&&g.getSource()&&g.getAlpha()!==1?'opacity="'+g.getAlpha()+'" fill="'+g.setAlpha(1).toRgb()+'"':'fill="'+u+'"'},_getSVGLineTopOffset:function(u){for(var g,o=0,l=0;l<u;l++)o+=this.getHeightOfLine(l);return g=this.getHeightOfLine(l),{lineTop:o,offset:(this._fontSizeMult-this._fontSizeFraction)*g/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(u){return S.Object.prototype.getSvgStyles.call(this,u)+" white-space: pre;"}})}(),function(h){var c=h.fabric||(h.fabric={});c.Textbox=c.util.createClass(c.IText,c.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:c.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(u){for(var g=0,o=0,l=0,d={},v=0;v<u.graphemeLines.length;v++)u.graphemeText[l]===`
`&&v>0?(o=0,l++,g++):!this.splitByGrapheme&&this._reSpaceAndTab.test(u.graphemeText[l])&&v>0&&(o++,l++),d[v]={line:g,offset:o},l+=u.graphemeLines[v].length,o+=u.graphemeLines[v].length;return d},styleHas:function(u,g){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[g];o&&(g=o.line)}return c.Text.prototype.styleHas.call(this,u,g)},isEmptyStyles:function(u){if(!this.styles)return!0;var g,o,l=0,d=!1,v=this._styleMap[u],p=this._styleMap[u+1];for(var m in v&&(u=v.line,l=v.offset),p&&(d=p.line===u,g=p.offset),o=u===void 0?this.styles:{line:this.styles[u]})for(var b in o[m])if(b>=l&&(!d||b<g))for(var C in o[m][b])return!1;return!0},_getStyleDeclaration:function(u,g){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[u];if(!o)return null;u=o.line,g=o.offset+g}return this.callSuper("_getStyleDeclaration",u,g)},_setStyleDeclaration:function(u,g,o){var l=this._styleMap[u];u=l.line,g=l.offset+g,this.styles[u][g]=o},_deleteStyleDeclaration:function(u,g){var o=this._styleMap[u];u=o.line,g=o.offset+g,delete this.styles[u][g]},_getLineStyle:function(u){var g=this._styleMap[u];return!!this.styles[g.line]},_setLineStyle:function(u){var g=this._styleMap[u];this.styles[g.line]={}},_wrapText:function(u,g){var o,l=[];for(this.isWrapping=!0,o=0;o<u.length;o++)l=l.concat(this._wrapLine(u[o],o,g));return this.isWrapping=!1,l},_measureWord:function(u,g,o){var l,d=0;o=o||0;for(var v=0,p=u.length;v<p;v++)d+=this._getGraphemeBox(u[v],g,v+o,l,!0).kernedWidth,l=u[v];return d},_wrapLine:function(u,g,o,l){var d=0,v=this.splitByGrapheme,p=[],m=[],b=v?c.util.string.graphemeSplit(u):u.split(this._wordJoiners),C="",T=0,I=v?"":" ",O=0,A=0,F=0,U=!0,H=this._getWidthOfCharSpacing();l=l||0,b.length===0&&b.push([]),o-=l;for(var J=0;J<b.length;J++)C=v?b[J]:c.util.string.graphemeSplit(b[J]),O=this._measureWord(C,g,T),T+=C.length,(d+=A+O-H)>o&&!U?(p.push(m),m=[],d=O,U=!0):d+=H,U||v||m.push(I),m=m.concat(C),A=v?0:this._measureWord([I],g,T),T++,U=!1,O>F&&(F=O);return J&&p.push(m),F+l>this.dynamicMinWidth&&(this.dynamicMinWidth=F-H+l),p},isEndOfWrapping:function(u){return!this._styleMap[u+1]||this._styleMap[u+1].line!==this._styleMap[u].line},missingNewlineOffset:function(u){return this.splitByGrapheme?this.isEndOfWrapping(u)?1:0:1},_splitTextIntoLines:function(u){for(var g=c.Text.prototype._splitTextIntoLines.call(this,u),o=this._wrapText(g.lines,this.width),l=new Array(o.length),d=0;d<o.length;d++)l[d]=o[d].join("");return g.lines=l,g.graphemeLines=o,g},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var u={};for(var g in this._styleMap)this._textLines[g]&&(u[this._styleMap[g].line]=1);for(var g in this.styles)u[g]||delete this.styles[g]},toObject:function(u){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(u))}}),c.Textbox.fromObject=function(u,g){return c.Object._fromObject("Textbox",u,g,"text")}}(e),function(){var h=S.controlsUtils,c=h.scaleSkewCursorStyleHandler,u=h.scaleCursorStyleHandler,g=h.scalingEqually,o=h.scalingYOrSkewingX,l=h.scalingXOrSkewingY,d=h.scaleOrSkewActionName,v=S.Object.prototype.controls;if(v.ml=new S.Control({x:-.5,y:0,cursorStyleHandler:c,actionHandler:l,getActionName:d}),v.mr=new S.Control({x:.5,y:0,cursorStyleHandler:c,actionHandler:l,getActionName:d}),v.mb=new S.Control({x:0,y:.5,cursorStyleHandler:c,actionHandler:o,getActionName:d}),v.mt=new S.Control({x:0,y:-.5,cursorStyleHandler:c,actionHandler:o,getActionName:d}),v.tl=new S.Control({x:-.5,y:-.5,cursorStyleHandler:u,actionHandler:g}),v.tr=new S.Control({x:.5,y:-.5,cursorStyleHandler:u,actionHandler:g}),v.bl=new S.Control({x:-.5,y:.5,cursorStyleHandler:u,actionHandler:g}),v.br=new S.Control({x:.5,y:.5,cursorStyleHandler:u,actionHandler:g}),v.mtr=new S.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),S.Textbox){var p=S.Textbox.prototype.controls={};p.mtr=v.mtr,p.tr=v.tr,p.br=v.br,p.tl=v.tl,p.bl=v.bl,p.mt=v.mt,p.mb=v.mb,p.mr=new S.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:c,actionName:"resizing"}),p.ml=new S.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:c,actionName:"resizing"})}}()},192:()=>{},898:()=>{},245:()=>{}},gp={};function In(t){var e=gp[t];if(e!==void 0)return e.exports;var i=gp[t]={exports:{}};return RT[t](i,i.exports,In),i.exports}In.d=(t,e)=>{for(var i in e)In.o(e,i)&&!In.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},In.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var D_={};(()=>{let t;In.d(D_,{R:()=>t}),t=typeof document<"u"&&typeof window<"u"?In(653).fabric:{version:"5.2.1"}})();var Ee=D_.R;/*!
 * Dynamsoft JavaScript Library
 * @product Dynamsoft Camera Enhancer JS Edition
 * @website https://www.dynamsoft.com
 * @copyright Copyright 2023, Dynamsoft Corporation
 * @author Dynamsoft
 * @version 3.3.4 (js 20230414)
 * @fileoverview Dynamsoft JavaScript Library for Camera Enhancer
 * More info on DCE JS: https://www.dynamsoft.com/camera-enhancer/docs/programming/javascript/?ver=latest
 */const dl=typeof self>"u";let Kr,Pi,_s,Sa,Ze;if(typeof navigator<"u"&&(Kr=navigator,Pi=Kr.userAgent,_s=Kr.platform,Sa=Kr.mediaDevices),!dl){const t={Edge:{search:"Edg",verSearch:"Edg"},OPR:null,Chrome:null,Safari:{str:Kr.vendor,search:"Apple",verSearch:["Version","iPhone OS","CPU OS"]},Firefox:null,Explorer:{search:"MSIE",verSearch:"MSIE"}},e={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:_s,search:"Win"},Mac:{str:_s},Linux:{str:_s}};let i="unknownBrowser",n=0,r="unknownOS";for(let s in t){const a=t[s]||{};let f=a.str||Pi,_=a.search||s,y=a.verStr||Pi,w=a.verSearch||s;if(w instanceof Array||(w=[w]),f.indexOf(_)!=-1){i=s;for(let x of w){let E=y.indexOf(x);if(E!=-1){n=parseFloat(y.substring(E+x.length+1));break}}break}}for(let s in e){const a=e[s]||{};let f=a.str||Pi,_=a.search||s;if(f.indexOf(_)!=-1){r=s;break}}r=="Linux"&&Pi.indexOf("Windows NT")!=-1&&(r="HarmonyOS"),Ze={browser:i,version:n,OS:r}}dl&&(Ze={browser:"ssr",version:0,OS:"ssr"});const AT=typeof WebAssembly<"u"&&Pi&&!(/Safari/.test(Pi)&&!/Chrome/.test(Pi)&&/\(.+\s11_2_([2-6]).*\)/.test(Pi)),kT=!(typeof Worker>"u"),L_=!(!Sa||!Sa.getUserMedia),DT=async()=>{let t=!1;if(L_)try{(await Sa.getUserMedia({video:!0})).getTracks().forEach(e=>{e.stop()}),t=!0}catch(e){}return t};Ze.browser==="Chrome"&&Ze.version>66||Ze.browser==="Safari"&&Ze.version>13||Ze.browser==="OPR"&&Ze.version>43||Ze.browser==="Edge"&&Ze.version;const LT=(()=>{if(!dl&&document.currentScript){let t=document.currentScript.src,e=t.indexOf("?");if(e!=-1)t=t.substring(0,e);else{let i=t.indexOf("#");i!=-1&&(t=t.substring(0,i))}return t.substring(0,t.lastIndexOf("/")+1)}return"./"})();class $t{constructor(e,i){this._zIndex=null,this._drawingLayer=null,this._drawingLayerId=null,this._mapStyle=new Map,this.mapEvent_Callbacks=new Map([["selected",new Map],["deselected",new Map],["mousedown",new Map],["mouseup",new Map],["dblclick",new Map],["mouseover",new Map],["mouseout",new Map]]),this.mapNoteName_Content=new Map([]),this.isDrawingItem=!0,this._setFabricObject(e),this._mediaType=e.type,this.styleSelector="default",this.styleId=i}get mediaType(){return this._mediaType}get drawingLayerId(){return this._drawingLayerId}_setFabricObject(e){this._fabricObject=e,this._fabricObject.on("selected",()=>{this.styleSelector="selected"}),this._fabricObject.on("deselected",()=>{this._fabricObject.canvas&&this._fabricObject.canvas.getActiveObjects().includes(this._fabricObject)?this.styleSelector="selected":this.styleSelector="default",this._fabricObject.type==="textbox"&&(this._fabricObject.isEditing&&this._fabricObject.exitEditing(),this._fabricObject.selected=!1)}),e.getDrawingItem=()=>this}_getFabricObject(){return this._fabricObject}_on(e,i){if(!i)return;const n=e.toLowerCase(),r=this.mapEvent_Callbacks.get(n);if(!r)throw new Error(`Event '${e}' does not exist.`);let s=r.get(i);s||(s=a=>{const f=a.e;if(!f)return void(i&&i.apply(this,[{targetItem:this,itemClientX:null,itemClientY:null,itemPageX:null,itemPageY:null}]));const _={targetItem:this,itemClientX:null,itemClientY:null,itemPageX:null,itemPageY:null};if(this._drawingLayer){let y,w,x,E;const k=f.target.getBoundingClientRect();y=k.left,w=k.top,x=y+window.scrollX,E=w+window.scrollY;const P=this._drawingLayer.fabricCanvas.lowerCanvasEl.width,M=this._drawingLayer.fabricCanvas.lowerCanvasEl.height,V=parseFloat(window.getComputedStyle(this._drawingLayer.fabricCanvas.lowerCanvasEl).width),L=parseFloat(window.getComputedStyle(this._drawingLayer.fabricCanvas.lowerCanvasEl).height),R=V/L,D=P/M,Y=this._drawingLayer._getObjectFit();let ie,oe,z,S,he=1;if(Y==="contain")R<D?(he=V/P,ie=y+this.get("x")*he,oe=w+this.get("y")*he+(L-M*he)/2,z=x+this.get("x")*he,S=E+this.get("y")*he+(L-M*he)/2):(he=L/M,ie=y+this.get("x")*he+(V-P*he)/2,oe=w+this.get("y")*he,z=x+this.get("x")*he+(V-P*he)/2,S=E+this.get("y")*he);else if(Y==="cover")if(R<D){he=L/M;let le=this.get("x")*he-(P*he-V)/2;le=Math.max(le,0),le=Math.min(le,V),ie=y+le,oe=w+this.get("y")*he,z=x+le,S=E+this.get("y")*he}else{he=V/P;let le=this.get("y")*he-(M*he-L)/2;le=Math.max(le,0),le=Math.min(le,L),ie=y+this.get("x")*he,oe=w+le,z=x+this.get("x")*he,S=E+le}_.itemClientX=Math.round(ie),_.itemClientY=Math.round(oe),_.itemPageX=Math.round(z),_.itemPageY=Math.round(S)}for(let y of Object.getOwnPropertyNames(_))Object.defineProperty(f,y,{value:_[y],writable:!0});i&&i.apply(this,[f])},r.set(i,s),this._fabricObject.on(n==="dblclick"?"mousedblclick":n,s))}on(e,i){this._on(e,i)}_off(e,i){const n=e.toLowerCase(),r=this.mapEvent_Callbacks.get(n);if(!r)throw new Error(`Event '${e}' does not exist.`);let s=r.get(i);s&&(r.delete(i),this._fabricObject.off(n==="dblclick"?"mousedblclick":n,s))}off(e,i){this._off(e,i)}_setEditable(e){const i=this._fabricObject;e?(i.selectable=!0,i.hasControls=!0,i.hoverCursor=null):(i.selectable=!1,i.hasControls=!1,i.hoverCursor="default")}hasNote(e){return this.mapNoteName_Content.has(e)}addNote(e,i){if(this.hasNote(e.name)&&!i)throw new Error("A note with the same name already exists, please use a different name.");const n=e.content?JSON.parse(JSON.stringify(e.content)):e.content;this.mapNoteName_Content.set(e.name,[n])}getNote(e){const i=this.mapNoteName_Content.get(e);return i?i.length===1?{name:e,content:i[0]?JSON.parse(JSON.stringify(i[0])):i[0]}:{name:e,content:JSON.parse(JSON.stringify(i))}:null}getNotes(){const e=[];for(let i of this.mapNoteName_Content){let n=i[1].length===1?i[1][0]:i[1];n=n&&JSON.parse(JSON.stringify(n)),e.push({name:i[0],content:n})}return e}updateNote(e,i,n){const r=this.mapNoteName_Content.get(e);if(!r)throw new Error("The note name does not exist.");n||(r.length=0),i=i&&JSON.parse(JSON.stringify(i)),r.push(i)}deleteNote(e){this.mapNoteName_Content.delete(e)}clearNotes(){this.mapNoteName_Content.clear()}_extendSet(e,i){return!1}_extendGet(e){}set(e,i){if(!this._extendSet(e,i))if(e==="x"){const n=this._fabricObject.group;n?(this._fabricObject.set("left",i-n.left-n.width/2),n.addWithUpdate()):this._fabricObject.set("left",i)}else if(e==="y"){const n=this._fabricObject.group;n?(this._fabricObject.set("top",i-n.top-n.height/2),n.addWithUpdate()):this._fabricObject.set("top",i)}else e==="styleId"?this.styleId=i:this._fabricObject.set(e,i);["vertices","startPoint","endPoint","x","y","left","top","width","height","scaleX","scaleY","skewX","skewY","padding","angle","strokeWidth"].includes(e)&&this._fabricObject.setCoords()}get(e){let i=this._extendGet(e);if(i===void 0)if(e==="x"){const n=this._fabricObject.group;i=n?this._fabricObject.get("left")+n.left+n.width/2:this._fabricObject.get("left")}else if(e==="y"){const n=this._fabricObject.group;i=n?this._fabricObject.get("top")+n.top+n.height/2:this._fabricObject.get("top")}else i=["type","mediaType"].includes(e)?this.mediaType:e==="styleSelector"?this.styleSelector:e==="styleId"?this.styleId:e==="drawingLayerId"?this.drawingLayerId:this._fabricObject.get(e);return i}setAttribute(e,i){this.set(e,i)}getAttribute(e){return this.get(e)}}function uu(t,e,i){let n=i.points[this.pointIndex].x-i.pathOffset.x,r=i.points[this.pointIndex].y-i.pathOffset.y;return Ee.util.transformPoint({x:n,y:r},i.calcTransformMatrix())}function P_(t){let e=new Ee.Point(t.strokeUniform?1/t.scaleX:1,t.strokeUniform?1/t.scaleY:1).multiply(t.strokeWidth);return new Ee.Point(t.width+e.x,t.height+e.y)}function hu(t,e,i,n){let r=e.target,s=r.controls[r.__corner],a=r.toLocalPoint(new Ee.Point(i,n),"center","center"),f=P_(r),_=r._getTransformedDimensions(0,0),y={x:a.x*f.x/_.x+r.pathOffset.x,y:a.y*f.y/_.y+r.pathOffset.y};return r.points[s.pointIndex]=y,!0}function du(t,e){return function(i,n,r,s){let a=n.target,f=Ee.util.transformPoint({x:a.points[t].x-a.pathOffset.x,y:a.points[t].y-a.pathOffset.y},a.calcTransformMatrix()),_=e(i,n,r,s);a._setPositionDimensions({});let y=P_(a),w=(a.points[t].x-a.pathOffset.x)/y.x,x=(a.points[t].y-a.pathOffset.y)/y.y;return a.setPositionByOrigin(f,w+.5,x+.5),_}}$t.arrMediaTypes=["rect","arc","polygon","image","text","line","path"],$t.arrStyleSelectors=["default","selected"];class mp extends $t{constructor(e,i){super(new Ee.Polygon(e,{objectCaching:!1}),i);const n=this._fabricObject;let r=n.points.length-1;n.controls=n.points.reduce(function(s,a,f){return s["p"+f]=new Ee.Control({positionHandler:uu,actionHandler:du(f>0?f-1:r,hu),actionName:"modifyPolygon",pointIndex:f}),s},{})}_extendSet(e,i){if(e==="vertices"){const n=this._fabricObject;if(n.group){const s=n.group;n.points=i.map(a=>({x:a.x-s.left-s.width/2,y:a.y-s.top-s.height/2})),s.addWithUpdate()}else n.points=i;const r=n.points.length-1;return n.controls=n.points.reduce(function(s,a,f){return s["p"+f]=new Ee.Control({positionHandler:uu,actionHandler:du(f>0?f-1:r,hu),actionName:"modifyPolygon",pointIndex:f}),s},{}),n._setPositionDimensions({}),!0}}_extendGet(e){if(e==="vertices"){const i=[],n=this._fabricObject;if(n.selectable&&!n.group)for(let r in n.oCoords)i.push({x:n.oCoords[r].x,y:n.oCoords[r].y});else for(let r of n.points){let s=r.x-n.pathOffset.x,a=r.y-n.pathOffset.y;const f=Ee.util.transformPoint({x:s,y:a},n.calcTransformMatrix());i.push({x:f.x,y:f.y})}return i}}}const vp=t=>{let e=(i=>i.split(`
`).map(n=>n.split("	")))(t);return(i=>{for(let n=0;;n++){let r=-1;for(let s=0;s<i.length;s++){let a=i[s][n];a!==void 0&&a.length>r&&(r=a.length)}if(r===-1)break;for(let s=0;s<i.length;s++){if(n>=i[s].length-1)continue;let a=" ".repeat(r+2-i[s][n].length);i[s][n]=i[s][n].concat(a)}}})(e),(i=>{let n="";for(let r=0;r<i.length;r++)n=n.concat(...i[r],r===i.length-1?"":`
`);return n})(e)};class M_ extends $t{constructor(e,i,n,r,s){if(typeof r!="number"||r<=0)throw new RangeError("Invalid width.");super(new Ee.Textbox(vp(e),{left:i,top:n,width:r}),s),this._mediaType="text",this._text=e}_extendSet(e,i){if(e==="text")return this._text=i,this._fabricObject.set("text",vp(i)),!0}_extendGet(e){if(e==="text")return this._text}}typeof document<"u"&&typeof window<"u"&&(Ee.StaticCanvas.prototype.dispose=function(){return this.isRendering&&(Ee.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),Ee.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},Ee.Object.prototype.transparentCorners=!1,Ee.Object.prototype.cornerSize=20,Ee.Object.prototype.touchCornerSize=100,Ee.Object.prototype.cornerColor="rgb(254,142,20)",Ee.Object.prototype.cornerStyle="circle",Ee.Object.prototype.strokeUniform=!0,Ee.Object.prototype.hasBorders=!1,Ee.Canvas.prototype.containerClass="",Ee.Canvas.prototype.getPointer=function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var i,n=this.upperCanvasEl,r=Ee.util.getPointer(t,n),s=n.getBoundingClientRect(),a=s.width||0,f=s.height||0;a&&f||("top"in s&&"bottom"in s&&(f=Math.abs(s.top-s.bottom)),"right"in s&&"left"in s&&(a=Math.abs(s.right-s.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,e||(r=this.restorePointerVpt(r));var _=this.getRetinaScaling();if(_!==1&&(r.x/=_,r.y/=_),a!==0&&f!==0){var y=window.getComputedStyle(n).objectFit,w=n.width,x=n.height,E=a,k=f;i={width:w/E,height:x/k};var P,M,V=w/x,L=E/k;return y==="contain"?V>L?(P=E,M=E/V,{x:r.x*i.width,y:(r.y-(k-M)/2)*i.width}):(P=k*V,M=k,{x:(r.x-(E-P)/2)*i.height,y:r.y*i.height}):y==="cover"?V>L?{x:(w-i.height*E)/2+r.x*i.height,y:r.y*i.height}:{x:r.x*i.width,y:(x-i.width*k)/2+r.y*i.width}:{x:r.x*i.width,y:r.y*i.height}}return i={width:1,height:1},{x:r.x*i.width,y:r.y*i.height}},Ee.Canvas.prototype._onTouchStart=function(t){var e=this.findTarget(t);!this.allowTouchScrolling&&t.cancelable&&t.preventDefault&&t.preventDefault(),e&&t.cancelable&&t.preventDefault&&t.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var i=this.upperCanvasEl,n=this._getEventPrefix();Ee.util.addListener(Ee.document,"touchend",this._onTouchEnd,{passive:!1}),Ee.util.addListener(Ee.document,"touchmove",this._onMouseMove,{passive:!1}),Ee.util.removeListener(i,n+"down",this._onMouseDown)},Ee.Textbox.prototype._wrapLine=function(t,e,i,n){const r=t.match(/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/g),s=!(!r||!r.length);var a=0,f=this.splitByGrapheme||s,_=[],y=[],w=f?Ee.util.string.graphemeSplit(t):t.split(this._wordJoiners),x="",E=0,k=f?"":" ",P=0,M=0,V=0,L=!0,R=this._getWidthOfCharSpacing();n=n||0,w.length===0&&w.push([]),i-=n;for(var D=0;D<w.length;D++)x=f?w[D]:Ee.util.string.graphemeSplit(w[D]),P=this._measureWord(x,e,E),E+=x.length,(a+=M+P-R)>i&&!L?(_.push(y),y=[],a=P,L=!0):a+=R,L||f||y.push(k),y=y.concat(x),M=f?0:this._measureWord([k],e,E),E++,L=!1,P>V&&(V=P);return D&&_.push(y),V+n>this.dynamicMinWidth&&(this.dynamicMinWidth=V-R+n),_});class PT{constructor(e,i,n,r){let s,a;switch(this.mapMediaType_Style=new Map,this.mode="viewer",this.onSelectionChange=null,this._arrDrwaingItem=[],this._arrFabricObject=[],this._visible=!0,e.hasOwnProperty("getFabricCanvas")?this.fabricCanvas=e.getFabricCanvas():(this.fabricCanvas=new Ee.Canvas(e,Object.assign(r,{allowTouchScrolling:!0})),this.fabricCanvas.setDimensions({width:"100%",height:"100%"},{cssOnly:!0}),this.fabricCanvas.lowerCanvasEl.className="",this.fabricCanvas.upperCanvasEl.className="",this.fabricCanvas.on("selection:created",function(f){const _=f.selected,y=[];for(let w of _){const x=w.getDrawingItem()._drawingLayer;x&&!y.includes(x)&&y.push(x)}for(let w of y){const x=[];for(let E of _){const k=E.getDrawingItem();k._drawingLayer===w&&x.push(k)}setTimeout(()=>{w.onSelectionChange&&w.onSelectionChange(x,[])},0)}}),this.fabricCanvas.on("before:selection:cleared",function(f){const _=this.getActiveObjects(),y=[];for(let w of _){const x=w.getDrawingItem()._drawingLayer;x&&!y.includes(x)&&y.push(x)}for(let w of y){const x=[];for(let E of _){const k=E.getDrawingItem();k._drawingLayer===w&&x.push(k)}setTimeout(()=>{const E=[];for(let k of x)w.hasDrawingItem(k)&&E.push(k);E.length>0&&w.onSelectionChange&&w.onSelectionChange([],E)},0)}}),this.fabricCanvas.on("selection:updated",function(f){const _=f.selected,y=f.deselected,w=[];for(let x of _){const E=x.getDrawingItem()._drawingLayer;E&&!w.includes(E)&&w.push(E)}for(let x of y){const E=x.getDrawingItem()._drawingLayer;E&&!w.includes(E)&&w.push(E)}for(let x of w){const E=[],k=[];for(let P of _){const M=P.getDrawingItem();M._drawingLayer===x&&E.push(M)}for(let P of y){const M=P.getDrawingItem();M._drawingLayer===x&&k.push(M)}setTimeout(()=>{x.onSelectionChange&&x.onSelectionChange(E,k)},0)}}),this.fabricCanvas.wrapperEl.style.position="absolute",e.getFabricCanvas=()=>this.fabricCanvas),this.id=i,this._mapDrawingStyles=n,i){case 1:s=n.get(1),a=n.get(5);break;case 2:s=n.get(2),a=n.get(6);break;case 3:s=n.get(3),a=n.get(7);break;default:s=n.get(4),a=n.get(8)}for(let f of $t.arrMediaTypes)this.mapMediaType_Style.set(f,{default:s,selected:a})}getId(){return this.id}_getDrawingStyle(e,i){if(typeof e!="number")throw new Error("Invalid style id.");const n=this._mapDrawingStyles.get(e);return n?i?JSON.parse(JSON.stringify(n)):n:null}setVisible(e){if(e){for(let i of this._arrFabricObject)i.visible=!0;this._visible=!0}else{for(let i of this._arrFabricObject)i.visible=!1;this._visible=!1}this.fabricCanvas.renderAll()}isVisible(){return this._visible}_getItemCurrentStyleId(e){return e.styleId?e.styleId:this.mapMediaType_Style.get(e._mediaType)[e.styleSelector].styleId}_getItemCurrentStyle(e){return e.styleId?this._getDrawingStyle(e.styleId):e._mapStyle.get(e.styleSelector)||null}_changeMediaTypeCurStyleInStyleSelector(e,i,n,r){let s;switch(e){case"rect":s=this.fabricCanvas.getObjects("rect");break;case"arc":s=this.fabricCanvas.getObjects("circle");break;case"polygon":s=this.fabricCanvas.getObjects("polygon");break;case"image":s=this.fabricCanvas.getObjects("image");break;case"text":s=this.fabricCanvas.getObjects("textbox");break;case"line":s=this.fabricCanvas.getObjects("line");break;case"path":s=this.fabricCanvas.getObjects("path")}for(let a of s){if(!this._arrFabricObject.includes(a))continue;const f=a.getDrawingItem();f.styleSelector===i&&this._changeItemStyle(f,n,!0)}r||this.fabricCanvas.renderAll()}_changeItemStyle(e,i,n){if(!e||!i)return;const r=e._getFabricObject();typeof e.styleId=="number"&&(i=this._getDrawingStyle(e.styleId)),r.strokeWidth=i.lineWidth,i.paintMode==="fill"?(r.fill=i.fillStyle,r.stroke=i.fillStyle):i.paintMode==="stroke"?(r.fill="transparent",r.stroke=i.strokeStyle):i.paintMode==="strokeAndFill"&&(r.fill=i.fillStyle,r.stroke=i.strokeStyle),r.fontFamily&&(r.fontFamily=i.fontFamily),r.fontSize&&(r.fontSize=i.fontSize),r.group||(r.dirty=!0),n||this.fabricCanvas.renderAll()}_updateGroupItem(e,i,n){if(!e||!i)return;const r=e.getChildItems();if(n==="add"){if(r.includes(i))return;const s=i._getFabricObject();if(this.fabricCanvas.getObjects().includes(s)){if(!this._arrFabricObject.includes(s))throw new Error("Existed in other drawing layers.");i._zIndex=null}else{let a;if(i.styleId)a=this._getDrawingStyle(i.styleId);else{a=this.mapMediaType_Style.get(i._mediaType)[e.styleSelector];const f=()=>{this._changeItemStyle(i,this.mapMediaType_Style.get(i._mediaType).selected,!0)},_=()=>{this._changeItemStyle(i,this.mapMediaType_Style.get(i._mediaType).default,!0)};i._on("selected",f),i._on("deselected",_),i._funcChangeStyleToSelected=f,i._funcChangeStyleToDefault=_}i._drawingLayer=this,i._drawingLayerId=this.id,this._changeItemStyle(i,a,!0)}e._fabricObject.addWithUpdate(i._getFabricObject())}else{if(n!=="remove"||!r.includes(i))return;i._zIndex=null,i._drawingLayer=null,i._drawingLayerId=null,i._off("selected",i._funcChangeStyleToSelected),i._off("deselected",i._funcChangeStyleToDefault),i._funcChangeStyleToSelected=null,i._funcChangeStyleToDefault=null,e._fabricObject.removeWithUpdate(i._getFabricObject())}this.fabricCanvas.renderAll()}_addDrawingItem(e,i){let n=e._getFabricObject();const r=this.fabricCanvas.getObjects();let s,a;if(r.includes(n)){if(this._arrFabricObject.includes(n))return;throw new Error("Existed in other drawing layers.")}if(e._mediaType==="group"){s=e.getChildItems();for(let y of s)if(y._drawingLayer&&y._drawingLayer!==this)throw new Error("The childItems of DT_Group have existed in other drawing layers.")}if(i&&typeof i=="object"&&!Array.isArray(i))for(let y in i)n.set(y,i[y]);if(s){for(let y of s){const w=this.mapMediaType_Style.get(y._mediaType);for(let x of $t.arrStyleSelectors)y._mapStyle.set(x,w[x]);if(y.styleId)a=this._getDrawingStyle(y.styleId);else{a=w.default;const x=()=>{this._changeItemStyle(y,this.mapMediaType_Style.get(y._mediaType).selected,!0)},E=()=>{this._changeItemStyle(y,this.mapMediaType_Style.get(y._mediaType).default,!0)};y._on("selected",x),y._on("deselected",E),y._funcChangeStyleToSelected=x,y._funcChangeStyleToDefault=E}y._drawingLayer=this,y._drawingLayerId=this.id,this._changeItemStyle(y,a,!0)}n.dirty=!0,this.fabricCanvas.renderAll()}else{const y=this.mapMediaType_Style.get(e._mediaType);for(let w of $t.arrStyleSelectors)e._mapStyle.set(w,y[w]);if(e.styleId)a=this._getDrawingStyle(e.styleId);else{a=y.default;const w=()=>{this._changeItemStyle(e,this.mapMediaType_Style.get(e._mediaType).selected)},x=()=>{this._changeItemStyle(e,this.mapMediaType_Style.get(e._mediaType).default)};e._on("selected",w),e._on("deselected",x),e._funcChangeStyleToSelected=w,e._funcChangeStyleToDefault=x}this._changeItemStyle(e,a)}e._zIndex=this.id,e._drawingLayer=this,e._drawingLayerId=this.id;const f=this._arrFabricObject.length;let _=r.length;if(f)_=r.indexOf(this._arrFabricObject[f-1])+1;else for(let y=0;y<r.length;y++)if(e._zIndex<r[y].getDrawingItem()._zIndex){_=y;break}this._arrDrwaingItem.push(e),this._arrFabricObject.push(n),this._visible?n.visible=!0:n.visible=!1,this.fabricCanvas.insertAt(n,_,!1)}addDrawingItem(e){if(!e||!e.isDrawingItem)throw TypeError("Illegal drawing item.");if(this.mode==="viewer")e._setEditable(!1);else{if(this.mode!=="editor")throw new Error("Illegal 'mode'.");e._setEditable(!0)}this._addDrawingItem(e)}addDrawingItems(e){for(let i of e)this.addDrawingItem(i)}removeDrawingItem(e){if(!e||!e.isDrawingItem)throw TypeError("Illegal drawing item.");if(!this.hasDrawingItem(e))return;if(e._zIndex=null,e._drawingLayer=null,e._drawingLayerId=null,e._mediaType==="group"){const n=e.getChildItems();for(let r of n)r._zIndex=null,r._drawingLayer=null,r._drawingLayerId=null,r._off("selected",r._funcChangeStyleToSelected),r._off("deselected",r._funcChangeStyleToDefault),r._funcChangeStyleToSelected=null,r._funcChangeStyleToDefault=null,r._mapStyle.clear()}else e._off("selected",e._funcChangeStyleToSelected),e._off("deselected",e._funcChangeStyleToDefault),e._funcChangeStyleToSelected=null,e._funcChangeStyleToDefault=null,e._mapStyle.clear();const i=e._getFabricObject();e.styleSelector==="selected"&&(i.group?i.group.removeWithUpdate(i):this.fabricCanvas._activeObject=null,e.styleSelector="default"),this.fabricCanvas.remove(i),this._arrDrwaingItem.splice(this._arrDrwaingItem.indexOf(e),1),this._arrFabricObject.splice(this._arrFabricObject.indexOf(i),1)}removeDrawingItems(e){for(let i of e)this.removeDrawingItem(i)}setDrawingItems(e){this.clearDrawingItems(),this.addDrawingItems(e)}getDrawingItems(e){return e&&typeof e=="function"?this._arrDrwaingItem.filter(e):Array.from(this._arrDrwaingItem)}getSelectedDrawingItems(){const e=this.fabricCanvas.getActiveObjects(),i=[];for(let n of e)this._arrFabricObject.includes(n)&&i.push(n.getDrawingItem());return i}hasDrawingItem(e){if(!e||!e.isDrawingItem)throw TypeError("Illegal drawing item.");return this._arrDrwaingItem.includes(e)}clearDrawingItems(){this.removeDrawingItems(Array.from(this._arrDrwaingItem))}setDrawingStyle(e,i,n){i=i?i.toLocaleLowerCase():"all",n=n?n.toLocaleLowerCase():"all";let r,s=this._getDrawingStyle(e);if(i==="all"){const a=this.mapMediaType_Style.keys();for(let f of a)if(r=this.mapMediaType_Style.get(f),n==="all")for(let _ of $t.arrStyleSelectors){this._changeMediaTypeCurStyleInStyleSelector(f,_,s,!0),r[_]=s;for(let y of this._arrDrwaingItem)y._mapStyle.set(_,s)}else{this._changeMediaTypeCurStyleInStyleSelector(f,n,s,!0),r[n]=s;for(let _ of this._arrDrwaingItem)_._mapStyle.set(n,s)}this.fabricCanvas.renderAll()}else if(r=this.mapMediaType_Style.get(i),n==="all")for(let a of $t.arrStyleSelectors){this._changeMediaTypeCurStyleInStyleSelector(i,a,s,!0),r[a]=s;for(let f of this._arrDrwaingItem)f._mediaType===i&&f._mapStyle.set(a,s)}else{this._changeMediaTypeCurStyleInStyleSelector(i,n,s,!0),r[n]=s;for(let a of this._arrDrwaingItem)a._mediaType===i&&a._mapStyle.set(n,s)}}setMode(e){if((e=e.toLocaleLowerCase())==="viewer"){for(let i of this._arrDrwaingItem)i._setEditable(!1);this.fabricCanvas.discardActiveObject(),this.fabricCanvas.renderAll(),this.mode="viewer"}else{if(e!=="editor")throw new RangeError("Invalid value.");for(let i of this._arrDrwaingItem)i._setEditable(!0);this.mode="editor"}this._manager._switchPointerEvent()}getMode(){return this.mode}_setDimensions(e,i){this.fabricCanvas.setDimensions(e,i)}_setObjectFit(e){if(e=e.toLowerCase(),!["contain","cover"].includes(e))throw new Error(`Unsupported value '${e}'.`);this.fabricCanvas.lowerCanvasEl.style.objectFit=e,this.fabricCanvas.upperCanvasEl.style.objectFit=e}_getObjectFit(){return this.fabricCanvas.lowerCanvasEl.style.objectFit}renderAll(){for(let e of this._arrDrwaingItem){const i=this._getItemCurrentStyle(e);this._changeItemStyle(e,i,!0)}this.fabricCanvas.renderAll()}dispose(){this.clearDrawingItems(),this._manager._arrDrawingLayer.length===1&&(this.fabricCanvas.wrapperEl.style.pointerEvents="none",this.fabricCanvas.dispose(),this._arrDrwaingItem.length=0,this._arrFabricObject.length=0)}}class MT{constructor(){this._arrDrawingLayer=[],this._mapDrawingStyles=new Map([[1,{id:1,lineWidth:4,fillStyle:"rgba(73, 173, 245, 0.3)",strokeStyle:"rgba(73, 173, 245, 1)",paintMode:"stroke",fontFamily:"consolas",fontSize:40}],[2,{id:2,lineWidth:2,fillStyle:"rgba(73, 245, 73, 0.3)",strokeStyle:"rgba(73, 245, 73, 0.9)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}],[3,{id:3,lineWidth:2,fillStyle:"rgba(254, 180, 32, 0.3)",strokeStyle:"rgba(254, 180, 32, 0.9)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}],[4,{id:4,lineWidth:2,fillStyle:"rgba(245, 236, 73, 0.3)",strokeStyle:"rgba(245, 236, 73, 1)",paintMode:"stroke",fontFamily:"consolas",fontSize:40}],[5,{id:5,lineWidth:4,fillStyle:"rgba(73, 173, 245, 0.3)",strokeStyle:"rgba(73, 173, 245, 1)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}],[6,{id:6,lineWidth:2,fillStyle:"rgba(73, 245, 73, 0.3)",strokeStyle:"rgba(73, 245, 73, 0.9)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}],[7,{id:7,lineWidth:2,fillStyle:"rgba(254, 180, 32, 0.3)",strokeStyle:"rgba(254, 180, 32, 1)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}],[8,{id:8,lineWidth:2,fillStyle:"rgba(245, 236, 73, 0.3)",strokeStyle:"rgba(245, 236, 73, 1)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}]]),this._defaultStyleTemplate={lineWidth:2,fillStyle:"rgba(245, 236, 73, 0.3)",strokeStyle:"rgba(245, 236, 73, 1)",paintMode:"stroke",fontFamily:"consolas",fontSize:40}}createDrawingStyle(e){if(!e)throw new Error("Invalid style definition.");let i;if(e.hasOwnProperty("id")){if(this._mapDrawingStyles.has(e.id))throw new Error("Existing drawing style id.");i=e.id}else{let r=100;for(;this._mapDrawingStyles.has(r);)r++;i=r}const n=JSON.parse(JSON.stringify(e));n.id=i;for(let r in this._defaultStyleTemplate)n.hasOwnProperty(r)||(n[r]=this._defaultStyleTemplate[r]);return this._mapDrawingStyles.set(i,n),n.id}_getDrawingStyle(e,i){if(typeof e!="number")throw new Error("Invalid style id.");const n=this._mapDrawingStyles.get(e);return n?i?JSON.parse(JSON.stringify(n)):n:null}getDrawingStyle(e){return this._getDrawingStyle(e,!0)}getDrawingStyles(){return JSON.parse(JSON.stringify(Array.from(this._mapDrawingStyles.values())))}_updateDrawingStyle(e,i){const n=this._mapDrawingStyles.get(e);if(n)for(let r in i)n.hasOwnProperty(r)&&(n[r]=i[r])}updateDrawingStyle(e,i){this._updateDrawingStyle(e,i);for(let n of this._arrDrawingLayer)n.renderAll()}createDrawingLayer(e,i){const n=s=>{for(let a of this._arrDrawingLayer)if(a.getId()===s)return!0;return!1};if(i===void 0){for(let s=100;;s++)if(!n(s)){i=s;break}}else if(n(i))throw new Error("Existed drawing layer id.");const r=new PT(e,i,this._mapDrawingStyles,{enableRetinaScaling:!1});return r._manager=this,this._arrDrawingLayer.push(r),this._switchPointerEvent(),r}deleteDrawingLayer(e){const i=this.getDrawingLayer(e);if(!i)return;const n=this._arrDrawingLayer;i.dispose(),n.splice(n.indexOf(i),1),this._switchPointerEvent()}clearDrawingLayers(){for(let e of this._arrDrawingLayer)e.dispose();this._arrDrawingLayer.length=0}getDrawingLayer(e){for(let i of this._arrDrawingLayer)if(i.getId()===e)return i;return null}getDrawingLayers(){return Array.from(this._arrDrawingLayer)}getSelectedDrawingItems(){if(!this._arrDrawingLayer.length)return;const e=this._arrDrawingLayer[0].fabricCanvas.getActiveObjects(),i=[];for(let n of e)i.push(n.getDrawingItem());return i}setDimensions(e,i){this._arrDrawingLayer.length&&this._arrDrawingLayer[0]._setDimensions(e,i)}setObjectFit(e){for(let i of this._arrDrawingLayer)i&&i._setObjectFit(e)}getObjectFit(){return this._arrDrawingLayer.length?this._arrDrawingLayer[0]._getObjectFit():null}setVisible(e){this._arrDrawingLayer.length&&(this._arrDrawingLayer[0].fabricCanvas.wrapperEl.style.display=e?"block":"none")}_switchPointerEvent(){if(this._arrDrawingLayer.length)for(let e of this._arrDrawingLayer)e.getMode()}}class FT{constructor(e){this._controlTarget=null,this._arrUsers=[],this._mapAction_UserArgs=new Map,this._mapProperty_UserValue=new Map,this._mapAction_Callbacks=new Map,this._controlTarget=e}setControlTarget(e){this._controlTarget=e}getControlTarget(){return this._controlTarget}register(e){this._arrUsers.includes(e)||this._arrUsers.push(e)}logout(e){const i=this._arrUsers.indexOf(e);i!==-1&&(this.clearUserDisiredAction({user:e}),this.clearUserDisiredValue({user:e}),this._arrUsers.splice(i,1))}getRegisteredUsers(){return this._arrUsers}ifUserExisted(e){return this._arrUsers.includes(e)}setDisiredValue(e,i,n,r){if(!this._arrUsers.includes(e))throw new Error("Unregistered user.");r&&(this._controlTarget[i]=n),this._mapProperty_UserValue.get(i)?this._mapProperty_UserValue.get(i).set(e,n):this._mapProperty_UserValue.set(i,new Map([[e,n]]))}clearUserDisiredValue(e){if(e&&(e.user||e.property)){if(e.property&&e.user){const i=this._mapProperty_UserValue.get(e.property);if(!i)return;i.delete(e.user)}else if(e.property)this._mapProperty_UserValue.delete(e.property);else if(e.user)for(let i of this._mapProperty_UserValue.values())i.delete(e.user)}else this._mapProperty_UserValue=new Map}getValue(e){if(!this._controlTarget)throw new Error("Control target is not set.");return this._controlTarget[e]}getPropertyDisiredValue(e){if(this._mapProperty_UserValue.get(e)){const i=[],n=this._mapProperty_UserValue.get(e);for(let r of n.values())i.push(r);return i}return null}setDisiredAction(e,i,n,r){if(!this._arrUsers.includes(e))throw new Error("Unregistered user.");return n||(n=[]),r?this._controlTarget[i](...n):(this._mapAction_UserArgs.get(i)?this._mapAction_UserArgs.get(i).set(e,n):this._mapAction_UserArgs.set(i,new Map([[e,n]])),this._render(i))}clearUserDisiredAction(e){if(e&&(e.user||e.actionName)){if(e.actionName&&e.user){const i=this._mapAction_UserArgs.get(e.actionName);if(!i)return;i.delete(e.user)}else if(e.actionName)this._mapAction_UserArgs.delete(e.actionName);else if(e.user)for(let i of this._mapAction_UserArgs.values())i.delete(e.user);this.render()}else this._mapAction_UserArgs=new Map}addCallback(e,i){const n=this._mapAction_Callbacks.get(e);n?n.push(i):this._mapAction_Callbacks.set(e,[i])}removeCallback(e,i){const n=this._mapAction_Callbacks.get(e);if(!n)return;const r=n.indexOf(i);r!==-1&&n.splice(r,1)}clearCallback(e){e?this._mapAction_Callbacks.delete(e):this._mapAction_Callbacks.clear()}_fireCallback(e){const i=this._mapAction_Callbacks.get(e);if(i)for(let n of i){if(!n)return;setTimeout(n.bind(this._controlTarget),0)}}_render(e){const i=this._mapAction_UserArgs.get(e);if(!i)throw new Error("Unrecorded action.");if(i.size===this._arrUsers.length){let n=[];for(let r of i.values())r.length>0&&(n=r);if(this._controlTarget[e]){const r=this._controlTarget[e](...n);return this._mapAction_UserArgs.delete(e),this._fireCallback(e),r}}}render(e){if(e)return this._render(e);for(let i of this._mapAction_UserArgs.keys())this._render(i)}}class Pt{static multiply(e,i){const n=[];for(let r=0;r<3;r++){const s=i.slice(3*r,3*r+3);for(let a=0;a<3;a++){const f=[e[a],e[a+3],e[a+6]].reduce((_,y,w)=>_+y*s[w],0);n.push(f)}}return n}static identity(){return[1,0,0,0,1,0,0,0,1]}static translate(e,i,n){return Pt.multiply(e,[1,0,0,0,1,0,i,n,1])}static rotate(e,i){var n=Math.cos(i),r=Math.sin(i);return Pt.multiply(e,[n,-r,0,r,n,0,0,0,1])}static scale(e,i,n){return Pt.multiply(e,[i,0,0,0,n,0,0,0,1])}}var Oe;(function(t){t.GREY="grey",t.GREY32="grey32",t.RGBA="rgba",t.RBGA="rbga",t.GRBA="grba",t.GBRA="gbra",t.BRGA="brga",t.BGRA="bgra"})(Oe||(Oe={}));const Lt=(t,e,i,n)=>{let r=e+Math.round((t-e)/i)*i;return n&&(r=Math.min(r,n)),r};class Ce{constructor(){this._maxCvsSideLength=void 0,this._defaultMaxCvsSideLength=null,this._predefinedResolutions=[{width:160,height:120},{width:320,height:240},{width:480,height:360},{width:640,height:480},{width:800,height:600},{width:960,height:720},{width:1280,height:720},{width:1920,height:1080},{width:2560,height:1440},{width:3840,height:2160}],this._mapCameraResolutions=new Map,this._bWebGLSupported=!0,this.extraBindings=[],this._singleFrameMode=!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),this._cvsSingleFrameMode=null,this._cvsOriginalImage=null,this._imgWidth=0,this._imgHeight=0,this._singleFrameModeIpt=null,this._clickIptSingleFrameMode=()=>{if(this.singleFrameMode&&!this.getDrawingLayers().some(e=>e.getMode()=="editor")){if(!this._singleFrameModeIpt){const e=document.createElement("input");this._singleFrameModeIpt=e,e.setAttribute("type","file"),e.setAttribute("accept",".jpg,.jpeg,.icon,.gif,.svg,.webp,.png,.bmp"),e.setAttribute("capture",""),e.addEventListener("change",async()=>{const i=e.files[0];e.value="";const n=await(async y=>{let w=null,x=null;if(typeof createImageBitmap<"u")try{if(w=await createImageBitmap(y),w)return w}catch(k){}var E;return w||(x=await(E=y,new Promise((k,P)=>{let M=URL.createObjectURL(E),V=new Image;V.dbrObjUrl=M,V.src=M,V.onload=()=>{k(V)},V.onerror=L=>{P(new Error("Can't convert blob to image : "+(L instanceof Event?L.type:L)))}}))),x})(i),r=n instanceof HTMLImageElement?n.naturalWidth:n.width,s=n instanceof HTMLImageElement?n.naturalHeight:n.height;this._imgWidth=r,this._imgHeight=s;const a=y=>{const w=Date.now();if(r===0||s===0)return null;if(y instanceof HTMLImageElement&&!y.complete)throw new Error("The source is not loaded.");const x=this._scanRegion,E=this.getFrameSize(r,s,x,this.maxCvsSideLength);if(!E)return null;let k=!0;r===E.sWidth&&s===E.sHeight&&(k=!1);const P=this.mapPixelFormatString_Enum.get(this.framePixelFormat.toLowerCase()),M={data:null,region:x?JSON.parse(JSON.stringify(x)):null,sx:E.sx,sy:E.sy,width:E.dWidth,height:E.dHeight,colorMode:null,pixelFormat:null,timeSpent:null,timeStamp:null,isCropped:k,toCanvas:this._toCanvas,_sWidth:E.sWidth,_sHeight:E.sHeight,_bUseWebGL:null},V=this._getImageData(y,r,s,E,null,{pixelFormat:P});if(!V)return null;const L=Date.now();return M.data=V.data,M.pixelFormat=M.colorMode=V.pixelFormat,M._bUseWebGL=V._bUseWebGL,M.timeSpent=L-w,M.timeStamp=L,V.pixelFormat===Oe.GREY?M.stride=M.width:M.stride=4*M.width,M};(y=>{let w=this._cvsSingleFrameMode;if(!w){if(w=document.createElement("canvas"),!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(w),w.style.position="absolute",w.style.width="100%",w.style.height="100%",w.style.left="0",w.style.top="0",w.style.objectFit="contain",w.style.pointerEvents="none",this._cvsSingleFrameMode=w}w.width==r&&w.height==s||(w.width=r,w.height=s);const x=w.getContext("2d");x.clearRect(0,0,w.width,w.height),x.drawImage(y,0,0)})(n),this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let y of this._arrScanRegionOverlays)y&&this._updateScanRegionOverlay(y);let f;this._updateDrawingLayersSize();try{f=a(n)}catch(y){throw y}const _=this.mapCameraEvents.get("singleframeacquired");for(let y of _)if(y)try{const w={data:new Uint8Array(f.data),region:JSON.parse(JSON.stringify(f.region)),sx:f.sx,sy:f.sy,width:f.width,height:f.height,stride:f.stride,colorMode:f.colorMode,pixelFormat:f.pixelFormat,timeSpent:f.timeSpent,timeStamp:f.timeStamp,isCropped:f.isCropped,toCanvas:f.toCanvas,_sWidth:f._sWidth,_sHeight:f._sHeight,_bUseWebGL:f._bUseWebGL};await y.apply(this,[w])}catch(w){console.error(w)}}),e.style.position="fixed",e.style.left="-1px",e.style.top="-1px",e.style.width="1px",e.style.height="1px",e.style.backgroundColor="transparent",e.style.color="transparent",document.body.appendChild(e)}this._singleFrameModeIpt.click()}},this.styleEls=[],this._framePixelFormat=void 0,this._defaultFramePixelFormat="rgba",this.mapPixelFormatString_Enum=new Map([["grey",Oe.GREY],["grey32",Oe.GREY32],["rgba",Oe.RGBA],["rbga",Oe.RBGA],["grba",Oe.GRBA],["gbra",Oe.GBRA],["brga",Oe.BRGA],["bgra",Oe.BGRA]]),this.shaderPixelFormat=Oe.RGBA,this.maxVideoCvsLength=3,this._reusedCvs=null,this._reusedWebGLCvs=null,this._tempDataContainer=null,this._webGLTexture=null,this._webGLProgramInfo=null,this._webGLBuffers=null,this._softwareScale=1,this._scaleCenter={x:0,y:0},this._focusParameters={maxTimeout:400,minTimeout:300,kTimeout:void 0,oldDistance:null,fds:null,isDoingFocus:0,taskBackToContinous:null,curFocusTaskId:0,focusCancelableTime:1500,defaultFocusAreaSizeRatio:6,focusBackToContinousTime:5e3,tapFocusMinDistance:null,tapFocusMaxDistance:null,_focusArea:null},this._tapFocusEnabled=!0,this._focusSupported=!0,this._tapDoFocus=async e=>{if(this._touchMoved)return void(this._touchMoved=!1);if(!this._tapFocusEnabled||!this._bOpen||this.singleFrameMode||!this._video||this._video.paused||!this._videoTrack||!this._focusSupported||this.getDrawingLayers().some(ie=>ie.getMode()=="editor"))return;if(!this._focusParameters.fds&&(this._focusParameters.fds=(await this.getCapabilities()).focusDistance,!this._focusParameters.fds))return void(this._focusSupported=!1);if(this._focusParameters.kTimeout==null&&(this._focusParameters.kTimeout=(this._focusParameters.maxTimeout-this._focusParameters.minTimeout)/(1/this._focusParameters.fds.min-1/this._focusParameters.fds.max)),this._focusParameters.isDoingFocus==1)return;let i,n,r,s;if(this._focusParameters.taskBackToContinous&&(clearTimeout(this._focusParameters.taskBackToContinous),this._focusParameters.taskBackToContinous=null),e instanceof MouseEvent)i=e.clientX,n=e.clientY;else{if(!(e instanceof TouchEvent))throw new Error("Unknown event type.");if(!e.changedTouches.length)return;i=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY}const a=this.getVideoFit(),f=this._video.videoWidth,_=this._video.videoHeight,y=this._elContainer.getBoundingClientRect(),w=y.left,x=y.top,E=window.getComputedStyle(this._elContainer),k=parseFloat(E.width),P=parseFloat(E.height),M=k/P,V=f/_;let L=1;if(a==="contain")V>M?(L=k/f,r=(i-w)/L,s=(n-x-(P-k/V)/2)/L):(L=P/_,s=(n-x)/L,r=(i-w-(k-P*V)/2)/L);else{if(a!=="cover")throw new Error("Unsupported object-fit.");V>M?(L=P/_,s=(n-x)/L,r=(i-w+(P*V-k)/2)/L):(L=k/f,r=(i-w)/L,s=(n-x+(k/V-P)/2)/L)}const R={x:r+"px",y:s+"px"},D=2*Math.round(Math.min(f,_)/this._focusParameters.defaultFocusAreaSizeRatio/2)+"px",Y=D;await this._setLocalFocus(R,D,Y,this._focusParameters.tapFocusMinDistance,this._focusParameters.tapFocusMaxDistance),this._focusParameters.taskBackToContinous=setTimeout(()=>{this._videoTrack&&this._videoTrack.applyConstraints({advanced:[{focusMode:"continuous"}]}).catch(()=>{})},this._focusParameters.focusBackToContinousTime)},this._touchMoved=!1,this._touchMoveEvent=()=>{this._touchMoved=!0},this._recordedStates={},this.playCallbackInfo=null,this._toCanvas=function(){const e=document.createElement("canvas");let i;if(e.width=this.width,e.height=this.height,(this.pixelFormat||this.colorMode)==="grey"){i=new Uint8ClampedArray(this.width*this.height*4);for(let r=0;r<i.length;r+=4)i[r]=this.data[r/4],i[r+1]=this.data[r/4],i[r+2]=this.data[r/4],i[r+3]=255}else i=new Uint8ClampedArray(this.data.buffer);const n=new ImageData(i,this.width,this.height);return e.getContext("2d").putImageData(n,0,0),e},this._onCameraSelChange=async()=>{await this.selectCamera(this._selCam.value),this._bOpen||this.stop()},this._onResolutionSelChange=async()=>{let e,i;if(this._selRsl&&this._selRsl.selectedIndex!=-1){let n=this._selRsl.options[this._selRsl.selectedIndex];e=n.getAttribute("data-width"),i=n.getAttribute("data-height")}await this.setResolution(e,i),this._bOpen||this.stop()},this._onCloseBtnClick=()=>{this.close(!0)},this._bOpen=!1,this.isCameraEnhancer=!0,this.isDisposed=!1,this.disposed=!1,this.videoSrc=null,this.videoSettings={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}},this.iPlayRound=0,this.promisePlay=null,this._ifSaveLastUsedCamera=!1,this.ifSkipCameraInspection=!1,this._allCameras=[],this._currentCamera=null,this._videoTrack=null,this._lastDeviceId=void 0,this._vc_bPlayingVideoBeforeHide=!1,this._ev_documentHideEvent=()=>{if(!this.singleFrameMode)if(document.visibilityState==="visible"){if(this._bOpen&&this._vc_bPlayingVideoBeforeHide){if(this.videoSrc)this._video.play();else if(this._video.srcObject){const e=this._video.srcObject.getTracks()[0];this._video.srcObject.active&&e&&!e.muted?this._video.play():this.play()}}}else document.visibilityState==="hidden"&&(["iPhone","iPad"].includes(Ze.OS)?(this._vc_bPlayingVideoBeforeHide=!0,this._video&&this._video.pause()):this._video&&!this._video.paused?(this._vc_bPlayingVideoBeforeHide=!0,this._video.pause()):this._vc_bPlayingVideoBeforeHide=!1)},this.containerClassName="dce-video-container",this._elContainer=null,this._videoContainer=null,this._video=null,this.videoFit="contain",this._cvsScanRegion=null,this._divScanArea=null,this._divScanLight=null,this._bgLoading=null,this._selCam=null,this._bgCamera=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._selMinLtr=null,this._optGotMinLtr=null,this.regionMaskFillStyle="rgba(0,0,0,0.5)",this.regionMaskStrokeStyle="rgb(254,142,20)",this.regionMaskLineWidth=2,this._bShowScanRegionMask=!0,this._bShowScanRegionLaser=void 0,this._defaultBShowScanRegionLaser=!1,this._scanRegion=null,this._arrScanRegionOverlays=[],this._layerBaseCvs=null,this._drawingLayerOfTip=null,this._tipArgs={x:void 0,y:void 0,width:void 0,duration:void 0,autoShowSuggestedTip:void 0},this._hideTipTimeoutId=null,this.onTipSuggested=null,this._cvsViewDecorator=null,this._decoratorType=[],this._decoratorArea=null,this._viewDecoratorInfo={rectangle:{lineWidth:4,strokeStyle:"rgb(254,142,20)",fillStyle:"transparent",maskFillStyle:"transparent"},focus:{lineWidth:4,strokeStyle:"rgb(254,142,20)",fillStyle:"transparent",maskFillStyle:"transparent"},crossline:{lineWidth:2,strokeStyle:"rgb(254,142,20)"},crosshair:{lineWidth:4,strokeStyle:"rgb(254,142,20)"}},this._croppingRegions=void 0,this._defaultCroppingRegions=[null],this.bIncreaseRegionIndexAuto=!0,this._croppingRegionIndex=0,this._loopInterval=void 0,this._defaultLoopInterval=0,this._maxNumberOfFramesInBuffer=void 0,this._defaultMaxNumberOfFramesInBuffer=1,this._frameQueue=[],this._bFetchingLoopStarted=!1,this._refreshInterval=void 0,this._defaultRefreshInterval=-1,this._updateLayersTimeout=500,this._updateLayers=()=>{this._cvsScanRegion&&(this._cvsScanRegion.style.display="none"),this._divScanLight&&(this._divScanLight.style.display="none"),this._cvsViewDecorator&&(this._cvsViewDecorator.style.display="none");for(let e of this._arrScanRegionOverlays)e&&(e.style.display="none");this._resizeTimeoutId&&clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(()=>{if(!this.isDisposed||!this.disposed){this.ifShowScanRegionMask&&this.showScanRegionMask(),this.ifShowScanRegionLaser&&this.showScanRegionLaser(),this._cvsViewDecorator&&this.showViewDecorator(),this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let e of this._arrScanRegionOverlays)e&&(e.style.display="",this._updateScanRegionOverlay(e));this._updateDrawingLayersSize(),this._updateVideoContainerStyle()}},this._updateLayersTimeout)},this._windowResizeListener=()=>{this._windowWidth!==document.documentElement.clientWidth&&(this._windowWidth=document.documentElement.clientWidth,this._updateLayers())},this.mapCameraEvents=new Map([["cameraopen",[]],["cameraclose",[]],["camerachange",[]],["resolutionchange",[]],["played",[]],["singleframeacquired",[]],["frameaddedtobuffer",[]]]),this._controler=null}static getVersion(){return this._version}static async detectEnvironment(){return await(async()=>({wasm:AT,worker:kT,getUserMedia:L_,camera:await DT(),browser:Ze.browser,version:Ze.version,OS:Ze.OS}))()}static set engineResourcePath(e){if(this._hasEngineResourceLoaded)throw new Error("`engineResourcePath` is not allowed to change after `createInstance` is called.");Ce._engineResourcePath=(i=>{if(i==null&&(i="./"),!dl){let n=document.createElement("a");n.href=i,i=n.href}return i.endsWith("/")||(i+="/"),i})(e)}static get engineResourcePath(){return this._engineResourcePath}static isStorageAvailable(e){let i;try{i=window[e];const n="__storage_test__";return i.setItem(n,n),i.removeItem(n),!0}catch(n){return n instanceof DOMException&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&i&&i.length!==0}}static isDCEFrame(e){return!(!e||typeof e!="object"||Array.isArray(e))&&"data"in e&&"region"in e&&"sx"in e&&"sy"in e&&"width"in e&&"height"in e&&("colorMode"in e||"pixelFormat"in e)&&"timeSpent"in e&&"timeStamp"in e&&"isCropped"in e&&"toCanvas"in e&&"_sWidth"in e&&"_sHeight"in e&&"_bUseWebGL"in e}static async testCameraAccess(){try{if(!navigator||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return{ok:!1,message:"Insecure context."};(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>{e.stop()})}catch(e){if(e.name==="OverconstrainedError"||e.name==="NotFoundError")return{ok:!1,message:"No camera detected."};if(e.name==="NotAllowedError")return{ok:!1,message:"No permission to access camera."};if(e.name==="AbortError")return{ok:!1,message:"Some problem occurred which prevented the device from being used."};if(e.name==="NotReadableError")return{ok:!1,message:"A hardware error occurred."};if(e.name==="SecurityError")return{ok:!1,message:"User media support is disabled."};throw e}return{ok:!0,message:"Successfully accessed the camera."}}set maxCvsSideLength(e){if(e<=0)throw new Error("Invalid value.");this._maxCvsSideLength=e}get maxCvsSideLength(){if(this._maxCvsSideLength!==void 0)return this._maxCvsSideLength;if(this._controler){const e=this._controler.getPropertyDisiredValue("maxCvsSideLength");if(e&&e.length===1)return e[0]}return this._defaultMaxCvsSideLength}static set defaultUIElementURL(e){Ce._defaultUIElementURL=e}static get defaultUIElementURL(){var e;return(e=Ce._defaultUIElementURL)===null||e===void 0?void 0:e.replace("@engineResourcePath/",Ce.engineResourcePath)}getUIElement(){return this.UIElement}async setUIElement(e){if(this._bOpen)throw new Error("It is not allowed to change the UIElement when the camera is open.");if(typeof e=="string"||e instanceof String){if(!e.trim().startsWith("<")){let n=await fetch(e);if(!n.ok)throw Error("setUIElement(elementOrUrl): Network Error: "+n.statusText);e=await n.text()}if(!e.trim().startsWith("<"))throw Error("setUIElement(elementOrUrl): Can't get valid HTMLElement.");let i=document.createElement("div");i.innerHTML=e;for(let n=0;n<i.childElementCount;++n){let r=i.children[n];r instanceof HTMLStyleElement&&(this.styleEls.push(r),document.head.append(r))}(e=i.childElementCount==1?i.children[0]:i).remove()}this.UIElement=e,this._uiOriginalState={display:e&&e.style.display,inDom:document.body.contains(e)}}appendAndShowUI(){this.UIElement&&(this.UIElement.parentNode||(this.UIElement.style.position="fixed",this.UIElement.style.left="0",this.UIElement.style.top="0",document.body.append(this.UIElement)),this.UIElement.style.display=="none"&&(this.UIElement.style.display=""))}hideUI(){this.UIElement&&(this.UIElement.style.display="none")}get singleFrameMode(){return this._singleFrameMode}set singleFrameMode(e){if(this._bOpen)throw new Error("It is not allowed to change `singleFrameMode` when the camera is open.");this._singleFrameMode=e}set frameColorMode(e){this._framePixelFormat=e}get frameColorMode(){if(this._framePixelFormat!==void 0)return this._framePixelFormat;if(this._controler){const e=this._controler.getPropertyDisiredValue("framePixelFormat")||this._controler.getPropertyDisiredValue("frameColorMode");if(e&&e.length===1)return e[0]}return this._defaultFramePixelFormat}set framePixelFormat(e){this._framePixelFormat=e}get framePixelFormat(){if(this._framePixelFormat!==void 0)return this._framePixelFormat;if(this._controler){const e=this._controler.getPropertyDisiredValue("framePixelFormat")||this._controler.getPropertyDisiredValue("frameColorMode");if(e&&e.length===1)return e[0]}return this._defaultFramePixelFormat}set bOpen(e){if(this._bOpen=e,e){this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let i of this._arrScanRegionOverlays)i&&this._updateScanRegionOverlay(i);this._updateDrawingLayersSize(),this.ifShowScanRegionMask?this.showScanRegionMask():this.hideScanRegionMask(),this.ifShowScanRegionLaser?this.showScanRegionLaser():this.hideScanRegionLaser(),this.showViewDecorator(),this.showScanRegionOverlays(),this._drawingLayersManager.setVisible(!0)}else this._softwareScale=1}set ifSaveLastUsedCamera(e){e?Ce.isStorageAvailable("localStorage")?this._ifSaveLastUsedCamera=!0:(this._ifSaveLastUsedCamera=!1,console.warn("Local storage is unavailable")):this._ifSaveLastUsedCamera=!1}get ifSaveLastUsedCamera(){return this._ifSaveLastUsedCamera}get video(){return this._video}setVideoFit(e){if(e=e.toLowerCase(),!["contain","cover"].includes(e))throw new Error(`Unsupported value '${e}'.`);if(this.videoFit=e,this._video&&(this._video.style.objectFit=e,!this.singleFrameMode)){this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let i of this._arrScanRegionOverlays)i&&this._updateScanRegionOverlay(i);this._updateVideoContainerStyle(),this._drawingLayersManager.setObjectFit(e)}}getVideoFit(){return this.videoFit}_showElClassName(){this._cvsScanRegion&&this._cvsScanRegion.classList.add("cvs-scan-region-mask"),this._cvsViewDecorator&&this._cvsViewDecorator.classList.add("cvs-view-decorator"),this._scanRegionOverlayContainer&&this._scanRegionOverlayContainer.classList.add("div-scan-region-overlay-container"),this._layerBaseCvs&&this._layerBaseCvs.classList.add("cvs-drawing-layer-base"),this._layerBaseCvs&&this._layerBaseCvs.parentElement.classList.add("div-drawing-layer-container"),this._cvsOriginalImage&&this._cvsOriginalImage.classList.add("cvs-original-image"),this._cvsSingleFrameMode&&this._cvsSingleFrameMode.classList.add("cvs-single-frame")}_hideElClassName(){this._cvsScanRegion&&this._cvsScanRegion.classList.remove("cvs-scan-region-mask"),this._cvsViewDecorator&&this._cvsViewDecorator.classList.remove("cvs-view-decorator"),this._scanRegionOverlayContainer&&this._scanRegionOverlayContainer.classList.remove("div-scan-region-overlay-container"),this._layerBaseCvs&&this._layerBaseCvs.classList.remove("cvs-drawing-layer-base"),this._layerBaseCvs&&this._layerBaseCvs.parentElement.classList.remove("div-drawing-layer-container"),this._cvsOriginalImage&&this._cvsOriginalImage.classList.remove("cvs-original-image"),this._cvsSingleFrameMode&&this._cvsSingleFrameMode.classList.remove("cvs-single-frame")}set ifShowScanRegionMask(e){this._bShowScanRegionMask=e,e?this.showScanRegionMask():this.hideScanRegionMask()}get ifShowScanRegionMask(){return this._bShowScanRegionMask}showScanRegionMask(){this._cvsScanRegion&&(this._cvsScanRegion.style.display=="none"&&(this._cvsScanRegion.style.display=""),this._recordedStates.maskShow=!0)}hideScanRegionMask(){this._cvsScanRegion&&(this._cvsScanRegion.style.display="none",this._recordedStates.maskShow=!1)}set ifShowScanRegionLaser(e){this._bShowScanRegionLaser=e,e?this.showScanRegionLaser():this.hideScanRegionLaser()}get ifShowScanRegionLaser(){if(this._bShowScanRegionLaser!==void 0)return this._bShowScanRegionLaser;if(this._controler){const e=this._controler.getPropertyDisiredValue("ifShowScanRegionLaser");if(e&&e.length){let i=0;for(let n of e)n||i++;return i!==this._controler.getRegisteredUsers().length}}return this._defaultBShowScanRegionLaser}showScanRegionLaser(){this._divScanLight&&(this._divScanLight.style.display=="none"&&(this._divScanLight.style.display="block"),this._recordedStates.laserShow=!0)}hideScanRegionLaser(){this._divScanLight&&(this._divScanLight.style.display="none",this._recordedStates.laserShow=!1)}_checkValidRegion(e){return!(e!==null&&(!e||!(e.hasOwnProperty("regionLeft")&&e.hasOwnProperty("regionTop")&&e.hasOwnProperty("regionRight")&&e.hasOwnProperty("regionBottom")&&e.hasOwnProperty("regionMeasuredByPercentage"))||e.regionLeft<0||e.regionTop<0||e.regionRight<0||e.regionBottom<0||e.regionMeasuredByPercentage&&(e.regionLeft>100||e.regionTop>100||e.regionRight>100||e.regionBottom>100)))}set scanRegion(e){if(!this._checkValidRegion(e))throw new Error("Invalid region.");this._scanRegion=JSON.parse(JSON.stringify(e)),this._updateScanRegionCanvas(),this._updateScanAreaDiv();for(let i of this._arrScanRegionOverlays)i&&this._updateScanRegionOverlay(i)}setScanRegion(e){this.scanRegion=e}getScanRegion(){return JSON.parse(JSON.stringify(this._scanRegion))}_calculateCvsSize(){if(!this._bOpen)return null;let e,i,n;if(this.singleFrameMode)e=this._imgWidth,i=this._imgHeight,n="contain";else{if(!this._video)return null;e=this._video.videoWidth,i=this._video.videoHeight,n=this.getVideoFit()}return e<=0||i<=0?null:{width:e,height:i,objectFit:n}}addScanRegionOverlayCanvas(){this._assertOpen();const e=document.createElement("canvas");if(this._updateScanRegionOverlay(e),!this._scanRegionOverlayContainer){const i=document.createElement("div");if(this._scanRegionOverlayContainer=i,i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.width="100%",i.style.height="100%",i.style.overflow="hidden",i.style.pointerEvents="none",this._layerBaseCvs)this._layerBaseCvs.parentElement.after(i);else if(this._cvsScanRegion)this._cvsScanRegion.after(i);else if(this._cvsOriginalImage)this._cvsOriginalImage.after(i);else if(this._cvsSingleFrameMode)this._cvsSingleFrameMode.after(i);else{if(!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(i)}this._recordedStates.overlayShow=!0}return this._scanRegionOverlayContainer.append(e),this._arrScanRegionOverlays.push(e),e}removeScanRegionOverlayCanvas(e){const i=this._arrScanRegionOverlays.indexOf(e);i!==-1&&(e.remove(),this._arrScanRegionOverlays.splice(i,1))}_updateScanRegionOverlay(e){if(!e)return;const i=this._calculateCvsSize();if(!i)return;const{width:n,height:r,objectFit:s}=i;if(n<=0||r<=0)return e.width=0,void(e.height=0);const a=this._getRegionInPixels(n,r,this._scanRegion),f=this.getFrameSize(n,r,this._scanRegion,this.maxCvsSideLength),_=f.dWidth,y=f.dHeight;e.width==_&&e.height==y||(e.width=_,e.height=y);const w=window.getComputedStyle(this._elContainer),x=parseFloat(w.width),E=parseFloat(w.height),k=x/E,P=n/r;let M,V,L,R,D=1;s==="contain"?(P>k?(D=x/n,M=0,V=(E-r*D)/2):(D=E/r,M=(x-n*D)/2,V=0),M+=a.regionLeft*D,V+=a.regionTop*D,L=(a.regionRight-a.regionLeft)*D,R=(a.regionBottom-a.regionTop)*D):s==="cover"?(P>k?(D=E/r,M=a.regionLeft*D-(n*D-x)/2,V=a.regionTop*D):(D=x/n,M=a.regionLeft*D,V=a.regionTop*D-(r*D-E)/2),L=(a.regionRight-a.regionLeft)*D,R=(a.regionBottom-a.regionTop)*D):(M=0,V=0,L=0,R=0),e.style.position="absolute",e.style.left=M+"px",e.style.top=V+"px",e.style.width=L+"px",e.style.height=R+"px"}showScanRegionOverlays(){this._scanRegionOverlayContainer&&(this._scanRegionOverlayContainer.style.display=="none"&&(this._scanRegionOverlayContainer.style.display=""),this._recordedStates.overlayShow=!0)}hideScanRegionOverlays(){this._scanRegionOverlayContainer&&(this._scanRegionOverlayContainer.style.display="none",this._recordedStates.overlayShow=!1)}setViewDecorator(e,i){if(!e)return void(this._cvsViewDecorator&&(this._cvsViewDecorator.remove(),this._cvsViewDecorator=null));if(!i)throw new Error("Invalid area.");this._assertOpen();let n=[];if(typeof e=="string"?n.push(e):Array.isArray(e)&&(n=JSON.parse(JSON.stringify(e))),!this._cvsViewDecorator){if(this._cvsViewDecorator=document.createElement("canvas"),this._scanRegionOverlayContainer)this._scanRegionOverlayContainer.after(this._cvsViewDecorator);else if(this._layerBaseCvs)this._layerBaseCvs.parentElement.after(this._cvsViewDecorator);else if(this._cvsScanRegion)this._cvsScanRegion.after(this._cvsViewDecorator);else if(this._cvsOriginalImage)this._cvsOriginalImage.after(this._cvsViewDecorator);else if(this._cvsSingleFrameMode)this._cvsSingleFrameMode.after(this._cvsViewDecorator);else{if(!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(this._cvsViewDecorator)}this._recordedStates.decoratorShow=!0}this._decoratorArea=JSON.parse(JSON.stringify(i)),this._decoratorType.length=0;const r=["rectangle","focus"],s=["crossline","crosshair"];let a=!1,f=!1;for(let _ of n)_=_.toLowerCase(),r.includes(_)&&!a&&(a=!0,this._decoratorType.push(_)),s.includes(_)&&!f&&(f=!0,!this._decoratorType.includes(_)&&this._decoratorType.push(_));this._updateViewDecorator()}getViewDecorator(){return{type:JSON.parse(JSON.stringify(this._decoratorType)),area:JSON.parse(JSON.stringify(this._decoratorArea)),canvas:this._cvsViewDecorator}}showViewDecorator(){this._cvsViewDecorator&&(this._cvsViewDecorator.style.display=="none"&&(this._cvsViewDecorator.style.display=""),this._recordedStates.decoratorShow=!0)}hideViewDecorator(){this._cvsViewDecorator&&(this._cvsViewDecorator.style.display="none",this._recordedStates.decoratorShow=!1)}setViewDecoratorLineWidth(e,i){if(typeof e!="string")throw new Error("The 'type' should be a string.");if(e=e.toLowerCase(),!this._viewDecoratorInfo.hasOwnProperty(e))throw new Error(`The type of '${e}' doesn't exist.`);if(!this._viewDecoratorInfo[e].hasOwnProperty("lineWidth"))throw new Error(`It is not allowed to change the property 'lineWidth' when the decorator type is '${e}'.`);this._viewDecoratorInfo[e].lineWidth=i,this._updateViewDecorator()}setViewDecoratorStrokeStyle(e,i){if(typeof e!="string")throw new Error("The 'type' should be a string.");if(e=e.toLowerCase(),!this._viewDecoratorInfo.hasOwnProperty(e))throw new Error(`The type of '${e}' doesn't exist.`);if(!this._viewDecoratorInfo[e].hasOwnProperty("strokeStyle"))throw new Error(`It is not allowed to change the property 'strokeStyle' when the decorator type is '${e}'.`);this._viewDecoratorInfo[e].strokeStyle=i,this._updateViewDecorator()}setViewDecoratorFillStyle(e,i){if(typeof e!="string")throw new Error("The 'type' should be a string.");if(e=e.toLowerCase(),!this._viewDecoratorInfo.hasOwnProperty(e))throw new Error(`The type of '${e}' doesn't exist.`);if(!this._viewDecoratorInfo[e].hasOwnProperty("fillStyle"))throw new Error(`It is not allowed to change the property 'fillStyle' when the decorator type is '${e}'.`);this._viewDecoratorInfo[e].fillStyle=i,this._updateViewDecorator()}setViewDecoratorMaskFillStyle(e,i){if(typeof e!="string")throw new Error("The 'type' should be a string.");if(e=e.toLowerCase(),!this._viewDecoratorInfo.hasOwnProperty(e))throw new Error(`The type of '${e}' doesn't exist.`);if(!this._viewDecoratorInfo[e].hasOwnProperty("maskFillStyle"))throw new Error(`It is not allowed to change the property 'maskFillStyle' when the decorator type is '${e}'.`);this._viewDecoratorInfo[e].maskFillStyle=i,this._updateViewDecorator()}_updateViewDecorator(){if(!this._bOpen||!this._cvsViewDecorator||!this._decoratorArea)return;let e;if(this.singleFrameMode)e="contain";else{if(!this._video)return;e=this.getVideoFit()}const i=this._cvsViewDecorator;i.style.position="absolute",i.style.width="100%",i.style.height="100%",i.style.left="0",i.style.top="0",i.style.objectFit=e,i.style.pointerEvents="none";const n=this.getVisibleRegion(!0),r=n.regionRight-n.regionLeft,s=n.regionBottom-n.regionTop;if(i.width==r&&i.height==s||(i.width=r,i.height=s),r<=0||s<=0)return;const a=i.getContext("2d");a.clearRect(0,0,i.width,i.height);const f=this._decoratorArea.x/100*r,_=this._decoratorArea.y/100*s,y=this._decoratorArea.width/100*r,w=this._decoratorArea.height/100*s;for(let x of this._decoratorType){if(x==="rectangle"){a.fillStyle=this._viewDecoratorInfo.rectangle.maskFillStyle,a.fillRect(0,0,i.width,i.height),a.clearRect(Math.round(f),Math.round(_),Math.round(y),Math.round(w)),a.fillStyle=this._viewDecoratorInfo.rectangle.fillStyle,a.fillRect(Math.round(f),Math.round(_),Math.round(y),Math.round(w)),a.lineWidth=this._viewDecoratorInfo.rectangle.lineWidth,a.strokeStyle=this._viewDecoratorInfo.rectangle.strokeStyle;const E=a.lineWidth/2;a.strokeRect(Math.round(f-E),Math.round(_-E),Math.round(y+a.lineWidth),Math.round(w+a.lineWidth))}if(x==="focus"){a.fillStyle=this._viewDecoratorInfo.focus.maskFillStyle,a.fillRect(0,0,i.width,i.height),a.clearRect(Math.round(f),Math.round(_),Math.round(y),Math.round(w)),a.fillStyle=this._viewDecoratorInfo.focus.fillStyle,a.fillRect(Math.round(f),Math.round(_),Math.round(y),Math.round(w)),a.lineWidth=this._viewDecoratorInfo.focus.lineWidth,a.strokeStyle=this._viewDecoratorInfo.focus.strokeStyle;const E=a.lineWidth/2,k=[0,.25,.75,1],P=[0,.25,.75,1];a.beginPath();for(let M=0;M<k.length;M++)if(M==0||M==3)for(let V=0;V<P.length;V+=2)a.moveTo(Math.round(f+k[M]*y),Math.round(_+P[V]*w)),a.lineTo(Math.round(f+k[M]*y),Math.round(_+P[V+1]*w));for(let M=0;M<P.length;M++)if(M==0||M==3)for(let V=0;V<k.length;V+=2)a.moveTo(Math.round(f+k[V]*y-E),Math.round(_+P[M]*w)),a.lineTo(Math.round(f+k[V+1]*y+E),Math.round(_+P[M]*w));a.stroke()}if(x==="crossline"&&(a.beginPath(),a.lineWidth=this._viewDecoratorInfo.crossline.lineWidth,a.strokeStyle=this._viewDecoratorInfo.crossline.strokeStyle,a.moveTo(Math.round(f),Math.round(_+w/2)),a.lineTo(Math.round(f+y),Math.round(_+w/2)),a.moveTo(Math.round(f+y/2),Math.round(_)),a.lineTo(Math.round(f+y/2),Math.round(_+w)),a.stroke()),x==="crosshair"){a.beginPath();const E=.05*Math.min(y,w);a.lineWidth=this._viewDecoratorInfo.crosshair.lineWidth,a.strokeStyle=this._viewDecoratorInfo.crosshair.strokeStyle,a.moveTo(Math.round(f+(y-E)/2),Math.round(_+w/2)),a.lineTo(Math.round(f+(y+E)/2),Math.round(_+w/2)),a.moveTo(Math.round(f+y/2),Math.round(_+(w-E)/2)),a.lineTo(Math.round(f+y/2),Math.round(_+(w+E)/2)),a.stroke()}}}getVisibleRegion(e){this._assertOpen();const i=this._calculateCvsSize();if(!i)return null;const{width:n,height:r,objectFit:s}=i;let a=(()=>{const f=parseFloat(window.getComputedStyle(this._elContainer).width),_=parseFloat(window.getComputedStyle(this._elContainer).height);let y,w={regionBottom:r,regionRight:n,regionLeft:0,regionTop:0,regionMeasuredByPercentage:!1};return s==="cover"?f/_<n/r?(y=_/r,w.regionLeft=Math.floor((n-f/y)/2),w.regionRight=Math.ceil(n-w.regionLeft),w.regionTop=0,w.regionBottom=r):(y=f/n,w.regionTop=Math.floor((r-_/y)/2),w.regionBottom=Math.ceil(r-w.regionTop),w.regionLeft=0,w.regionRight=n):s==="none"&&(f<n&&_<r?(w.regionLeft=Math.floor((n-f)/2),w.regionRight=Math.ceil(n-w.regionLeft),w.regionTop=Math.floor((r-_)/2),w.regionBottom=Math.ceil(r-w.regionTop)):f<n?(w.regionLeft=Math.floor((n-f)/2),w.regionRight=Math.ceil(n-w.regionLeft),w.regionTop=0,w.regionBottom=r):_<r&&(w.regionTop=Math.floor((r-_)/2),w.regionBottom=Math.ceil(r-w.regionTop),w.regionLeft=0,w.regionRight=n)),w})();return e?a.regionMeasuredByPercentage=!1:(a.regionBottom=Math.ceil(a.regionBottom/r*100),a.regionRight=Math.ceil(a.regionRight/n*100),a.regionLeft=Math.floor(a.regionLeft/n*100),a.regionTop=Math.floor(a.regionTop/r*100),a.regionMeasuredByPercentage=!0),a}setScanRegionMaskStyle(e){e&&(e.fillStyle&&(this.regionMaskFillStyle=e.fillStyle),e.strokeStyle&&(this.regionMaskStrokeStyle=e.strokeStyle),e.lineWidth&&(this.regionMaskLineWidth=e.lineWidth),this._updateScanRegionCanvas())}_getRegionInPixels(e,i,n){if(!(e<=0||i<=0))return n?n.regionMeasuredByPercentage?{regionLeft:Math.round(n.regionLeft/100*e),regionTop:Math.round(n.regionTop/100*i),regionRight:Math.round(n.regionRight/100*e),regionBottom:Math.round(n.regionBottom/100*i),regionMeasuredByPercentage:!1}:JSON.parse(JSON.stringify(n)):{regionLeft:0,regionTop:0,regionRight:e,regionBottom:i,regionMeasuredByPercentage:!1}}_updateScanRegionCanvas(){if(!this._bOpen)return;const e=this._calculateCvsSize();if(!e)return;const{width:i,height:n,objectFit:r}=e;if(i<=0||n<=0)return void(this._cvsScanRegion&&(this._cvsScanRegion.width=0,this._cvsScanRegion.height=0));const s=this._getRegionInPixels(i,n,this._scanRegion);if(!this._cvsScanRegion){if(this._cvsScanRegion=document.createElement("canvas"),this._cvsOriginalImage)this._cvsOriginalImage.after(this._cvsScanRegion);else if(this._cvsSingleFrameMode)this._cvsSingleFrameMode.after(this._cvsScanRegion);else{if(!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(this._cvsScanRegion)}this._recordedStates.maskShow=!0}const a=this._cvsScanRegion;a.style.position="absolute",a.style.width="100%",a.style.height="100%",a.style.left="0",a.style.top="0",a.style.objectFit=r,a.style.pointerEvents="none",a.width==i&&a.height==n||(a.width=i,a.height=n);const f=a.getContext("2d");if(f.clearRect(0,0,a.width,a.height),s.regionLeft!=0||s.regionRight!=i||s.regionTop!=0||s.regionBottom!=n){const _=s.regionLeft,y=s.regionTop,w=s.regionRight-s.regionLeft,x=s.regionBottom-s.regionTop;f.fillStyle=this.regionMaskFillStyle,f.fillRect(0,0,a.width,a.height),f.clearRect(Math.round(_),Math.round(y),Math.round(w),Math.round(x)),f.strokeStyle=this.regionMaskStrokeStyle,f.lineWidth=this.regionMaskLineWidth;const E=f.lineWidth/2;f.strokeRect(Math.round(_-E),Math.round(y-E),Math.round(w+f.lineWidth),Math.round(x+f.lineWidth))}}_updateScanAreaDiv(){if(!this._bOpen)return;const e=this._calculateCvsSize();if(!e)return;const{width:i,height:n,objectFit:r}=e;if(!this._divScanArea)return;if(i<=0||n<=0)return this._divScanArea.style.width="0",void(this._divScanArea.style.height="0");const s=this._getRegionInPixels(i,n,this._scanRegion),a=window.getComputedStyle(this._elContainer),f=parseFloat(a.width),_=parseFloat(a.height),y=f/_,w=i/n;let x,E,k,P,M=1;if(r==="contain")y<w?(M=f/i,x=0,E=(_-n*M)/2):(M=_/n,x=(f-i*M)/2,E=0),x+=s.regionLeft*M,E+=s.regionTop*M,k=(s.regionRight-s.regionLeft)*M,P=(s.regionBottom-s.regionTop)*M;else if(r==="cover")if(y<w){M=_/n,x=s.regionLeft*M-(i*M-f)/2,x=Math.max(x,0),x=Math.min(x,parseFloat(a.width)),E=s.regionTop*M;let V=s.regionRight*M-(i*M-f)/2;V=Math.max(V,0),V=Math.min(V,parseFloat(a.width)),k=V-x,P=(s.regionBottom-s.regionTop)*M}else{M=f/i,x=s.regionLeft*M,E=s.regionTop*M-(n*M-_)/2,E=Math.max(E,0),E=Math.min(E,parseFloat(a.height));let V=s.regionBottom*M-(n*M-_)/2;V=Math.max(V,0),V=Math.min(V,parseFloat(a.height)),k=(s.regionRight-s.regionLeft)*M,P=V-E}else x=0,E=0,k=0,P=0;this._divScanArea.style.left=x+"px",this._divScanArea.style.top=E+"px",this._divScanArea.style.width=k+"px",this._divScanArea.style.height=P+"px"}set croppingRegions(e){this._croppingRegions=e,this._bFetchingLoopStarted&&(this.bIncreaseRegionIndexAuto&&(this._croppingRegionIndex=0),this._fetchingLoop(!1))}get croppingRegions(){if(this._croppingRegions!==void 0)return this._croppingRegions;if(this._controler){const e=this._controler.getPropertyDisiredValue("croppingRegions");if(e&&e.length===1)return e[0]}return this._defaultCroppingRegions}set croppingRegionIndex(e){e<0?(this.bIncreaseRegionIndexAuto=!0,this._croppingRegionIndex=0):(this.bIncreaseRegionIndexAuto=!1,this._croppingRegionIndex=e)}get croppingRegionIndex(){return this._croppingRegionIndex}set loopInterval(e){if(e<0)throw new Error("'Invalid value.");this._loopInterval=e,this._bFetchingLoopStarted&&this._fetchingLoop(!1)}get loopInterval(){if(this._loopInterval!==void 0)return this._loopInterval;if(this._controler){const e=this._controler.getPropertyDisiredValue("loopInterval");if(e&&e.length===1)return e[0]}return this._defaultLoopInterval}set maxNumberOfFramesInBuffer(e){if(e<=0)throw new Error("Invalid value.");for(this._maxNumberOfFramesInBuffer=e;this._frameQueue&&this._frameQueue.length>this.maxNumberOfFramesInBuffer;)this._frameQueue.shift()}get maxNumberOfFramesInBuffer(){if(this._maxNumberOfFramesInBuffer!==void 0)return this._maxNumberOfFramesInBuffer;if(this._controler){const e=this._controler.getPropertyDisiredValue("maxNumberOfFramesInBuffer");if(e&&e.length===1)return e[0]}return this._defaultMaxNumberOfFramesInBuffer}get numberOfFramesInBuffer(){return this._frameQueue.length}set refreshInterval(e){this._refreshInterval=e}get refreshInterval(){if(this._refreshInterval!==void 0)return this._refreshInterval;if(this._controler){const e=this._controler.getPropertyDisiredValue("refreshInterval");if(e&&e.length===1)return e[0]}return this._defaultRefreshInterval}static async createInstance(e){let i=new Ce;(typeof e=="string"||e instanceof String)&&(e=JSON.parse(e));for(let n in e)i[n]=e[n];return this._hasEngineResourceLoaded=!0,i._drawingLayersManager=new MT,i}static async playVideo(e,i,n){return new Promise((r,s)=>{e||s(new Error("Invalid video element.")),i||s(new Error("Invalid source.")),e.onloadedmetadata=async()=>{e.onloadedmetadata=null,await e.play(),r(e)},typeof i=="string"||i instanceof String?e.src=i:e.srcObject=i,n!==void 0&&setTimeout(()=>s(new Error("Failed to play video. Timeout.")),n)})}static findBestRearCamera(e){if(!e||!e.length)return null;const i=["rear","back","rck","arrire","trasera","trs","traseira","posteriore","","","","","","","","","","arka","achterzijde","","baksidan","bagside","sau","bak","tylny","takakamera","belakang","","","spate","hts","zadn","darrere","zadn","","stranja","belakang",""];for(let n of e){const r=n.label.toLowerCase();if(r&&i.some(s=>r.includes(s))&&(["iPhone","iPad"].includes(Ze.OS)||/\b0(\b)?/.test(r)))return n.deviceId}return["Android","HarmonyOS"].includes(Ze.OS)?e[e.length-1].deviceId:null}async play(e,i,n,r){if(this._video&&this.videoSrc){const f=await Ce.playVideo(this._video,this.videoSrc,4e3);if(!this._video)return f.pause(),this.playCallbackInfo={width:0,height:0,deviceId:null},{width:0,height:0,deviceId:null};const _={width:this._video.videoWidth,height:this._video.videoHeight,deviceId:this._currentCamera&&this._currentCamera.deviceId};this.playCallbackInfo=JSON.parse(JSON.stringify(_));const y=this.mapCameraEvents.get("played");for(let w of y){if(!w)continue;const x=JSON.parse(JSON.stringify(_));setTimeout(()=>{this.isDisposed&&this.disposed||w.apply(this,[x])},0)}return this._recordedStates.videoPlaying=!0,_}if(this.singleFrameMode)return r&&r.notTriggerSingleFrameClick||this._clickIptSingleFrameMode(),this.playCallbackInfo={width:0,height:0,deviceId:null},{width:0,height:0,deviceId:null};if(!this._video)throw new Error("'video' is null or undefined.");const s=++this.iPlayRound;if(this.promisePlay&&(await this.promisePlay,s<this.iPlayRound))return this.playCallbackInfo={width:this._video.videoWidth,height:this._video.videoHeight,deviceId:this._currentCamera&&this._currentCamera.deviceId},{width:this._video.videoWidth,height:this._video.videoHeight,deviceId:this._currentCamera&&this._currentCamera.deviceId};this.promisePlay=(async()=>{var f;try{this._video&&this._video.srcObject&&this.stop(),Ce._onLog&&Ce._onLog("DCE: ======before video========");const _=()=>{if(!this._video)throw x&&x.getTracks().forEach(D=>{D.stop()}),this._videoTrack=null,this._currentCamera=null,new Error("'video' is null or undefined.")},y=this.getVideoSettings();let w,x;if(typeof y.video=="boolean"&&(y.video={}),e)delete y.video.facingMode,y.video.deviceId={exact:e};else if(!y.video.deviceId){if(this._lastDeviceId)delete y.video.facingMode,y.video.deviceId={exact:this._lastDeviceId};else if(this.ifSaveLastUsedCamera&&Ce.isStorageAvailable&&window.localStorage.getItem("dce_last_camera_id")){delete y.video.facingMode,y.video.deviceId={ideal:window.localStorage.getItem("dce_last_camera_id")};const D=JSON.parse(window.localStorage.getItem("dce_last_apply_width")),Y=JSON.parse(window.localStorage.getItem("dce_last_apply_height"));D&&Y&&(y.video.width=D,y.video.height=Y)}else if(!this.ifSkipCameraInspection){if(y.video.facingMode){if(await this.getAllCameras(!1),!this._video)throw new Error("'video' is null or undefined.");let D=y.video.facingMode;if(D instanceof Array&&D.length&&(D=D[0]),D=D.exact||D.ideal||D,D==="environment"){w=!0;const Y=Ce.findBestRearCamera(this._allCameras);Y&&(delete y.video.facingMode,y.video.deviceId={exact:Y})}}}}i&&(y.video.width={ideal:i}),n&&(y.video.height={ideal:n}),Ce._onLog&&Ce._onLog("DCE: ======try getUserMedia========");let E=[0,500],k=null;const P=async D=>{for(let Y of E){Y&&await new Promise(ie=>setTimeout(ie,Y)),_();try{Ce._onLog&&Ce._onLog("DCE: ask "+JSON.stringify(D)),x=await navigator.mediaDevices.getUserMedia(D);break}catch(ie){if(_(),ie.name==="NotFoundError"||ie.name==="NotAllowedError")throw ie;k=ie,Ce._onLog&&Ce._onLog("DCE: "+ie.message||ie)}}_()};let M;if(await P(y),x||(Ce._onLog&&Ce._onLog("DCE: ======try getUserMedia again========"),M=JSON.parse(JSON.stringify(y)),typeof M.video=="object"&&(["iPhone","iPad"].includes(Ze.OS)?(i>=1280||n>=1280?M.video.width=1280:i>=640||n>=640?M.video.width=640:(i<640||n<640)&&(M.video.width=320),delete M.video.height):w&&!y.video.deviceId?(delete M.video.facingMode,this._allCameras.length&&(M.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})):M.video=!0),Ce._onLog&&Ce._onLog("DCE: "+M),await P(M)),x||(E=[1e3,2e3],await P(y)),x||await P(M),!x)throw k;const V=()=>{const D=x.getVideoTracks();let Y,ie;if(D.length&&(Y=this._videoTrack=D[0]),this._video&&Y){const oe=Y.getSettings();if(oe){for(let z of this._allCameras)if(oe.deviceId===z.deviceId){z._checked=!0,z.label=Y.label,ie=z;break}}}this._currentCamera=ie};if(await this.getAllCameras(!1),_(),w&&!this.ifSkipCameraInspection){V();const D=Ce.findBestRearCamera(this._allCameras),Y=(f=this._currentCamera)===null||f===void 0?void 0:f.deviceId;D&&D!=Y&&(x.getTracks().forEach(ie=>{ie.stop()}),E=[0,500,1e3,2e3],y.video.deviceId={exact:D},await P(y))}Ce._onLog&&Ce._onLog("DCE: ======play video========"),_(),await Ce.playVideo(this._video,x,4e3),_(),Ce._onLog&&Ce._onLog("DCE: ======played video========"),this._bgLoading&&(this._bgLoading.style.animationPlayState="paused");const L=this._video.videoWidth+"x"+this._video.videoHeight;this._optGotRsl&&(this._optGotRsl.setAttribute("data-width",this._video.videoWidth),this._optGotRsl.setAttribute("data-height",this._video.videoHeight),this._optGotRsl.innerText=L,this._selRsl&&this._optGotRsl.parentNode==this._selRsl&&(this._selRsl.value="got")),Ce._onLog&&Ce._onLog("DCE: got "+L),V(),this._renderSelCameraInfo();const R={width:this._video.videoWidth,height:this._video.videoHeight,deviceId:this._currentCamera&&this._currentCamera.deviceId};if(R.deviceId&&(this._lastDeviceId=R.deviceId,this.ifSaveLastUsedCamera&&Ce.isStorageAvailable&&(window.localStorage.setItem("dce_last_camera_id",this._lastDeviceId),y.video.width&&y.video.height&&(window.localStorage.setItem("dce_last_apply_width",JSON.stringify(y.video.width)),window.localStorage.setItem("dce_last_apply_height",JSON.stringify(y.video.height))))),!r||!r.notTriggerPlayedEvent){const D=this.mapCameraEvents.get("played");for(let Y of D){if(!Y)continue;const ie=JSON.parse(JSON.stringify(R));setTimeout(()=>{this.isDisposed&&this.disposed||Y.apply(this,[ie])},0)}}return this.promisePlay=null,R}catch(_){throw this.promisePlay=null,this._bgLoading&&(this._bgLoading.style.display="none"),_.name==="NotFoundError"&&(DOMException?_=new DOMException("No camera available, please use a device with an accessible camera.",_.name):(_=new Error("No camera available, please use a device with an accessible camera.")).name="NotFoundError"),_}})();const a=await this.promisePlay;return this.playCallbackInfo=JSON.parse(JSON.stringify(a)),this._recordedStates.videoPlaying=!0,a}async resume(){this._assertOpen(),this._video&&(await this._video.play(),this._recordedStates.videoPlaying=!0),this.ifShowScanRegionLaser&&this.showScanRegionLaser()}pause(){this._assertOpen(),this._video&&(this._video.pause(),this._recordedStates.videoPlaying=!1),this.ifShowScanRegionLaser&&this.hideScanRegionLaser()}_bindUI(){if(!this.UIElement)throw new Error("Need to define `UIElement` before opening.");const e=[this.UIElement];for(let i=0;i<e.length;++i)for(let n of e[i].children)e.push(n);for(let i of e){if(!this._video&&i.classList.contains(this.containerClassName)){this._elContainer=i;const n=document.createElement("video");n.style.position="absolute",n.style.left="0",n.style.top="0",n.style.width="100%",n.style.height="100%",n.style.objectFit=this.getVideoFit(),n.setAttribute("playsinline","true"),n.setAttribute("muted","true"),this._video=n;const r=document.createElement("div");r.append(n),r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.width="100%",r.style.height="100%",r.style.overflow="hidden",this._videoContainer=r,i.prepend(r)}else!this._divScanArea&&i.classList.contains("dce-scanarea")?this._divScanArea=i:!this._divScanLight&&i.classList.contains("dce-scanlight")?this._divScanLight=i:!this._bgLoading&&i.classList.contains("dce-bg-loading")?this._bgLoading=i:!this._bgCamera&&i.classList.contains("dce-bg-camera")?this._bgCamera=i:!this._selCam&&i.classList.contains("dce-sel-camera")?this._selCam=i:!this._selRsl&&i.classList.contains("dce-sel-resolution")?(this._selRsl=i,this.videoSrc||this.singleFrameMode||this._selRsl.options.length||(this._selRsl.innerHTML=[this._optGotRsl?"":'<option class="dce-opt-gotResolution" value="got"></option>','<option data-width="1920" data-height="1080">1920x1080</option>','<option data-width="1280" data-height="720">1280x720</option>','<option data-width="640" data-height="480">640x480</option>'].join(""),this._optGotRsl=this._optGotRsl||this._selRsl.options[0])):!this._optGotRsl&&i.classList.contains("dce-opt-gotResolution")?this._optGotRsl=i:!this._btnClose&&i.classList.contains("dce-btn-close")?this._btnClose=i:!this._selMinLtr&&i.classList.contains("dlr-sel-minletter")?(this._selMinLtr=i,this._selMinLtr.options.length||(this._selMinLtr.innerHTML=[this._optGotMinLtr?"":'<option class="dlr-opt-gotMinLtr" value="got"></option>','<option value="0" selected>any letter</option>','<option value="3">3+ letters</option>','<option value="5">5+ letters</option>','<option value="8">8+ letters</option>','<option value="12">12+ letters</option>','<option value="17">17+ letters</option>','<option value="30">30+ letters</option>','<option value="50">50+ letters</option>','<option value="80">80+ letters</option>','<option value="120">120+ letters</option>'].join(""),this._optGotMinLtr=this._optGotMinLtr||this._selMinLtr.options[0])):!this._optGotMinLtr&&i.classList.contains("dlr-opt-gotMinLtr")&&(this._optGotMinLtr=i);if(this.extraBindings&&this.extraBindings.length)for(let n of this.extraBindings)try{n(i)}catch(r){}}if(!this._video)throw this._unbindUI(),Error(`Can not find the video container element with class '${this.containerClassName}'`);this.singleFrameMode||this.videoSrc?(this.singleFrameMode&&(this._elContainer&&(this._elContainer.addEventListener("click",this._clickIptSingleFrameMode),this._elContainer.setAttribute("title","Take a photo")),this._bgCamera&&(this._bgCamera.style.display="block")),this._selCam&&(this._selCam.style.display="none"),this._selRsl&&(this._selRsl.style.display="none"),this._selMinLtr&&(this._selMinLtr.style.display="none")):(this._elContainer&&(["Android","HarmonyOS"].includes(Ze.OS)?(this._elContainer.addEventListener("touchend",this._tapDoFocus),this._elContainer.addEventListener("touchmove",this._touchMoveEvent)):this._elContainer.addEventListener("click",this._tapDoFocus)),this._selCam&&(this._selCam.style.display="block",this._selCam.addEventListener("change",this._onCameraSelChange)),this._selRsl&&(this._selRsl.style.display="block",this._selRsl.addEventListener("change",this._onResolutionSelChange)),this._selMinLtr&&(this._selMinLtr.style.display="block"),this._bgLoading&&(this._bgLoading.style.display="block")),this._btnClose&&this._btnClose.addEventListener("click",this._onCloseBtnClick),document.addEventListener("visibilitychange",this._ev_documentHideEvent),window.ResizeObserver&&(this._resizeObserver||(this._resizeObserver=new ResizeObserver(i=>{for(let n of i)n.target===this._elContainer&&this._updateLayers()})),this._elContainer&&this._resizeObserver.observe(this._elContainer)),this._windowWidth=document.documentElement.clientWidth,window.addEventListener("resize",this._windowResizeListener)}_unbindUI(){this.singleFrameMode?(this._elContainer&&(this._elContainer.removeEventListener("click",this._clickIptSingleFrameMode),this._elContainer.removeAttribute("title")),this._bgCamera&&(this._bgCamera.style.display="none")):this._bgLoading&&(this._bgLoading.style.display="none"),this._elContainer&&(this._elContainer.removeEventListener("click",this._tapDoFocus),this._elContainer.removeEventListener("touchend",this._tapDoFocus),this._elContainer.removeEventListener("touchmove",this._touchMoveEvent)),this._selCam&&this._selCam.removeEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.removeEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.removeEventListener("click",this._onCloseBtnClick),this.hideScanRegionLaser(),this.hideViewDecorator(),this.hideScanRegionOverlays(),this._drawingLayersManager.setVisible(!1),this._hideOriginalImageCvs(),this._videoContainer&&this._videoContainer.remove(),this._video=null,this._videoContainer=null,this._elContainer=null,this._selCam=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._selMinLtr=null,this._optGotMinLtr=null,this._divScanArea=null,this._divScanLight=null,this._cvsScanRegion&&(this._cvsScanRegion.remove(),this._cvsScanRegion=null),this._singleFrameModeIpt&&(this._singleFrameModeIpt.remove(),this._singleFrameModeIpt=null),this._cvsSingleFrameMode&&(this._cvsSingleFrameMode.remove(),this._cvsSingleFrameMode=null),document.removeEventListener("visibilitychange",this._ev_documentHideEvent),window.ResizeObserver&&this._resizeObserver&&this._resizeObserver.disconnect(),window.removeEventListener("resize",this._windowResizeListener)}_assertOpen(){if(!this._bOpen)throw Error("The camera is not open.")}async open(e){this.UIElement||await this.setUIElement(Ce.defaultUIElementURL),this._bindUI(),e&&this.appendAndShowUI();let i=await this.play();this.bOpen=!0,this._focusParameters.fds=null,this._focusParameters.kTimeout=void 0,this._focusSupported=!0,this._tapFocusEnabled&&!this.singleFrameMode&&(this._focusParameters.fds=(await this.getCapabilities()).focusDistance,this._focusParameters.fds||(this._focusSupported=!1,this._tapFocusEnabled=!1));const n=this.mapCameraEvents.get("cameraopen");for(let r of n){if(!r)continue;const s=JSON.parse(JSON.stringify(i));setTimeout(()=>{this.isDisposed&&this.disposed||r.apply(this,[s])},0)}return i}close(e){if(!this._video)return;this.stop(),this._hideOriginalImage(!1),this.hideTip(),this._unbindUI(),e&&this.hideUI(),this.stopFetchingLoop(),this.bOpen=!1;const i=this.mapCameraEvents.get("cameraclose");for(let n of i){if(!n)continue;const r={width:0,height:0,deviceId:null};setTimeout(()=>{this.isDisposed&&this.disposed||n.apply(this,[r])},0)}}stop(){this._video&&this._video.srcObject&&(this._video.srcObject.getTracks().forEach(e=>{e.stop()}),this._video.srcObject=null,this._videoTrack=null,this._currentCamera=null),this._video&&this.videoSrc&&(this._video.pause(),this._video.currentTime=0),this._bgLoading&&(this._bgLoading.style.animationPlayState=""),this._frameQueue.length=0,this._reusedCvs&&this._reusedCvs.ctx2d&&this._reusedCvs.ctx2d.clearRect(0,0,this._reusedCvs.width,this._reusedCvs.height),this.forceLoseContext()}async getAllCameras(e=!0){let i=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput");if(e&&i&&i.length&&!i[0].deviceId){let s=await navigator.mediaDevices.getUserMedia({video:!0});i=(await navigator.mediaDevices.enumerateDevices()).filter(a=>a.kind==="videoinput"),s.getTracks().forEach(a=>{a.stop()})}const n=[],r=[];if(this._allCameras)for(let s of this._allCameras)s._checked&&r.push(s);for(let s=0;s<i.length;s++){let a,f=i[s];for(let _ of r)if(f.deviceId==_.deviceId){a=_;break}a||(a={deviceId:f.deviceId,label:f.label?f.label:"camera "+s,_checked:!1}),a.deviceId&&n.push(a)}return this._allCameras=n,n}_renderSelCameraInfo(){if(!this._selCam)return;let e;this._selCam.textContent="";for(let i of this._allCameras){const n=document.createElement("option");n.value=i.deviceId,n.innerText=i.label,this._selCam.append(n),i.deviceId&&this._currentCamera&&this._currentCamera.deviceId==i.deviceId&&(e=n)}this._selCam.value=e?e.value:""}getSelectedCamera(){if(!this._bOpen){let e="";const i=this.videoSettings.video.deviceId;i&&(e=i.exact||i.ideal||i);for(let n of this._allCameras)if(n.deviceId===e)return JSON.parse(JSON.stringify(n));return{deviceId:e,label:"",_checked:!1}}return this._currentCamera}async selectCamera(e){let i="";if(e&&(i=e.deviceId||e),this.videoSettings.video.deviceId={exact:i},!this._bOpen||this._video.paused)return null;let n=null;this._currentCamera&&(n=this._currentCamera.deviceId);const r=this._video.videoWidth,s=this._video.videoHeight,a=await this.play(e.deviceId||e);if(this._focusParameters.fds=null,this._focusParameters.kTimeout=void 0,this._focusSupported=!0,this._tapFocusEnabled&&!this.singleFrameMode&&(this._focusParameters.fds=(await this.getCapabilities()).focusDistance,this._focusParameters.fds||(this._focusSupported=!1,this._tapFocusEnabled=!1)),n!==a.deviceId){const f=this.mapCameraEvents.get("camerachange");for(let _ of f){if(!_)continue;const y=JSON.parse(JSON.stringify(a));setTimeout(()=>{this.isDisposed&&this.disposed||_.apply(this,[y])},0)}}if(r!==a.width||s!==a.height){this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let _ of this._arrScanRegionOverlays)_&&this._updateScanRegionOverlay(_);this._updateDrawingLayersSize(),this._updateVideoContainerStyle();const f=this.mapCameraEvents.get("resolutionchange");for(let _ of f){if(!_)continue;const y=JSON.parse(JSON.stringify(a));setTimeout(()=>{this.isDisposed&&this.disposed||_.apply(this,[y])},0)}}return a}getResolution(){if(this._bOpen)return[this._video.videoWidth,this._video.videoHeight];{let e=0,i=0;const n=this.videoSettings.video.width,r=this.videoSettings.video.height;return n&&(e=n.exact||n.ideal||n),r&&(i=r.exact||r.ideal||r),[e,i]}}async setResolution(e,i){let n,r;if(e instanceof Array?(n=e[0],r=e[1]):(n=e,r=i),this.videoSettings.video.width={ideal:n},this.videoSettings.video.height={ideal:r},!this._bOpen||this._video.paused)return null;const s=this._video.videoWidth,a=this._video.videoHeight,f=await this.play(null,n,r);if(s!==f.width||a!==f.height){this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let y of this._arrScanRegionOverlays)y&&this._updateScanRegionOverlay(y);this._updateDrawingLayersSize(),this._updateVideoContainerStyle();const _=this.mapCameraEvents.get("resolutionchange");for(let y of _){if(!y)continue;const w=JSON.parse(JSON.stringify(f));setTimeout(()=>{this.isDisposed&&this.disposed||y.apply(this,[w])},0)}}return f}async getResolutions(e){let i="";const n=(s,a)=>{const f=this._mapCameraResolutions.get(s);if(!f||!f.length)return!1;for(let _ of f)if(_[0]===a.width&&_[1]===a.height)return!0;return!1},r=async(s,a,f)=>{const _={video:{deviceId:{exact:s},width:{ideal:a},height:{ideal:f}}};let y=null;try{y=await navigator.mediaDevices.getUserMedia(_)}catch(E){return null}if(!y)return null;const w=y.getVideoTracks();let x=null;try{const E=w[0].getSettings();x={width:E.width,height:E.height}}catch(E){const k=document.createElement("video");k.srcObject=y,x={width:k.videoWidth,height:k.videoHeight},k.srcObject=null}return w.forEach(E=>{E.stop()}),x};if(!this._bOpen){const s=this.videoSettings.video.deviceId;if(!s||(i=s.hasOwnProperty("exact")?this.videoSettings.video.deviceId.exact:s.hasOwnProperty("ideal")?this.videoSettings.video.deviceId.ideal:this.videoSettings.video.deviceId,!i))return null;let a=this._mapCameraResolutions.get(i);if(a&&!e)return this._mapCameraResolutions.get(i);this._mapCameraResolutions.set(i,[]),a=this._mapCameraResolutions.get(i);for(let f of this._predefinedResolutions){const _=await r(i,f.width,f.height);_&&!n(i,_)&&a.push([_.width,_.height])}return a}if(this._currentCamera){i=this._currentCamera.deviceId;let s=this._mapCameraResolutions.get(i);if(s&&!e)return this._mapCameraResolutions.get(i);this._mapCameraResolutions.set(i,[]),s=this._mapCameraResolutions.get(i);let a=this._videoTrack;for(let f of this._predefinedResolutions){await a.applyConstraints({width:{ideal:f.width},height:{ideal:f.height}});const _=a.getSettings(),y={width:_.width,height:_.height};n(i,y)||s.push([y.width,y.height])}return this._video.srcObject.getTracks().forEach(f=>{f.stop()}),await this.play(i,null,null,{notTriggerPlayedEvent:!0}),s}return null}on(e,i){if(!i)return;const n=this.mapCameraEvents.get(e.toLowerCase());if(!n)throw new Error(`Event '${e}' does not exist.`);n.includes(i)||n.push(i)}off(e,i){const n=this.mapCameraEvents.get(e.toLowerCase());if(!n)throw new Error(`Event '${e}' does not exist.`);const r=n.indexOf(i);r!==-1&&n.splice(r,1)}offAll(e){if(e){if(typeof e=="string"){const i=this.mapCameraEvents.get(e);i&&(i.length=0)}}else for(let i of this.mapCameraEvents.values())i&&(i.length=0)}getVideoSettings(){return JSON.parse(JSON.stringify(this.videoSettings))}updateVideoSettings(e){if(this.videoSettings=JSON.parse(JSON.stringify(e)),this._lastDeviceId=null,this._bOpen)return this.play()}isOpen(){return this._bOpen}getCapabilities(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getCapabilities()' is unavailable in singleFrameMode.");return this._videoTrack&&this._videoTrack.getCapabilities?this._videoTrack.getCapabilities():{}}getCameraSettings(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getCameraSettings()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getSettings():null}getConstraints(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getConstraints()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getConstraints():null}async applyConstraints(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'applyConstraints()' is unavailable in singleFrameMode.");if(!this._videoTrack)throw new Error('"_videoTrack" is null.');if(!this._videoTrack.applyConstraints)throw Error("Not supported.");return await this._videoTrack.applyConstraints(e)}async turnOnTorch(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'turnOnTorch()' is unavailable in singleFrameMode.");if(this.getCapabilities().torch)return await this._videoTrack.applyConstraints({advanced:[{torch:!0}]});throw Error("Not supported.")}async turnOffTorch(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'turnOffTorch()' is unavailable in singleFrameMode.");if(this.getCapabilities().torch)return await this._videoTrack.applyConstraints({advanced:[{torch:!1}]});throw Error("Not supported.")}async setColorTemperature(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'setColorTemperature()' is unavailable in singleFrameMode.");let i=this.getCapabilities().colorTemperature;if(!i)throw Error("Not supported.");return e<i.min?e=i.min:e>i.max&&(e=i.max),await this._videoTrack.applyConstraints({advanced:[{colorTemperature:e,whiteBalanceMode:"manual"}]})}getColorTemperature(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getColorTemperature()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getSettings().colorTemperature||0:null}async setExposureCompensation(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'setExposureCompensation()' is unavailable in singleFrameMode.");let i=this.getCapabilities().exposureCompensation;if(!i)throw Error("Not supported.");return e<i.min?e=i.min:e>i.max&&(e=i.max),await this._videoTrack.applyConstraints({advanced:[{exposureCompensation:e}]})}getExposureCompensation(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getExposureCompensation()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getSettings().exposureCompensation||0:null}async _setHardwareScale(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_setHardwareScale()' is unavailable in singleFrameMode.");if(e<1)throw new RangeError("Invalid value.");if(!this._videoTrack)return;const i=this.getCapabilities().zoom;if(!i)throw new Error("Not supported.");return e<i.min?e=i.min:e>i.max&&(e=i.max),e=Lt(e,i.min,i.step,i.max),await this._videoTrack.applyConstraints({advanced:[{zoom:e}]}),e}_getHardwareScale(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_getHardwareScale()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getSettings().zoom||1:null}_setSoftwareScale(e,i){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_setSoftwareScale()' is unavailable in singleFrameMode.");if(e<1)throw new RangeError("Invalid value.");i&&this._setScaleCenter(i),this._softwareScale=e,this._scaleVideo(e,i)}_getSoftwareScale(){return this._softwareScale}_setScaleCenter(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_setScaleCenter()' is unavailable in singleFrameMode.");if(!e||typeof e.x!="string"||typeof e.y!="string")throw new Error("Invalid center.");const i=this._video.videoWidth,n=this._video.videoHeight;let r=0,s=0;if(e.x.endsWith("px"))r=parseFloat(e.x);else{if(!e.x.endsWith("%"))throw new Error("Invalid scale center.");r=parseFloat(e.x)/100*i}if(e.y.endsWith("px"))s=parseFloat(e.y);else{if(!e.y.endsWith("%"))throw new Error("Invalid scale center.");s=parseFloat(e.y)/100*n}if(r==NaN||s==NaN)throw new Error("Invalid scale center.");this._scaleCenter={x:r,y:s}}_resetScaleCenter(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_resetScaleCenter()' is unavailable in singleFrameMode.");const e=this._video.videoWidth,i=this._video.videoHeight;this._scaleCenter={x:e/2,y:i/2}}_isVideoCenter(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_isVideoCenter()' is unavailable in singleFrameMode.");return e&&e.x==this._video.videoWidth/2&&e.y==this._video.videoHeight/2}async _setZoom(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'setZoom()' is unavailable in singleFrameMode.");if(e<1)throw new RangeError("Invalid value.");this._resetScaleCenter();try{if(this._isVideoCenter(this._scaleCenter)){const i=await this._setHardwareScale(e);let n=this._getHardwareScale();n==1&&i!=1&&(n=i),e>n?this._setSoftwareScale(e/n):this._setSoftwareScale(1)}else await this._setHardwareScale(1),this._setSoftwareScale(e)}catch(i){if((i.message||i)!=="Not supported.")throw i;this._setSoftwareScale(e)}}async setZoom(e){if(typeof e!="number"&&typeof e!="object")throw new TypeError("Illegal type of argument.");if(typeof e=="number")return this._setZoom(e);if(this._assertOpen(),this.singleFrameMode)throw new Error("'setZoom()' is unavailable in singleFrameMode.");if(e){if(typeof e.factor!="number")throw new TypeError("Illegal type of 'factor'.");if(e.factor<1)throw new RangeError("Invalid value.");e.centerPoint?this._setScaleCenter(e.centerPoint):this._resetScaleCenter();try{if(this._isVideoCenter(this._scaleCenter)){const i=await this._setHardwareScale(e.factor);let n=this._getHardwareScale();n==1&&i!=1&&(n=i),e.factor>n?this._setSoftwareScale(e.factor/n):this._setSoftwareScale(1)}else await this._setHardwareScale(1),this._setSoftwareScale(e.factor)}catch(i){if((i.message||i)!=="Not supported.")throw i;this._setSoftwareScale(e.factor)}}}getZoom(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getZoom()' is unavailable in singleFrameMode.");return this._videoTrack?this._getHardwareScale()*this._softwareScale:null}getZoomSettings(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getZoom()' is unavailable in singleFrameMode.");return this._videoTrack?{factor:this._getHardwareScale()*this._softwareScale}:null}async resetZoom(){await this.setZoom({factor:1})}async setFrameRate(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'setFrameRate()' is unavailable in singleFrameMode.");let i=this.getCapabilities().frameRate;if(!i)throw Error("Not supported.");return e<i.min?e=i.min:e>i.max&&(e=i.max),await this._videoTrack.applyConstraints({width:{ideal:Math.max(this._video.videoWidth,this._video.videoHeight)},frameRate:e})}getFrameRate(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getFrameRate()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getSettings().frameRate:null}async _setFocus(e,i){if(this._assertOpen(),this.singleFrameMode)throw new Error("'setFocus()' is unavailable in singleFrameMode.");if(typeof e!="string")throw Error("Invalid focus mode.");e=e.toLowerCase();const n=this.getCapabilities().focusMode,r=this.getCapabilities().focusDistance;if(!n)throw Error("Not supported.");if(!n.includes(e))throw Error("Unsupported mode.");if(i>=0){if(!r)throw Error("Manual focus unsupported.");return i<r.min?i=r.min:i>r.max&&(i=r.max),i=Lt(i,r.min,r.step,r.max),await this._videoTrack.applyConstraints({advanced:[{focusMode:e,focusDistance:i}]})}return await this._videoTrack.applyConstraints({advanced:[{focusMode:e}]})}async setFocus(e,i){if(typeof e=="string")return this._setFocus(e,i);if(this._assertOpen(),this.singleFrameMode)throw new Error("'setFocus()' is unavailable in singleFrameMode.");if(!e)return;const n=this.getCapabilities(),r=n.focusMode,s=n.focusDistance;if(!r)throw Error("Not supported.");if(typeof e.mode!="string")throw Error("Invalid focus mode.");const a=e.mode.toLowerCase();if(!r.includes(a))throw Error("Unsupported focus mode.");if(a!=="manual")return this._focusParameters._focusArea=null,await this._videoTrack.applyConstraints({advanced:[{focusMode:a}]});if(!s)throw Error("Manual focus unsupported.");if(e.hasOwnProperty("distance")){let f=e.distance;return f<s.min?f=s.min:f>s.max&&(f=s.max),f=Lt(f,s.min,s.step,s.max),this._focusParameters._focusArea=null,await this._videoTrack.applyConstraints({advanced:[{focusMode:a,focusDistance:f}]})}if(!e.area)throw new Error("'distance' or 'area' should be specified in 'manual' mode.");{const f=e.area.centerPoint;let _=e.area.width,y=e.area.height;if(!_||!y){const w=this._video.videoWidth,x=this._video.videoHeight;_||(_=2*Math.round(Math.min(w,x)/this._focusParameters.defaultFocusAreaSizeRatio/2)+"px"),y||(y=2*Math.round(Math.min(w,x)/this._focusParameters.defaultFocusAreaSizeRatio/2)+"px")}this._focusParameters._focusArea={centerPoint:{x:f.x,y:f.y},width:_,height:y},await this._setLocalFocus(f,_,y)}}getFocus(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_getHardwareScale()' is unavailable in singleFrameMode.");if(!this._videoTrack)return null;const e=this._videoTrack.getSettings().focusMode;return e?e==="continuous"?{mode:e}:{mode:e,distance:this._videoTrack.getSettings().focusDistance}:null}getFocusSettings(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_getHardwareScale()' is unavailable in singleFrameMode.");if(!this._videoTrack)return null;const e=this._videoTrack.getSettings(),i=e.focusMode;return i?i==="manual"?this._focusParameters._focusArea?{mode:"manual",area:JSON.parse(JSON.stringify(this._focusParameters._focusArea))}:{mode:"manual",distance:e.focusDistance}:{mode:i}:null}async _setFocusAndGetContract(e,i){const n=E=>{if(!this._bOpen||!this._videoTrack||this.video.paused||E.focusTaskId!=this._focusParameters.curFocusTaskId){this._bOpen&&this._videoTrack&&!this.video.paused||(this._focusParameters.isDoingFocus=0);const k=new Error(`Focus task ${E.focusTaskId} canceled.`);throw k.name="DeprecatedTaskError",k}this._focusParameters.isDoingFocus===1&&Date.now()-E.timeStart>this._focusParameters.focusCancelableTime&&(this._focusParameters.isDoingFocus=-1)};let r;i=Lt(i,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),await this._videoTrack.applyConstraints({advanced:[{focusMode:"manual",focusDistance:i}]}),n(e),r=this._focusParameters.oldDistance==null?this._focusParameters.kTimeout*Math.max(Math.abs(1/this._focusParameters.fds.min-1/i),Math.abs(1/this._focusParameters.fds.max-1/i))+this._focusParameters.minTimeout:this._focusParameters.kTimeout*Math.abs(1/this._focusParameters.oldDistance-1/i)+this._focusParameters.minTimeout,this._focusParameters.oldDistance=i,await new Promise(E=>{setTimeout(E,r)}),n(e);let s=e.focusL-e.focusW/2,a=e.focusT-e.focusH/2,f=e.focusW,_=e.focusH;if(s>=this.video.videoWidth||a>=this.video.videoHeight)throw new Error("Invalid area.");s+f>this.video.videoWidth&&(f=this.video.videoWidth-s),a+_>this.video.videoHeight&&(_=this.video.videoHeight-a);const y=this._getImageData(this.video,this.video.videoWidth,this.video.videoHeight,{sx:s,sy:a,sWidth:f,sHeight:_,dWidth:f,dHeight:_},null,{pixelFormat:Oe.RGBA});if(!y)return this._setFocusAndGetContract(e,i);const w=y.data;let x=0;for(let E=0,k=w.length-8;E<k;++E){let P=w[E]-w[E+8];++E;let M=w[E]-w[E+8];++E;let V=w[E]-w[E+8];++E,x+=P*P+M*M+V*V}return-x}async _doFocusDetail(e,i,n,r,s,a,f){let _;if(i=Lt(i,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),r=Lt(r,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),a?a=Lt(a,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max):(a=Lt(Math.sqrt((i||this._focusParameters.fds.step)*(r||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),f=await this._setFocusAndGetContract(e,a)),f<=n&&f<=s?_=3:n<s&&n<f?_=1:s<n&&s<f&&(_=2),(r-i)/2<=this._focusParameters.fds.step)return _===3||(_===1?await this._videoTrack.applyConstraints({advanced:[{focusMode:"manual",focusDistance:i}]}):_===2&&await this._videoTrack.applyConstraints({advanced:[{focusMode:"manual",focusDistance:r}]})),!0;if(_===1)return await this._doFocusDetail(e,i,n,a,f);if(_===2)return await this._doFocusDetail(e,a,f,r,s);if(_!==3)return n=await this._setFocusAndGetContract(e,i),s=await this._setFocusAndGetContract(e,r),await this._doFocusDetail(e,i,n,r,s);let y=Lt(Math.sqrt((i||this._focusParameters.fds.step)*(a||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),w=Lt(Math.sqrt((r||this._focusParameters.fds.step)*(a||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max);if(Math.abs(1/this._focusParameters.oldDistance-1/y)<=Math.abs(1/this._focusParameters.oldDistance-1/w)){let x=await this._setFocusAndGetContract(e,y);if(x<f)return await this._doFocusDetail(e,i,n,a,f,y,x);if(x==f)return await this._doFocusDetail(e,y,x,a,f);let E=await this._setFocusAndGetContract(e,w);if(x>f&&f<E)return await this._doFocusDetail(e,y,x,w,E,a,f);if(f==E)return await this._doFocusDetail(e,a,f,w,E);if(f>E)return await this._doFocusDetail(e,a,f,r,s,w,E)}else{let x=await this._setFocusAndGetContract(e,w);if(f>x)return await this._doFocusDetail(e,a,f,r,s,w,x);if(f==x)return await this._doFocusDetail(e,a,f,w,x);let E=await this._setFocusAndGetContract(e,y);if(E>f&&f<x)return await this._doFocusDetail(e,y,E,w,x,a,f);if(E==f)return await this._doFocusDetail(e,y,E,a,f);if(E<f)return await this._doFocusDetail(e,i,n,a,f,y,E)}return!1}async _setLocalFocus(e,i,n,r,s){if(this._focusParameters.isDoingFocus==1)return!1;if(!e||typeof e.x!="string"||typeof e.y!="string")throw new Error("Invalid centerPoint.");if(!i||typeof i!="string")throw new Error("Invalid width.");if(!n||typeof n!="string")throw new Error("Invalid height.");const a=this._video.videoWidth,f=this._video.videoHeight;let _=0,y=0;if(e.x.endsWith("px"))_=parseFloat(e.x);else{if(!e.x.endsWith("%"))throw new Error("Invalid centerPoint.");_=parseFloat(e.x)/100*a}if(e.y.endsWith("px"))y=parseFloat(e.y);else{if(!e.y.endsWith("%"))throw new Error("Invalid centerPoint.");y=parseFloat(e.y)/100*f}if(_==NaN||y==NaN)throw new Error("Invalid centerPoint.");let w=0;if(i.endsWith("px"))w=parseFloat(i);else{if(!i.endsWith("%"))throw new Error("Invalid width.");w=parseFloat(i)/100*a}if(w==NaN)throw new Error("Invalid width.");let x=0;if(n.endsWith("px"))x=parseFloat(n);else{if(!n.endsWith("%"))throw new Error("Invalid height.");x=parseFloat(n)/100*f}if(x==NaN)throw new Error("Invalid height.");if(this._softwareScale!==1){const P=this._softwareScale,M=this._scaleCenter;w/=P,x/=P,_=(1-1/P)*M.x+_/P,y=(1-1/P)*M.y+y/P}if(!this._focusSupported)throw new Error("Manual focus unsupported.");if(!this._focusParameters.fds&&(this._focusParameters.fds=(await this.getCapabilities()).focusDistance,!this._focusParameters.fds))throw this._focusSupported=!1,new Error("Manual focus unsupported.");this._focusParameters.kTimeout==null&&(this._focusParameters.kTimeout=(this._focusParameters.maxTimeout-this._focusParameters.minTimeout)/(1/this._focusParameters.fds.min-1/this._focusParameters.fds.max)),this._focusParameters.isDoingFocus=1;const E={focusL:_,focusT:y,focusW:w,focusH:x,focusTaskId:++this._focusParameters.curFocusTaskId,timeStart:Date.now()},k=async(P,M,V)=>{try{(M==null||M<this._focusParameters.fds.min)&&(M=this._focusParameters.fds.min),(V==null||V>this._focusParameters.fds.max)&&(V=this._focusParameters.fds.max),this._focusParameters.oldDistance=null;let L=Lt(Math.sqrt(V*(M||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),R=Lt(Math.sqrt((M||this._focusParameters.fds.step)*L),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),D=Lt(Math.sqrt(L*V),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),Y=await this._setFocusAndGetContract(P,D),ie=await this._setFocusAndGetContract(P,R),oe=await this._setFocusAndGetContract(P,L);if(ie>oe&&oe<Y){const z=await this._doFocusDetail(P,R,ie,D,Y,L,oe);return this._focusParameters.isDoingFocus=0,z}if(ie<oe&&ie<Y){let z=await this._setFocusAndGetContract(P,M);const S=await this._doFocusDetail(P,M,z,L,oe,R,ie);return this._focusParameters.isDoingFocus=0,S}if(oe>Y&&ie>Y){let z=await this._setFocusAndGetContract(P,V);const S=await this._doFocusDetail(P,L,oe,V,z,D,Y);return this._focusParameters.isDoingFocus=0,S}if(ie==oe&&oe<Y){const z=await this._doFocusDetail(P,R,ie,L,oe);return this._focusParameters.isDoingFocus=0,z}if(oe==Y&&ie>oe){const z=await this._doFocusDetail(P,L,oe,D,Y);return this._focusParameters.isDoingFocus=0,z}return k(P,M,V)}catch(L){if(L.name!=="DeprecatedTaskError")throw L}};return k(E,r,s)}async enableTapToFocus(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'enableTapToFocus()' is unavailable in singleFrameMode.");if(!this._videoTrack)throw new Error("Video is not playing.");if(!this._focusSupported)throw new Error("Tapping to focus unsupported.");if(!this._focusParameters.fds&&(this._focusParameters.fds=(await this.getCapabilities()).focusDistance,!this._focusParameters.fds))throw this._focusSupported=!1,this._tapFocusEnabled=!1,new Error("Tapping to focus unsupported.");this._tapFocusEnabled=!0}disableTapToFocus(){this._tapFocusEnabled=!1}isTapToFocusEnabled(){return this._tapFocusEnabled}_updateVideoContainerStyle(){if(!this._video||this.singleFrameMode)return;const e=this._getSoftwareScale(),i=this._videoContainer;if(this.videoFit==="contain"&&e>1){const n=this._video.videoWidth,r=this._video.videoHeight,s=window.getComputedStyle(this._elContainer),a=parseFloat(s.width),f=parseFloat(s.height),_=n/r;if(a/f<_){let y=a/_;i.style.left="0",i.style.top=(f-y)/2/f*100+"%",i.style.width="100%",i.style.height=y/f*100+"%"}else{let y=f*_;i.style.left=(a-y)/2/a*100+"%",i.style.top="0",i.style.width=y/a*100+"%",i.style.height="100%"}}else i.style.left="0",i.style.top="0",i.style.width="100%",i.style.height="100%"}_scaleVideo(e,i){if(this._video&&!this.singleFrameMode){if(e<1)throw new RangeError("Invalid scale value.");if(i&&this._setScaleCenter(i),e===1)this._video.style.transform="";else{const n=this.getVideoFit(),r=this._video.videoWidth,s=this._video.videoHeight,a=window.getComputedStyle(this._elContainer),f=parseFloat(a.width),_=parseFloat(a.height),y=f/_,w=r/s;let x=1;n==="contain"?x=y<w?f/(r/e):_/(s/e):n==="cover"&&(x=w>y?_/(r/e):f/(s/e));const E=x*(1-1/e)*(r/2-this._scaleCenter.x),k=x*(1-1/e)*(s/2-this._scaleCenter.y);this._video.style.transform=`translate(${E}px, ${k}px) scale(${e})`}this._updateVideoContainerStyle()}}getFrameSize(e,i,n,r){if(!e||!i)return null;let s,a,f,_,y=e,w=i;const x={regionLeft:0,regionTop:0,regionRight:y,regionBottom:w,regionMeasuredByPercentage:!1};n?(n.regionMeasuredByPercentage?(x.regionLeft=n.regionLeft*y/100,x.regionTop=n.regionTop*w/100,x.regionRight=n.regionRight*y/100,x.regionBottom=n.regionBottom*w/100):(x.regionLeft=n.regionLeft,x.regionTop=n.regionTop,x.regionRight=n.regionRight,x.regionBottom=n.regionBottom),s=Math.round(x.regionLeft),a=Math.round(x.regionTop),y=Math.round(x.regionRight-x.regionLeft),w=Math.round(x.regionBottom-x.regionTop)):(s=0,a=0,y=Math.round(y),w=Math.round(w));const E=Math.max(y,w);if(r&&r>0&&E>r){const k=r/E;y>w?(f=r,_=Math.round(w*k)):(f=Math.round(y*k),_=r)}else f=y,_=w;return f<=0||_<=0?null:{sx:s,sy:a,sWidth:y,sHeight:w,dWidth:f,dHeight:_}}getFrame(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getFrame()' is unavailable in singleFrameMode.");return this._getVideoData()}getImage(){return this.getFrame()}_drawImage(e,i,n,r,s,a,f){if(this.isDisposed&&this.disposed)throw Error("The 'CameraEnhancer' instance has been disposed.");if(!n||!r)return null;if(i instanceof HTMLVideoElement&&i.readyState!==4||i instanceof HTMLImageElement&&!i.complete)throw new Error("The source is not loaded.");let _=0,y=0,w=n,x=r,E=0,k=0,P=n,M=r;s&&(s.sx&&(_=Math.round(s.sx)),s.sy&&(y=Math.round(s.sy)),s.sWidth&&(w=Math.round(s.sWidth)),s.sHeight&&(x=Math.round(s.sHeight)),s.dx&&(E=Math.round(s.dx)),s.dy&&(k=Math.round(s.dy)),s.dWidth&&(P=Math.round(s.dWidth)),s.dHeight&&(M=Math.round(s.dHeight)));let V=Oe.RGBA;f&&f.pixelFormat&&(V=f.pixelFormat);const L=e;if(f&&f.bUseWebGL){(L.width<E+P||L.height<k+M)&&(L.width=E+P,L.height=k+M,L.ctxWebGL&&L.ctxWebGL.viewport(0,0,E+P,k+M));const R=L.ctxWebGL||L.getContext("webgl",{antialias:!1})||L.getContext("experimental-webgl",{antialias:!1});if(!R){const z=new Error("WebGL error: unable to initialize WebGL. Your browser or machine may not support it.");throw z.name="WebGLError",z}if(!L.ctxWebGL||V!==this.shaderPixelFormat){L.ctxWebGL=R;const z=g=>{const o=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,o),g.bufferData(g.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),g.STATIC_DRAW);const l=g.createBuffer();return g.bindBuffer(g.ARRAY_BUFFER,l),g.bufferData(g.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),g.STATIC_DRAW),{positions:o,texCoords:l}},S=g=>{const o=g.createTexture();return g.bindTexture(g.TEXTURE_2D,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),o},he=(g,o)=>{const l=g.createProgram();if(o.forEach(d=>g.attachShader(l,d)),g.linkProgram(l),!g.getProgramParameter(l,g.LINK_STATUS)){const d=new Error(`An error occured linking the program: ${g.getProgramInfoLog(l)}.`);throw d.name="WebGLError",d}return g.useProgram(l),l},le=(g,o,l)=>{const d=g.createShader(o);if(g.shaderSource(d,l),g.compileShader(d),!g.getShaderParameter(d,g.COMPILE_STATUS)){const v=new Error(`An error occured compiling the shader: ${g.getShaderInfoLog(d)}.`);throw v.name="WebGLError",v}return d},ue=`
                    attribute vec2 a_position;
                    attribute vec2 a_texCoord;

                    uniform mat3 u_matrix;
                    uniform mat3 u_textureMatrix;

                    varying vec2 v_texCoord;
                    void main(void) {
                    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1.0);
                    v_texCoord = vec4((u_textureMatrix * vec3(a_texCoord, 1)).xy, 0, 1.0).xy;
                    }
                `;let h="rgb";["rgba","rbga","grba","gbra","brga","bgra"].includes(V)&&(h=V.slice(0,3));const c=`
                    precision mediump float;
                    varying vec2 v_texCoord;
                    uniform sampler2D u_image;
                    uniform float uColorFactor;

                    void main() {
                        vec4 sample = texture2D(u_image, v_texCoord);
                        float grey = 0.21 * sample.r + 0.71 * sample.g + 0.07 * sample.b;
                        gl_FragColor = vec4(sample.${h} * (1.0 - uColorFactor) + (grey * uColorFactor), sample.a);
                    }
                `,u=he(R,[le(R,R.VERTEX_SHADER,ue),le(R,R.FRAGMENT_SHADER,c)]);this._webGLProgramInfo={program:u,attribLocations:{vertexPosition:R.getAttribLocation(u,"a_position"),texPosition:R.getAttribLocation(u,"a_texCoord")},uniformLocations:{uSampler:R.getUniformLocation(u,"u_image"),uColorFactor:R.getUniformLocation(u,"uColorFactor"),uMatrix:R.getUniformLocation(u,"u_matrix"),uTextureMatrix:R.getUniformLocation(u,"u_textureMatrix")}},this._webGLBuffers=z(R),this._webGLTexture=S(R),this.shaderPixelFormat=V}const D=(z,S,he)=>{z.bindBuffer(z.ARRAY_BUFFER,S),z.enableVertexAttribArray(he),z.vertexAttribPointer(he,2,z.FLOAT,!1,0,0)},Y=(z,S,he)=>{const le=z.RGBA,ue=z.RGBA,h=z.UNSIGNED_BYTE;z.bindTexture(z.TEXTURE_2D,S),z.texImage2D(z.TEXTURE_2D,0,le,ue,h,he)},ie=(z,S,he,le)=>{z.clearColor(0,0,0,1),z.clearDepth(1),z.enable(z.DEPTH_TEST),z.depthFunc(z.LEQUAL),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT),D(z,he.positions,S.attribLocations.vertexPosition),D(z,he.texCoords,S.attribLocations.texPosition),z.activeTexture(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,le),z.uniform1i(S.uniformLocations.uSampler,0),z.uniform1f(S.uniformLocations.uColorFactor,[Oe.GREY,Oe.GREY32].includes(V)?1:0);let ue,h,c=Pt.translate(Pt.identity(),-1,-1);c=Pt.scale(c,2,2),c=Pt.scale(c,1/z.canvas.width,1/z.canvas.height),ue=Pt.translate(c,E,k),ue=Pt.scale(ue,P,M),z.uniformMatrix3fv(S.uniformLocations.uMatrix,!1,ue),h=Pt.translate(Pt.identity(),_/n,y/r),h=Pt.scale(h,w/n,x/r),z.uniformMatrix3fv(S.uniformLocations.uTextureMatrix,!1,h),z.drawArrays(z.TRIANGLES,0,6)};let oe;if(Y(R,this._webGLTexture,i),ie(R,this._webGLProgramInfo,this._webGLBuffers,this._webGLTexture),a){if(a.length<P*M*4)throw new Error("Unexpected size of the 'bufferContainer'.");oe=a}else oe=new Uint8Array(P*M*4);if(R.readPixels(E,k,P,M,R.RGBA,R.UNSIGNED_BYTE,oe),oe[3]!==255){this._bWebGLSupported=!1;const z=new Error("WebGL error: incorrect WebGL drawing.");throw z.name="WebGLError",z}return{context:R,pixelFormat:V===Oe.GREY?Oe.GREY32:V,_bUseWebGL:!0}}{L.ctx2d||(L.ctx2d=L.getContext("2d",{willReadFrequently:!0}));const R=L.ctx2d;if(!R)throw new Error("Unable to get 'CanvasRenderingContext2D' from canvas.");return(L.width<E+P||L.height<k+M)&&(L.width=E+P,L.height=k+M),R.drawImage(i,_,y,w,x,E,k,P,M),{context:R,pixelFormat:Oe.RGBA,_bUseWebGL:!1}}}_readCvsData(e,i,n){let r,s=0,a=0,f=e.canvas.width,_=e.canvas.height;if(i&&(i.x&&(s=i.x),i.y&&(a=i.y),i.width&&(f=i.width),i.height&&(_=i.height)),e instanceof WebGLRenderingContext){const y=e;if(n){if(n.length<f*_*4)throw new Error("Unexpected size of the 'bufferContainer'.");y.readPixels(s,a,f,_,y.RGBA,y.UNSIGNED_BYTE,n),r=new Uint8Array(n.buffer,0,f*_*4)}else r=new Uint8Array(f*_*4),y.readPixels(s,a,f,_,y.RGBA,y.UNSIGNED_BYTE,r)}else if(e instanceof CanvasRenderingContext2D){let y;if(y=e.getImageData(s,a,f,_),r=new Uint8Array(y.data.buffer),n){if(n.length<r.length)throw new Error("Unexpected size of the 'bufferContainer'.");n.set(r)}}return r}_transformPixelFormat(e,i,n,r){let s;if(i===n)return r?new Uint8Array(e):e;const a=[Oe.RGBA,Oe.RBGA,Oe.GRBA,Oe.GBRA,Oe.BRGA,Oe.BGRA];if(a.includes(i))if(n===Oe.GREY){s=new Uint8Array(e.length/4);for(let f=0;f<e.length;f+=4){const _=.21*e[f]+.71*e[f+1]+.07*e[f+2];s[f/4]=_}}else if(n===Oe.GREY32){s=r?new Uint8Array(e):e;for(let f=0;f<e.length;f+=4){const _=.21*e[f]+.71*e[f+1]+.07*e[f+2];s[f]=_,s[f+1]=_,s[f+2]=_}}else{if(!a.includes(n))throw new Error("Unable to transform.");if(r){s=new Uint8Array(e);const f=i.indexOf("r"),_=i.indexOf("g"),y=i.indexOf("b"),w=n.indexOf("r"),x=n.indexOf("g"),E=n.indexOf("b");for(let k=0;k<e.length;k+=4)s[k+w]=e[k+f],s[k+x]=e[k+_],s[k+E]=e[k+y]}else{s=e;const f=i.indexOf("r"),_=i.indexOf("g"),y=i.indexOf("b"),w=n.indexOf("r"),x=n.indexOf("g"),E=n.indexOf("b");for(let k=0;k<e.length;k+=4){let P=[e[k],e[k+1],e[k+2]];s[k+w]=P[f],s[k+x]=P[_],s[k+E]=P[y]}}}else if(i===Oe.GREY){if(n!==Oe.GREY32)throw new Error("Unable to transform.");s=new Uint8Array(4*e.length);for(let f=0;f<e.length;f++)s[4*f]=e[f],s[4*f+1]=e[f],s[4*f+2]=e[f],s[4*f+3]=255}else{if(i!==Oe.GREY32)throw new Error("Unable to transform.");if(n!==Oe.GREY)throw new Error("Unable to transform.");s=new Uint8Array(new Uint32Array(e.buffer))}return s}_getImageData(e,i,n,r,s,a){if(this.isDisposed&&this.disposed)throw Error("The 'CameraEnhancer' instance has been disposed.");if(!i||!n)return null;if(r.sx>i||r.sy>n||r.sx+r.sWidth>i||r.sy+r.sHeight>n)throw new Error("Invalid position.");if(e instanceof HTMLVideoElement&&e.readyState!==4||e instanceof HTMLImageElement&&!e.complete)throw new Error("The source is not loaded.");const f=Math.round(r.sx),_=Math.round(r.sy),y=Math.round(r.sWidth),w=Math.round(r.sHeight),x=Math.round(r.dWidth),E=Math.round(r.dHeight);let k=Oe.RGBA;a&&a.pixelFormat&&(k=a.pixelFormat);let P,M,V,L=this._bWebGLSupported;a&&a.bUseWebGL==0&&(L=!1),L?(this._reusedWebGLCvs||(this._reusedWebGLCvs=document.createElement("canvas")),P=this._reusedWebGLCvs):(this._reusedCvs||(this._reusedCvs=document.createElement("canvas")),P=this._reusedCvs);try{if(L)if(Ce._onLog&&Ce._onLog("DCE: _getImageData() in WebGL."),s)if(k===Oe.GREY){if(V=new Uint8Array(x*E*4),M=this._drawImage(P,e,i,n,{sx:f,sy:_,sWidth:y,sHeight:w,dWidth:x,dHeight:E},V,{pixelFormat:k,bUseWebGL:L}),V=this._transformPixelFormat(V,M.pixelFormat,k),s){if(s.length<V.length)throw new Error("Unexpected size of the 'bufferContainer'.");s.set(V)}}else M=this._drawImage(P,e,i,n,{sx:f,sy:_,sWidth:y,sHeight:w,dWidth:x,dHeight:E},s,{pixelFormat:k,bUseWebGL:L}),V=new Uint8Array(s.buffer,0,x*E*4),V=this._transformPixelFormat(V,M.pixelFormat,k);else k===Oe.GREY?((!this._tempDataContainer||this._tempDataContainer.length<x*E*4)&&(this._tempDataContainer=new Uint8Array(x*E*4)),V=new Uint8Array(this._tempDataContainer.buffer,0,x*E*4)):V=new Uint8Array(x*E*4),M=this._drawImage(P,e,i,n,{sx:f,sy:_,sWidth:y,sHeight:w,dWidth:x,dHeight:E},V,{pixelFormat:k,bUseWebGL:L}),V=this._transformPixelFormat(V,M.pixelFormat,k);else if(Ce._onLog&&Ce._onLog("DCE: _getImageData() in context2d."),M=this._drawImage(P,e,i,n,{sx:f,sy:_,sWidth:y,sHeight:w,dWidth:x,dHeight:E},null,{pixelFormat:Oe.RGBA,bUseWebGL:L}),V=this._readCvsData(M.context,null,null),V=this._transformPixelFormat(V,M.pixelFormat,k),s){if(s.length<V.length)throw new Error("Unexpected size of the 'bufferContainer'.");s.set(V)}}catch(R){if(R.name==="WebGLError")return this.forceLoseContext(),this._bWebGLSupported=!1,this._getImageData(e,i,n,{sx:f,sy:_,sWidth:y,sHeight:w,dWidth:x,dHeight:E},s,a);throw R}return{data:V,pixelFormat:k,_bUseWebGL:M._bUseWebGL}}forceLoseContext(){if(!this._reusedWebGLCvs)return;const e=this._reusedWebGLCvs.ctxWebGL;e&&!e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),this._webGLTexture=null,this._webGLProgramInfo=null,this._webGLBuffers=null,this._reusedWebGLCvs=null}_getVideoData(e,i){if(this.isDisposed&&this.disposed)throw Error("The 'CameraEnhancer' instance has been disposed.");if(this._assertOpen(),this.singleFrameMode)throw new Error("'_getVideoData()' is unavailable in singleFrameMode.");if(!this._video||this._video.readyState!==4)return null;const n=Date.now();let r=this._scanRegion;i&&i.hasOwnProperty("region")&&(r=i.region);let s=this.mapPixelFormatString_Enum.get(this.framePixelFormat.toLowerCase());i&&i.pixelFormat&&(s=this.mapPixelFormatString_Enum.get(i.pixelFormat.toLowerCase()));let a=this._softwareScale;i&&i.scale&&(a=i.scale);const f=this._video.videoWidth,_=this._video.videoHeight;let y=this._scaleCenter;if(i&&i.scaleCenter){if(typeof i.scaleCenter.x!="string"||typeof i.scaleCenter.y!="string")throw new Error("Invalid scale center.");let M=0,V=0;if(i.scaleCenter.x.endsWith("px"))M=parseFloat(i.scaleCenter.x);else{if(!i.scaleCenter.x.endsWith("%"))throw new Error("Invalid scale center.");M=parseFloat(i.scaleCenter.x)/100*f}if(i.scaleCenter.y.endsWith("px"))V=parseFloat(i.scaleCenter.y);else{if(!i.scaleCenter.y.endsWith("%"))throw new Error("Invalid scale center.");V=parseFloat(i.scaleCenter.y)/100*_}if(M==NaN||V==NaN)throw new Error("Invalid scale center.");y.x=Math.round(M),y.y=Math.round(V)}if(f===0||_===0)return null;const w=this.getFrameSize(f,_,r,this.maxCvsSideLength);if(!w)return null;let x=!0;f===w.sWidth&&_===w.sHeight&&(x=!1);const E={data:null,region:r?JSON.parse(JSON.stringify(r)):null,sx:w.sx,sy:w.sy,width:w.dWidth,height:w.dHeight,colorMode:null,pixelFormat:null,timeSpent:null,timeStamp:null,isCropped:x,toCanvas:this._toCanvas,_sWidth:w.sWidth,_sHeight:w.sHeight,_bUseWebGL:null};a!==1&&(w.sWidth=Math.round(w.sWidth/a),w.sHeight=Math.round(w.sHeight/a),w.sx=Math.round((1-1/a)*y.x+w.sx/a),w.sy=Math.round((1-1/a)*y.y+w.sy/a));const k=this._getImageData(this._video,f,_,w,e,{pixelFormat:s});if(!k)return null;const P=Date.now();return E.data=k.data,E.pixelFormat=E.colorMode=k.pixelFormat,E._bUseWebGL=k._bUseWebGL,E.timeSpent=P-n,E.timeStamp=P,k.pixelFormat===Oe.GREY?E.stride=E.width:E.stride=4*E.width,E}getCurrentRegion(){let e=null;if(this._scanRegion)e=this._scanRegion;else if(this.croppingRegions){if(this._croppingRegionIndex>=this.croppingRegions.length||this._croppingRegionIndex<0)throw new Error("The 'croppingRegionIndex' is out of bounds.");e=this.croppingRegions[this._croppingRegionIndex],this.bIncreaseRegionIndexAuto&&++this._croppingRegionIndex>=this.croppingRegions.length&&(this._croppingRegionIndex=0)}return e}_fetchingLoop(e){if(this.isDisposed&&this.disposed)return;if(!this._bOpen||!this.isFetchingLoopStarted())return void this.stopFetchingLoop();const i=()=>{const r=this.getCurrentRegion();let s=this._getVideoData(null,{region:r});if(!s)return void Ce._onLog;for(;this._frameQueue&&this._frameQueue.length>=this.maxNumberOfFramesInBuffer;)this._frameQueue.shift();this._frameQueue.push(s);const a=this.mapCameraEvents.get("frameaddedtobuffer");for(let f of a)f&&setTimeout(()=>{this.isDisposed&&this.disposed||f.apply(this)},0)},n=()=>{this.isDisposed&&this.disposed||(this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this.refreshInterval<=0||(this._frameLoopTimeoutId2=setTimeout(()=>{this.isDisposed&&this.disposed||(this._bOpen&&this.isFetchingLoopStarted()?(i(),n()):this.stopFetchingLoop())},this.refreshInterval)))};e&&(this._frameQueue.length<this.maxNumberOfFramesInBuffer?(i(),this.refreshInterval>0&&n()):this.refreshInterval>0?(i(),n()):this.refreshInterval===0?i():this.refreshInterval),this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId),this._frameLoopTimeoutId=setTimeout(()=>{this.isDisposed&&this.disposed||this._fetchingLoop(!0)},this.loopInterval)}startFetchingLoop(){if(this.isDisposed&&this.disposed)throw Error("The 'CameraEnhancer' instance has been disposed.");if(this._assertOpen(),this.singleFrameMode)throw Error("'startFetchingLoop()' is unavailable in singleFrameMode.");this.isFetchingLoopStarted()||(this._bFetchingLoopStarted=!0,this._recordedStates.fetchingLoopStart=!0,this._fetchingLoop(!0))}isFetchingLoopStarted(){return this._bFetchingLoopStarted}stopFetchingLoop(){this._bFetchingLoopStarted&&(this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId),this._frameQueue.length=0,this._bFetchingLoopStarted=!1,this._recordedStates.fetchingLoopStart=!1)}getFrameFromBuffer(e){return this._frameQueue&&this._frameQueue.length?e?e<this._frameQueue.length?(this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this._frameQueue.splice(e,1)[0]):void 0:(this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this._frameQueue.pop()):null}clearFrameBuffer(){this._frameQueue&&(this._frameQueue.length=0)}_createDrawingLayerBaseCvs(){this._assertOpen();const e=this._calculateCvsSize();if(!e)throw new Error("Camera is not open.");const{width:i,height:n,objectFit:r}=e;if(i<=0||n<=0)throw new Error("Invalid dimension of video or image.");const s=document.createElement("canvas");if(s.width==i&&s.height==n||(s.width=i,s.height=n),s.style.objectFit=r,this._cvsScanRegion)this._cvsScanRegion.after(s);else if(this._cvsOriginalImage)this._cvsOriginalImage.after(s);else if(this._cvsSingleFrameMode)this._cvsSingleFrameMode.after(s);else{if(!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(s)}return s}_updateDrawingLayersSize(e){let i;if(i=e&&e.width&&e.height&&e.objectFit?{width:e.width,height:e.height,objectFit:e.objectFit}:this._calculateCvsSize(),!i)return;const{width:n,height:r,objectFit:s}=i;this._drawingLayersManager.setDimensions({width:n,height:r},{backstoreOnly:!0}),this._drawingLayersManager.setObjectFit(s)}_createDrawingLayer(e){this._layerBaseCvs||(this._layerBaseCvs=this._createDrawingLayerBaseCvs());const i=this._layerBaseCvs;return this._drawingLayersManager.createDrawingLayer(i,e)}deleteDrawingLayer(e){this._drawingLayersManager.deleteDrawingLayer(e),this._drawingLayersManager.getDrawingLayers().length||this._layerBaseCvs&&(this._layerBaseCvs.remove(),this._layerBaseCvs=null)}createDrawingLayer(){return this._createDrawingLayer()}getDrawingLayer(e){return this._drawingLayersManager.getDrawingLayer(e)||([1,2,3].includes(e)?this._createDrawingLayer(e):null)}getDrawingLayers(){return this._drawingLayersManager.getDrawingLayers().filter(e=>e.getId()>=0)}getSelectedDrawingItems(){return this._drawingLayersManager.getSelectedDrawingItems()}createDrawingStyle(e){return this._drawingLayersManager.createDrawingStyle(e)}getDrawingStyle(e){return this._drawingLayersManager.getDrawingStyle(e)}getDrawingStyles(){return this._drawingLayersManager.getDrawingStyles()}updateDrawingStyle(e,i){return this._drawingLayersManager.updateDrawingStyle(e,i)}clearDrawingLayers(){const e=this.getDrawingLayers();for(let i of e)this.deleteDrawingLayer(i.getId())}showTip(e,i,n,r,s=3e3,a=!0){this._assertOpen(),this._tipArgs.x=e,this._tipArgs.y=i,this._tipArgs.width=n,this._tipArgs.autoShowSuggestedTip=!!a,this._drawingLayerOfTip||(this._drawingLayerOfTip=this._createDrawingLayer(-1)),this._tipStyleId||(this._tipStyleId=this.createDrawingStyle({fillStyle:"#FFFFFF",paintMode:"fill",fontFamily:"Open Sans",fontSize:40})),this._drawingLayerOfTip.clearDrawingItems();const f=new M_(r||"",e,i,n,this._tipStyleId);f._fabricObject.paddingTop=15,f._fabricObject.calcTextHeight=function(){for(var _=0,y=0,w=this._textLines.length;y<w;y++)_+=this.getHeightOfLine(y);return _+2*this.paddingTop},f._fabricObject._getTopOffset=function(){return-this.height/2+this.getHeightOfLine(0)*(1-1/this.lineHeight)/2+this.paddingTop},f.setAttribute("backgroundColor","rgba(50, 50, 52, .8)"),f.setAttribute("lineHeight",1.3),f.setAttribute("textAlign","center"),this._drawingLayerOfTip.addDrawingItem(f),this._hideTipTimeoutId&&clearTimeout(this._hideTipTimeoutId),this._tipArgs.duration=s===void 0?3e3:s,this._tipArgs.duration>0&&(this._hideTipTimeoutId=setTimeout(()=>{this.isDisposed&&this.disposed||this._hideTip()},this._tipArgs.duration))}_hideTip(){this._drawingLayerOfTip&&(this.deleteDrawingLayer(this._drawingLayerOfTip.getId()),this._drawingLayerOfTip=null,this._hideTipTimeoutId&&clearTimeout(this._hideTipTimeoutId))}hideTip(){this._hideTip(),this._tipArgs.x=null,this._tipArgs.y=null,this._tipArgs.width=null,this._tipArgs.autoShowSuggestedTip=null}updateTipMessage(e){if(!this._drawingLayerOfTip)throw new Error("The Tip is not showing.");this._drawingLayerOfTip.getDrawingItems()[0].setAttribute("text",e),this._drawingLayerOfTip.renderAll(),this._tipArgs.duration>0&&(this._hideTipTimeoutId&&clearTimeout(this._hideTipTimeoutId),this._hideTipTimeoutId=setTimeout(()=>{this.isDisposed&&this.disposed||this._hideTip()},this._tipArgs.duration))}suggestTip(e,i){this._tipArgs.autoShowSuggestedTip&&(this._drawingLayerOfTip?this.updateTipMessage(i):this._tipArgs.x!==void 0&&this.showTip(this._tipArgs.x,this._tipArgs.y,this._tipArgs.width,i,this._tipArgs.duration)),this.onTipSuggested&&setTimeout(()=>{this.isDisposed&&this.disposed||this.onTipSuggested.apply(this,[e,i])},0)}_createControler(){if(this._controler||(this._controler=new FT(this)),this._controler)return this._controler}_destroyControler(){this._controler=null}setOriginalImage(e,i,n){if(!e||!i||!n)throw new Error("Invalid arguments");this._originalImageData={imageData:e,width:i,height:n};let r=this._cvsOriginalImage;r||(r=document.createElement("canvas"),r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.left="0",r.style.top="0",r.style.backgroundColor="white",r.style.objectFit="contain",this._cvsOriginalImage=r),r.width===i&&r.height===n||(r.width=i,r.height=n);const s=r.getContext("2d");s.clearRect(0,0,r.width,r.height),e instanceof Uint8Array||e instanceof Uint8ClampedArray?(e instanceof Uint8Array&&(e=new Uint8ClampedArray(e.buffer)),s.putImageData(new ImageData(e,i,n),0,0)):e instanceof HTMLCanvasElement&&s.drawImage(e,0,0),document.body.contains(r)&&r.style.display===""&&this._updateDrawingLayersSize({width:i,height:n,objectFit:"contain"})}getOriginalImage(){return this._originalImageData?Object.assign({},this._originalImageData):null}async deleteOriginalImage(){await this.hideOriginalImage(),this._cvsOriginalImage&&(this._cvsOriginalImage.remove(),this._cvsOriginalImage=null),this._originalImageData=null}_showOriginalImageCvs(){this._cvsOriginalImage&&this._cvsOriginalImage.style.display=="none"&&(this._cvsOriginalImage.style.display="")}_hideOriginalImageCvs(){this._cvsOriginalImage&&(this._cvsOriginalImage.style.display="none")}showOriginalImage(){if(!this._originalImageData)throw new Error("No original image is set.");const e=this._cvsOriginalImage;if(e.style.display===""&&document.body.contains(e))return;const{width:i,height:n}=this._originalImageData;if(this._updateDrawingLayersSize({width:i,height:n,objectFit:"contain"}),this._bOpen&&(this._video&&!this._video.paused&&this._video.pause(),this._bFetchingLoopStarted&&(this.stopFetchingLoop(),this._recordedStates.fetchingLoopStart=!0),this.ifShowScanRegionMask&&this._cvsScanRegion&&(this._cvsScanRegion.style.display="none"),this.ifShowScanRegionLaser&&this._divScanLight&&(this._divScanLight.style.display="none"),this._cvsViewDecorator&&(this._cvsViewDecorator.style.display="none"),this._scanRegionOverlayContainer&&(this._scanRegionOverlayContainer.style.display="none"),this._selCam&&(this._selCam.parentElement.style.display="none")),!document.body.contains(e))if(this._cvsSingleFrameMode)this._cvsSingleFrameMode.after(e);else{if(!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(e)}this._showOriginalImageCvs()}async _hideOriginalImage(e){this._originalImageData&&this._cvsOriginalImage&&this._cvsOriginalImage.style.display!=="none"&&(this._updateDrawingLayersSize(),this._bOpen&&e&&(this._video&&this._recordedStates.videoPlaying&&await this.play(null,null,null,{notTriggerSingleFrameClick:!0}),this._recordedStates.fetchingLoopStart&&!this.singleFrameMode&&this.startFetchingLoop(),this.ifShowScanRegionMask&&this._cvsScanRegion&&this._recordedStates.maskShow&&this.showScanRegionMask(),this.ifShowScanRegionLaser&&this._divScanLight&&this._recordedStates.laserShow&&this.showScanRegionLaser(),this._cvsViewDecorator&&this._recordedStates.decoratorShow&&this.showViewDecorator(),this._scanRegionOverlayContainer&&this._recordedStates.overlayShow&&this.showScanRegionOverlays()),this._selCam&&(this._selCam.parentElement.style.display=""),this._hideOriginalImageCvs())}async hideOriginalImage(){return this._hideOriginalImage(!0)}transformCoord(e){if(!this.isOpen())throw new Error("Unavailable when the camera is not open.");if(this.singleFrameMode&&!this._cvsSingleFrameMode)throw new Error("No image is selected. ");const i=this._elContainer.getBoundingClientRect();let n,r,s,a,f,_=i.left,y=i.top,w=_+window.scrollX,x=y+window.scrollY;this.singleFrameMode?(n=this._cvsSingleFrameMode.width,r=this._cvsSingleFrameMode.height,s=parseFloat(window.getComputedStyle(this._cvsSingleFrameMode).width),a=parseFloat(window.getComputedStyle(this._cvsSingleFrameMode).height),f="contain"):(n=this.video.videoWidth,r=this.video.videoHeight,s=parseFloat(window.getComputedStyle(this._elContainer).width),a=parseFloat(window.getComputedStyle(this._elContainer).height),f=this.videoFit);const E=s/a,k=n/r;let P,M,V,L,R=1;if(f==="contain")E<k?(R=s/n,P=_+e.x*R,M=y+e.y*R+(a-r*R)/2,V=w+e.x*R,L=x+e.y*R+(a-r*R)/2):(R=a/r,P=_+e.x*R+(s-n*R)/2,M=y+e.y*R,V=w+e.x*R+(s-n*R)/2,L=x+e.y*R);else if(f==="cover")if(E<k){R=a/r;let D=e.x*R-(n*R-s)/2;D=Math.max(D,0),D=Math.min(D,s),P=_+D,M=y+e.y*R,V=w+D,L=x+e.y*R}else{R=s/n;let D=e.y*R-(r*R-a)/2;D=Math.max(D,0),D=Math.min(D,a),P=_+e.x*R,M=y+D,V=w+e.x*R,L=x+D}return{clientX:Math.round(P),clientY:Math.round(M),pageX:Math.round(V),pageY:Math.round(L)}}convertToPageCoordinates(e){const i=this.transformCoord(e);return{x:i.pageX,y:i.pageY}}convertToClientCoordinates(e){const i=this.transformCoord(e);return{x:i.clientX,y:i.clientY}}dispose(e){this.UIElement&&(this._uiOriginalState&&this._uiOriginalState.inDom?this.UIElement.style.display=this._uiOriginalState.display:this.UIElement.style.display="none"),this.clearDrawingLayers(),this.close(),this.forceLoseContext(),this.setViewDecorator(null,null),this._scanRegionOverlayContainer&&this._scanRegionOverlayContainer.remove(),this._arrScanRegionOverlays.length=0,e&&this.UIElement&&this.UIElement.remove(),this.__proto__=null;for(let i in this)delete this[i];Object.defineProperty(this,"isCameraEnhancer",{value:!0}),Object.defineProperty(this,"isDisposed",{value:!0}),Object.defineProperty(this,"disposed",{value:!0})}}Ce._jsVersion="3.3.4",Ce._jsEditVersion="20230414",Ce._version="JS "+Ce._jsVersion+"."+Ce._jsEditVersion,Ce.browserInfo=Ze,Ce._hasEngineResourceLoaded=!1,Ce._engineResourcePath=LT,Ce._defaultUIElementURL="@engineResourcePath/dce.ui.html";const BT={DT_Arc:class extends $t{constructor(t,e,i,n,r,s){super(new Ee.Circle({left:t,top:e,radius:i,startAngle:n,endAngle:r}),s),this._mediaType="arc"}},DT_Polygon:mp,DT_Rect:class extends $t{constructor(t,e,i,n,r){super(new Ee.Rect({left:t,top:e,width:i,height:n}),r)}},DT_Image:class extends $t{constructor(t,e,i,n){super(new Ee.Image(t,{left:e,top:i}),n),this.image=t}_extendSet(t,e){if(t==="image"){if(e instanceof HTMLImageElement)return this._fabricObject.setElement(e),this.image=e,!0;if(e instanceof HTMLCanvasElement){const i=new Image;return i.src=e.toDataURL(),this._fabricObject.setElement(i),this.image=e,!0}throw new Error("Unsupported value.")}}_extendGet(t){if(t==="image")return this.image}},DT_Text:M_,DT_Line:class extends mp{constructor(t,e,i){super([t,e],i),this._mediaType="line"}_extendSet(t,e){if(t==="startPoint"||t==="endPoint"){e=t==="startPoint"?[e,this.get("endPoint")]:[this.get("startPoint"),e];const i=this._fabricObject;if(i.group){const r=i.group;i.points=e.map(s=>({x:s.x-r.left-r.width/2,y:s.y-r.top-r.height/2})),r.addWithUpdate()}else i.points=e;const n=i.points.length-1;return i.controls=i.points.reduce(function(r,s,a){return r["p"+a]=new Ee.Control({positionHandler:uu,actionHandler:du(a>0?a-1:n,hu),actionName:"modifyPolygon",pointIndex:a}),r},{}),i._setPositionDimensions({}),!0}}_extendGet(t){if(t==="startPoint"||t==="endPoint"){const e=[],i=this._fabricObject;if(i.selectable&&!i.group)for(let n in i.oCoords)e.push({x:i.oCoords[n].x,y:i.oCoords[n].y});else for(let n of i.points){let r=n.x-i.pathOffset.x,s=n.y-i.pathOffset.y;const a=Ee.util.transformPoint({x:r,y:s},i.calcTransformMatrix());e.push({x:a.x,y:a.y})}return t==="startPoint"?e[0]:e[1]}}},DT_Group:class extends $t{constructor(t){super(new Ee.Group(t.map(e=>e._getFabricObject()))),this._fabricObject.on("selected",()=>{this.styleSelector="selected";const e=this._fabricObject._objects;for(let i of e)setTimeout(()=>{i&&i.fire("selected")},0);setTimeout(()=>{this._fabricObject&&this._fabricObject.canvas&&(this._fabricObject.dirty=!0,this._fabricObject.canvas.renderAll())},0)}),this._fabricObject.on("deselected",()=>{this.styleSelector="default";const e=this._fabricObject._objects;for(let i of e)setTimeout(()=>{i&&i.fire("deselected")},0);setTimeout(()=>{this._fabricObject&&this._fabricObject.canvas&&(this._fabricObject.dirty=!0,this._fabricObject.canvas.renderAll())},0)})}getChildItems(){return this._fabricObject._objects.map(t=>t.getDrawingItem())}addChildItem(t){if(!t||!t.isDrawingItem)throw TypeError("Illegal drawing item.");this._drawingLayer?this._drawingLayer._updateGroupItem(this,t,"add"):this._fabricObject.addWithUpdate(t._getFabricObject())}removeChildItem(t){t&&t.isDrawingItem&&(this._drawingLayer?this._drawingLayer._updateGroupItem(this,t,"remove"):this._fabricObject.removeWithUpdate(t._getFabricObject()))}}};function NT(t,e,i){return(i.x-t.x)*(e.y-t.y)==(e.x-t.x)*(i.y-t.y)&&Math.min(t.x,e.x)<=i.x&&i.x<=Math.max(t.x,e.x)&&Math.min(t.y,e.y)<=i.y&&i.y<=Math.max(t.y,e.y)}function nc(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function ys(t,e,i,n){let r=t[0]*(i[1]-e[1])+e[0]*(t[1]-i[1])+i[0]*(e[1]-t[1]),s=t[0]*(n[1]-e[1])+e[0]*(t[1]-n[1])+n[0]*(e[1]-t[1]);return!((r^s)>=0&&r!==0&&s!==0)&&(r=i[0]*(t[1]-n[1])+n[0]*(i[1]-t[1])+t[0]*(n[1]-i[1]),s=i[0]*(e[1]-n[1])+n[0]*(i[1]-e[1])+e[0]*(n[1]-i[1]),!((r^s)>=0&&r!==0&&s!==0))}class Ai extends ${constructor(){super(),this._barcodeFillStyle="rgba(254,180,32,0.3)",this._barcodeStrokeStyle="rgba(254,180,32,0.9)",this._barcodeLineWidth=1,this._barcodeFillStyleBeforeVerification="rgba(248,252,0,0.2)",this._barcodeStrokeStyleBeforeVerification="transparent",this._barcodeLineWidthBeforeVerification=2,this.bFilterRegionInJs=!0,this._onCameraSelChange=()=>{},this._onResolutionSelChange=()=>{},this._onCloseBtnClick=()=>{},this._onPlayed=null}static get version(){return this._version+`(DCE ${Ce.getVersion()})`}static _fireHTTPSWarnning(){Ai.onWarning&&location&&location.protocol!=="https:"&&setTimeout(()=>{Ai.onWarning&&Ai.onWarning({id:2,message:"Not connected via SSL (HTTPS), the SDK may not work correctly."})},0)}static async testCameraAccess(){return Ce.testCameraAccess()}_fireResolutionWarning(){if(!this.singleFrameMode&&this.onWarning&&this.dce.isOpen()){const e=this.dce.getConstraints();e&&e.width<1280&&e.height<720&&setTimeout(()=>{this.onWarning&&this.onWarning({id:3,message:"Camera resolution too low, please use a higher resolution (720P or better)."})},0)}}getUIElement(){return this.dce.getUIElement()}async setUIElement(e){await this.dce.setUIElement(e)}get singleFrameMode(){return this.dce.singleFrameMode}set singleFrameMode(e){this.dce.singleFrameMode=e,e&&(this.dce.ifShowScanRegionLaser=!1,(async()=>{let i=await this.getScanSettings();i.oneDTrustFrameCount=1,await this.updateScanSettings(i)})())}get onUnduplicatedRead(){return this.onUniqueRead}set onUnduplicatedRead(e){this.onUniqueRead=e}get video(){return this.dce&&this.dce.video}set videoSrc(e){this.dce&&(this.dce.videoSrc=e)}get videoSrc(){return this.dce&&this.dce.videoSrc}set onTipSuggested(e){this.dce&&(this.dce.onTipSuggested=e)}get onTipSuggested(){return this.dce&&this.dce.onTipSuggested}_assertOpen(){if(!this.dce.isOpen())throw Error("The scanner is not open.")}set barcodeFillStyle(e){this._barcodeFillStyle=e,this.dce&&this.dce.updateDrawingStyle(3,{fillStyle:e})}get barcodeFillStyle(){return this._barcodeFillStyle}set barcodeStrokeStyle(e){this._barcodeStrokeStyle=e,this.dce&&this.dce.updateDrawingStyle(3,{strokeStyle:e})}get barcodeStrokeStyle(){return this._barcodeStrokeStyle}set barcodeLineWidth(e){this._barcodeLineWidth=e,this.dce&&this.dce.updateDrawingStyle(3,{lineWidth:e})}get barcodeLineWidth(){return this._barcodeLineWidth}set barcodeFillStyleBeforeVerification(e){this._barcodeFillStyleBeforeVerification=e,this._styleIdBeforeVerification&&this.dce.updateDrawingStyle(this._styleIdBeforeVerification,{fillStyle:e})}get barcodeFillStyleBeforeVerification(){return this._barcodeFillStyleBeforeVerification}set barcodeStrokeStyleBeforeVerification(e){this._barcodeStrokeStyleBeforeVerification=e,this._styleIdBeforeVerification&&this.dce.updateDrawingStyle(this._styleIdBeforeVerification,{strokeStyle:e})}get barcodeStrokeStyleBeforeVerification(){return this._barcodeStrokeStyleBeforeVerification}set barcodeLineWidthBeforeVerification(e){this._barcodeLineWidthBeforeVerification=e,this._styleIdBeforeVerification&&this.dce.updateDrawingStyle(this._styleIdBeforeVerification,{lineWidth:e})}get barcodeLineWidthBeforeVerification(){return this._barcodeLineWidthBeforeVerification}set regionMaskFillStyle(e){this.dce.setScanRegionMaskStyle({fillStyle:e})}get regionMaskFillStyle(){return this.dce.regionMaskFillStyle}set regionMaskStrokeStyle(e){this.dce.setScanRegionMaskStyle({strokeStyle:e})}get regionMaskStrokeStyle(){return this.dce.regionMaskStrokeStyle}set regionMaskLineWidth(e){this.dce.setScanRegionMaskStyle({lineWidth:e})}get regionMaskLineWidth(){return this.dce.regionMaskLineWidth}set region(e){this._region=e,this.dce&&(e?e instanceof Array||this.dce.setScanRegion(e):this.dce.setScanRegion(null)),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}get region(){return this._region}set ifSaveOriginalImageInACanvas(e){this._ifSaveOriginalImageInACanvas=e,this.dce.framePixelFormat=e?"rgba":"grey"}get ifSaveOriginalImageInACanvas(){return this._ifSaveOriginalImageInACanvas}async createDCEInstance(){this.dce||($._onLog&&$._onLog("createDCEInstance()"),Ce.defaultUIElementURL=null,this.dce=await Ce.createInstance(),this.dce.refreshInterval=200,this.dce.framePixelFormat="grey",this.dce.maxCvsSideLength=this.maxCvsSideLength,this._drawingItemNamespace=BT,["iPhone","iPad","Android","HarmonyOS"].includes($.browserInfo.OS)||this.dce.setResolution(1920,1080),this._styleIdBeforeVerification=this.dce.createDrawingStyle({fillStyle:"rgba(248,252,0,0.2)",strokeStyle:"transparent",paintMode:"strokeAndFill"}),this.barcodeLineWidth=this._barcodeLineWidth,this.dce.on("cameraChange",()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}),this.dce.on("resolutionChange",()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}),this.dce.on("cameraClose",()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0,this._bPauseScan=!1}),this.dce.on("singleFrameAcquired",async e=>{if(!e||!e.data)return;let i;this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=null,this.oriCanvasData={width:e.width,height:e.height,pixelFormat:e.pixelFormat,data:new Uint8Array(e.data),toCanvas:e.toCanvas});const{data:n,sx:r,sy:s,width:a,height:f,stride:_,pixelFormat:y,timeStamp:w,_sWidth:x,_sHeight:E}=e,k={timeStamp:w};if(y==="grey")i=await this._decodeBuffer_Uint8Array(n,a,f,_,Ne.IPF_GrayScaled,0,k);else if(y==="rgba")i=await this._decodeBuffer_Uint8Array(n,a,f,_,Ne.IPF_ABGR_8888,0,k);else{if(y!=="bgra")throw new Error(`Pixel format '${y}' is not supported.`);i=await this._decodeBuffer_Uint8Array(n,a,f,_,Ne.IPF_ARGB_8888,0,k)}if(await this.clearMapDecodeRecord(),$.recalculateResultLocation(i,r,s,x,E,a,f),this._drawResults(i),this.onFrameRead&&this.isOpen()&&!this._bPauseScan){let P=this._cloneDecodeResults(i);this.onFrameRead(P)}if(this.onUniqueRead&&this.isOpen()&&!this._bPauseScan)for(let P of i)this.onUniqueRead(P.barcodeText,this._cloneDecodeResults(P))}))}set maxCvsSideLength(e){this._maxCvsSideLength=e,this.dce.maxCvsSideLength=e}get maxCvsSideLength(){return this._maxCvsSideLength}static async createInstance(e){const i=new Ai;i._instanceID=await Ai.createInstanceInWorker(!0),await i.createDCEInstance(),typeof e=="string"&&(e=JSON.parse(e));for(let n in e)i[n]=e[n];return await i.dce.setUIElement(Ai.defaultUIElementURL),i.singleFrameMode&&console.warn("The `navigator.mediaDevices.getUserMedia` is unavailable. automatically change to `singleFrameMode`."),Ai._fireHTTPSWarnning(),i.singleFrameMode||await i.updateRuntimeSettings("single"),i}async decodeCurrentFrame(e){this._assertOpen();let i=null;e&&e.region&&(i=e.region);const n=this.dce._getVideoData(null,{region:i});return this._decode_DCEFrame(n)}async updateRuntimeSettings(e){let i;if(typeof e=="string")if(e=="speed"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,n.region&&(i.region=n.region),i.expectedBarcodesCount=0,i.localizationModes=[2,0,0,0,0,0,0,0],i.barcodeZoneMinDistanceToImageBorders=9}else if(e=="balance"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,n.region&&(i.region=n.region),i.expectedBarcodesCount=512,i.deblurLevel=3,i.localizationModes=[2,16,0,0,0,0,0,0],i.barcodeZoneMinDistanceToImageBorders=9,i.timeout=1e5}else if(e=="coverage"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,n.region&&(i.region=n.region),i.expectedBarcodesCount=512,i.deblurLevel=5,i.scaleDownThreshold=1e5,i.localizationModes=[2,16,4,8,0,0,0,0],i.barcodeZoneMinDistanceToImageBorders=9,i.timeout=1e5}else if(e=="single"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,n.region&&(i.region=n.region)}else if(e=="dense"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),this.maxCvsSideLength=4096,i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,n.region&&(i.region=n.region),i.expectedBarcodesCount=0,i.deblurLevel=7,i.scaleDownThreshold=1e5,i.localizationModes=[2,8,0,0,0,0,0,0],i.minResultConfidence=0,i.barcodeZoneMinDistanceToImageBorders=9,i.timeout=1e5}else if(e=="distance"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),this.maxCvsSideLength=4096,i=await this.getRuntimeSettings(),i.barcodeFormatIds=n.barcodeFormatIds,i.barcodeFormatIds_2=n.barcodeFormatIds_2,n.region&&(i.region=n.region),i.expectedBarcodesCount=0,i.scaleDownThreshold=1e5,i.localizationModes=[2,8,0,0,0,0,0,0],i.barcodeZoneMinDistanceToImageBorders=9,i.timeout=1e5}else i=JSON.parse(e);else{if(typeof e!="object")throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");if(i=JSON.parse(JSON.stringify(e)),i.region instanceof Array){let n=e.region;[n.regionLeft,n.regionTop,n.regionLeft,n.regionBottom,n.regionMeasuredByPercentage].some(r=>r!==void 0)&&(i.region={regionLeft:n.regionLeft||0,regionTop:n.regionTop||0,regionRight:n.regionRight||0,regionBottom:n.regionBottom||0,regionMeasuredByPercentage:n.regionMeasuredByPercentage||0})}}if(!$._bUseFullFeature){if(i.barcodeFormatIds&~(Nt.BF_ONED|Nt.BF_QR_CODE|Nt.BF_PDF417|Nt.BF_DATAMATRIX)||i.barcodeFormatIds_2!=0)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(i.intermediateResultTypes!=0)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}{let n=i.region;if(this.bFilterRegionInJs?this.userDefinedRegion=JSON.parse(JSON.stringify(n)):this.userDefinedRegion=null,n instanceof Array)if(n.length){for(let r=0;r<n.length;++r){let s=n[r];s&&((s.regionLeft||s.regionTop||s.regionRight||s.regionBottom||s.regionMeasuredByPercentage)&&(s.regionLeft||s.regionTop||s.regionRight!=100||s.regionBottom!=100||!s.regionMeasuredByPercentage)||(n[r]=null))}this.region=n}else this.region=null;else n&&(n.regionLeft||n.regionTop||n.regionRight||n.regionBottom||n.regionMeasuredByPercentage)&&(n.regionLeft||n.regionTop||n.regionRight!=100||n.regionBottom!=100||!n.regionMeasuredByPercentage)?this.region=n:this.region=null;this.bFilterRegionInJs&&(i.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0})}(this.autoZoom||this.autoFocus)&&(i.intermediateResultTypes|=kr.IRT_TYPED_BARCODE_ZONE),await new Promise((n,r)=>{let s=$._nextTaskID++;$._taskCallbackMap.set(s,a=>{if(a.success){try{this._handleRetJsonString(a.updateReturn)}catch(f){r(f)}return n()}{let f=new Error(a.message);return f.stack=a.stack+`
`+f.stack,r(f)}}),$._dbrWorker.postMessage({type:"updateRuntimeSettings",id:s,instanceID:this._instanceID,body:{settings:JSON.stringify(i)}})}),typeof e=="string"&&["speed","balance","coverage","dense","distance"].includes(e)&&(await this.setModeArgument("BinarizationModes",0,"EnableFillBinaryVacancy","1"),await this.setModeArgument("BinarizationModes",0,"BlockSizeX","0"),await this.setModeArgument("BinarizationModes",0,"BlockSizeY","0"))}_bindUI(){if(!this.getUIElement())throw new Error("Need to define `UIElement` before opening.");if(this.dce._bindUI(),!this.dce.video)throw this._unbindUI(),Error("Can not find the video container element with class 'dce-video-container'")}_unbindUI(){this.dce._unbindUI()}set onPlayed(e){this.dce.off("played",this._onPlayed),this._onPlayed=e,this.dce.on("played",this._onPlayed)}get onPlayed(){return this._onPlayed}async getAllCameras(){return this.dce.getAllCameras()}async getCurrentCamera(){return this.dce.getSelectedCamera()}async setCurrentCamera(e){const i=await this.dce.selectCamera(e);return this._fireResolutionWarning(),i}getResolution(){return this.dce.getResolution()}async setResolution(e,i){const n=await this.dce.setResolution(e,i);return this._fireResolutionWarning(),n}getVideoSettings(){return this.dce.getVideoSettings()}updateVideoSettings(e){return this.dce.updateVideoSettings(e)}isOpen(){return this.dce&&this.dce.isOpen()}setVideoFit(e){return this.dce&&this.dce.setVideoFit(e)}getVideoFit(){return this.dce&&this.dce.getVideoFit()}set ifShowScanRegionMask(e){this.dce&&(this.dce.ifShowScanRegionMask=e)}get ifShowScanRegionMask(){return this.dce&&this.dce.ifShowScanRegionMask}set ifSaveLastUsedCamera(e){this.dce&&(this.dce.ifSaveLastUsedCamera=e)}get ifSaveLastUsedCamera(){return this.dce&&this.dce.ifSaveLastUsedCamera}set ifSkipCameraInspection(e){this.dce&&(this.dce.ifSkipCameraInspection=e)}get ifSkipCameraInspection(){return this.dce&&this.dce.ifSkipCameraInspection}stop(){this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.dce.stop(),this.dce.ifShowScanRegionLaser=!1,this.dce.hideViewDecorator(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}pause(){this.dce.pause()}async play(e,i,n){this.dce.ifShowScanRegionLaser=!0;const r=await this.dce.play(e,i,n);return this._fireResolutionWarning(),r}pauseScan(e){this._assertOpen(),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),e&&e.keepResultsHighlighted||this._drawResults(null),this._bPauseScan=!0,this.dce.ifShowScanRegionLaser=!1,this.dce.stopFetchingLoop()}resumeScan(){this._assertOpen(),this._bPauseScan=!1,this.dce.ifShowScanRegionLaser=!0}getCapabilities(){return this.dce.getCapabilities()}getCameraSettings(){return this.dce.getCameraSettings()}getConstraints(){return this.dce.getConstraints()}async applyConstraints(e){return this.dce.applyConstraints(e)}async turnOnTorch(){return this.dce.turnOnTorch()}async turnOffTorch(){return this.dce.turnOffTorch()}async setColorTemperature(e){return this.dce.setColorTemperature(e)}getColorTemperature(){return this.dce.getColorTemperature()}async setExposureCompensation(e){return this.dce.setExposureCompensation(e)}getExposureCompensation(){return this.dce.getExposureCompensation()}async setZoom(e){return this.dce.setZoom(e)}getZoomSettings(){return this.dce.getZoomSettings()}resetZoom(){return this.dce.resetZoom()}async setFrameRate(e){return this.dce.setFrameRate(e)}getFrameRate(){return this.dce.getFrameRate()}async setFocus(e,i){return this.dce.setFocus(e,i)}getFocus(){return this.dce.getFocus()}getFocusSettings(){return this.dce.getFocusSettings()}async _loopReadVideo(){if(this.bDestroyed)return this.dce&&this.dce.stopFetchingLoop(),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),void this._drawResults(null);if(!this.isOpen())return this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),void await this.clearMapDecodeRecord();if(!this.dce.video||this.dce.video.paused||this._bPauseScan)return $._onLog&&$._onLog("Video or scan is paused. Ask in 1s."),await this.clearMapDecodeRecord(),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},this._intervalDetectVideoPause));$._onLog&&$._onLog("======= once read ======="),$._onLog&&(this._timeStartDecode=Date.now());const e=this._getVideoFrame();if(!e)return $._onLog&&$._onLog("Get invalid frame."),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},0));(async()=>{e._bUseWebGL||e.pixelFormat!=="grey"||(this.dce.framePixelFormat="rgba");let i=[];this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=null,this.oriCanvasData={width:e.width,height:e.height,pixelFormat:e.pixelFormat,data:new Uint8Array(e.data),toCanvas:e.toCanvas});const{data:n,sx:r,sy:s,width:a,height:f,stride:_,pixelFormat:y,timeStamp:w,_sWidth:x,_sHeight:E}=e,k={timeStamp:w};if(y==="grey")i=await this._decodeBuffer_Uint8Array(n,a,f,_,Ne.IPF_GrayScaled,0,k);else if(y==="rgba")i=await this._decodeBuffer_Uint8Array(n,a,f,_,Ne.IPF_ABGR_8888,0,k);else{if(y!=="bgra")throw new Error(`Pixel format '${y}' is not supported.`);i=await this._decodeBuffer_Uint8Array(n,a,f,_,Ne.IPF_ARGB_8888,0,k)}if($.recalculateResultLocation(i,r,s,x,E,a,f),this._resultHighlightingDuration==0?this._drawResults(null):this._drawResults(i),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._resultHighlightingDuration>0&&(this._clearResultsCanvasTimeoutId=setTimeout(()=>{this.bDestroyed||this._drawResults(null)},this._resultHighlightingDuration)),this.isOpen()&&this.dce.video&&!this.dce.video.paused&&!this._bPauseScan&&(this.autoZoom||this.autoFocus||this.autoSuggestTip))if(i.length)this.autoZoomInFrameArray.length=0,this.autoZoomOutFrameCount=0,this.frameArrayInIdealZoom.length=0,this.suggestTipFrameArray.length=0,this.autoZoom&&this.autoFocus&&(this.nextActionInIdealZoom="focus"),this.autoFocusFrameArray.length=0,this.noIntermediateResultsCount=0;else{const P=await this.getIntermediateResults(),M=(R,D,Y,ie,oe,z,S)=>{let he=z/ie,le=S/oe;R.x1=R.x1/he+D,R.x2=R.x2/he+D,R.x3=R.x3/he+D,R.x4=R.x4/he+D,R.y1=R.y1/le+Y,R.y2=R.y2/le+Y,R.y3=R.y3/le+Y,R.y4=R.y4/le+Y},V=R=>{if(!R)return null;const D={};let Y,ie,oe,z,S;{const p=this.video.videoWidth*(1-this.autoZoomDetectionArea)/2,m=this.video.videoWidth*(1+this.autoZoomDetectionArea)/2,b=m,C=p,T=this.video.videoHeight*(1-this.autoZoomDetectionArea)/2,I=T,O=this.video.videoHeight*(1+this.autoZoomDetectionArea)/2;S={x1:p,x2:m,x3:b,x4:C,y1:T,y2:I,y3:O,y4:O}}const he=(p,m)=>{const b=(T,I)=>{if(!T&&!I)throw new Error("Invalid arguments.");return function(O,A,F){let U=!1;const H=O.length;if(H<=2)return!1;for(let J=0;J<H;J++){const q=O[J],X=O[(J+1)%H];if(NT(q,X,{x:A,y:F}))return!0;nc(q.y-F)>0!=nc(X.y-F)>0&&nc(A-(F-q.y)*(q.x-X.x)/(q.y-X.y)-q.x)<0&&(U=!U)}return U}([{x:I.x1,y:I.y1},{x:I.x2,y:I.y2},{x:I.x3,y:I.y3},{x:I.x4,y:I.y4}],T.x,T.y)},C=(T,I)=>!!(ys([T[0],T[1]],[T[2],T[3]],[I.x1,I.y1],[I.x2,I.y2])||ys([T[0],T[1]],[T[2],T[3]],[I.x2,I.y2],[I.x3,I.y3])||ys([T[0],T[1]],[T[2],T[3]],[I.x3,I.y3],[I.x4,I.y4])||ys([T[0],T[1]],[T[2],T[3]],[I.x4,I.y4],[I.x1,I.y1]));return!!(b({x:p.x1,y:p.y1},m)||b({x:p.x2,y:p.y2},m)||b({x:p.x3,y:p.y3},m)||b({x:p.x4,y:p.y4},m))||!!(b({x:m.x1,y:m.y1},p)||b({x:m.x2,y:m.y2},p)||b({x:m.x3,y:m.y3},p)||b({x:m.x4,y:m.y4},p))||!!(C([m.x1,m.y1,m.x2,m.y2],p)||C([m.x2,m.y2,m.x3,m.y3],p)||C([m.x3,m.y3,m.x4,m.y4],p)||C([m.x4,m.y4,m.x1,m.y1],p))},le=[];for(let p of R){if(p.resultType!==kr.IRT_TYPED_BARCODE_ZONE)continue;const m=p.scaleDownRatio;for(let b of p.results){if(!b)continue;const C={x1:b.x1=b.x1*m,x2:b.x2=b.x2*m,x3:b.x3=b.x3*m,x4:b.x4=b.x4*m,y1:b.y1=b.y1*m,y2:b.y2=b.y2*m,y3:b.y4=b.y3*m,y4:b.y4=b.y4*m};M(C,r,s,x,E,a,f),he(S,C)&&le.push(b)}}const ue=(p=>{if(!p||!p.length)return null;const m=I=>{const O=(I.x1+I.x2+I.x3+I.x4)/4,A=(I.y1+I.y2+I.y3+I.y4)/4;return(O-a/2)*(O-a/2)+(A-f/2)*(A-f/2)};let b,C=p.filter(I=>I.barcodeFormat==Nt.BF_QR_CODE||I.barcodeFormat==Nt.BF_DATAMATRIX);if(C.length||(C=p.filter(I=>I.barcodeFormat==Nt.BF_ONED),C.length||(C=p)),!C.length)return null;b=C[0];let T=m(b);if(C.length!=1)for(let I=1;I<C.length;I++){const O=m(C[I]);(C[I].confidence>1.1*b.confidence||C[I].confidence>.9*b.confidence&&O<T)&&(b=C[I],T=O)}return b})(le);if(!ue)return null;const h=ue.x1,c=ue.x2,u=ue.x3,g=ue.x4,o=ue.y1,l=ue.y2,d=ue.y3,v=ue.y4;return Y=Math.min(h,c,u,g),ie=Math.max(h,c,u,g),oe=Math.min(o,l,d,v),z=Math.max(o,l,d,v),D.x1=D.x4=Y,D.x2=D.x3=ie,D.y1=D.y2=oe,D.y3=D.y4=z,D.result=ue,D},L=V(P);if(L&&L.x1){if(this.autoZoomOutFrameCount=0,this.noIntermediateResultsCount=0,this.suggestTipFrameArray.push(!0),this.suggestTipFrameArray.splice(0,this.suggestTipFrameArray.length-this.suggestTipFrameLimit[0]),this.autoSuggestTip&&this.suggestTipFrameArray.filter(R=>R===!0).length>=this.suggestTipFrameLimit[1]){this.suggestTipFrameArray.length=0;const R=L.x3-L.x1,D=L.y3-L.y1;L.result.moduleSize<this.tinyBarcodeTipModuleSizeLimit?this.dce&&this.dce.suggestTip("tiny-barcode","Please zoom in or move closer."):R>D?R>a*this.hugeBarcodeTipLimit?this.dce&&this.dce.suggestTip("huge-barcode","Please zoom out or move farther."):R>.6*a&&Math.max(this.video.videoWidth,this.video.videoHeight)<=1280&&Math.min(this.video.videoWidth,this.video.videoHeight)<=720&&this.dce&&this.dce.suggestTip("low-resolution","Please use a higher resolution."):R<=D&&(D>f*this.hugeBarcodeTipLimit?this.dce&&this.dce.suggestTip("huge-barcode","Please zoom out or move farther."):D>.6*f&&Math.max(this.video.videoWidth,this.video.videoHeight)<=1280&&Math.min(this.video.videoWidth,this.video.videoHeight)<=720&&this.dce&&this.dce.suggestTip("low-resolution","Please use a higher resolution."))}if(this.autoZoom){const R=this.autoZoomIdealArea[1];let D=(1-this.autoZoomTargetBorder)/2;const Y=L.x1/x,ie=(x-L.x3)/x,oe=L.y1/E,z=(E-L.y3)/E;if(Y>R&&ie>R&&oe>R&&z>R&&L.result.moduleSize<this.autoZoomInIdealModuleSize){if(this.autoZoomInFrameArray.push(!0),this.autoZoomInFrameArray.splice(0,this.autoZoomInFrameArray.length-this.autoZoomInFrameLimit[0]),this.frameArrayInIdealZoom.length=0,this.autoFocus&&(this.nextActionInIdealZoom="focus",this.setFocus({mode:"continuous"}).catch(()=>{})),this.autoZoomInFrameArray.filter(S=>S===!0).length>=this.autoZoomInFrameLimit[1]){this.autoZoomInFrameArray.length=0;const S=[(.5-D)/(.5-Y),(.5-D)/(.5-ie),(.5-D)/(.5-oe),(.5-D)/(.5-z)].filter(c=>c>0),he=Math.min(...S,this.autoZoomInIdealModuleSize/L.result.moduleSize),le=this.dce.getZoomSettings().factor;let ue=Math.max(Math.pow(le*he,1/this.autoZoomInMaxTimes),this.autoZoomInMinStep);ue=Math.min(ue,he);const h=le*ue;await this.setZoom({factor:h}),this.dce.clearFrameBuffer()}}else if(this.autoZoomInFrameArray.length=0,this.frameArrayInIdealZoom.push(!0),this.frameArrayInIdealZoom.splice(0,this.frameArrayInIdealZoom.length-this.frameLimitInIdealZoom[0]),this.frameArrayInIdealZoom.filter(S=>S===!0).length>=this.frameLimitInIdealZoom[1])if(this.frameArrayInIdealZoom.length=0,this.nextActionInIdealZoom==="focus"&&this.autoFocus){M(L,r,s,x,E,a,f);try{await this.setFocus({mode:"manual",area:{centerPoint:{x:(L.x1+L.x3)/2+"px",y:(L.y1+L.y3)/2+"px"},width:L.x3-L.x1+"px",height:L.y3-L.y1+"px"}})}catch(S){}this.dce.clearFrameBuffer(),this.nextActionInIdealZoom="zoomOut"}else{if(this.nextActionInIdealZoom!=="zoomOut"&&this.autoFocus)throw new Error("Invalid action.");if(this.enableZoomOutInIdealZoom){D=this.autoZoomIdealArea[1]+this.autoZoomOutStepRate_2;const S=[(.5-D)/(.5-Y),(.5-D)/(.5-ie),(.5-D)/(.5-oe),(.5-D)/(.5-z)].filter(le=>le>0);let he=Math.min(...S)*this.dce.getZoomSettings().factor;await this.setZoom({factor:he}),this.dce.clearFrameBuffer(),this.autoFocus&&(this.nextActionInIdealZoom="focus",this.setFocus({mode:"continuous"}).catch(le=>{}))}}}else if(this.autoFocus&&(this.autoFocusFrameArray.push(!0),this.autoFocusFrameArray.splice(0,this.autoFocusFrameArray.length-this.autoFocusFrameLimit[0]),this.autoFocusFrameArray.filter(R=>R===!0).length>=this.autoFocusFrameLimit[1])){this.autoFocusFrameArray.length=0;try{M(L,r,s,x,E,a,f),await this.setFocus({mode:"manual",area:{centerPoint:{x:(L.x1+L.x3)/2+"px",y:(L.y1+L.y3)/2+"px"},width:L.x3-L.x1+"px",height:L.y3-L.y1+"px"}})}catch(R){}this.dce.clearFrameBuffer()}}else if(this.noIntermediateResultsCount++,this.suggestTipFrameArray.push(!1),this.autoZoom){if(this.autoZoomInFrameArray.push(!1),this.autoZoomInFrameArray.splice(0,this.autoZoomInFrameArray.length-this.autoZoomInFrameLimit[0]),this.autoZoomOutFrameCount++,this.frameArrayInIdealZoom.push(!1),this.frameArrayInIdealZoom.splice(0,this.frameArrayInIdealZoom.length-this.frameLimitInIdealZoom[0]),this.autoZoomOutFrameCount>=this.autoZoomOutFrameLimit){this.autoZoomOutFrameCount=0;const R=this.getZoomSettings().factor;if(R>this.autoZoomOutMinValue){const D=Math.max((R-1)*this.autoZoomOutStepRate,this.autoZoomOutMinStep),Y=Math.max(R-D,this.autoZoomOutMinValue);await this.setZoom({factor:Y}),this.dce.clearFrameBuffer()}}this.autoFocus&&(this.nextActionInIdealZoom="focus",this.setFocus({mode:"continuous"}).catch(R=>{}))}else this.autoFocus&&(this.autoFocusFrameArray.length=0,this.setFocus({mode:"continuous"}).catch(R=>{}))}return i})().then(i=>{if($._onLog&&$._onLog(i),this.captureAndDecodeInParallel){let n=this.array_decodeFrameTimeCost,r=this.array_getFrameTimeCost,s=this._indexCurrentDecodingFrame;const a=()=>{let f=0;if(this.region instanceof Array){let _=0,y=0;_=s+1>=this.region.length?0:s+1,y=_+1>=this.region.length?0:_+1,f=n[_]&&n[_].length&&r[y]&&r[y].length?Math.min(...n[_])-Math.max(...r[y]):0}else if(r&&r.length){let _=Math.min(...n),y=Math.max(...r);_&&y&&(f=_-y)}else f=0;return f>0?f:0};(()=>{if(this.region instanceof Array){for(n[s]&&n[s]instanceof Array||(n[s]=[]);n[s].length>=5;)n[s].shift();n[s].push(this._lastInnerDecodeDuration)}else{for(;n.length>=5;)n.shift();n.push(this._lastInnerDecodeDuration)}})(),this._intervalGetVideoFrame=a()+this.intervalTime,$._onLog&&$._onLog("Next fetching frame loop interval: "+this._intervalGetVideoFrame)}if(this.isOpen()&&this.dce.video&&!this.dce.video.paused&&!this._bPauseScan){if(this.bPlaySoundOnSuccessfulRead&&i.length){let n=!1;this.bPlaySoundOnSuccessfulRead===!0||this.bPlaySoundOnSuccessfulRead==="frame"?n=i.some(r=>r.resultState>=0):this.bPlaySoundOnSuccessfulRead==="unique"&&(n=i.some(r=>r.resultState==0)),n&&this.beepSound&&(this.beepSound.stop(),this.beepSound.play())}if(navigator.vibrate&&this.bVibrateOnSuccessfulRead&&i.length){let n=!1;if(this.bVibrateOnSuccessfulRead===!0||this.bVibrateOnSuccessfulRead==="frame"?n=i.some(r=>r.resultState>=0):this.bVibrateOnSuccessfulRead==="unique"&&(n=i.some(r=>r.resultState==0)),n)try{navigator.vibrate(this.vibrateDuration)}catch(r){console.warn("Vibration not allowed. User interaction required: "+(r.message||r))}}if(this.onFrameRead){i=i.filter(r=>r.resultState>=0);const n=this._cloneDecodeResults(i);this.onFrameRead(n)}if(this.onUniqueRead){i=i.filter(r=>r.resultState==0);const n=this._cloneDecodeResults(i);for(let r of n)this.onUniqueRead(r.barcodeText,r)}}this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.intervalTime?this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},this.intervalTime):this._loopReadVideo()})}_getVideoFrame(){if(!this.dce)return null;let e;if(this.captureAndDecodeInParallel){$._onLog&&$._onLog("Get frame in parallel.");let i=this.dce.isFetchingLoopStarted();if(this.dce.loopInterval=this._intervalGetVideoFrame,i||this.dce.startFetchingLoop(),!this.dce.numberOfFramesInBuffer)return this.dce.loopInterval=0,null;e=this.dce.getFrameFromBuffer(),(r=>{if(!r)return;let s=r.timeSpent,a=this.array_getFrameTimeCost;for(;a.length>=5;)a.shift();a.push(s)})(e)}else $._onLog&&$._onLog("Get frame in serial."),this.dce.stopFetchingLoop(),e=this.dce.getFrame();return e}async open(){this._bindUI();const e=await this.dce.open();return this._bPauseScan=!1,this.singleFrameMode||(this.dce&&(this.dce.ifShowScanRegionLaser=!0),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},0)),this._fireResolutionWarning(),e}async openVideo(){this._bindUI(),this.dce.ifShowScanRegionLaser=!1;const e=await this.dce.open();return this._bPauseScan=!0,this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},0)),this._fireResolutionWarning(),e}close(){this.dce.close(),this._bPauseScan=!0,this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId)}async show(){this._bindUI();const e=await this.dce.open(!0);return this._bPauseScan=!1,this.singleFrameMode||(this.dce&&(this.dce.ifShowScanRegionLaser=!0),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},0)),this._fireResolutionWarning(),e}async showVideo(){this._bindUI(),this.dce.ifShowScanRegionLaser=!1;const e=await this.dce.open(!0);return this._bPauseScan=!0,this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},0)),this._fireResolutionWarning(),e}hide(){this.dce.close(!0),this._bPauseScan=!0,this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId)}showTip(e,i,n,r,s=3e3,a=!0){this.dce&&this.dce.showTip(e,i,n,r,s,a)}hideTip(){this.dce&&this.dce.hideTip()}updateTipMessage(e){this.dce&&this.dce.updateTipMessage(e)}async enableTapToFocus(){this.dce&&this.dce.enableTapToFocus()}disableTapToFocus(){this.dce&&this.dce.disableTapToFocus()}isTapToFocusEnabled(){return this.dce.isTapToFocusEnabled()}transformCoord(e){if(!this.isOpen())throw new Error("Unavailable when the camera is not open.");if(this.singleFrameMode&&!this.dce._cvsSingleFrameMode)throw new Error("No image is selected. ");const i=this.dce._elContainer.getBoundingClientRect();let n,r,s,a,f,_=i.left,y=i.top,w=_+window.scrollX,x=y+window.scrollY;this.singleFrameMode?(n=this.dce._cvsSingleFrameMode.width,r=this.dce._cvsSingleFrameMode.height,s=parseFloat(window.getComputedStyle(this.dce._cvsSingleFrameMode).width),a=parseFloat(window.getComputedStyle(this.dce._cvsSingleFrameMode).height),f="contain"):(n=this.video.videoWidth,r=this.video.videoHeight,s=parseFloat(window.getComputedStyle(this.dce._elContainer).width),a=parseFloat(window.getComputedStyle(this.dce._elContainer).height),f=this.getVideoFit());const E=s/a,k=n/r;let P,M,V,L,R=1;if(f==="contain")E<k?(R=s/n,P=_+e.x*R,M=y+e.y*R+(a-r*R)/2,V=w+e.x*R,L=x+e.y*R+(a-r*R)/2):(R=a/r,P=_+e.x*R+(s-n*R)/2,M=y+e.y*R,V=w+e.x*R+(s-n*R)/2,L=x+e.y*R);else if(f==="cover")if(E<k){R=a/r;let D=e.x*R-(n*R-s)/2;D=Math.max(D,0),D=Math.min(D,s),P=_+D,M=y+e.y*R,V=w+D,L=x+e.y*R}else{R=s/n;let D=e.y*R-(r*R-a)/2;D=Math.max(D,0),D=Math.min(D,a),P=_+e.x*R,M=y+D,V=w+e.x*R,L=x+D}return{clientX:Math.round(P),clientY:Math.round(M),pageX:Math.round(V),pageY:Math.round(L)}}convertToPageCoordinates(e){const i=this.transformCoord(e);return{x:i.pageX,y:i.pageY}}convertToClientCoordinates(e){const i=this.transformCoord(e);return{x:i.clientX,y:i.clientY}}destroyContext(){this.close(),this.dce&&this.dce.dispose(!1),this.bDestroyed||super.destroyContext()}}var _p,yp,bp,wp,Sp,Cp,xp,Tp,Ep,Ip,Op,Rp,Ap,kp,Dp,Lp,Pp,Mp,Fp,Bp,Np,$p,jp,Vp,Up,Wp;(function(t){t[t.BICM_DARK_ON_LIGHT=1]="BICM_DARK_ON_LIGHT",t[t.BICM_LIGHT_ON_DARK=2]="BICM_LIGHT_ON_DARK",t[t.BICM_DARK_ON_DARK=4]="BICM_DARK_ON_DARK",t[t.BICM_LIGHT_ON_LIGHT=8]="BICM_LIGHT_ON_LIGHT",t[t.BICM_DARK_LIGHT_MIXED=16]="BICM_DARK_LIGHT_MIXED",t[t.BICM_DARK_ON_LIGHT_DARK_SURROUNDING=32]="BICM_DARK_ON_LIGHT_DARK_SURROUNDING",t[t.BICM_SKIP=0]="BICM_SKIP",t[t.BICM_REV=2147483648]="BICM_REV"})(_p||(_p={})),function(t){t[t.BCM_AUTO=1]="BCM_AUTO",t[t.BCM_GENERAL=2]="BCM_GENERAL",t[t.BCM_SKIP=0]="BCM_SKIP",t[t.BCM_REV=2147483648]="BCM_REV"}(yp||(yp={})),function(t){t[t.BF2_NULL=0]="BF2_NULL",t[t.BF2_POSTALCODE=32505856]="BF2_POSTALCODE",t[t.BF2_NONSTANDARD_BARCODE=1]="BF2_NONSTANDARD_BARCODE",t[t.BF2_USPSINTELLIGENTMAIL=1048576]="BF2_USPSINTELLIGENTMAIL",t[t.BF2_POSTNET=2097152]="BF2_POSTNET",t[t.BF2_PLANET=4194304]="BF2_PLANET",t[t.BF2_AUSTRALIANPOST=8388608]="BF2_AUSTRALIANPOST",t[t.BF2_RM4SCC=16777216]="BF2_RM4SCC",t[t.BF2_DOTCODE=2]="BF2_DOTCODE",t[t.BF2_PHARMACODE_ONE_TRACK=4]="BF2_PHARMACODE_ONE_TRACK",t[t.BF2_PHARMACODE_TWO_TRACK=8]="BF2_PHARMACODE_TWO_TRACK",t[t.BF2_PHARMACODE=12]="BF2_PHARMACODE",t[t.BF2_ALL=-1]="BF2_ALL"}(bp||(bp={})),function(t){t[t.BM_AUTO=1]="BM_AUTO",t[t.BM_LOCAL_BLOCK=2]="BM_LOCAL_BLOCK",t[t.BM_SKIP=0]="BM_SKIP",t[t.BM_THRESHOLD=4]="BM_THRESHOLD",t[t.BM_REV=2147483648]="BM_REV"}(wp||(wp={})),function(t){t[t.ECCM_CONTRAST=1]="ECCM_CONTRAST"}(Sp||(Sp={})),function(t){t[t.CFM_GENERAL=1]="CFM_GENERAL"}(Cp||(Cp={})),function(t){t[t.CCM_AUTO=1]="CCM_AUTO",t[t.CCM_GENERAL_HSV=2]="CCM_GENERAL_HSV",t[t.CCM_SKIP=0]="CCM_SKIP",t[t.CCM_REV=2147483648]="CCM_REV"}(xp||(xp={})),function(t){t[t.CICM_GENERAL=1]="CICM_GENERAL",t[t.CICM_SKIP=0]="CICM_SKIP",t[t.CICM_REV=2147483648]="CICM_REV"}(Tp||(Tp={})),function(t){t[t.CM_IGNORE=1]="CM_IGNORE",t[t.CM_OVERWRITE=2]="CM_OVERWRITE"}(Ep||(Ep={})),function(t){t[t.DM_SKIP=0]="DM_SKIP",t[t.DM_DIRECT_BINARIZATION=1]="DM_DIRECT_BINARIZATION",t[t.DM_THRESHOLD_BINARIZATION=2]="DM_THRESHOLD_BINARIZATION",t[t.DM_GRAY_EQUALIZATION=4]="DM_GRAY_EQUALIZATION",t[t.DM_SMOOTHING=8]="DM_SMOOTHING",t[t.DM_MORPHING=16]="DM_MORPHING",t[t.DM_DEEP_ANALYSIS=32]="DM_DEEP_ANALYSIS",t[t.DM_SHARPENING=64]="DM_SHARPENING",t[t.DM_BASED_ON_LOC_BIN=128]="DM_BASED_ON_LOC_BIN",t[t.DM_SHARPENING_SMOOTHING=256]="DM_SHARPENING_SMOOTHING"}(Ip||(Ip={})),function(t){t[t.DRM_AUTO=1]="DRM_AUTO",t[t.DRM_GENERAL=2]="DRM_GENERAL",t[t.DRM_BROAD_WARP=4]="DRM_BROAD_WARP",t[t.DRM_LOCAL_REFERENCE=8]="DRM_LOCAL_REFERENCE",t[t.DRM_DEWRINKLE=16]="DRM_DEWRINKLE",t[t.DRM_SKIP=0]="DRM_SKIP",t[t.DRM_REV=2147483648]="DRM_REV"}(Op||(Op={})),function(t){t[t.DPMCRM_AUTO=1]="DPMCRM_AUTO",t[t.DPMCRM_GENERAL=2]="DPMCRM_GENERAL",t[t.DPMCRM_SKIP=0]="DPMCRM_SKIP",t[t.DPMCRM_REV=2147483648]="DPMCRM_REV"}(Rp||(Rp={})),function(t){t[t.GTM_INVERTED=1]="GTM_INVERTED",t[t.GTM_ORIGINAL=2]="GTM_ORIGINAL",t[t.GTM_SKIP=0]="GTM_SKIP",t[t.GTM_REV=2147483648]="GTM_REV"}(Ap||(Ap={})),function(t){t[t.IPM_AUTO=1]="IPM_AUTO",t[t.IPM_GENERAL=2]="IPM_GENERAL",t[t.IPM_GRAY_EQUALIZE=4]="IPM_GRAY_EQUALIZE",t[t.IPM_GRAY_SMOOTH=8]="IPM_GRAY_SMOOTH",t[t.IPM_SHARPEN_SMOOTH=16]="IPM_SHARPEN_SMOOTH",t[t.IPM_MORPHOLOGY=32]="IPM_MORPHOLOGY",t[t.IPM_SKIP=0]="IPM_SKIP",t[t.IPM_REV=2147483648]="IPM_REV"}(kp||(kp={})),function(t){t[t.IRSM_MEMORY=1]="IRSM_MEMORY",t[t.IRSM_FILESYSTEM=2]="IRSM_FILESYSTEM",t[t.IRSM_BOTH=4]="IRSM_BOTH"}(Dp||(Dp={})),function(t){t[t.LM_SKIP=0]="LM_SKIP",t[t.LM_AUTO=1]="LM_AUTO",t[t.LM_CONNECTED_BLOCKS=2]="LM_CONNECTED_BLOCKS",t[t.LM_LINES=8]="LM_LINES",t[t.LM_STATISTICS=4]="LM_STATISTICS",t[t.LM_SCAN_DIRECTLY=16]="LM_SCAN_DIRECTLY",t[t.LM_STATISTICS_MARKS=32]="LM_STATISTICS_MARKS",t[t.LM_STATISTICS_POSTAL_CODE=64]="LM_STATISTICS_POSTAL_CODE",t[t.LM_CENTRE=128]="LM_CENTRE",t[t.LM_ONED_FAST_SCAN=256]="LM_ONED_FAST_SCAN",t[t.LM_REV=2147483648]="LM_REV"}(Lp||(Lp={})),function(t){t[t.PDFRM_RASTER=1]="PDFRM_RASTER",t[t.PDFRM_AUTO=2]="PDFRM_AUTO",t[t.PDFRM_VECTOR=4]="PDFRM_VECTOR",t[t.PDFRM_REV=2147483648]="PDFRM_REV"}(Pp||(Pp={})),function(t){t[t.QRECL_ERROR_CORRECTION_H=0]="QRECL_ERROR_CORRECTION_H",t[t.QRECL_ERROR_CORRECTION_L=1]="QRECL_ERROR_CORRECTION_L",t[t.QRECL_ERROR_CORRECTION_M=2]="QRECL_ERROR_CORRECTION_M",t[t.QRECL_ERROR_CORRECTION_Q=3]="QRECL_ERROR_CORRECTION_Q"}(Mp||(Mp={})),function(t){t[t.RPM_AUTO=1]="RPM_AUTO",t[t.RPM_GENERAL=2]="RPM_GENERAL",t[t.RPM_GENERAL_RGB_CONTRAST=4]="RPM_GENERAL_RGB_CONTRAST",t[t.RPM_GENERAL_GRAY_CONTRAST=8]="RPM_GENERAL_GRAY_CONTRAST",t[t.RPM_GENERAL_HSV_CONTRAST=16]="RPM_GENERAL_HSV_CONTRAST",t[t.RPM_SKIP=0]="RPM_SKIP",t[t.RPM_REV=2147483648]="RPM_REV"}(Fp||(Fp={})),function(t){t[t.RCT_PIXEL=1]="RCT_PIXEL",t[t.RCT_PERCENTAGE=2]="RCT_PERCENTAGE"}(Bp||(Bp={})),function(t){t[t.RT_STANDARD_TEXT=0]="RT_STANDARD_TEXT",t[t.RT_RAW_TEXT=1]="RT_RAW_TEXT",t[t.RT_CANDIDATE_TEXT=2]="RT_CANDIDATE_TEXT",t[t.RT_PARTIAL_TEXT=3]="RT_PARTIAL_TEXT"}(Np||(Np={})),function(t){t[t.SUM_AUTO=1]="SUM_AUTO",t[t.SUM_LINEAR_INTERPOLATION=2]="SUM_LINEAR_INTERPOLATION",t[t.SUM_NEAREST_NEIGHBOUR_INTERPOLATION=4]="SUM_NEAREST_NEIGHBOUR_INTERPOLATION",t[t.SUM_SKIP=0]="SUM_SKIP",t[t.SUM_REV=2147483648]="SUM_REV"}($p||($p={})),function(t){t[t.TP_REGION_PREDETECTED=1]="TP_REGION_PREDETECTED",t[t.TP_IMAGE_PREPROCESSED=2]="TP_IMAGE_PREPROCESSED",t[t.TP_IMAGE_BINARIZED=4]="TP_IMAGE_BINARIZED",t[t.TP_BARCODE_LOCALIZED=8]="TP_BARCODE_LOCALIZED",t[t.TP_BARCODE_TYPE_DETERMINED=16]="TP_BARCODE_TYPE_DETERMINED",t[t.TP_BARCODE_RECOGNIZED=32]="TP_BARCODE_RECOGNIZED"}(jp||(jp={})),function(t){t[t.TFM_AUTO=1]="TFM_AUTO",t[t.TFM_GENERAL_CONTOUR=2]="TFM_GENERAL_CONTOUR",t[t.TFM_SKIP=0]="TFM_SKIP",t[t.TFM_REV=2147483648]="TFM_REV"}(Vp||(Vp={})),function(t){t[t.TROM_CONFIDENCE=1]="TROM_CONFIDENCE",t[t.TROM_POSITION=2]="TROM_POSITION",t[t.TROM_FORMAT=4]="TROM_FORMAT",t[t.TROM_SKIP=0]="TROM_SKIP",t[t.TROM_REV=2147483648]="TROM_REV"}(Up||(Up={})),function(t){t[t.TDM_AUTO=1]="TDM_AUTO",t[t.TDM_GENERAL_WIDTH_CONCENTRATION=2]="TDM_GENERAL_WIDTH_CONCENTRATION",t[t.TDM_SKIP=0]="TDM_SKIP",t[t.TDM_REV=2147483648]="TDM_REV"}(Wp||(Wp={}));$.license="DLS2eyJoYW5kc2hha2VDb2RlIjoiMTAxODYxOTEzLVRYbFhaV0pRY205cVgyUmljZyIsIm1haW5TZXJ2ZXJVUkwiOiJodHRwczovL21sdHMuZHluYW1zb2Z0LmNvbSIsIm9yZ2FuaXphdGlvbklEIjoiMTAxODYxOTEzIiwiY2hlY2tDb2RlIjoxNTc3MTY5ODc1fQ==";$.engineResourcePath="https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode/dist/";class $T extends re.Component{constructor(){super(...arguments);gl(this,"pScanner",null);gl(this,"elRef",re.createRef())}async componentDidMount(){try{const i=await(this.pScanner=Ai.createInstance());if(i.isContextDestroyed()||(await i.setUIElement(this.elRef.current),i.isContextDestroyed()))return;i.onFrameRead=n=>{for(let r of n)console.log(r.barcodeText),console.log(r.localizationResult)},await i.open()}catch(i){if(i.message.indexOf("network connection error")){let n="Failed to connect to Dynamsoft License Server: network connection error. Check your Internet connection or contact Dynamsoft Support (support@dynamsoft.com) to acquire an offline license.";console.log(n),alert(n)}throw i}}async componentWillUnmount(){this.pScanner&&((await this.pScanner).destroyContext(),console.log("BarcodeScanner Component Unmount"))}shouldComponentUpdate(){return!1}render(){return ht("div",{ref:this.elRef,className:"component-barcode-scanner",children:[xe("svg",{className:"dce-bg-loading",viewBox:"0 0 1792 1792",children:xe("path",{d:"M1760 896q0 176-68.5 336t-184 275.5-275.5 184-336 68.5-336-68.5-275.5-184-184-275.5-68.5-336q0-213 97-398.5t265-305.5 374-151v228q-221 45-366.5 221t-145.5 406q0 130 51 248.5t136.5 204 204 136.5 248.5 51 248.5-51 204-136.5 136.5-204 51-248.5q0-230-145.5-406t-366.5-221v-228q206 31 374 151t265 305.5 97 398.5z"})}),xe("svg",{className:"dce-bg-camera",viewBox:"0 0 2048 1792",children:xe("path",{d:"M1024 672q119 0 203.5 84.5t84.5 203.5-84.5 203.5-203.5 84.5-203.5-84.5-84.5-203.5 84.5-203.5 203.5-84.5zm704-416q106 0 181 75t75 181v896q0 106-75 181t-181 75h-1408q-106 0-181-75t-75-181v-896q0-106 75-181t181-75h224l51-136q19-49 69.5-84.5t103.5-35.5h512q53 0 103.5 35.5t69.5 84.5l51 136h224zm-704 1152q185 0 316.5-131.5t131.5-316.5-131.5-316.5-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5z"})}),xe("div",{className:"dce-video-container"}),xe("div",{className:"dce-scanarea",children:xe("div",{className:"dce-scanlight"})}),ht("div",{className:"div-select-container",children:[xe("select",{className:"dce-sel-camera"}),xe("select",{className:"dce-sel-resolution"})]})]})}}const jT=()=>ht(Bh,{children:[xe(Or,{children:xe(Ar,{children:xe(Rr,{children:"QR Scanner"})})}),ht(Lh,{fullscreen:!0,children:[xe(Or,{collapse:"condense",children:xe(Ar,{children:xe(Rr,{size:"large",children:"Tab 1"})})}),xe($T,{})]})]});const VT=({name:t})=>ht("div",{className:"container",children:[xe("strong",{children:t}),ht("p",{children:["Explore ",xe("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ionicframework.com/docs/components",children:"UI Components"})]})]});const UT=()=>ht(Bh,{children:[xe(Or,{children:xe(Ar,{children:xe(Rr,{children:"Tab 2"})})}),ht(Lh,{fullscreen:!0,children:[xe(Or,{collapse:"condense",children:xe(Ar,{children:xe(Rr,{size:"large",children:"Tab 2"})})}),xe(VT,{name:"Tab 2 page"})]})]});let WT={"1ec74e6f-7b86-4b85-9ebe-18a3a7d0a17b":"Apples","6ca34ed6-2d60-4326-bdf3-c3a22d7c3b15":"Bananas","03de298c-e4d5-4b39-847b-b317337055ef":"Carrots","90f7de86-7468-4f28-aef4-902726b33c35":"Broccoli","a46e9a48-2001-4d70-b55e-d1a5735c5d5d":"Chicken","3c3b1b43-8d99-4883-ae20-b51af8e8b0c1":"Beef","fced11a8-a9b6-4fd4-8db6-8815ee0a279b":"Milk","8e35f7c9-38f4-4af1-bfc5-ee7d25df46e2":"Eggs","c7d2f212-21f4-4e88-96d6-8eddf213ed10":"Bread","e1a0a5c5-5d5f-4f62-9df3-f4c9ac73f4d7":"Cheese"};const HT=()=>ht(Bh,{children:[xe(Or,{children:xe(Ar,{children:xe(Rr,{children:"Tab 3"})})}),ht(Lh,{fullscreen:!0,children:[xe(Or,{collapse:"condense",children:xe(Ar,{children:xe(Rr,{size:"large",children:"Tab 3"})})}),xe("pre",{children:JSON.stringify(WT,null,2)})]})]});oT();const zT=()=>xe(Wx,{children:xe(mT,{children:ht(tT,{children:[ht(au,{children:[xe(eo,{exact:!0,path:"/tab1",children:xe(jT,{})}),xe(eo,{exact:!0,path:"/tab2",children:xe(UT,{})}),xe(eo,{path:"/tab3",children:xe(HT,{})}),xe(eo,{exact:!0,path:"/",children:xe(Tw,{to:"/tab1"})})]}),ht(lu,{slot:"bottom",children:[ht(yr,{tab:"tab1",href:"/tab1",children:[xe(tc,{"aria-hidden":"true",icon:vT}),xe(ec,{children:"Scanner"})]}),ht(yr,{tab:"tab2",href:"/tab2",children:[xe(tc,{"aria-hidden":"true",icon:yT}),xe(ec,{children:"Assistant"})]}),ht(yr,{tab:"tab3",href:"/tab3",children:[xe(tc,{"aria-hidden":"true",icon:_T}),xe(ec,{children:"List"})]})]})]})})}),GT=document.getElementById("root"),YT=rv(GT);YT.render(xe(re.StrictMode,{children:xe(zT,{})}));export{ZT as __vite_legacy_guard,Lo as a,Ct as b,jv as c,JT as d,QT as e,sE as f,Ri as g,Ff as h,w1 as i,lE as j,DS as k,iE as l,eE as n,tE as p,Do as r,aE as s,pn as w};
