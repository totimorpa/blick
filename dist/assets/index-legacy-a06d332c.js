!function(){function e(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}System.register([],(function(t,i){"use strict";var n=document.createElement("style");return n.textContent='.component-barcode-scanner{width:100%;height:100%;min-height:480px;background:#eee;position:relative;resize:both}.dce-bg-loading{display:none;animation:1s linear infinite dce-rotate;width:40%;height:40%;position:absolute;margin:auto;left:0;top:0;right:0;bottom:0;fill:#aaa}.dce-bg-camera{display:none;width:40%;height:40%;position:absolute;margin:auto;left:0;top:0;right:0;bottom:0;fill:#aaa}.dce-video-container{position:absolute;left:0;top:0;width:100%;height:100%}.dce-scanarea{width:100%;height:100%;position:absolute;left:0;top:0}.div-select-container{position:absolute;left:0;top:0}.dce-sel-camera{display:block}.dce-sel-resolution{display:block;margin-top:5px}@keyframes dce-rotate{0%{transform:rotate(0)}to{transform:rotate(1turn)}}@keyframes dce-scanlight{0%{top:0}to{top:97%}}.container{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}.container strong{font-size:20px;line-height:26px}.container p{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}.container a{text-decoration:none}html.ios{--ion-default-font: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Roboto", sans-serif}html.md{--ion-default-font: "Roboto", "Helvetica Neue", sans-serif}html{--ion-font-family: var(--ion-default-font)}body{background:var(--ion-background-color)}body.backdrop-no-scroll{overflow:hidden}html.ios ion-modal.modal-card ion-header ion-toolbar:first-of-type,html.ios ion-modal.modal-sheet ion-header ion-toolbar:first-of-type,html.ios ion-modal ion-footer ion-toolbar:first-of-type{padding-top:6px}html.ios ion-modal.modal-card ion-header ion-toolbar:last-of-type,html.ios ion-modal.modal-sheet ion-header ion-toolbar:last-of-type{padding-bottom:6px}html.ios ion-modal ion-toolbar{padding-right:calc(var(--ion-safe-area-right) + 8px);padding-left:calc(var(--ion-safe-area-left) + 8px)}@media screen and (min-width: 768px){html.ios ion-modal.modal-card:first-of-type{--backdrop-opacity: .18}}ion-modal.modal-default.show-modal~ion-modal.modal-default{--backdrop-opacity: 0;--box-shadow: none}html.ios ion-modal.modal-card .ion-page{border-top-left-radius:var(--border-radius)}.ion-color-primary{--ion-color-base: var(--ion-color-primary, #3880ff) !important;--ion-color-base-rgb: var(--ion-color-primary-rgb, 56, 128, 255) !important;--ion-color-contrast: var(--ion-color-primary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-primary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-primary-shade, #3171e0) !important;--ion-color-tint: var(--ion-color-primary-tint, #4c8dff) !important}.ion-color-secondary{--ion-color-base: var(--ion-color-secondary, #3dc2ff) !important;--ion-color-base-rgb: var(--ion-color-secondary-rgb, 61, 194, 255) !important;--ion-color-contrast: var(--ion-color-secondary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-secondary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-secondary-shade, #36abe0) !important;--ion-color-tint: var(--ion-color-secondary-tint, #50c8ff) !important}.ion-color-tertiary{--ion-color-base: var(--ion-color-tertiary, #5260ff) !important;--ion-color-base-rgb: var(--ion-color-tertiary-rgb, 82, 96, 255) !important;--ion-color-contrast: var(--ion-color-tertiary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-tertiary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-tertiary-shade, #4854e0) !important;--ion-color-tint: var(--ion-color-tertiary-tint, #6370ff) !important}.ion-color-success{--ion-color-base: var(--ion-color-success, #2dd36f) !important;--ion-color-base-rgb: var(--ion-color-success-rgb, 45, 211, 111) !important;--ion-color-contrast: var(--ion-color-success-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-success-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-success-shade, #28ba62) !important;--ion-color-tint: var(--ion-color-success-tint, #42d77d) !important}.ion-color-warning{--ion-color-base: var(--ion-color-warning, #ffc409) !important;--ion-color-base-rgb: var(--ion-color-warning-rgb, 255, 196, 9) !important;--ion-color-contrast: var(--ion-color-warning-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-warning-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-warning-shade, #e0ac08) !important;--ion-color-tint: var(--ion-color-warning-tint, #ffca22) !important}.ion-color-danger{--ion-color-base: var(--ion-color-danger, #eb445a) !important;--ion-color-base-rgb: var(--ion-color-danger-rgb, 235, 68, 90) !important;--ion-color-contrast: var(--ion-color-danger-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-danger-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-danger-shade, #cf3c4f) !important;--ion-color-tint: var(--ion-color-danger-tint, #ed576b) !important}.ion-color-light{--ion-color-base: var(--ion-color-light, #f4f5f8) !important;--ion-color-base-rgb: var(--ion-color-light-rgb, 244, 245, 248) !important;--ion-color-contrast: var(--ion-color-light-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-light-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-light-shade, #d7d8da) !important;--ion-color-tint: var(--ion-color-light-tint, #f5f6f9) !important}.ion-color-medium{--ion-color-base: var(--ion-color-medium, #92949c) !important;--ion-color-base-rgb: var(--ion-color-medium-rgb, 146, 148, 156) !important;--ion-color-contrast: var(--ion-color-medium-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-medium-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-medium-shade, #808289) !important;--ion-color-tint: var(--ion-color-medium-tint, #9d9fa6) !important}.ion-color-dark{--ion-color-base: var(--ion-color-dark, #222428) !important;--ion-color-base-rgb: var(--ion-color-dark-rgb, 34, 36, 40) !important;--ion-color-contrast: var(--ion-color-dark-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-dark-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-dark-shade, #1e2023) !important;--ion-color-tint: var(--ion-color-dark-tint, #383a3e) !important}.ion-page{left:0;right:0;top:0;bottom:0;display:flex;position:absolute;flex-direction:column;justify-content:space-between;contain:layout size style;overflow:hidden;z-index:0}ion-modal>.ion-page{position:relative;contain:layout style;height:100%}.split-pane-visible>.ion-page.split-pane-main{position:relative}ion-route,ion-route-redirect,ion-router,ion-select-option,ion-nav-controller,ion-menu-controller,ion-action-sheet-controller,ion-alert-controller,ion-loading-controller,ion-modal-controller,ion-picker-controller,ion-popover-controller,ion-toast-controller,.ion-page-hidden{display:none!important}.ion-page-invisible{opacity:0}.can-go-back>ion-header ion-back-button{display:block}html.plt-ios.plt-hybrid,html.plt-ios.plt-pwa{--ion-statusbar-padding: 20px}@supports (padding-top: 20px){html{--ion-safe-area-top: var(--ion-statusbar-padding)}}@supports (padding-top: constant(safe-area-inset-top)){html{--ion-safe-area-top: constant(safe-area-inset-top);--ion-safe-area-bottom: constant(safe-area-inset-bottom);--ion-safe-area-left: constant(safe-area-inset-left);--ion-safe-area-right: constant(safe-area-inset-right)}}@supports (padding-top: env(safe-area-inset-top)){html{--ion-safe-area-top: env(safe-area-inset-top);--ion-safe-area-bottom: env(safe-area-inset-bottom);--ion-safe-area-left: env(safe-area-inset-left);--ion-safe-area-right: env(safe-area-inset-right)}}ion-card.ion-color .ion-inherit-color,ion-card-header.ion-color .ion-inherit-color{color:inherit}.menu-content{transform:translateZ(0)}.menu-content-open{cursor:pointer;touch-action:manipulation;pointer-events:none}.ios .menu-content-reveal{box-shadow:-8px 0 42px rgba(0,0,0,.08)}[dir=rtl].ios .menu-content-reveal{box-shadow:8px 0 42px rgba(0,0,0,.08)}.md .menu-content-reveal,.md .menu-content-push{box-shadow:4px 0 16px rgba(0,0,0,.18)}ion-accordion-group.accordion-group-expand-inset>ion-accordion:first-of-type{border-top-left-radius:8px;border-top-right-radius:8px}ion-accordion-group.accordion-group-expand-inset>ion-accordion:last-of-type{border-bottom-left-radius:8px;border-bottom-right-radius:8px}ion-accordion-group>ion-accordion:last-of-type ion-item[slot=header]{--border-width: 0px}ion-accordion.accordion-animated>[slot=header] .ion-accordion-toggle-icon{transition:.3s transform cubic-bezier(.25,.8,.5,1)}@media (prefers-reduced-motion: reduce){ion-accordion .ion-accordion-toggle-icon{transition:none!important}}ion-accordion.accordion-expanding>[slot=header] .ion-accordion-toggle-icon,ion-accordion.accordion-expanded>[slot=header] .ion-accordion-toggle-icon{transform:rotate(180deg)}ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-previous ion-item[slot=header]{--border-width: 0px;--inner-border-width: 0px}ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-expanding:first-of-type,ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-expanded:first-of-type{margin-top:0}ion-input input::-webkit-date-and-time-value{text-align:start}.ion-datetime-button-overlay{--width: fit-content;--height: fit-content}.ion-datetime-button-overlay ion-datetime.datetime-grid{width:320px;min-height:320px}audio,canvas,progress,video{vertical-align:baseline}audio:not([controls]){display:none;height:0}b,strong{font-weight:700}img{max-width:100%}hr{height:1px;border-width:0;box-sizing:content-box}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}label,input,select,textarea{font-family:inherit;line-height:normal}textarea{overflow:auto;height:auto;font:inherit;color:inherit}textarea::placeholder{padding-left:2px}form,input,optgroup,select{margin:0;font:inherit;color:inherit}html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}a,a div,a span,a ion-icon,a ion-label,button,button div,button span,button ion-icon,button ion-label,.ion-tappable,[tappable],[tappable] div,[tappable] span,[tappable] ion-icon,[tappable] ion-label,input,textarea{touch-action:manipulation}a ion-label,button ion-label{pointer-events:none}button{padding:0;border:0;border-radius:0;font-family:inherit;font-style:inherit;font-variant:inherit;line-height:1;text-transform:none;cursor:pointer;-webkit-appearance:button}[tappable]{cursor:pointer}a[disabled],button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}html{width:100%;height:100%;text-size-adjust:100%}html:not(.hydrated) body{display:none}html.ion-ce body{display:block}html.plt-pwa{height:100vh}body{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin:0;padding:0;position:fixed;width:100%;max-width:100%;height:100%;max-height:100%;transform:translateZ(0);text-rendering:optimizeLegibility;overflow:hidden;touch-action:manipulation;-webkit-user-drag:none;-ms-content-zooming:none;word-wrap:break-word;overscroll-behavior-y:none;text-size-adjust:none}html{font-family:var(--ion-font-family)}a{background-color:transparent;color:var(--ion-color-primary, #3880ff)}h1,h2,h3,h4,h5,h6{margin-top:16px;margin-bottom:10px;font-weight:500;line-height:1.2}h1{margin-top:20px;font-size:26px}h2{margin-top:18px;font-size:24px}h3{font-size:22px}h4{font-size:20px}h5{font-size:18px}h6{font-size:16px}small{font-size:75%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}.ion-no-padding{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;padding:0}.ion-padding{--padding-start: var(--ion-padding, 16px);--padding-end: var(--ion-padding, 16px);--padding-top: var(--ion-padding, 16px);--padding-bottom: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-top{--padding-top: var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px)}.ion-padding-start{--padding-start: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px)}.ion-padding-end{--padding-end: var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px)}.ion-padding-bottom{--padding-bottom: var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-vertical{--padding-top: var(--ion-padding, 16px);--padding-bottom: var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-horizontal{--padding-start: var(--ion-padding, 16px);--padding-end: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px)}.ion-no-margin{--margin-start: 0;--margin-end: 0;--margin-top: 0;--margin-bottom: 0;margin:0}.ion-margin{--margin-start: var(--ion-margin, 16px);--margin-end: var(--ion-margin, 16px);--margin-top: var(--ion-margin, 16px);--margin-bottom: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-top{--margin-top: var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px)}.ion-margin-start{--margin-start: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px)}.ion-margin-end{--margin-end: var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px)}.ion-margin-bottom{--margin-bottom: var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-vertical{--margin-top: var(--ion-margin, 16px);--margin-bottom: var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-horizontal{--margin-start: var(--ion-margin, 16px);--margin-end: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px)}.ion-float-left{float:left!important}.ion-float-right{float:right!important}.ion-float-start{float:left!important}[dir=rtl] .ion-float-start,:host-context([dir=rtl]) .ion-float-start{float:right!important}.ion-float-end{float:right!important}[dir=rtl] .ion-float-end,:host-context([dir=rtl]) .ion-float-end{float:left!important}@media (min-width: 576px){.ion-float-sm-left{float:left!important}.ion-float-sm-right{float:right!important}.ion-float-sm-start{float:left!important}[dir=rtl] .ion-float-sm-start,:host-context([dir=rtl]) .ion-float-sm-start{float:right!important}.ion-float-sm-end{float:right!important}[dir=rtl] .ion-float-sm-end,:host-context([dir=rtl]) .ion-float-sm-end{float:left!important}}@media (min-width: 768px){.ion-float-md-left{float:left!important}.ion-float-md-right{float:right!important}.ion-float-md-start{float:left!important}[dir=rtl] .ion-float-md-start,:host-context([dir=rtl]) .ion-float-md-start{float:right!important}.ion-float-md-end{float:right!important}[dir=rtl] .ion-float-md-end,:host-context([dir=rtl]) .ion-float-md-end{float:left!important}}@media (min-width: 992px){.ion-float-lg-left{float:left!important}.ion-float-lg-right{float:right!important}.ion-float-lg-start{float:left!important}[dir=rtl] .ion-float-lg-start,:host-context([dir=rtl]) .ion-float-lg-start{float:right!important}.ion-float-lg-end{float:right!important}[dir=rtl] .ion-float-lg-end,:host-context([dir=rtl]) .ion-float-lg-end{float:left!important}}@media (min-width: 1200px){.ion-float-xl-left{float:left!important}.ion-float-xl-right{float:right!important}.ion-float-xl-start{float:left!important}[dir=rtl] .ion-float-xl-start,:host-context([dir=rtl]) .ion-float-xl-start{float:right!important}.ion-float-xl-end{float:right!important}[dir=rtl] .ion-float-xl-end,:host-context([dir=rtl]) .ion-float-xl-end{float:left!important}}.ion-text-center{text-align:center!important}.ion-text-justify{text-align:justify!important}.ion-text-start{text-align:start!important}.ion-text-end{text-align:end!important}.ion-text-left{text-align:left!important}.ion-text-right{text-align:right!important}.ion-text-nowrap{white-space:nowrap!important}.ion-text-wrap{white-space:normal!important}@media (min-width: 576px){.ion-text-sm-center{text-align:center!important}.ion-text-sm-justify{text-align:justify!important}.ion-text-sm-start{text-align:start!important}.ion-text-sm-end{text-align:end!important}.ion-text-sm-left{text-align:left!important}.ion-text-sm-right{text-align:right!important}.ion-text-sm-nowrap{white-space:nowrap!important}.ion-text-sm-wrap{white-space:normal!important}}@media (min-width: 768px){.ion-text-md-center{text-align:center!important}.ion-text-md-justify{text-align:justify!important}.ion-text-md-start{text-align:start!important}.ion-text-md-end{text-align:end!important}.ion-text-md-left{text-align:left!important}.ion-text-md-right{text-align:right!important}.ion-text-md-nowrap{white-space:nowrap!important}.ion-text-md-wrap{white-space:normal!important}}@media (min-width: 992px){.ion-text-lg-center{text-align:center!important}.ion-text-lg-justify{text-align:justify!important}.ion-text-lg-start{text-align:start!important}.ion-text-lg-end{text-align:end!important}.ion-text-lg-left{text-align:left!important}.ion-text-lg-right{text-align:right!important}.ion-text-lg-nowrap{white-space:nowrap!important}.ion-text-lg-wrap{white-space:normal!important}}@media (min-width: 1200px){.ion-text-xl-center{text-align:center!important}.ion-text-xl-justify{text-align:justify!important}.ion-text-xl-start{text-align:start!important}.ion-text-xl-end{text-align:end!important}.ion-text-xl-left{text-align:left!important}.ion-text-xl-right{text-align:right!important}.ion-text-xl-nowrap{white-space:nowrap!important}.ion-text-xl-wrap{white-space:normal!important}}.ion-text-uppercase{text-transform:uppercase!important}.ion-text-lowercase{text-transform:lowercase!important}.ion-text-capitalize{text-transform:capitalize!important}@media (min-width: 576px){.ion-text-sm-uppercase{text-transform:uppercase!important}.ion-text-sm-lowercase{text-transform:lowercase!important}.ion-text-sm-capitalize{text-transform:capitalize!important}}@media (min-width: 768px){.ion-text-md-uppercase{text-transform:uppercase!important}.ion-text-md-lowercase{text-transform:lowercase!important}.ion-text-md-capitalize{text-transform:capitalize!important}}@media (min-width: 992px){.ion-text-lg-uppercase{text-transform:uppercase!important}.ion-text-lg-lowercase{text-transform:lowercase!important}.ion-text-lg-capitalize{text-transform:capitalize!important}}@media (min-width: 1200px){.ion-text-xl-uppercase{text-transform:uppercase!important}.ion-text-xl-lowercase{text-transform:lowercase!important}.ion-text-xl-capitalize{text-transform:capitalize!important}}.ion-align-self-start{align-self:flex-start!important}.ion-align-self-end{align-self:flex-end!important}.ion-align-self-center{align-self:center!important}.ion-align-self-stretch{align-self:stretch!important}.ion-align-self-baseline{align-self:baseline!important}.ion-align-self-auto{align-self:auto!important}.ion-wrap{flex-wrap:wrap!important}.ion-nowrap{flex-wrap:nowrap!important}.ion-wrap-reverse{flex-wrap:wrap-reverse!important}.ion-justify-content-start{justify-content:flex-start!important}.ion-justify-content-center{justify-content:center!important}.ion-justify-content-end{justify-content:flex-end!important}.ion-justify-content-around{justify-content:space-around!important}.ion-justify-content-between{justify-content:space-between!important}.ion-justify-content-evenly{justify-content:space-evenly!important}.ion-align-items-start{align-items:flex-start!important}.ion-align-items-center{align-items:center!important}.ion-align-items-end{align-items:flex-end!important}.ion-align-items-stretch{align-items:stretch!important}.ion-align-items-baseline{align-items:baseline!important}.ion-hide,.ion-hide-up,.ion-hide-down{display:none!important}@media (min-width: 576px){.ion-hide-sm-up{display:none!important}}@media (max-width: 575.98px){.ion-hide-sm-down{display:none!important}}@media (min-width: 768px){.ion-hide-md-up{display:none!important}}@media (max-width: 767.98px){.ion-hide-md-down{display:none!important}}@media (min-width: 992px){.ion-hide-lg-up{display:none!important}}@media (max-width: 991.98px){.ion-hide-lg-down{display:none!important}}@media (min-width: 1200px){.ion-hide-xl-up{display:none!important}}@media (max-width: 1199.98px){.ion-hide-xl-down{display:none!important}}:root{--ion-color-primary: #3880ff;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #5260ff;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}@media (prefers-color-scheme: dark){body{--ion-color-primary: #428cff;--ion-color-primary-rgb: 66, 140, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3a7be0;--ion-color-primary-tint: #5598ff;--ion-color-secondary: #50c8ff;--ion-color-secondary-rgb: 80, 200, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #46b0e0;--ion-color-secondary-tint: #62ceff;--ion-color-tertiary: #6a64ff;--ion-color-tertiary-rgb: 106, 100, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #5d58e0;--ion-color-tertiary-tint: #7974ff;--ion-color-success: #2fdf75;--ion-color-success-rgb: 47, 223, 117;--ion-color-success-contrast: #000000;--ion-color-success-contrast-rgb: 0, 0, 0;--ion-color-success-shade: #29c467;--ion-color-success-tint: #44e283;--ion-color-warning: #ffd534;--ion-color-warning-rgb: 255, 213, 52;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0bb2e;--ion-color-warning-tint: #ffd948;--ion-color-danger: #ff4961;--ion-color-danger-rgb: 255, 73, 97;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #e04055;--ion-color-danger-tint: #ff5b71;--ion-color-dark: #f4f5f8;--ion-color-dark-rgb: 244, 245, 248;--ion-color-dark-contrast: #000000;--ion-color-dark-contrast-rgb: 0, 0, 0;--ion-color-dark-shade: #d7d8da;--ion-color-dark-tint: #f5f6f9;--ion-color-medium: #989aa2;--ion-color-medium-rgb: 152, 154, 162;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0, 0, 0;--ion-color-medium-shade: #86888f;--ion-color-medium-tint: #a2a4ab;--ion-color-light: #222428;--ion-color-light-rgb: 34, 36, 40;--ion-color-light-contrast: #ffffff;--ion-color-light-contrast-rgb: 255, 255, 255;--ion-color-light-shade: #1e2023;--ion-color-light-tint: #383a3e}.ios body{--ion-background-color: #000000;--ion-background-color-rgb: 0, 0, 0;--ion-text-color: #ffffff;--ion-text-color-rgb: 255, 255, 255;--ion-color-step-50: #0d0d0d;--ion-color-step-100: #1a1a1a;--ion-color-step-150: #262626;--ion-color-step-200: #333333;--ion-color-step-250: #404040;--ion-color-step-300: #4d4d4d;--ion-color-step-350: #595959;--ion-color-step-400: #666666;--ion-color-step-450: #737373;--ion-color-step-500: #808080;--ion-color-step-550: #8c8c8c;--ion-color-step-600: #999999;--ion-color-step-650: #a6a6a6;--ion-color-step-700: #b3b3b3;--ion-color-step-750: #bfbfbf;--ion-color-step-800: #cccccc;--ion-color-step-850: #d9d9d9;--ion-color-step-900: #e6e6e6;--ion-color-step-950: #f2f2f2;--ion-item-background: #000000;--ion-card-background: #1c1c1d}.ios ion-modal{--ion-background-color: var(--ion-color-step-100);--ion-toolbar-background: var(--ion-color-step-150);--ion-toolbar-border-color: var(--ion-color-step-250)}.md body{--ion-background-color: #121212;--ion-background-color-rgb: 18, 18, 18;--ion-text-color: #ffffff;--ion-text-color-rgb: 255, 255, 255;--ion-border-color: #222222;--ion-color-step-50: #1e1e1e;--ion-color-step-100: #2a2a2a;--ion-color-step-150: #363636;--ion-color-step-200: #414141;--ion-color-step-250: #4d4d4d;--ion-color-step-300: #595959;--ion-color-step-350: #656565;--ion-color-step-400: #717171;--ion-color-step-450: #7d7d7d;--ion-color-step-500: #898989;--ion-color-step-550: #949494;--ion-color-step-600: #a0a0a0;--ion-color-step-650: #acacac;--ion-color-step-700: #b8b8b8;--ion-color-step-750: #c4c4c4;--ion-color-step-800: #d0d0d0;--ion-color-step-850: #dbdbdb;--ion-color-step-900: #e7e7e7;--ion-color-step-950: #f3f3f3;--ion-item-background: #1e1e1e;--ion-toolbar-background: #1f1f1f;--ion-tab-bar-background: #1f1f1f;--ion-card-background: #1e1e1e}}\n',document.head.appendChild(n),{execute:function(){function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r={exports:{}},o={},a={exports:{}},s={},l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function S(e,t,i){this.props=e,this.context=t,this.refs=x,this.updater=i||y}function C(){}function T(e,t,i){this.props=e,this.context=t,this.refs=x,this.updater=i||y}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},C.prototype=S.prototype;var E=T.prototype=new C;E.constructor=T,w(E,S.prototype),E.isPureReactComponent=!0;var I=Array.isArray,k=Object.prototype.hasOwnProperty,O={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,i){var n,r={},o=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,n)&&!R.hasOwnProperty(n)&&(r[n]=t[n]);var s=arguments.length-2;if(1===s)r.children=i;else if(1<s){for(var c=Array(s),h=0;h<s;h++)c[h]=arguments[h+2];r.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===r[n]&&(r[n]=s[n]);return{$$typeof:l,type:e,key:o,ref:a,props:r,_owner:O.current}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var L=/\/+/g;function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,i,n,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case l:case c:a=!0}}if(a)return r=r(a=e),e=""===n?"."+M(a,0):n,I(r)?(i="",null!=e&&(i=e.replace(L,"$&/")+"/"),P(r,t,i,"",(function(e){return e}))):null!=r&&(D(r)&&(r=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,i+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(L,"$&/")+"/")+e)),t.push(r)),1;if(a=0,n=""===n?".":n+":",I(e))for(var s=0;s<e.length;s++){var h=n+M(o=e[s],s);a+=P(o,t,i,h,r)}else if(h=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=b&&e[b]||e["@@iterator"])?e:null}(e),"function"==typeof h)for(e=h.call(e),s=0;!(o=e.next()).done;)a+=P(o=o.value,t,i,h=n+M(o,s++),r);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function F(e,t,i){if(null==e)return e;var n=[],r=0;return P(e,n,"","",(function(e){return t.call(i,e,r++)})),n}function B(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},j={transition:null},V={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:j,ReactCurrentOwner:O};s.Children={map:F,forEach:function(e,t,i){F(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return F(e,(function(){t++})),t},toArray:function(e){return F(e,(function(e){return e}))||[]},only:function(e){if(!D(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},s.Component=S,s.Fragment=h,s.Profiler=d,s.PureComponent=T,s.StrictMode=u,s.Suspense=m,s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,s.cloneElement=function(e,t,i){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=w({},e.props),r=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=O.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)k.call(t,c)&&!R.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=i;else if(1<c){s=Array(c);for(var h=0;h<c;h++)s[h]=arguments[h+2];n.children=s}return{$$typeof:l,type:e.type,key:r,ref:o,props:n,_owner:a}},s.createContext=function(e){return(e={$$typeof:p,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},s.createElement=A,s.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},s.createRef=function(){return{current:null}},s.forwardRef=function(e){return{$$typeof:g,render:e}},s.isValidElement=D,s.lazy=function(e){return{$$typeof:_,_payload:{_status:-1,_result:e},_init:B}},s.memo=function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},s.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},s.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},s.useCallback=function(e,t){return N.current.useCallback(e,t)},s.useContext=function(e){return N.current.useContext(e)},s.useDebugValue=function(){},s.useDeferredValue=function(e){return N.current.useDeferredValue(e)},s.useEffect=function(e,t){return N.current.useEffect(e,t)},s.useId=function(){return N.current.useId()},s.useImperativeHandle=function(e,t,i){return N.current.useImperativeHandle(e,t,i)},s.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},s.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},s.useMemo=function(e,t){return N.current.useMemo(e,t)},s.useReducer=function(e,t,i){return N.current.useReducer(e,t,i)},s.useRef=function(e){return N.current.useRef(e)},s.useState=function(e){return N.current.useState(e)},s.useSyncExternalStore=function(e,t,i){return N.current.useSyncExternalStore(e,t,i)},s.useTransition=function(){return N.current.useTransition()},s.version="18.2.0",a.exports=s;var $=a.exports;const U=n($);
/**
             * @license React
             * react-jsx-runtime.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */var W=$,z=Symbol.for("react.element"),H=Symbol.for("react.fragment"),G=Object.prototype.hasOwnProperty,Y=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,i){var n,r={},o=null,a=null;for(n in void 0!==i&&(o=""+i),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(a=t.ref),t)G.call(t,n)&&!X.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:z,type:e,key:o,ref:a,props:r,_owner:Y.current}}o.Fragment=H,o.jsx=q,o.jsxs=q,r.exports=o;var K=r.exports;const Z=K.jsx,J=K.jsxs;var Q={exports:{}},ee={},te={exports:{}},ie={};
/**
             * @license React
             * scheduler.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */
!function(e){function t(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,o=e[n];if(!(0<r(o,t)))break e;e[n]=t,e[i]=o,i=n}}function i(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,o=e.length,a=o>>>1;n<a;){var s=2*(n+1)-1,l=e[s],c=s+1,h=e[c];if(0>r(l,i))c<o&&0>r(h,l)?(e[n]=h,e[c]=i,n=c):(e[n]=l,e[s]=i,n=s);else{if(!(c<o&&0>r(h,i)))break e;e[n]=h,e[c]=i,n=c}}}return t}function r(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],h=1,u=null,d=3,f=!1,p=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,_="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var r=i(c);null!==r;){if(null===r.callback)n(c);else{if(!(r.startTime<=e))break;n(c),r.sortIndex=r.expirationTime,t(l,r)}r=i(c)}}function y(e){if(g=!1,b(e),!p)if(null!==i(l))p=!0,D(w);else{var t=i(c);null!==t&&L(y,t.startTime-e)}}function w(t,r){p=!1,g&&(g=!1,v(T),T=-1),f=!0;var o=d;try{for(b(r),u=i(l);null!==u&&(!(u.expirationTime>r)||t&&!k());){var a=u.callback;if("function"==typeof a){u.callback=null,d=u.priorityLevel;var s=a(u.expirationTime<=r);r=e.unstable_now(),"function"==typeof s?u.callback=s:u===i(l)&&n(l),b(r)}else n(l);u=i(l)}if(null!==u)var h=!0;else{var m=i(c);null!==m&&L(y,m.startTime-r),h=!1}return h}finally{u=null,d=o,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,C=null,T=-1,E=5,I=-1;function k(){return!(e.unstable_now()-I<E)}function O(){if(null!==C){var t=e.unstable_now();I=t;var i=!0;try{i=C(!0,t)}finally{i?x():(S=!1,C=null)}}else S=!1}if("function"==typeof _)x=function(){_(O)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=O,x=function(){A.postMessage(null)}}else x=function(){m(O,0)};function D(e){C=e,S||(S=!0,x())}function L(t,i){T=m((function(){t(e.unstable_now())}),i)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,D(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return i(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var i=d;d=t;try{return e()}finally{d=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=d;d=e;try{return t()}finally{d=i}},e.unstable_scheduleCallback=function(n,r,o){var a=e.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?a+o:a:o=a,n){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return n={id:h++,callback:r,priorityLevel:n,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(n.sortIndex=o,t(c,n),null===i(l)&&n===i(c)&&(g?(v(T),T=-1):g=!0,L(y,o-a))):(n.sortIndex=s,t(l,n),p||f||(p=!0,D(w))),n},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(e){var t=d;return function(){var i=d;d=t;try{return e.apply(this,arguments)}finally{d=i}}}}(ie),te.exports=ie;var ne=te.exports,re=$,oe=ne;
/**
             * @license React
             * react-dom.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var se=new Set,le={};function ce(e,t){he(e,t),he(e+"Capture",t)}function he(e,t){for(le[e]=t,e=0;e<t.length;e++)se.add(t[e])}var ue=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),de=Object.prototype.hasOwnProperty,fe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pe={},ge={};function me(e,t,i,n,r,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ve[e]=new me(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ve[t]=new me(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ve[e]=new me(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ve[e]=new me(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ve[e]=new me(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ve[e]=new me(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){ve[e]=new me(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){ve[e]=new me(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){ve[e]=new me(e,5,!1,e.toLowerCase(),null,!1,!1)}));var _e=/[\-:]([a-z])/g;function be(e){return e[1].toUpperCase()}function ye(e,t,i,n){var r=ve.hasOwnProperty(t)?ve[t]:null;(null!==r?0!==r.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,i,n){if(null==t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!de.call(ge,e)||!de.call(pe,e)&&(fe.test(e)?ge[e]=!0:(pe[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(_e,be);ve[t]=new me(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(_e,be);ve[t]=new me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(_e,be);ve[t]=new me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){ve[e]=new me(e,1,!1,e.toLowerCase(),null,!1,!1)})),ve.xlinkHref=new me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){ve[e]=new me(e,1,!1,e.toLowerCase(),null,!0,!0)}));var we=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),Se=Symbol.for("react.portal"),Ce=Symbol.for("react.fragment"),Te=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),Ie=Symbol.for("react.provider"),ke=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),Pe=Symbol.iterator;function Fe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Pe&&e[Pe]||e["@@iterator"])?e:null}var Be,Ne=Object.assign;function je(e){if(void 0===Be)try{throw Error()}catch(_y){var t=_y.stack.trim().match(/\n( *(at )?)/);Be=t&&t[1]||""}return"\n"+Be+e}var Ve=!1;function $e(e,t){if(!e||Ve)return"";Ve=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(vy){var n=vy}Reflect.construct(e,[],t)}else{try{t.call()}catch(vy){n=vy}e.call(t.prototype)}else{try{throw Error()}catch(vy){n=vy}e()}}catch(vy){if(vy&&n&&"string"==typeof vy.stack){for(var r=vy.stack.split("\n"),o=n.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{Ve=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?je(e):""}function Ue(e){switch(e.tag){case 5:return je(e.type);case 16:return je("Lazy");case 13:return je("Suspense");case 19:return je("SuspenseList");case 0:case 2:case 15:return e=$e(e.type,!1);case 11:return e=$e(e.type.render,!1);case 1:return e=$e(e.type,!0);default:return""}}function We(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ce:return"Fragment";case Se:return"Portal";case Ee:return"Profiler";case Te:return"StrictMode";case Re:return"Suspense";case Ae:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ke:return(e.displayName||"Context")+".Consumer";case Ie:return(e._context.displayName||"Context")+".Provider";case Oe:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case De:return null!==(t=e.displayName||null)?t:We(e.type)||"Memo";case Le:t=e._payload,e=e._init;try{return We(e(t))}catch(_y){}}return null}function ze(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(t);case 8:return t===Te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function He(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Ge(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ye(e){e._valueTracker||(e._valueTracker=function(e){var t=Ge(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Xe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Ge(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function qe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Ay){return e.body}}function Ke(e,t){var i=t.checked;return Ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function Ze(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=He(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Je(e,t){null!=(t=t.checked)&&ye(e,"checked",t,!1)}function Qe(e,t){Je(e,t);var i=He(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?tt(e,t.type,i):t.hasOwnProperty("defaultValue")&&tt(e,t.type,He(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function et(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function tt(e,t,i){"number"===t&&qe(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var it=Array.isArray;function nt(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+He(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function rt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ae(91));return Ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ot(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(ae(92));if(it(i)){if(1<i.length)throw Error(ae(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:He(i)}}function at(e,t){var i=He(t.value),n=He(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function st(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function lt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?lt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ht,ut=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,i,n,r){MSApp.execUnsafeLocalFunction((function(){return e(t,i)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ht=ht||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ht.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function dt(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(e,t,i){return null==t||"boolean"==typeof t||""===t?"":i||"number"!=typeof t||0===t||ft.hasOwnProperty(e)&&ft[e]?(""+t).trim():t+"px"}function mt(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=gt(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(ft).forEach((function(e){pt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ft[t]=ft[e]}))}));var vt=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(e,t){if(t){if(vt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ae(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ae(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ae(62))}}function bt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yt=null;function wt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xt=null,St=null,Ct=null;function Tt(e){if(e=yo(e)){if("function"!=typeof xt)throw Error(ae(280));var t=e.stateNode;t&&(t=xo(t),xt(e.stateNode,e.type,t))}}function Et(e){St?Ct?Ct.push(e):Ct=[e]:St=e}function It(){if(St){var e=St,t=Ct;if(Ct=St=null,Tt(e),t)for(e=0;e<t.length;e++)Tt(t[e])}}function kt(e,t){return e(t)}function Ot(){}var Rt=!1;function At(e,t,i){if(Rt)return e(t,i);Rt=!0;try{return kt(e,t,i)}finally{Rt=!1,(null!==St||null!==Ct)&&(Ot(),It())}}function Dt(e,t){var i=e.stateNode;if(null===i)return null;var n=xo(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!=typeof i)throw Error(ae(231,t,typeof i));return i}var Lt=!1;if(ue)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch(gy){Lt=!1}function Pt(e,t,i,n,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(Ty){this.onError(Ty)}}var Ft=!1,Bt=null,Nt=!1,jt=null,Vt={onError:function(e){Ft=!0,Bt=e}};function $t(e,t,i,n,r,o,a,s,l){Ft=!1,Bt=null,Pt.apply(Vt,arguments)}function Ut(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function Wt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function zt(e){if(Ut(e)!==e)throw Error(ae(188))}function Ht(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ut(e)))throw Error(ae(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(n=r.return)){i=n;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===i)return zt(r),e;if(o===n)return zt(r),t;o=o.sibling}throw Error(ae(188))}if(i.return!==n.return)i=r,n=o;else{for(var a=!1,s=r.child;s;){if(s===i){a=!0,i=r,n=o;break}if(s===n){a=!0,n=r,i=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===i){a=!0,i=o,n=r;break}if(s===n){a=!0,n=o,i=r;break}s=s.sibling}if(!a)throw Error(ae(189))}}if(i.alternate!==n)throw Error(ae(190))}if(3!==i.tag)throw Error(ae(188));return i.stateNode.current===i?e:t}(e),null!==e?Gt(e):null}function Gt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Gt(e);if(null!==t)return t;e=e.sibling}return null}var Yt=oe.unstable_scheduleCallback,Xt=oe.unstable_cancelCallback,qt=oe.unstable_shouldYield,Kt=oe.unstable_requestPaint,Zt=oe.unstable_now,Jt=oe.unstable_getCurrentPriorityLevel,Qt=oe.unstable_ImmediatePriority,ei=oe.unstable_UserBlockingPriority,ti=oe.unstable_NormalPriority,ii=oe.unstable_LowPriority,ni=oe.unstable_IdlePriority,ri=null,oi=null;var ai=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(si(e)/li|0)|0},si=Math.log,li=Math.LN2;var ci=64,hi=4194304;function ui(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function di(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,r=e.suspendedLanes,o=e.pingedLanes,a=268435455&i;if(0!==a){var s=a&~r;0!==s?n=ui(s):0!==(o&=a)&&(n=ui(o))}else 0!==(a=i&~r)?n=ui(a):0!==o&&(n=ui(o));if(0===n)return 0;if(0!==t&&t!==n&&0==(t&r)&&((r=n&-n)>=(o=t&-t)||16===r&&0!=(4194240&o)))return t;if(0!=(4&n)&&(n|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(i=31-ai(t)),n|=e[i],t&=~r;return n}function fi(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pi(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gi(){var e=ci;return 0==(4194240&(ci<<=1))&&(ci=64),e}function mi(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function vi(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ai(t)]=i}function _i(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-ai(i),r=1<<n;r&t|e[n]&t&&(e[n]|=t),i&=~r}}var bi=0;function yi(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var wi,xi,Si,Ci,Ti,Ei=!1,Ii=[],ki=null,Oi=null,Ri=null,Ai=new Map,Di=new Map,Li=[],Mi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pi(e,t){switch(e){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Ai.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Di.delete(t.pointerId)}}function Fi(e,t,i,n,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=yo(t))&&xi(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Bi(e){var t=bo(e.target);if(null!==t){var i=Ut(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=Wt(i)))return e.blockedOn=t,void Ti(e.priority,(function(){Si(i)}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Ni(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=qi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=yo(i))&&xi(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);yt=n,i.target.dispatchEvent(n),yt=null,t.shift()}return!0}function ji(e,t,i){Ni(e)&&i.delete(t)}function Vi(){Ei=!1,null!==ki&&Ni(ki)&&(ki=null),null!==Oi&&Ni(Oi)&&(Oi=null),null!==Ri&&Ni(Ri)&&(Ri=null),Ai.forEach(ji),Di.forEach(ji)}function $i(e,t){e.blockedOn===t&&(e.blockedOn=null,Ei||(Ei=!0,oe.unstable_scheduleCallback(oe.unstable_NormalPriority,Vi)))}function Ui(e){function t(t){return $i(t,e)}if(0<Ii.length){$i(Ii[0],e);for(var i=1;i<Ii.length;i++){var n=Ii[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==ki&&$i(ki,e),null!==Oi&&$i(Oi,e),null!==Ri&&$i(Ri,e),Ai.forEach(t),Di.forEach(t),i=0;i<Li.length;i++)(n=Li[i]).blockedOn===e&&(n.blockedOn=null);for(;0<Li.length&&null===(i=Li[0]).blockedOn;)Bi(i),null===i.blockedOn&&Li.shift()}var Wi=we.ReactCurrentBatchConfig,zi=!0;function Hi(e,t,i,n){var r=bi,o=Wi.transition;Wi.transition=null;try{bi=1,Yi(e,t,i,n)}finally{bi=r,Wi.transition=o}}function Gi(e,t,i,n){var r=bi,o=Wi.transition;Wi.transition=null;try{bi=4,Yi(e,t,i,n)}finally{bi=r,Wi.transition=o}}function Yi(e,t,i,n){if(zi){var r=qi(e,t,i,n);if(null===r)zr(e,t,n,Xi,i),Pi(e,n);else if(function(e,t,i,n,r){switch(t){case"focusin":return ki=Fi(ki,e,t,i,n,r),!0;case"dragenter":return Oi=Fi(Oi,e,t,i,n,r),!0;case"mouseover":return Ri=Fi(Ri,e,t,i,n,r),!0;case"pointerover":var o=r.pointerId;return Ai.set(o,Fi(Ai.get(o)||null,e,t,i,n,r)),!0;case"gotpointercapture":return o=r.pointerId,Di.set(o,Fi(Di.get(o)||null,e,t,i,n,r)),!0}return!1}(r,e,t,i,n))n.stopPropagation();else if(Pi(e,n),4&t&&-1<Mi.indexOf(e)){for(;null!==r;){var o=yo(r);if(null!==o&&wi(o),null===(o=qi(e,t,i,n))&&zr(e,t,n,Xi,i),o===r)break;r=o}null!==r&&n.stopPropagation()}else zr(e,t,n,null,i)}}var Xi=null;function qi(e,t,i,n){if(Xi=null,null!==(e=bo(e=wt(n))))if(null===(t=Ut(e)))e=null;else if(13===(i=t.tag)){if(null!==(e=Wt(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xi=e,null}function Ki(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Qt:return 1;case ei:return 4;case ti:case ii:return 16;case ni:return 536870912;default:return 16}default:return 16}}var Zi=null,Ji=null,Qi=null;function en(){if(Qi)return Qi;var e,t,i=Ji,n=i.length,r="value"in Zi?Zi.value:Zi.textContent,o=r.length;for(e=0;e<n&&i[e]===r[e];e++);var a=n-e;for(t=1;t<=a&&i[n-t]===r[o-t];t++);return Qi=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,i,n,r,o){for(var a in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return Ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=on(cn),un=Ne({},cn,{view:0,detail:0}),dn=on(un),fn=Ne({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),gn=on(Ne({},fn,{dataTransfer:0})),mn=on(Ne({},un,{relatedTarget:0})),vn=on(Ne({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=Ne({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(_n),yn=on(Ne({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return Cn}var En=Ne({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(En),kn=on(Ne({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=on(Ne({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=on(Ne({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=Ne({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(An),Ln=[9,13,27,32],Mn=ue&&"CompositionEvent"in window,Pn=null;ue&&"documentMode"in document&&(Pn=document.documentMode);var Fn=ue&&"TextEvent"in window&&!Pn,Bn=ue&&(!Mn||Pn&&8<Pn&&11>=Pn),Nn=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,i,n){Et(n),0<(t=Gr(t,"onChange")).length&&(i=new hn("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Gn=null,Yn=null;function Xn(e){Nr(e,0)}function qn(e){if(Xe(wo(e)))return e}function Kn(e,t){if("change"===e)return t}var Zn=!1;if(ue){var Jn;if(ue){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"==typeof er.oninput}Jn=Qn}else Jn=!1;Zn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",ir),Yn=Gn=null)}function ir(e){if("value"===e.propertyName&&qn(Yn)){var t=[];Hn(t,Yn,e,wt(e)),At(Xn,t)}}function nr(e,t,i){"focusin"===e?(tr(),Yn=i,(Gn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&tr()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Yn)}function or(e,t){if("click"===e)return qn(t)}function ar(e,t){if("input"===e||"change"===e)return qn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!de.call(t,r)||!sr(e[r],t[r]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var i,n=cr(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cr(n)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=qe();t instanceof e.HTMLIFrameElement;){try{var i="string"==typeof t.contentWindow.location.href}catch(yy){i=!1}if(!i)break;t=qe((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),i=e.focusedElem,n=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&ur(i.ownerDocument.documentElement,i)){if(null!==n&&fr(i))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=i.textContent.length,o=Math.min(n.start,r);n=void 0===n.end?o:Math.min(n.end,r),!e.extend&&o>n&&(r=n,n=o,o=r),r=hr(i,o);var a=hr(i,n);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=ue&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,_r=null,br=!1;function yr(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;br||null==mr||mr!==qe(n)||("selectionStart"in(n=mr)&&fr(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},_r&&lr(_r,n)||(_r=n,0<(n=Gr(vr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=mr)))}function wr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Cr={};function Tr(e){if(Sr[e])return Sr[e];if(!xr[e])return e;var t,i=xr[e];for(t in i)if(i.hasOwnProperty(t)&&t in Cr)return Sr[e]=i[t];return e}ue&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Tr("animationend"),Ir=Tr("animationiteration"),kr=Tr("animationstart"),Or=Tr("transitionend"),Rr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Rr.set(e,t),ce(t,[e])}for(var Lr=0;Lr<Ar.length;Lr++){var Mr=Ar[Lr];Dr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Ir,"onAnimationIteration"),Dr(kr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Or,"onTransitionEnd"),he("onMouseEnter",["mouseout","mouseover"]),he("onMouseLeave",["mouseout","mouseover"]),he("onPointerEnter",["pointerout","pointerover"]),he("onPointerLeave",["pointerout","pointerover"]),ce("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ce("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ce("onBeforeInput",["compositionend","keypress","textInput","paste"]),ce("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ce("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ce("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Br(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,r,o,a,s,l){if($t.apply(this,arguments),Ft){if(!Ft)throw Error(ae(198));var c=Bt;Ft=!1,Bt=null,Nt||(Nt=!0,jt=c)}}(n,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!=(4&t);for(var i=0;i<e.length;i++){var n=e[i],r=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;Br(r,s,c),o=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;Br(r,s,c),o=l}}}if(Nt)throw e=jt,Nt=!1,jt=null,e}function jr(e,t){var i=t[mo];void 0===i&&(i=t[mo]=new Set);var n=e+"__bubble";i.has(n)||(Wr(t,e,2,!1),i.add(n))}function Vr(e,t,i){var n=0;t&&(n|=4),Wr(i,e,n,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[$r]){e[$r]=!0,se.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,Vr("selectionchange",!1,t))}}function Wr(e,t,i,n){switch(Ki(t)){case 1:var r=Hi;break;case 4:r=Gi;break;default:r=Yi}i=r.bind(null,t,i,e),r=void 0,!Lt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):void 0!==r?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function zr(e,t,i,n,r){var o=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=bo(s)))return;if(5===(l=a.tag)||6===l){n=o=a;continue e}s=s.parentNode}}n=n.return}At((function(){var n=o,r=wt(i),a=[];e:{var s=Rr.get(e);if(void 0!==s){var l=hn,c=e;switch(e){case"keypress":if(0===tn(i))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Er:case Ir:case kr:l=vn;break;case Or:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var h=0!=(4&t),u=!h&&"scroll"===e,d=h?null!==s?s+"Capture":null:s;h=[];for(var f,p=n;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Dt(p,d))&&h.push(Hr(p,g,f)))),u)break;p=p.return}0<h.length&&(s=new l(s,c,null,i,r),a.push({event:s,listeners:h}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||i===yt||!(c=i.relatedTarget||i.fromElement)||!bo(c)&&!c[go])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=i.relatedTarget||i.toElement)?bo(c):null)&&(c!==(u=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(h=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(h=kn,g="onPointerLeave",d="onPointerEnter",p="pointer"),u=null==l?s:wo(l),f=null==c?s:wo(c),(s=new h(g,p+"leave",l,i,r)).target=u,s.relatedTarget=f,g=null,bo(r)===n&&((h=new h(d,p+"enter",c,i,r)).target=f,h.relatedTarget=u,g=h),u=g,l&&c)e:{for(d=c,p=0,f=h=l;f;f=Yr(f))p++;for(f=0,g=d;g;g=Yr(g))f++;for(;0<p-f;)h=Yr(h),p--;for(;0<f-p;)d=Yr(d),f--;for(;p--;){if(h===d||null!==d&&h===d.alternate)break e;h=Yr(h),d=Yr(d)}h=null}else h=null;null!==l&&Xr(a,s,l,h,!1),null!==c&&null!==u&&Xr(a,u,c,h,!0)}if("select"===(l=(s=n?wo(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Kn;else if(zn(s))if(Zn)m=ar;else{m=rr;var v=nr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,n))?Hn(a,m,i,r):(v&&v(e,s,n),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&tt(s,"number",s.value)),v=n?wo(n):window,e){case"focusin":(zn(v)||"true"===v.contentEditable)&&(mr=v,vr=n,_r=null);break;case"focusout":_r=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,yr(a,i,r);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":yr(a,i,r)}var _;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?Vn(e,i)&&(b="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==i.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(_=en()):(Ji="value"in(Zi=r)?Zi.value:Zi.textContent,Un=!0)),0<(v=Gr(n,b)).length&&(b=new yn(b,e,null,i,r),a.push({event:b,listeners:v}),_?b.data=_:null!==(_=$n(i))&&(b.data=_))),(_=Fn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(jn=!0,Nn);case"textInput":return(e=t.data)===Nn&&jn?null:e;default:return null}}(e,i):function(e,t){if(Un)return"compositionend"===e||!Mn&&Vn(e,t)?(e=en(),Qi=Ji=Zi=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(n=Gr(n,"onBeforeInput")).length&&(r=new yn("onBeforeInput","beforeinput",null,i,r),a.push({event:r,listeners:n}),r.data=_))}Nr(a,t)}))}function Hr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Gr(e,t){for(var i=t+"Capture",n=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Dt(e,i))&&n.unshift(Hr(e,o,r)),null!=(o=Dt(e,t))&&n.push(Hr(e,o,r))),e=e.return}return n}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,i,n,r){for(var o=t._reactName,a=[];null!==i&&i!==n;){var s=i,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Dt(i,o))&&a.unshift(Hr(i,l,s)):r||null!=(l=Dt(i,o))&&a.push(Hr(i,l,s))),i=i.return}0!==a.length&&e.push({event:t,listeners:a})}var qr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Zr(e){return("string"==typeof e?e:""+e).replace(qr,"\n").replace(Kr,"")}function Jr(e,t,i){if(t=Zr(t),Zr(e)!==t&&i)throw Error(ae(425))}function Qr(){}var eo=null,to=null;function io(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var no="function"==typeof setTimeout?setTimeout:void 0,ro="function"==typeof clearTimeout?clearTimeout:void 0,oo="function"==typeof Promise?Promise:void 0,ao="function"==typeof queueMicrotask?queueMicrotask:void 0!==oo?function(e){return oo.resolve(null).then(e).catch(so)}:no;function so(e){setTimeout((function(){throw e}))}function lo(e,t){var i=t,n=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&8===r.nodeType)if("/$"===(i=r.data)){if(0===n)return e.removeChild(r),void Ui(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=r}while(i);Ui(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ho(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var uo=Math.random().toString(36).slice(2),fo="__reactFiber$"+uo,po="__reactProps$"+uo,go="__reactContainer$"+uo,mo="__reactEvents$"+uo,vo="__reactListeners$"+uo,_o="__reactHandles$"+uo;function bo(e){var t=e[fo];if(t)return t;for(var i=e.parentNode;i;){if(t=i[go]||i[fo]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=ho(e);null!==e;){if(i=e[fo])return i;e=ho(e)}return t}i=(e=i).parentNode}return null}function yo(e){return!(e=e[fo]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ae(33))}function xo(e){return e[po]||null}var So=[],Co=-1;function To(e){return{current:e}}function Eo(e){0>Co||(e.current=So[Co],So[Co]=null,Co--)}function Io(e,t){Co++,So[Co]=e.current,e.current=t}var ko={},Oo=To(ko),Ro=To(!1),Ao=ko;function Do(e,t){var i=e.type.contextTypes;if(!i)return ko;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in i)o[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Lo(e){return null!=(e=e.childContextTypes)}function Mo(){Eo(Ro),Eo(Oo)}function Po(e,t,i){if(Oo.current!==ko)throw Error(ae(168));Io(Oo,t),Io(Ro,i)}function Fo(e,t,i){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return i;for(var r in n=n.getChildContext())if(!(r in t))throw Error(ae(108,ze(e)||"Unknown",r));return Ne({},i,n)}function Bo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ko,Ao=Oo.current,Io(Oo,e),Io(Ro,Ro.current),!0}function No(e,t,i){var n=e.stateNode;if(!n)throw Error(ae(169));i?(e=Fo(e,t,Ao),n.__reactInternalMemoizedMergedChildContext=e,Eo(Ro),Eo(Oo),Io(Oo,e)):Eo(Ro),Io(Ro,i)}var jo=null,Vo=!1,$o=!1;function Uo(e){null===jo?jo=[e]:jo.push(e)}function Wo(){if(!$o&&null!==jo){$o=!0;var e=0,t=bi;try{var i=jo;for(bi=1;e<i.length;e++){var n=i[e];do{n=n(!0)}while(null!==n)}jo=null,Vo=!1}catch(cy){throw null!==jo&&(jo=jo.slice(e+1)),Yt(Qt,Wo),cy}finally{bi=t,$o=!1}}return null}var zo=[],Ho=0,Go=null,Yo=0,Xo=[],qo=0,Ko=null,Zo=1,Jo="";function Qo(e,t){zo[Ho++]=Yo,zo[Ho++]=Go,Go=e,Yo=t}function ea(e,t,i){Xo[qo++]=Zo,Xo[qo++]=Jo,Xo[qo++]=Ko,Ko=e;var n=Zo;e=Jo;var r=32-ai(n)-1;n&=~(1<<r),i+=1;var o=32-ai(t)+r;if(30<o){var a=r-r%5;o=(n&(1<<a)-1).toString(32),n>>=a,r-=a,Zo=1<<32-ai(t)+r|i<<r|n,Jo=o+e}else Zo=1<<o|i<<r|n,Jo=e}function ta(e){null!==e.return&&(Qo(e,1),ea(e,1,0))}function ia(e){for(;e===Go;)Go=zo[--Ho],zo[Ho]=null,Yo=zo[--Ho],zo[Ho]=null;for(;e===Ko;)Ko=Xo[--qo],Xo[qo]=null,Jo=Xo[--qo],Xo[qo]=null,Zo=Xo[--qo],Xo[qo]=null}var na=null,ra=null,oa=!1,aa=null;function sa(e,t){var i=Dh(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function la(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(i=null!==Ko?{id:Zo,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=Dh(18,null,null,0)).stateNode=t,i.return=e,e.child=i,na=e,ra=null,!0);default:return!1}}function ca(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ha(e){if(oa){var t=ra;if(t){var i=t;if(!la(e,t)){if(ca(e))throw Error(ae(418));t=co(i.nextSibling);var n=na;t&&la(e,t)?sa(n,i):(e.flags=-4097&e.flags|2,oa=!1,na=e)}}else{if(ca(e))throw Error(ae(418));e.flags=-4097&e.flags|2,oa=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!oa)return ua(e),oa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!io(e.type,e.memoizedProps)),t&&(t=ra)){if(ca(e))throw fa(),Error(ae(418));for(;t;)sa(e,t),t=co(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){ra=co(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}ra=null}}else ra=na?co(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=co(e.nextSibling)}function pa(){ra=na=null,oa=!1}function ga(e){null===aa?aa=[e]:aa.push(e)}var ma=we.ReactCurrentBatchConfig;function va(e,t){if(e&&e.defaultProps){for(var i in t=Ne({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}var _a=To(null),ba=null,ya=null,wa=null;function xa(){wa=ya=ba=null}function Sa(e){var t=_a.current;Eo(_a),e._currentValue=t}function Ca(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Ta(e,t){ba=e,wa=ya=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(yl=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ya){if(null===ba)throw Error(ae(308));ya=e,ba.dependencies={lanes:0,firstContext:e}}else ya=ya.next=e;return t}var Ia=null;function ka(e){null===Ia?Ia=[e]:Ia.push(e)}function Oa(e,t,i,n){var r=t.interleaved;return null===r?(i.next=i,ka(t)):(i.next=r.next,r.next=i),t.interleaved=i,Ra(e,n)}function Ra(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ma(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&Oc)){var r=n.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),n.pending=t,Ra(e,i)}return null===(r=n.interleaved)?(t.next=t,ka(n)):(t.next=r.next,r.next=t),n.interleaved=t,Ra(e,i)}function Fa(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,_i(e,i)}}function Ba(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var r=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===o?r=o=a:o=o.next=a,i=i.next}while(null!==i);null===o?r=o=t:o=o.next=t}else r=o=t;return i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Na(e,t,i,n){var r=e.updateQueue;Aa=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var h=e.alternate;null!==h&&((s=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===s?h.firstBaseUpdate=c:s.next=c,h.lastBaseUpdate=l))}if(null!==o){var u=r.baseState;for(a=0,h=c=l=null,s=o;;){var d=s.lane,f=s.eventTime;if((n&d)===d){null!==h&&(h=h.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(d=t,f=i,g.tag){case 1:if("function"==typeof(p=g.payload)){u=p.call(f,u,d);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=g.payload)?p.call(f,u,d):p))break e;u=Ne({},u,d);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===h?(c=h=f,l=u):h=h.next=f,a|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(d=s).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===h&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Bc|=a,e.lanes=a,e.memoizedState=u}}function ja(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=i,"function"!=typeof r)throw Error(ae(191,r));r.call(n)}}}var Va=(new re.Component).refs;function $a(e,t,i,n){i=null==(i=i(n,t=e.memoizedState))?t:Ne({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&Ut(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=th(),r=ih(e),o=Ma(n,r);o.payload=t,null!=i&&(o.callback=i),null!==(t=Pa(e,o,r))&&(nh(t,e,r,n),Fa(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=th(),r=ih(e),o=Ma(n,r);o.tag=1,o.payload=t,null!=i&&(o.callback=i),null!==(t=Pa(e,o,r))&&(nh(t,e,r,n),Fa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=th(),n=ih(e),r=Ma(i,n);r.tag=2,null!=t&&(r.callback=t),null!==(t=Pa(e,r,n))&&(nh(t,e,n,i),Fa(t,e,n))}};function Wa(e,t,i,n,r,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(i,n)||!lr(r,o))}function za(e,t,i){var n=!1,r=ko,o=t.contextType;return"object"==typeof o&&null!==o?o=Ea(o):(r=Lo(t)?Ao:Oo.current,o=(n=null!=(n=t.contextTypes))?Do(e,r):ko),t=new t(i,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ua,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ha(e,t,i,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Ua.enqueueReplaceState(t,t.state,null)}function Ga(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=Va,Da(e);var o=t.contextType;"object"==typeof o&&null!==o?r.context=Ea(o):(o=Lo(t)?Ao:Oo.current,r.context=Do(e,o)),r.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&($a(e,t,o,i),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Ua.enqueueReplaceState(r,r.state,null),Na(e,i,r,n),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.flags|=4194308)}function Ya(e,t,i){if(null!==(e=i.ref)&&"function"!=typeof e&&"object"!=typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(ae(309));var n=i.stateNode}if(!n)throw Error(ae(147,e));var r=n,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Va&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(ae(284));if(!i._owner)throw Error(ae(290,e))}return e}function Xa(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qa(e){return(0,e._init)(e._payload)}function Ka(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Mh(e,t)).index=0,e.sibling=null,e}function o(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=2,i):n:(t.flags|=2,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,i,n){return null===t||6!==t.tag?((t=Nh(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function l(e,t,i,n){var o=i.type;return o===Ce?h(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===Le&&qa(o)===t.type)?((n=r(t,i.props)).ref=Ya(e,t,i),n.return=e,n):((n=Ph(i.type,i.key,i.props,null,e.mode,n)).ref=Ya(e,t,i),n.return=e,n)}function c(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=jh(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function h(e,t,i,n,o){return null===t||7!==t.tag?((t=Fh(i,e.mode,n,o)).return=e,t):((t=r(t,i)).return=e,t)}function u(e,t,i){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Nh(""+t,e.mode,i)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case xe:return(i=Ph(t.type,t.key,t.props,null,e.mode,i)).ref=Ya(e,null,t),i.return=e,i;case Se:return(t=jh(t,e.mode,i)).return=e,t;case Le:return u(e,(0,t._init)(t._payload),i)}if(it(t)||Fe(t))return(t=Fh(t,e.mode,i,null)).return=e,t;Xa(e,t)}return null}function d(e,t,i,n){var r=null!==t?t.key:null;if("string"==typeof i&&""!==i||"number"==typeof i)return null!==r?null:s(e,t,""+i,n);if("object"==typeof i&&null!==i){switch(i.$$typeof){case xe:return i.key===r?l(e,t,i,n):null;case Se:return i.key===r?c(e,t,i,n):null;case Le:return d(e,t,(r=i._init)(i._payload),n)}if(it(i)||Fe(i))return null!==r?null:h(e,t,i,n,null);Xa(e,i)}return null}function f(e,t,i,n,r){if("string"==typeof n&&""!==n||"number"==typeof n)return s(t,e=e.get(i)||null,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case xe:return l(t,e=e.get(null===n.key?i:n.key)||null,n,r);case Se:return c(t,e=e.get(null===n.key?i:n.key)||null,n,r);case Le:return f(e,t,i,(0,n._init)(n._payload),r)}if(it(n)||Fe(n))return h(t,e=e.get(i)||null,n,r,null);Xa(t,n)}return null}function p(r,a,s,l){for(var c=null,h=null,p=a,g=a=0,m=null;null!==p&&g<s.length;g++){p.index>g?(m=p,p=null):m=p.sibling;var v=d(r,p,s[g],l);if(null===v){null===p&&(p=m);break}e&&p&&null===v.alternate&&t(r,p),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v,p=m}if(g===s.length)return i(r,p),oa&&Qo(r,g),c;if(null===p){for(;g<s.length;g++)null!==(p=u(r,s[g],l))&&(a=o(p,a,g),null===h?c=p:h.sibling=p,h=p);return oa&&Qo(r,g),c}for(p=n(r,p);g<s.length;g++)null!==(m=f(p,r,g,s[g],l))&&(e&&null!==m.alternate&&p.delete(null===m.key?g:m.key),a=o(m,a,g),null===h?c=m:h.sibling=m,h=m);return e&&p.forEach((function(e){return t(r,e)})),oa&&Qo(r,g),c}function g(r,a,s,l){var c=Fe(s);if("function"!=typeof c)throw Error(ae(150));if(null==(s=c.call(s)))throw Error(ae(151));for(var h=c=null,p=a,g=a=0,m=null,v=s.next();null!==p&&!v.done;g++,v=s.next()){p.index>g?(m=p,p=null):m=p.sibling;var _=d(r,p,v.value,l);if(null===_){null===p&&(p=m);break}e&&p&&null===_.alternate&&t(r,p),a=o(_,a,g),null===h?c=_:h.sibling=_,h=_,p=m}if(v.done)return i(r,p),oa&&Qo(r,g),c;if(null===p){for(;!v.done;g++,v=s.next())null!==(v=u(r,v.value,l))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return oa&&Qo(r,g),c}for(p=n(r,p);!v.done;g++,v=s.next())null!==(v=f(p,r,g,v.value,l))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&p.forEach((function(e){return t(r,e)})),oa&&Qo(r,g),c}return function e(n,o,s,l){if("object"==typeof s&&null!==s&&s.type===Ce&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case xe:e:{for(var c=s.key,h=o;null!==h;){if(h.key===c){if((c=s.type)===Ce){if(7===h.tag){i(n,h.sibling),(o=r(h,s.props.children)).return=n,n=o;break e}}else if(h.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===Le&&qa(c)===h.type){i(n,h.sibling),(o=r(h,s.props)).ref=Ya(n,h,s),o.return=n,n=o;break e}i(n,h);break}t(n,h),h=h.sibling}s.type===Ce?((o=Fh(s.props.children,n.mode,l,s.key)).return=n,n=o):((l=Ph(s.type,s.key,s.props,null,n.mode,l)).ref=Ya(n,o,s),l.return=n,n=l)}return a(n);case Se:e:{for(h=s.key;null!==o;){if(o.key===h){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){i(n,o.sibling),(o=r(o,s.children||[])).return=n,n=o;break e}i(n,o);break}t(n,o),o=o.sibling}(o=jh(s,n.mode,l)).return=n,n=o}return a(n);case Le:return e(n,o,(h=s._init)(s._payload),l)}if(it(s))return p(n,o,s,l);if(Fe(s))return g(n,o,s,l);Xa(n,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==o&&6===o.tag?(i(n,o.sibling),(o=r(o,s)).return=n,n=o):(i(n,o),(o=Nh(s,n.mode,l)).return=n,n=o),a(n)):i(n,o)}}var Za=Ka(!0),Ja=Ka(!1),Qa={},es=To(Qa),ts=To(Qa),is=To(Qa);function ns(e){if(e===Qa)throw Error(ae(174));return e}function rs(e,t){switch(Io(is,t),Io(ts,e),Io(es,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ct(null,"");break;default:t=ct(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Eo(es),Io(es,t)}function os(){Eo(es),Eo(ts),Eo(is)}function as(e){ns(is.current);var t=ns(es.current),i=ct(t,e.type);t!==i&&(Io(ts,e),Io(es,i))}function ss(e){ts.current===e&&(Eo(es),Eo(ts))}var ls=To(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hs=[];function us(){for(var e=0;e<hs.length;e++)hs[e]._workInProgressVersionPrimary=null;hs.length=0}var ds=we.ReactCurrentDispatcher,fs=we.ReactCurrentBatchConfig,ps=0,gs=null,ms=null,vs=null,_s=!1,bs=!1,ys=0,ws=0;function xs(){throw Error(ae(321))}function Ss(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!sr(e[i],t[i]))return!1;return!0}function Cs(e,t,i,n,r,o){if(ps=o,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?sl:ll,e=i(n,r),bs){o=0;do{if(bs=!1,ys=0,25<=o)throw Error(ae(301));o+=1,vs=ms=null,t.updateQueue=null,ds.current=cl,e=i(n,r)}while(bs)}if(ds.current=al,t=null!==ms&&null!==ms.next,ps=0,vs=ms=gs=null,_s=!1,t)throw Error(ae(300));return e}function Ts(){var e=0!==ys;return ys=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?gs.memoizedState=vs=e:vs=vs.next=e,vs}function Is(){if(null===ms){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===vs?gs.memoizedState:vs.next;if(null!==t)vs=t,ms=e;else{if(null===e)throw Error(ae(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===vs?gs.memoizedState=vs=e:vs=vs.next=e}return vs}function ks(e,t){return"function"==typeof t?t(e):t}function Os(e){var t=Is(),i=t.queue;if(null===i)throw Error(ae(311));i.lastRenderedReducer=e;var n=ms,r=n.baseQueue,o=i.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}n.baseQueue=r=o,i.pending=null}if(null!==r){o=r.next,n=n.baseState;var s=a=null,l=null,c=o;do{var h=c.lane;if((ps&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(s=l=u,a=n):l=l.next=u,gs.lanes|=h,Bc|=h}c=c.next}while(null!==c&&c!==o);null===l?a=n:l.next=s,sr(n,t.memoizedState)||(yl=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,i.lastRenderedState=n}if(null!==(e=i.interleaved)){r=e;do{o=r.lane,gs.lanes|=o,Bc|=o,r=r.next}while(r!==e)}else null===r&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Rs(e){var t=Is(),i=t.queue;if(null===i)throw Error(ae(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,o=t.memoizedState;if(null!==r){i.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);sr(o,t.memoizedState)||(yl=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),i.lastRenderedState=o}return[o,n]}function As(){}function Ds(e,t){var i=gs,n=Is(),r=t(),o=!sr(n.memoizedState,r);if(o&&(n.memoizedState=r,yl=!0),n=n.queue,zs(Ps.bind(null,i,n,e),[e]),n.getSnapshot!==t||o||null!==vs&&1&vs.memoizedState.tag){if(i.flags|=2048,js(9,Ms.bind(null,i,n,r,t),void 0,null),null===Rc)throw Error(ae(349));0!=(30&ps)||Ls(i,t,r)}return r}function Ls(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Ms(e,t,i,n){t.value=i,t.getSnapshot=n,Fs(t)&&Bs(e)}function Ps(e,t,i){return i((function(){Fs(t)&&Bs(e)}))}function Fs(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!sr(e,i)}catch(yy){return!0}}function Bs(e){var t=Ra(e,1);null!==t&&nh(t,e,1,-1)}function Ns(e){var t=Es();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:e},t.queue=e,e=e.dispatch=il.bind(null,gs,e),[t.memoizedState,e]}function js(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Vs(){return Is().memoizedState}function $s(e,t,i,n){var r=Es();gs.flags|=e,r.memoizedState=js(1|t,i,void 0,void 0===n?null:n)}function Us(e,t,i,n){var r=Is();n=void 0===n?null:n;var o=void 0;if(null!==ms){var a=ms.memoizedState;if(o=a.destroy,null!==n&&Ss(n,a.deps))return void(r.memoizedState=js(t,i,o,n))}gs.flags|=e,r.memoizedState=js(1|t,i,o,n)}function Ws(e,t){return $s(8390656,8,e,t)}function zs(e,t){return Us(2048,8,e,t)}function Hs(e,t){return Us(4,2,e,t)}function Gs(e,t){return Us(4,4,e,t)}function Ys(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xs(e,t,i){return i=null!=i?i.concat([e]):null,Us(4,4,Ys.bind(null,t,e),i)}function qs(){}function Ks(e,t){var i=Is();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&Ss(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Zs(e,t){var i=Is();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&Ss(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function Js(e,t,i){return 0==(21&ps)?(e.baseState&&(e.baseState=!1,yl=!0),e.memoizedState=i):(sr(i,t)||(i=gi(),gs.lanes|=i,Bc|=i,e.baseState=!0),t)}function Qs(e,t){var i=bi;bi=0!==i&&4>i?i:4,e(!0);var n=fs.transition;fs.transition={};try{e(!1),t()}finally{bi=i,fs.transition=n}}function el(){return Is().memoizedState}function tl(e,t,i){var n=ih(e);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},nl(e))rl(t,i);else if(null!==(i=Oa(e,t,i,n))){nh(i,e,n,th()),ol(i,t,n)}}function il(e,t,i){var n=ih(e),r={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(nl(e))rl(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,i);if(r.hasEagerState=!0,r.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(r.next=r,ka(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(vy){}null!==(i=Oa(e,t,r,n))&&(nh(i,e,n,r=th()),ol(i,t,n))}}function nl(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function rl(e,t){bs=_s=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function ol(e,t,i){if(0!=(4194240&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,_i(e,i)}}var al={readContext:Ea,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},sl={readContext:Ea,useCallback:function(e,t){return Es().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Ws,useImperativeHandle:function(e,t,i){return i=null!=i?i.concat([e]):null,$s(4194308,4,Ys.bind(null,t,e),i)},useLayoutEffect:function(e,t){return $s(4194308,4,e,t)},useInsertionEffect:function(e,t){return $s(4,2,e,t)},useMemo:function(e,t){var i=Es();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=Es();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=tl.bind(null,gs,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Es().memoizedState=e},useState:Ns,useDebugValue:qs,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=Ns(!1),t=e[0];return e=Qs.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var n=gs,r=Es();if(oa){if(void 0===i)throw Error(ae(407));i=i()}else{if(i=t(),null===Rc)throw Error(ae(349));0!=(30&ps)||Ls(n,t,i)}r.memoizedState=i;var o={value:i,getSnapshot:t};return r.queue=o,Ws(Ps.bind(null,n,o,e),[e]),n.flags|=2048,js(9,Ms.bind(null,n,o,i,t),void 0,null),i},useId:function(){var e=Es(),t=Rc.identifierPrefix;if(oa){var i=Jo;t=":"+t+"R"+(i=(Zo&~(1<<32-ai(Zo)-1)).toString(32)+i),0<(i=ys++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=ws++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ll={readContext:Ea,useCallback:Ks,useContext:Ea,useEffect:zs,useImperativeHandle:Xs,useInsertionEffect:Hs,useLayoutEffect:Gs,useMemo:Zs,useReducer:Os,useRef:Vs,useState:function(){return Os(ks)},useDebugValue:qs,useDeferredValue:function(e){return Js(Is(),ms.memoizedState,e)},useTransition:function(){return[Os(ks)[0],Is().memoizedState]},useMutableSource:As,useSyncExternalStore:Ds,useId:el,unstable_isNewReconciler:!1},cl={readContext:Ea,useCallback:Ks,useContext:Ea,useEffect:zs,useImperativeHandle:Xs,useInsertionEffect:Hs,useLayoutEffect:Gs,useMemo:Zs,useReducer:Rs,useRef:Vs,useState:function(){return Rs(ks)},useDebugValue:qs,useDeferredValue:function(e){var t=Is();return null===ms?t.memoizedState=e:Js(t,ms.memoizedState,e)},useTransition:function(){return[Rs(ks)[0],Is().memoizedState]},useMutableSource:As,useSyncExternalStore:Ds,useId:el,unstable_isNewReconciler:!1};function hl(e,t){try{var i="",n=t;do{i+=Ue(n),n=n.return}while(n);var r=i}catch(wy){r="\nError generating stack: "+wy.message+"\n"+wy.stack}return{value:e,source:t,stack:r,digest:null}}function ul(e,t,i){return{value:e,source:null,stack:null!=i?i:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(_y){setTimeout((function(){throw _y}))}}var fl="function"==typeof WeakMap?WeakMap:Map;function pl(e,t,i){(i=Ma(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Hc||(Hc=!0,Gc=n),dl(0,t)},i}function gl(e,t,i){(i=Ma(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var r=t.value;i.payload=function(){return n(r)},i.callback=function(){dl(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(i.callback=function(){dl(0,t),"function"!=typeof n&&(null===Yc?Yc=new Set([this]):Yc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function ml(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new fl;var r=new Set;n.set(t,r)}else void 0===(r=n.get(t))&&(r=new Set,n.set(t,r));r.has(i)||(r.add(i),e=Eh.bind(null,e,t,i),t.then(e,e))}function vl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _l(e,t,i,n,r){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=Ma(-1,1)).tag=2,Pa(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var bl=we.ReactCurrentOwner,yl=!1;function wl(e,t,i,n){t.child=null===e?Ja(t,null,i,n):Za(t,e.child,i,n)}function xl(e,t,i,n,r){i=i.render;var o=t.ref;return Ta(t,r),n=Cs(e,t,i,n,o,r),i=Ts(),null===e||yl?(oa&&i&&ta(t),t.flags|=1,wl(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Hl(e,t,r))}function Sl(e,t,i,n,r){if(null===e){var o=i.type;return"function"!=typeof o||Lh(o)||void 0!==o.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Ph(i.type,null,n,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Cl(e,t,o,n,r))}if(o=e.child,0==(e.lanes&r)){var a=o.memoizedProps;if((i=null!==(i=i.compare)?i:lr)(a,n)&&e.ref===t.ref)return Hl(e,t,r)}return t.flags|=1,(e=Mh(o,n)).ref=t.ref,e.return=t,t.child=e}function Cl(e,t,i,n,r){if(null!==e){var o=e.memoizedProps;if(lr(o,n)&&e.ref===t.ref){if(yl=!1,t.pendingProps=n=o,0==(e.lanes&r))return t.lanes=e.lanes,Hl(e,t,r);0!=(131072&e.flags)&&(yl=!0)}}return Il(e,t,i,n,r)}function Tl(e,t,i){var n=t.pendingProps,r=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Io(Mc,Lc),Lc|=i;else{if(0==(1073741824&i))return e=null!==o?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Io(Mc,Lc),Lc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:i,Io(Mc,Lc),Lc|=n}else null!==o?(n=o.baseLanes|i,t.memoizedState=null):n=i,Io(Mc,Lc),Lc|=n;return wl(e,t,r,i),t.child}function El(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Il(e,t,i,n,r){var o=Lo(i)?Ao:Oo.current;return o=Do(t,o),Ta(t,r),i=Cs(e,t,i,n,o,r),n=Ts(),null===e||yl?(oa&&n&&ta(t),t.flags|=1,wl(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Hl(e,t,r))}function kl(e,t,i,n,r){if(Lo(i)){var o=!0;Bo(t)}else o=!1;if(Ta(t,r),null===t.stateNode)zl(e,t),za(t,i,n),Ga(t,i,n,r),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=i.contextType;"object"==typeof c&&null!==c?c=Ea(c):c=Do(t,c=Lo(i)?Ao:Oo.current);var h=i.getDerivedStateFromProps,u="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate;u||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||l!==c)&&Ha(t,a,n,c),Aa=!1;var d=t.memoizedState;a.state=d,Na(t,n,a,r),l=t.memoizedState,s!==n||d!==l||Ro.current||Aa?("function"==typeof h&&($a(t,i,h,n),l=t.memoizedState),(s=Aa||Wa(t,i,s,n,d,l,c))?(u||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,La(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:va(t.type,s),a.props=c,u=t.pendingProps,d=a.context,"object"==typeof(l=i.contextType)&&null!==l?l=Ea(l):l=Do(t,l=Lo(i)?Ao:Oo.current);var f=i.getDerivedStateFromProps;(h="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==u||d!==l)&&Ha(t,a,n,l),Aa=!1,d=t.memoizedState,a.state=d,Na(t,n,a,r);var p=t.memoizedState;s!==u||d!==p||Ro.current||Aa?("function"==typeof f&&($a(t,i,f,n),p=t.memoizedState),(c=Aa||Wa(t,i,c,n,d,p,l)||!1)?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=l,n=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Ol(e,t,i,n,o,r)}function Ol(e,t,i,n,r,o){El(e,t);var a=0!=(128&t.flags);if(!n&&!a)return r&&No(t,i,!1),Hl(e,t,o);n=t.stateNode,bl.current=t;var s=a&&"function"!=typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=Za(t,e.child,null,o),t.child=Za(t,null,s,o)):wl(e,t,s,o),t.memoizedState=n.state,r&&No(t,i,!0),t.child}function Rl(e){var t=e.stateNode;t.pendingContext?Po(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Po(0,t.context,!1),rs(e,t.containerInfo)}function Al(e,t,i,n,r){return pa(),ga(r),t.flags|=256,wl(e,t,i,n),t.child}var Dl,Ll,Ml,Pl,Fl={dehydrated:null,treeContext:null,retryLane:0};function Bl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nl(e,t,i){var n,r=t.pendingProps,o=ls.current,a=!1,s=0!=(128&t.flags);if((n=s)||(n=(null===e||null!==e.memoizedState)&&0!=(2&o)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Io(ls,1&o),null===e)return ha(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},0==(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=s):a=Bh(s,r,0,null),e=Fh(e,r,i,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Bl(i),t.memoizedState=Fl,e):jl(t,s));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,i,n,r,o,a){if(i)return 256&t.flags?(t.flags&=-257,Vl(e,t,a,n=ul(Error(ae(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,r=t.mode,n=Bh({mode:"visible",children:n.children},r,0,null),(o=Fh(o,r,a,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!=(1&t.mode)&&Za(t,e.child,null,a),t.child.memoizedState=Bl(a),t.memoizedState=Fl,o);if(0==(1&t.mode))return Vl(e,t,a,null);if("$!"===r.data){if(n=r.nextSibling&&r.nextSibling.dataset)var s=n.dgst;return n=s,Vl(e,t,a,n=ul(o=Error(ae(419)),n,void 0))}if(s=0!=(a&e.childLanes),yl||s){if(null!==(n=Rc)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!=(r&(n.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Ra(e,r),nh(n,e,r,-1))}return mh(),Vl(e,t,a,n=ul(Error(ae(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=kh.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,ra=co(r.nextSibling),na=t,oa=!0,aa=null,null!==e&&(Xo[qo++]=Zo,Xo[qo++]=Jo,Xo[qo++]=Ko,Zo=e.id,Jo=e.overflow,Ko=t),t=jl(t,n.children),t.flags|=4096,t)}(e,t,s,r,n,o,i);if(a){a=r.fallback,s=t.mode,n=(o=e.child).sibling;var l={mode:"hidden",children:r.children};return 0==(1&s)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=l,t.deletions=null):(r=Mh(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==n?a=Mh(n,a):(a=Fh(a,s,i,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=null===(s=e.child.memoizedState)?Bl(i):{baseLanes:s.baseLanes|i,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~i,t.memoizedState=Fl,r}return e=(a=e.child).sibling,r=Mh(a,{mode:"visible",children:r.children}),0==(1&t.mode)&&(r.lanes=i),r.return=t,r.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function jl(e,t){return(t=Bh({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vl(e,t,i,n){return null!==n&&ga(n),Za(t,e.child,null,i),(e=jl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $l(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ca(e.return,t,i)}function Ul(e,t,i,n,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=i,o.tailMode=r)}function Wl(e,t,i){var n=t.pendingProps,r=n.revealOrder,o=n.tail;if(wl(e,t,n.children,i),0!=(2&(n=ls.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$l(e,i,t);else if(19===e.tag)$l(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Io(ls,n),0==(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===cs(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Ul(t,!1,r,i,o);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===cs(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Ul(t,!0,i,null,o);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zl(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hl(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Bc|=t.lanes,0==(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ae(153));if(null!==t.child){for(i=Mh(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Mh(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Gl(e,t){if(!oa)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Yl(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=14680064&r.subtreeFlags,n|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function Xl(e,t,i){var n=t.pendingProps;switch(ia(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yl(t),null;case 1:case 17:return Lo(t.type)&&Mo(),Yl(t),null;case 3:return n=t.stateNode,os(),Eo(Ro),Eo(Oo),us(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==aa&&(sh(aa),aa=null))),Ll(e,t),Yl(t),null;case 5:ss(t);var r=ns(is.current);if(i=t.type,null!==e&&null!=t.stateNode)Ml(e,t,i,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(ae(166));return Yl(t),null}if(e=ns(es.current),da(t)){n=t.stateNode,i=t.type;var o=t.memoizedProps;switch(n[fo]=t,n[po]=o,e=0!=(1&t.mode),i){case"dialog":jr("cancel",n),jr("close",n);break;case"iframe":case"object":case"embed":jr("load",n);break;case"video":case"audio":for(r=0;r<Pr.length;r++)jr(Pr[r],n);break;case"source":jr("error",n);break;case"img":case"image":case"link":jr("error",n),jr("load",n);break;case"details":jr("toggle",n);break;case"input":Ze(n,o),jr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},jr("invalid",n);break;case"textarea":ot(n,o),jr("invalid",n)}for(var a in _t(i,o),r=null,o)if(o.hasOwnProperty(a)){var s=o[a];"children"===a?"string"==typeof s?n.textContent!==s&&(!0!==o.suppressHydrationWarning&&Jr(n.textContent,s,e),r=["children",s]):"number"==typeof s&&n.textContent!==""+s&&(!0!==o.suppressHydrationWarning&&Jr(n.textContent,s,e),r=["children",""+s]):le.hasOwnProperty(a)&&null!=s&&"onScroll"===a&&jr("scroll",n)}switch(i){case"input":Ye(n),et(n,o,!0);break;case"textarea":Ye(n),st(n);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(n.onclick=Qr)}n=r,t.updateQueue=n,null!==n&&(t.flags|=4)}else{a=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=lt(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=a.createElement(i,{is:n.is}):(e=a.createElement(i),"select"===i&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,i),e[fo]=t,e[po]=n,Dl(e,t,!1,!1),t.stateNode=e;e:{switch(a=bt(i,n),i){case"dialog":jr("cancel",e),jr("close",e),r=n;break;case"iframe":case"object":case"embed":jr("load",e),r=n;break;case"video":case"audio":for(r=0;r<Pr.length;r++)jr(Pr[r],e);r=n;break;case"source":jr("error",e),r=n;break;case"img":case"image":case"link":jr("error",e),jr("load",e),r=n;break;case"details":jr("toggle",e),r=n;break;case"input":Ze(e,n),r=Ke(e,n),jr("invalid",e);break;case"option":default:r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=Ne({},n,{value:void 0}),jr("invalid",e);break;case"textarea":ot(e,n),r=rt(e,n),jr("invalid",e)}for(o in _t(i,r),s=r)if(s.hasOwnProperty(o)){var l=s[o];"style"===o?mt(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&ut(e,l):"children"===o?"string"==typeof l?("textarea"!==i||""!==l)&&dt(e,l):"number"==typeof l&&dt(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(le.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&ye(e,o,l,a))}switch(i){case"input":Ye(e),et(e,n,!1);break;case"textarea":Ye(e),st(e);break;case"option":null!=n.value&&e.setAttribute("value",""+He(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?nt(e,!!n.multiple,o,!1):null!=n.defaultValue&&nt(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof r.onClick&&(e.onclick=Qr)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Yl(t),null;case 6:if(e&&null!=t.stateNode)Pl(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(ae(166));if(i=ns(is.current),ns(es.current),da(t)){if(n=t.stateNode,i=t.memoizedProps,n[fo]=t,(o=n.nodeValue!==i)&&null!==(e=na))switch(e.tag){case 3:Jr(n.nodeValue,i,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(n.nodeValue,i,0!=(1&e.mode))}o&&(t.flags|=4)}else(n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[fo]=t,t.stateNode=n}return Yl(t),null;case 13:if(Eo(ls),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(oa&&null!==ra&&0!=(1&t.mode)&&0==(128&t.flags))fa(),pa(),t.flags|=98560,o=!1;else if(o=da(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(ae(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(ae(317));o[fo]=t}else pa(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yl(t),o=!1}else null!==aa&&(sh(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=i,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ls.current)?0===Pc&&(Pc=3):mh())),null!==t.updateQueue&&(t.flags|=4),Yl(t),null);case 4:return os(),Ll(e,t),null===e&&Ur(t.stateNode.containerInfo),Yl(t),null;case 10:return Sa(t.type._context),Yl(t),null;case 19:if(Eo(ls),null===(o=t.memoizedState))return Yl(t),null;if(n=0!=(128&t.flags),null===(a=o.rendering))if(n)Gl(o,!1);else{if(0!==Pc||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=cs(e))){for(t.flags|=128,Gl(o,!1),null!==(n=a.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=i,i=t.child;null!==i;)e=n,(o=i).flags&=14680066,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Io(ls,1&ls.current|2),t.child}e=e.sibling}null!==o.tail&&Zt()>Wc&&(t.flags|=128,n=!0,Gl(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=cs(a))){if(t.flags|=128,n=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),Gl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!oa)return Yl(t),null}else 2*Zt()-o.renderingStartTime>Wc&&1073741824!==i&&(t.flags|=128,n=!0,Gl(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(i=o.last)?i.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Zt(),t.sibling=null,i=ls.current,Io(ls,n?1&i|2:1&i),t):(Yl(t),null);case 22:case 23:return dh(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!=(1&t.mode)?0!=(1073741824&Lc)&&(Yl(t),6&t.subtreeFlags&&(t.flags|=8192)):Yl(t),null;case 24:case 25:return null}throw Error(ae(156,t.tag))}function ql(e,t){switch(ia(t),t.tag){case 1:return Lo(t.type)&&Mo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Eo(Ro),Eo(Oo),us(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ss(t),null;case 13:if(Eo(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ae(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Eo(ls),null;case 4:return os(),null;case 10:return Sa(t.type._context),null;case 22:case 23:return dh(),null;default:return null}}Dl=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ll=function(){},Ml=function(e,t,i,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,ns(es.current);var o,a=null;switch(i){case"input":r=Ke(e,r),n=Ke(e,n),a=[];break;case"select":r=Ne({},r,{value:void 0}),n=Ne({},n,{value:void 0}),a=[];break;case"textarea":r=rt(e,r),n=rt(e,n),a=[];break;default:"function"!=typeof r.onClick&&"function"==typeof n.onClick&&(e.onclick=Qr)}for(c in _t(i,n),i=null,r)if(!n.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var s=r[c];for(o in s)s.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(le.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(s=null!=r?r[c]:void 0,n.hasOwnProperty(c)&&l!==s&&(null!=l||null!=s))if("style"===c)if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(i||(i={}),i[o]=l[o])}else i||(a||(a=[]),a.push(c,i)),i=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(le.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&jr("scroll",e),a||s===l||(a=[])):(a=a||[]).push(c,l))}i&&(a=a||[]).push("style",i);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Pl=function(e,t,i,n){i!==n&&(t.flags|=4)};var Kl=!1,Zl=!1,Jl="function"==typeof WeakSet?WeakSet:Set,Ql=null;function ec(e,t){var i=e.ref;if(null!==i)if("function"==typeof i)try{i(null)}catch(yy){Th(e,t,yy)}else i.current=null}function tc(e,t,i){try{i()}catch(yy){Th(e,t,yy)}}var ic=!1;function nc(e,t,i){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&tc(t,i,o)}r=r.next}while(r!==n)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function oc(e){var t=e.ref;if(null!==t){var i=e.stateNode;e.tag,e=i,"function"==typeof t?t(e):t.current=e}}function ac(e){var t=e.alternate;null!==t&&(e.alternate=null,ac(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fo],delete t[po],delete t[mo],delete t[vo],delete t[_o])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function lc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!=(i=i._reactRootContainer)||null!==t.onclick||(t.onclick=Qr));else if(4!==n&&null!==(e=e.child))for(cc(e,t,i),e=e.sibling;null!==e;)cc(e,t,i),e=e.sibling}function hc(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(hc(e,t,i),e=e.sibling;null!==e;)hc(e,t,i),e=e.sibling}var uc=null,dc=!1;function fc(e,t,i){for(i=i.child;null!==i;)pc(e,t,i),i=i.sibling}function pc(e,t,i){if(oi&&"function"==typeof oi.onCommitFiberUnmount)try{oi.onCommitFiberUnmount(ri,i)}catch(my){}switch(i.tag){case 5:Zl||ec(i,t);case 6:var n=uc,r=dc;uc=null,fc(e,t,i),dc=r,null!==(uc=n)&&(dc?(e=uc,i=i.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)):uc.removeChild(i.stateNode));break;case 18:null!==uc&&(dc?(e=uc,i=i.stateNode,8===e.nodeType?lo(e.parentNode,i):1===e.nodeType&&lo(e,i),Ui(e)):lo(uc,i.stateNode));break;case 4:n=uc,r=dc,uc=i.stateNode.containerInfo,dc=!0,fc(e,t,i),uc=n,dc=r;break;case 0:case 11:case 14:case 15:if(!Zl&&(null!==(n=i.updateQueue)&&null!==(n=n.lastEffect))){r=n=n.next;do{var o=r,a=o.destroy;o=o.tag,void 0!==a&&(0!=(2&o)||0!=(4&o))&&tc(i,t,a),r=r.next}while(r!==n)}fc(e,t,i);break;case 1:if(!Zl&&(ec(i,t),"function"==typeof(n=i.stateNode).componentWillUnmount))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(my){Th(i,t,my)}fc(e,t,i);break;case 21:fc(e,t,i);break;case 22:1&i.mode?(Zl=(n=Zl)||null!==i.memoizedState,fc(e,t,i),Zl=n):fc(e,t,i);break;default:fc(e,t,i)}}function gc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new Jl),t.forEach((function(t){var n=Oh.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function mc(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var r=i[n];try{var o=e,a=t,s=a;e:for(;null!==s;){switch(s.tag){case 5:uc=s.stateNode,dc=!1;break e;case 3:case 4:uc=s.stateNode.containerInfo,dc=!0;break e}s=s.return}if(null===uc)throw Error(ae(160));pc(o,a,r),uc=null,dc=!1;var l=r.alternate;null!==l&&(l.return=null),r.return=null}catch(vy){Th(r,t,vy)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),_c(e),4&n){try{nc(3,e,e.return),rc(3,e)}catch(Md){Th(e,e.return,Md)}try{nc(5,e,e.return)}catch(Md){Th(e,e.return,Md)}}break;case 1:mc(t,e),_c(e),512&n&&null!==i&&ec(i,i.return);break;case 5:if(mc(t,e),_c(e),512&n&&null!==i&&ec(i,i.return),32&e.flags){var r=e.stateNode;try{dt(r,"")}catch(Md){Th(e,e.return,Md)}}if(4&n&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==i?i.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===s&&"radio"===o.type&&null!=o.name&&Je(r,o),bt(s,a);var c=bt(s,o);for(a=0;a<l.length;a+=2){var h=l[a],u=l[a+1];"style"===h?mt(r,u):"dangerouslySetInnerHTML"===h?ut(r,u):"children"===h?dt(r,u):ye(r,h,u,c)}switch(s){case"input":Qe(r,o);break;case"textarea":at(r,o);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?nt(r,!!o.multiple,f,!1):d!==!!o.multiple&&(null!=o.defaultValue?nt(r,!!o.multiple,o.defaultValue,!0):nt(r,!!o.multiple,o.multiple?[]:"",!1))}r[po]=o}catch(Md){Th(e,e.return,Md)}}break;case 6:if(mc(t,e),_c(e),4&n){if(null===e.stateNode)throw Error(ae(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(Md){Th(e,e.return,Md)}}break;case 3:if(mc(t,e),_c(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{Ui(t.containerInfo)}catch(Md){Th(e,e.return,Md)}break;case 4:default:mc(t,e),_c(e);break;case 13:mc(t,e),_c(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Uc=Zt())),4&n&&gc(e);break;case 22:if(h=null!==i&&null!==i.memoizedState,1&e.mode?(Zl=(c=Zl)||h,mc(t,e),Zl=c):mc(t,e),_c(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!=(1&e.mode))for(Ql=e,h=e.child;null!==h;){for(u=Ql=h;null!==Ql;){switch(f=(d=Ql).child,d.tag){case 0:case 11:case 14:case 15:nc(4,d,d.return);break;case 1:ec(d,d.return);var p=d.stateNode;if("function"==typeof p.componentWillUnmount){n=d,i=d.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(Md){Th(n,i,Md)}}break;case 5:ec(d,d.return);break;case 22:if(null!==d.memoizedState){xc(u);continue}}null!==f?(f.return=d,Ql=f):xc(u)}h=h.sibling}e:for(h=null,u=e;;){if(5===u.tag){if(null===h){h=u;try{r=u.stateNode,c?"function"==typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=u.stateNode,a=null!=(l=u.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,s.style.display=gt("display",a))}catch(Md){Th(e,e.return,Md)}}}else if(6===u.tag){if(null===h)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(Md){Th(e,e.return,Md)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:mc(t,e),_c(e),4&n&&gc(e);case 21:}}function _c(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(sc(i)){var n=i;break e}i=i.return}throw Error(ae(160))}switch(n.tag){case 5:var r=n.stateNode;32&n.flags&&(dt(r,""),n.flags&=-33),hc(e,lc(e),r);break;case 3:case 4:var o=n.stateNode.containerInfo;cc(e,lc(e),o);break;default:throw Error(ae(161))}}catch(zy){Th(e,e.return,zy)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bc(e,t,i){Ql=e,yc(e)}function yc(e,t,i){for(var n=0!=(1&e.mode);null!==Ql;){var r=Ql,o=r.child;if(22===r.tag&&n){var a=null!==r.memoizedState||Kl;if(!a){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Zl;s=Kl;var c=Zl;if(Kl=a,(Zl=l)&&!c)for(Ql=r;null!==Ql;)l=(a=Ql).child,22===a.tag&&null!==a.memoizedState?Sc(r):null!==l?(l.return=a,Ql=l):Sc(r);for(;null!==o;)Ql=o,yc(o),o=o.sibling;Ql=r,Kl=s,Zl=c}wc(e)}else 0!=(8772&r.subtreeFlags)&&null!==o?(o.return=r,Ql=o):wc(e)}}function wc(e){for(;null!==Ql;){var t=Ql;if(0!=(8772&t.flags)){var i=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zl||rc(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Zl)if(null===i)n.componentDidMount();else{var r=t.elementType===t.type?i.memoizedProps:va(t.type,i.memoizedProps);n.componentDidUpdate(r,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,n);break;case 3:var a=t.updateQueue;if(null!==a){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}ja(t,a,i)}break;case 5:var s=t.stateNode;if(null===i&&4&t.flags){i=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var u=h.dehydrated;null!==u&&Ui(u)}}}break;default:throw Error(ae(163))}Zl||512&t.flags&&oc(t)}catch(uy){Th(t,t.return,uy)}}if(t===e){Ql=null;break}if(null!==(i=t.sibling)){i.return=t.return,Ql=i;break}Ql=t.return}}function xc(e){for(;null!==Ql;){var t=Ql;if(t===e){Ql=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Ql=i;break}Ql=t.return}}function Sc(e){for(;null!==Ql;){var t=Ql;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{rc(4,t)}catch(zy){Th(t,i,zy)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var r=t.return;try{n.componentDidMount()}catch(zy){Th(t,r,zy)}}var o=t.return;try{oc(t)}catch(zy){Th(t,o,zy)}break;case 5:var a=t.return;try{oc(t)}catch(zy){Th(t,a,zy)}}}catch(zy){Th(t,t.return,zy)}if(t===e){Ql=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ql=s;break}Ql=t.return}}var Cc,Tc=Math.ceil,Ec=we.ReactCurrentDispatcher,Ic=we.ReactCurrentOwner,kc=we.ReactCurrentBatchConfig,Oc=0,Rc=null,Ac=null,Dc=0,Lc=0,Mc=To(0),Pc=0,Fc=null,Bc=0,Nc=0,jc=0,Vc=null,$c=null,Uc=0,Wc=1/0,zc=null,Hc=!1,Gc=null,Yc=null,Xc=!1,qc=null,Kc=0,Zc=0,Jc=null,Qc=-1,eh=0;function th(){return 0!=(6&Oc)?Zt():-1!==Qc?Qc:Qc=Zt()}function ih(e){return 0==(1&e.mode)?1:0!=(2&Oc)&&0!==Dc?Dc&-Dc:null!==ma.transition?(0===eh&&(eh=gi()),eh):0!==(e=bi)?e:e=void 0===(e=window.event)?16:Ki(e.type)}function nh(e,t,i,n){if(50<Zc)throw Zc=0,Jc=null,Error(ae(185));vi(e,i,n),0!=(2&Oc)&&e===Rc||(e===Rc&&(0==(2&Oc)&&(Nc|=i),4===Pc&&lh(e,Dc)),rh(e,n),1===i&&0===Oc&&0==(1&t.mode)&&(Wc=Zt()+500,Vo&&Wo()))}function rh(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-ai(o),s=1<<a,l=r[a];-1===l?0!=(s&i)&&0==(s&n)||(r[a]=fi(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var n=di(e,e===Rc?Dc:0);if(0===n)null!==i&&Xt(i),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=i&&Xt(i),1===t)0===e.tag?function(e){Vo=!0,Uo(e)}(ch.bind(null,e)):Uo(ch.bind(null,e)),ao((function(){0==(6&Oc)&&Wo()})),i=null;else{switch(yi(n)){case 1:i=Qt;break;case 4:i=ei;break;case 16:default:i=ti;break;case 536870912:i=ni}i=Rh(i,oh.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function oh(e,t){if(Qc=-1,eh=0,0!=(6&Oc))throw Error(ae(327));var i=e.callbackNode;if(Sh()&&e.callbackNode!==i)return null;var n=di(e,e===Rc?Dc:0);if(0===n)return null;if(0!=(30&n)||0!=(n&e.expiredLanes)||t)t=vh(e,n);else{t=n;var r=Oc;Oc|=2;var o=gh();for(Rc===e&&Dc===t||(zc=null,Wc=Zt()+500,fh(e,t));;)try{bh();break}catch(my){ph(e,my)}xa(),Ec.current=o,Oc=r,null!==Ac?t=0:(Rc=null,Dc=0,t=Pc)}if(0!==t){if(2===t&&(0!==(r=pi(e))&&(n=r,t=ah(e,r))),1===t)throw i=Fc,fh(e,0),lh(e,n),rh(e,Zt()),i;if(6===t)lh(e,n);else{if(r=e.current.alternate,0==(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var n=0;n<i.length;n++){var r=i[n],o=r.getSnapshot;r=r.value;try{if(!sr(o(),r))return!1}catch(a){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=vh(e,n))&&(0!==(o=pi(e))&&(n=o,t=ah(e,o))),1===t))throw i=Fc,fh(e,0),lh(e,n),rh(e,Zt()),i;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(ae(345));case 2:case 5:xh(e,$c,zc);break;case 3:if(lh(e,n),(130023424&n)===n&&10<(t=Uc+500-Zt())){if(0!==di(e,0))break;if(((r=e.suspendedLanes)&n)!==n){th(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=no(xh.bind(null,e,$c,zc),t);break}xh(e,$c,zc);break;case 4:if(lh(e,n),(4194240&n)===n)break;for(t=e.eventTimes,r=-1;0<n;){var a=31-ai(n);o=1<<a,(a=t[a])>r&&(r=a),n&=~o}if(n=r,10<(n=(120>(n=Zt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Tc(n/1960))-n)){e.timeoutHandle=no(xh.bind(null,e,$c,zc),n);break}xh(e,$c,zc);break;default:throw Error(ae(329))}}}return rh(e,Zt()),e.callbackNode===i?oh.bind(null,e):null}function ah(e,t){var i=Vc;return e.current.memoizedState.isDehydrated&&(fh(e,t).flags|=256),2!==(e=vh(e,t))&&(t=$c,$c=i,null!==t&&sh(t)),e}function sh(e){null===$c?$c=e:$c.push.apply($c,e)}function lh(e,t){for(t&=~jc,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-ai(t),n=1<<i;e[i]=-1,t&=~n}}function ch(e){if(0!=(6&Oc))throw Error(ae(327));Sh();var t=di(e,0);if(0==(1&t))return rh(e,Zt()),null;var i=vh(e,t);if(0!==e.tag&&2===i){var n=pi(e);0!==n&&(t=n,i=ah(e,n))}if(1===i)throw i=Fc,fh(e,0),lh(e,t),rh(e,Zt()),i;if(6===i)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xh(e,$c,zc),rh(e,Zt()),null}function hh(e,t){var i=Oc;Oc|=1;try{return e(t)}finally{0===(Oc=i)&&(Wc=Zt()+500,Vo&&Wo())}}function uh(e){null!==qc&&0===qc.tag&&0==(6&Oc)&&Sh();var t=Oc;Oc|=1;var i=kc.transition,n=bi;try{if(kc.transition=null,bi=1,e)return e()}finally{bi=n,kc.transition=i,0==(6&(Oc=t))&&Wo()}}function dh(){Lc=Mc.current,Eo(Mc)}function fh(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,ro(i)),null!==Ac)for(i=Ac.return;null!==i;){var n=i;switch(ia(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Mo();break;case 3:os(),Eo(Ro),Eo(Oo),us();break;case 5:ss(n);break;case 4:os();break;case 13:case 19:Eo(ls);break;case 10:Sa(n.type._context);break;case 22:case 23:dh()}i=i.return}if(Rc=e,Ac=e=Mh(e.current,null),Dc=Lc=t,Pc=0,Fc=null,jc=Nc=Bc=0,$c=Vc=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(n=(i=Ia[t]).interleaved)){i.interleaved=null;var r=n.next,o=i.pending;if(null!==o){var a=o.next;o.next=r,n.next=a}i.pending=n}Ia=null}return e}function ph(e,t){for(;;){var i=Ac;try{if(xa(),ds.current=al,_s){for(var n=gs.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}_s=!1}if(ps=0,vs=ms=gs=null,bs=!1,ys=0,Ic.current=null,null===i||null===i.return){Pc=1,Fc=t,Ac=null;break}e:{var o=e,a=i.return,s=i,l=t;if(t=Dc,s.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,h=s,u=h.tag;if(0==(1&h.mode)&&(0===u||11===u||15===u)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=vl(a);if(null!==f){f.flags&=-257,_l(f,a,s,0,t),1&f.mode&&ml(o,c,t),l=c;var p=(t=f).updateQueue;if(null===p){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}if(0==(1&t)){ml(o,c,t),mh();break e}l=Error(ae(426))}else if(oa&&1&s.mode){var m=vl(a);if(null!==m){0==(65536&m.flags)&&(m.flags|=256),_l(m,a,s,0,t),ga(hl(l,s));break e}}o=l=hl(l,s),4!==Pc&&(Pc=2),null===Vc?Vc=[o]:Vc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ba(o,pl(0,l,t));break e;case 1:s=l;var v=o.type,_=o.stateNode;if(0==(128&o.flags)&&("function"==typeof v.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===Yc||!Yc.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ba(o,gl(o,s,t));break e}}o=o.return}while(null!==o)}wh(i)}catch(b){t=b,Ac===i&&null!==i&&(Ac=i=i.return);continue}break}}function gh(){var e=Ec.current;return Ec.current=al,null===e?al:e}function mh(){0!==Pc&&3!==Pc&&2!==Pc||(Pc=4),null===Rc||0==(268435455&Bc)&&0==(268435455&Nc)||lh(Rc,Dc)}function vh(e,t){var i=Oc;Oc|=2;var n=gh();for(Rc===e&&Dc===t||(zc=null,fh(e,t));;)try{_h();break}catch(cy){ph(e,cy)}if(xa(),Oc=i,Ec.current=n,null!==Ac)throw Error(ae(261));return Rc=null,Dc=0,Pc}function _h(){for(;null!==Ac;)yh(Ac)}function bh(){for(;null!==Ac&&!qt();)yh(Ac)}function yh(e){var t=Cc(e.alternate,e,Lc);e.memoizedProps=e.pendingProps,null===t?wh(e):Ac=t,Ic.current=null}function wh(e){var t=e;do{var i=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(i=Xl(i,t,Lc)))return void(Ac=i)}else{if(null!==(i=ql(i,t)))return i.flags&=32767,void(Ac=i);if(null===e)return Pc=6,void(Ac=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ac=t);Ac=t=e}while(null!==t);0===Pc&&(Pc=5)}function xh(e,t,i){var n=bi,r=kc.transition;try{kc.transition=null,bi=1,function(e,t,i,n){do{Sh()}while(null!==qc);if(0!=(6&Oc))throw Error(ae(327));i=e.finishedWork;var r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var o=i.lanes|i.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<i;){var r=31-ai(i),o=1<<r;t[r]=0,n[r]=-1,e[r]=-1,i&=~o}}(e,o),e===Rc&&(Ac=Rc=null,Dc=0),0==(2064&i.subtreeFlags)&&0==(2064&i.flags)||Xc||(Xc=!0,Rh(ti,(function(){return Sh(),null}))),o=0!=(15990&i.flags),0!=(15990&i.subtreeFlags)||o){o=kc.transition,kc.transition=null;var a=bi;bi=1;var s=Oc;Oc|=4,Ic.current=null,function(e,t){if(eo=zi,fr(e=dr())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var r=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{i.nodeType,o.nodeType}catch($y){i=null;break e}var a=0,s=-1,l=-1,c=0,h=0,u=e,d=null;t:for(;;){for(var f;u!==i||0!==r&&3!==u.nodeType||(s=a+r),u!==o||0!==n&&3!==u.nodeType||(l=a+n),3===u.nodeType&&(a+=u.nodeValue.length),null!==(f=u.firstChild);)d=u,u=f;for(;;){if(u===e)break t;if(d===i&&++c===r&&(s=a),d===o&&++h===n&&(l=a),null!==(f=u.nextSibling))break;d=(u=d).parentNode}u=f}i=-1===s||-1===l?null:{start:s,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(to={focusedElem:e,selectionRange:i},zi=!1,Ql=t;null!==Ql;)if(e=(t=Ql).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Ql=e;else for(;null!==Ql;){t=Ql;try{var p=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,m=p.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:va(t.type,g),m);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(ae(163))}}catch($y){Th(t,t.return,$y)}if(null!==(e=t.sibling)){e.return=t.return,Ql=e;break}Ql=t.return}p=ic,ic=!1}(e,i),vc(i,e),pr(to),zi=!!eo,to=eo=null,e.current=i,bc(i),Kt(),Oc=s,bi=a,kc.transition=o}else e.current=i;if(Xc&&(Xc=!1,qc=e,Kc=r),o=e.pendingLanes,0===o&&(Yc=null),function(e){if(oi&&"function"==typeof oi.onCommitFiberRoot)try{oi.onCommitFiberRoot(ri,e,void 0,128==(128&e.current.flags))}catch(t){}}(i.stateNode),rh(e,Zt()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)r=t[i],n(r.value,{componentStack:r.stack,digest:r.digest});if(Hc)throw Hc=!1,e=Gc,Gc=null,e;0!=(1&Kc)&&0!==e.tag&&Sh(),o=e.pendingLanes,0!=(1&o)?e===Jc?Zc++:(Zc=0,Jc=e):Zc=0,Wo()}(e,t,i,n)}finally{kc.transition=r,bi=n}return null}function Sh(){if(null!==qc){var e=yi(Kc),t=kc.transition,i=bi;try{if(kc.transition=null,bi=16>e?16:e,null===qc)var n=!1;else{if(e=qc,qc=null,Kc=0,0!=(6&Oc))throw Error(ae(331));var r=Oc;for(Oc|=4,Ql=e.current;null!==Ql;){var o=Ql,a=o.child;if(0!=(16&Ql.flags)){var s=o.deletions;if(null!==s){for(var l=0;l<s.length;l++){var c=s[l];for(Ql=c;null!==Ql;){var h=Ql;switch(h.tag){case 0:case 11:case 15:nc(8,h,o)}var u=h.child;if(null!==u)u.return=h,Ql=u;else for(;null!==Ql;){var d=(h=Ql).sibling,f=h.return;if(ac(h),h===c){Ql=null;break}if(null!==d){d.return=f,Ql=d;break}Ql=f}}}var p=o.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Ql=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,Ql=a;else e:for(;null!==Ql;){if(0!=(2048&(o=Ql).flags))switch(o.tag){case 0:case 11:case 15:nc(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Ql=v;break e}Ql=o.return}}var _=e.current;for(Ql=_;null!==Ql;){var b=(a=Ql).child;if(0!=(2064&a.subtreeFlags)&&null!==b)b.return=a,Ql=b;else e:for(a=_;null!==Ql;){if(0!=(2048&(s=Ql).flags))try{switch(s.tag){case 0:case 11:case 15:rc(9,s)}}catch(w){Th(s,s.return,w)}if(s===a){Ql=null;break e}var y=s.sibling;if(null!==y){y.return=s.return,Ql=y;break e}Ql=s.return}}if(Oc=r,Wo(),oi&&"function"==typeof oi.onPostCommitFiberRoot)try{oi.onPostCommitFiberRoot(ri,e)}catch(w){}n=!0}return n}finally{bi=i,kc.transition=t}}return!1}function Ch(e,t,i){e=Pa(e,t=pl(0,t=hl(i,t),1),1),t=th(),null!==e&&(vi(e,1,t),rh(e,t))}function Th(e,t,i){if(3===e.tag)Ch(e,e,i);else for(;null!==t;){if(3===t.tag){Ch(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Yc||!Yc.has(n))){t=Pa(t,e=gl(t,e=hl(i,e),1),1),e=th(),null!==t&&(vi(t,1,e),rh(t,e));break}}t=t.return}}function Eh(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=th(),e.pingedLanes|=e.suspendedLanes&i,Rc===e&&(Dc&i)===i&&(4===Pc||3===Pc&&(130023424&Dc)===Dc&&500>Zt()-Uc?fh(e,0):jc|=i),rh(e,t)}function Ih(e,t){0===t&&(0==(1&e.mode)?t=1:(t=hi,0==(130023424&(hi<<=1))&&(hi=4194304)));var i=th();null!==(e=Ra(e,t))&&(vi(e,t,i),rh(e,i))}function kh(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Ih(e,i)}function Oh(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(i=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ae(314))}null!==n&&n.delete(t),Ih(e,i)}function Rh(e,t){return Yt(e,t)}function Ah(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dh(e,t,i,n){return new Ah(e,t,i,n)}function Lh(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mh(e,t){var i=e.alternate;return null===i?((i=Dh(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ph(e,t,i,n,r,o){var a=2;if(n=e,"function"==typeof e)Lh(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Ce:return Fh(i.children,r,o,t);case Te:a=8,r|=8;break;case Ee:return(e=Dh(12,i,t,2|r)).elementType=Ee,e.lanes=o,e;case Re:return(e=Dh(13,i,t,r)).elementType=Re,e.lanes=o,e;case Ae:return(e=Dh(19,i,t,r)).elementType=Ae,e.lanes=o,e;case Me:return Bh(i,r,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ie:a=10;break e;case ke:a=9;break e;case Oe:a=11;break e;case De:a=14;break e;case Le:a=16,n=null;break e}throw Error(ae(130,null==e?e:typeof e,""))}return(t=Dh(a,i,t,r)).elementType=e,t.type=n,t.lanes=o,t}function Fh(e,t,i,n){return(e=Dh(7,e,n,t)).lanes=i,e}function Bh(e,t,i,n){return(e=Dh(22,e,n,t)).elementType=Me,e.lanes=i,e.stateNode={isHidden:!1},e}function Nh(e,t,i){return(e=Dh(6,e,null,t)).lanes=i,e}function jh(e,t,i){return(t=Dh(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vh(e,t,i,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mi(0),this.expirationTimes=mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function $h(e,t,i,n,r,o,a,s,l){return e=new Vh(e,t,i,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Dh(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(o),e}function Uh(e){if(!e)return ko;e:{if(Ut(e=e._reactInternals)!==e||1!==e.tag)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ae(171))}if(1===e.tag){var i=e.type;if(Lo(i))return Fo(e,i,t)}return t}function Wh(e,t,i,n,r,o,a,s,l){return(e=$h(i,n,!0,e,0,o,0,s,l)).context=Uh(null),i=e.current,(o=Ma(n=th(),r=ih(i))).callback=null!=t?t:null,Pa(i,o,r),e.current.lanes=r,vi(e,r,n),rh(e,n),e}function zh(e,t,i,n){var r=t.current,o=th(),a=ih(r);return i=Uh(i),null===t.context?t.context=i:t.pendingContext=i,(t=Ma(o,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Pa(r,t,a))&&(nh(e,r,a,o),Fa(e,r,a)),a}function Hh(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Yh(e,t){Gh(e,t),(e=e.alternate)&&Gh(e,t)}Cc=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ro.current)yl=!0;else{if(0==(e.lanes&i)&&0==(128&t.flags))return yl=!1,function(e,t,i){switch(t.tag){case 3:Rl(t),pa();break;case 5:as(t);break;case 1:Lo(t.type)&&Bo(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;Io(_a,n._currentValue),n._currentValue=r;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Io(ls,1&ls.current),t.flags|=128,null):0!=(i&t.child.childLanes)?Nl(e,t,i):(Io(ls,1&ls.current),null!==(e=Hl(e,t,i))?e.sibling:null);Io(ls,1&ls.current);break;case 19:if(n=0!=(i&t.childLanes),0!=(128&e.flags)){if(n)return Wl(e,t,i);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Io(ls,ls.current),n)break;return null;case 22:case 23:return t.lanes=0,Tl(e,t,i)}return Hl(e,t,i)}(e,t,i);yl=0!=(131072&e.flags)}else yl=!1,oa&&0!=(1048576&t.flags)&&ea(t,Yo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;zl(e,t),e=t.pendingProps;var r=Do(t,Oo.current);Ta(t,i),r=Cs(null,t,n,e,r,i);var o=Ts();return t.flags|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lo(n)?(o=!0,Bo(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Da(t),r.updater=Ua,t.stateNode=r,r._reactInternals=t,Ga(t,n,e,i),t=Ol(null,t,n,!0,o,i)):(t.tag=0,oa&&o&&ta(t),wl(null,t,r,i),t=t.child),t;case 16:n=t.elementType;e:{switch(zl(e,t),e=t.pendingProps,n=(r=n._init)(n._payload),t.type=n,r=t.tag=function(e){if("function"==typeof e)return Lh(e)?1:0;if(null!=e){if((e=e.$$typeof)===Oe)return 11;if(e===De)return 14}return 2}(n),e=va(n,e),r){case 0:t=Il(null,t,n,e,i);break e;case 1:t=kl(null,t,n,e,i);break e;case 11:t=xl(null,t,n,e,i);break e;case 14:t=Sl(null,t,n,va(n.type,e),i);break e}throw Error(ae(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,Il(e,t,n,r=t.elementType===n?r:va(n,r),i);case 1:return n=t.type,r=t.pendingProps,kl(e,t,n,r=t.elementType===n?r:va(n,r),i);case 3:e:{if(Rl(t),null===e)throw Error(ae(387));n=t.pendingProps,r=(o=t.memoizedState).element,La(e,t),Na(t,n,null,i);var a=t.memoizedState;if(n=a.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Al(e,t,n,i,r=hl(Error(ae(423)),t));break e}if(n!==r){t=Al(e,t,n,i,r=hl(Error(ae(424)),t));break e}for(ra=co(t.stateNode.containerInfo.firstChild),na=t,oa=!0,aa=null,i=Ja(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(pa(),n===r){t=Hl(e,t,i);break e}wl(e,t,n,i)}t=t.child}return t;case 5:return as(t),null===e&&ha(t),n=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,io(n,r)?a=null:null!==o&&io(n,o)&&(t.flags|=32),El(e,t),wl(e,t,a,i),t.child;case 6:return null===e&&ha(t),null;case 13:return Nl(e,t,i);case 4:return rs(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Za(t,null,n,i):wl(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,xl(e,t,n,r=t.elementType===n?r:va(n,r),i);case 7:return wl(e,t,t.pendingProps,i),t.child;case 8:case 12:return wl(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,Io(_a,n._currentValue),n._currentValue=a,null!==o)if(sr(o.value,a)){if(o.children===r.children&&!Ro.current){t=Hl(e,t,i);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){a=o.child;for(var l=s.firstContext;null!==l;){if(l.context===n){if(1===o.tag){(l=Ma(-1,i&-i)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=i,null!==(l=o.alternate)&&(l.lanes|=i),Ca(o.return,i,t),s.lanes|=i;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(ae(341));a.lanes|=i,null!==(s=a.alternate)&&(s.lanes|=i),Ca(a,i,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wl(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,Ta(t,i),n=n(r=Ea(r)),t.flags|=1,wl(e,t,n,i),t.child;case 14:return r=va(n=t.type,t.pendingProps),Sl(e,t,n,r=va(n.type,r),i);case 15:return Cl(e,t,t.type,t.pendingProps,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:va(n,r),zl(e,t),t.tag=1,Lo(n)?(e=!0,Bo(t)):e=!1,Ta(t,i),za(t,n,r),Ga(t,n,r,i),Ol(null,t,n,!0,e,i);case 19:return Wl(e,t,i);case 22:return Tl(e,t,i)}throw Error(ae(156,t.tag))};var Xh="function"==typeof reportError?reportError:function(e){console.error(e)};function qh(e){this._internalRoot=e}function Kh(e){this._internalRoot=e}function Zh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qh(){}function eu(e,t,i,n,r){var o=i._reactRootContainer;if(o){var a=o;if("function"==typeof r){var s=r;r=function(){var e=Hh(a);s.call(e)}}zh(t,a,e,r)}else a=function(e,t,i,n,r){if(r){if("function"==typeof n){var o=n;n=function(){var e=Hh(a);o.call(e)}}var a=Wh(t,n,e,0,null,!1,0,"",Qh);return e._reactRootContainer=a,e[go]=a.current,Ur(8===e.nodeType?e.parentNode:e),uh(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"==typeof n){var s=n;n=function(){var e=Hh(l);s.call(e)}}var l=$h(e,0,!1,null,0,!1,0,"",Qh);return e._reactRootContainer=l,e[go]=l.current,Ur(8===e.nodeType?e.parentNode:e),uh((function(){zh(t,l,i,n)})),l}(i,t,e,r,n);return Hh(a)}Kh.prototype.render=qh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ae(409));zh(e,t,null,null)},Kh.prototype.unmount=qh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uh((function(){zh(null,e,null,null)})),t[go]=null}},Kh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ci();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Li.length&&0!==t&&t<Li[i].priority;i++);Li.splice(i,0,e),0===i&&Bi(e)}},wi=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=ui(t.pendingLanes);0!==i&&(_i(t,1|i),rh(t,Zt()),0==(6&Oc)&&(Wc=Zt()+500,Wo()))}break;case 13:uh((function(){var t=Ra(e,1);if(null!==t){var i=th();nh(t,e,1,i)}})),Yh(e,1)}},xi=function(e){if(13===e.tag){var t=Ra(e,134217728);if(null!==t)nh(t,e,134217728,th());Yh(e,134217728)}},Si=function(e){if(13===e.tag){var t=ih(e),i=Ra(e,t);if(null!==i)nh(i,e,t,th());Yh(e,t)}},Ci=function(){return bi},Ti=function(e,t){var i=bi;try{return bi=e,t()}finally{bi=i}},xt=function(e,t,i){switch(t){case"input":if(Qe(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=xo(n);if(!r)throw Error(ae(90));Xe(n),Qe(n,r)}}}break;case"textarea":at(e,i);break;case"select":null!=(t=i.value)&&nt(e,!!i.multiple,t,!1)}},kt=hh,Ot=uh;var tu={usingClientEntryPoint:!1,Events:[yo,wo,xo,Et,It,hh]},iu={findFiberByHostInstance:bo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ht(e))?null:e.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ri=ru.inject(nu),oi=ru}catch(gy){}}ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,ee.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zh(t))throw Error(ae(200));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Se,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},ee.createRoot=function(e,t){if(!Zh(e))throw Error(ae(299));var i=!1,n="",r=Xh;return null!=t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=$h(e,1,!1,null,0,i,0,n,r),e[go]=t.current,Ur(8===e.nodeType?e.parentNode:e),new qh(t)},ee.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ae(188));throw e=Object.keys(e).join(","),Error(ae(268,e))}return e=null===(e=Ht(t))?null:e.stateNode},ee.flushSync=function(e){return uh(e)},ee.hydrate=function(e,t,i){if(!Jh(t))throw Error(ae(200));return eu(null,e,t,!0,i)},ee.hydrateRoot=function(e,t,i){if(!Zh(e))throw Error(ae(405));var n=null!=i&&i.hydratedSources||null,r=!1,o="",a=Xh;if(null!=i&&(!0===i.unstable_strictMode&&(r=!0),void 0!==i.identifierPrefix&&(o=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),t=Wh(t,null,e,1,null!=i?i:null,r,0,o,a),e[go]=t.current,Ur(e),n)for(e=0;e<n.length;e++)r=(r=(i=n[e])._getVersion)(i._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[i,r]:t.mutableSourceEagerHydrationData.push(i,r);return new Kh(t)},ee.render=function(e,t,i){if(!Jh(t))throw Error(ae(200));return eu(null,e,t,!1,i)},ee.unmountComponentAtNode=function(e){if(!Jh(e))throw Error(ae(40));return!!e._reactRootContainer&&(uh((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[go]=null}))})),!0)},ee.unstable_batchedUpdates=hh,ee.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!Jh(i))throw Error(ae(200));if(null==e||void 0===e._reactInternals)throw Error(ae(38));return eu(e,t,i,!1,n)},ee.version="18.2.0-next-9e3b772b8-20220608",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Q.exports=ee;var ou=Q.exports;const au=n(ou);var su,lu=ou;function cu(e,t){return cu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cu(e,t)}function hu(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,cu(e,t)}su=lu.createRoot,lu.hydrateRoot;var uu={exports:{}};function du(){}function fu(){}fu.resetWarningCache=du;uu.exports=function(){function e(e,t,i,n,r,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:fu,resetWarningCache:du};return i.PropTypes=i,i}();const pu=n(uu.exports);function gu(){return gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},gu.apply(this,arguments)}function mu(e){return"/"===e.charAt(0)}function vu(e,t){for(var i=t,n=i+1,r=e.length;n<r;i+=1,n+=1)e[i]=e[n];e.pop()}function _u(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}function bu(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every((function(e,i){return bu(e,t[i])}));if("object"==typeof e||"object"==typeof t){var i=_u(e),n=_u(t);return i!==e||n!==t?bu(i,n):Object.keys(Object.assign({},e,t)).every((function(i){return bu(e[i],t[i])}))}return!1}var yu=!0,wu="Invariant failed";function xu(e,t){if(!e){if(yu)throw new Error(wu);var i="function"==typeof t?t():t,n=i?"".concat(wu,": ").concat(i):wu;throw new Error(n)}}function Su(e){return"/"===e.charAt(0)?e:"/"+e}function Cu(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function Tu(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function Eu(e){var t=e.pathname,i=e.search,n=e.hash,r=t||"/";return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function Iu(e,t,i,n){var r;"string"==typeof e?(r=function(e){var t=e||"/",i="",n="",r=t.indexOf("#");-1!==r&&(n=t.substr(r),t=t.substr(0,r));var o=t.indexOf("?");return-1!==o&&(i=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===i?"":i,hash:"#"===n?"":n}}(e),r.state=t):(void 0===(r=gu({},e)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(cy){throw cy instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):cy}return i&&(r.key=i),n?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=function(e,t){void 0===t&&(t="");var i,n=e&&e.split("/")||[],r=t&&t.split("/")||[],o=e&&mu(e),a=t&&mu(t),s=o||a;if(e&&mu(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";if(r.length){var l=r[r.length-1];i="."===l||".."===l||""===l}else i=!1;for(var c=0,h=r.length;h>=0;h--){var u=r[h];"."===u?vu(r,h):".."===u?(vu(r,h),c++):c&&(vu(r,h),c--)}if(!s)for(;c--;c)r.unshift("..");!s||""===r[0]||r[0]&&mu(r[0])||r.unshift("");var d=r.join("/");return i&&"/"!==d.substr(-1)&&(d+="/"),d}(r.pathname,n.pathname)):r.pathname=n.pathname:r.pathname||(r.pathname="/"),r}function ku(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&bu(e.state,t.state)}function Ou(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,i,n,r){if(null!=e){var o="function"==typeof e?e(t,i):e;"string"==typeof o?"function"==typeof n?n(o,r):r(!0):r(!1!==o)}else r(!0)},appendListener:function(e){var i=!0;function n(){i&&e.apply(void 0,arguments)}return t.push(n),function(){i=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,i)}))}}}var Ru=!("undefined"==typeof window||!window.document||!window.document.createElement);function Au(e,t){t(window.confirm(e))}var Du="popstate",Lu="hashchange";function Mu(){try{return window.history.state||{}}catch(cy){return{}}}function Pu(e){void 0===e&&(e={}),Ru||xu(!1);var t=window.history,i=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),n=!(-1===window.navigator.userAgent.indexOf("Trident")),r=e,o=r.forceRefresh,a=void 0!==o&&o,s=r.getUserConfirmation,l=void 0===s?Au:s,c=r.keyLength,h=void 0===c?6:c,u=e.basename?Tu(Su(e.basename)):"";function d(e){var t=e||{},i=t.key,n=t.state,r=window.location,o=r.pathname+r.search+r.hash;return u&&(o=Cu(o,u)),Iu(o,n,i)}function f(){return Math.random().toString(36).substr(2,h)}var p=Ou();function g(e){gu(I,e),I.length=t.length,p.notifyListeners(I.location,I.action)}function m(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||b(d(e.state))}function v(){b(d(Mu()))}var _=!1;function b(e){if(_)_=!1,g();else{p.confirmTransitionTo(e,"POP",l,(function(t){t?g({action:"POP",location:e}):function(e){var t=I.location,i=w.indexOf(t.key);-1===i&&(i=0);var n=w.indexOf(e.key);-1===n&&(n=0);var r=i-n;r&&(_=!0,S(r))}(e)}))}}var y=d(Mu()),w=[y.key];function x(e){return u+Eu(e)}function S(e){t.go(e)}var C=0;function T(e){1===(C+=e)&&1===e?(window.addEventListener(Du,m),n&&window.addEventListener(Lu,v)):0===C&&(window.removeEventListener(Du,m),n&&window.removeEventListener(Lu,v))}var E=!1;var I={length:t.length,action:"POP",location:y,createHref:x,push:function(e,n){var r="PUSH",o=Iu(e,n,f(),I.location);p.confirmTransitionTo(o,r,l,(function(e){if(e){var n=x(o),s=o.key,l=o.state;if(i)if(t.pushState({key:s,state:l},null,n),a)window.location.href=n;else{var c=w.indexOf(I.location.key),h=w.slice(0,c+1);h.push(o.key),w=h,g({action:r,location:o})}else window.location.href=n}}))},replace:function(e,n){var r="REPLACE",o=Iu(e,n,f(),I.location);p.confirmTransitionTo(o,r,l,(function(e){if(e){var n=x(o),s=o.key,l=o.state;if(i)if(t.replaceState({key:s,state:l},null,n),a)window.location.replace(n);else{var c=w.indexOf(I.location.key);-1!==c&&(w[c]=o.key),g({action:r,location:o})}else window.location.replace(n)}}))},go:S,goBack:function(){S(-1)},goForward:function(){S(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return E||(T(1),E=!0),function(){return E&&(E=!1,T(-1)),t()}},listen:function(e){var t=p.appendListener(e);return T(1),function(){T(-1),t()}}};return I}var Fu={exports:{}},Bu=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};Fu.exports=Yu,Fu.exports.parse=ju,Fu.exports.compile=function(e,t){return $u(ju(e,t),t)},Fu.exports.tokensToFunction=$u,Fu.exports.tokensToRegExp=Gu;var Nu=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function ju(e,t){for(var i,n=[],r=0,o=0,a="",s=t&&t.delimiter||"/";null!=(i=Nu.exec(e));){var l=i[0],c=i[1],h=i.index;if(a+=e.slice(o,h),o=h+l.length,c)a+=c[1];else{var u=e[o],d=i[2],f=i[3],p=i[4],g=i[5],m=i[6],v=i[7];a&&(n.push(a),a="");var _=null!=d&&null!=u&&u!==d,b="+"===m||"*"===m,y="?"===m||"*"===m,w=i[2]||s,x=p||g;n.push({name:f||r++,prefix:d||"",delimiter:w,optional:y,repeat:b,partial:_,asterisk:!!v,pattern:x?Wu(x):v?".*":"[^"+Uu(w)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&n.push(a),n}function Vu(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function $u(e,t){for(var i=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(i[n]=new RegExp("^(?:"+e[n].pattern+")$",Hu(t)));return function(t,n){for(var r="",o=t||{},a=(n||{}).pretty?Vu:encodeURIComponent,s=0;s<e.length;s++){var l=e[s];if("string"!=typeof l){var c,h=o[l.name];if(null==h){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Bu(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var u=0;u<h.length;u++){if(c=a(h[u]),!i[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");r+=(0===u?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):a(h),!i[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');r+=l.prefix+c}}else r+=l}return r}}function Uu(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Wu(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function zu(e,t){return e.keys=t,e}function Hu(e){return e&&e.sensitive?"":"i"}function Gu(e,t,i){Bu(t)||(i=t||i,t=[]);for(var n=(i=i||{}).strict,r=!1!==i.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=Uu(s);else{var l=Uu(s.prefix),c="(?:"+s.pattern+")";t.push(s),s.repeat&&(c+="(?:"+l+c+")*"),o+=c=s.optional?s.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var h=Uu(i.delimiter||"/"),u=o.slice(-h.length)===h;return n||(o=(u?o.slice(0,-h.length):o)+"(?:"+h+"(?=$))?"),o+=r?"$":n&&u?"":"(?="+h+"|$)",zu(new RegExp("^"+o,Hu(i)),t)}function Yu(e,t,i){return Bu(t)||(i=t||i,t=[]),i=i||{},e instanceof RegExp?function(e,t){var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return zu(e,t)}(e,t):Bu(e)?function(e,t,i){for(var n=[],r=0;r<e.length;r++)n.push(Yu(e[r],t,i).source);return zu(new RegExp("(?:"+n.join("|")+")",Hu(i)),t)}(e,t,i):function(e,t,i){return Gu(ju(e,i),t,i)}(e,t,i)}const Xu=n(Fu.exports);var qu={},Ku="function"==typeof Symbol&&Symbol.for,Zu=Ku?Symbol.for("react.element"):60103,Ju=Ku?Symbol.for("react.portal"):60106,Qu=Ku?Symbol.for("react.fragment"):60107,ed=Ku?Symbol.for("react.strict_mode"):60108,td=Ku?Symbol.for("react.profiler"):60114,id=Ku?Symbol.for("react.provider"):60109,nd=Ku?Symbol.for("react.context"):60110,rd=Ku?Symbol.for("react.async_mode"):60111,od=Ku?Symbol.for("react.concurrent_mode"):60111,ad=Ku?Symbol.for("react.forward_ref"):60112,sd=Ku?Symbol.for("react.suspense"):60113,ld=Ku?Symbol.for("react.suspense_list"):60120,cd=Ku?Symbol.for("react.memo"):60115,hd=Ku?Symbol.for("react.lazy"):60116,ud=Ku?Symbol.for("react.block"):60121,dd=Ku?Symbol.for("react.fundamental"):60117,fd=Ku?Symbol.for("react.responder"):60118,pd=Ku?Symbol.for("react.scope"):60119;
/** @license React v16.13.1
             * react-is.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */function gd(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Zu:switch(e=e.type){case rd:case od:case Qu:case td:case ed:case sd:return e;default:switch(e=e&&e.$$typeof){case nd:case ad:case hd:case cd:case id:return e;default:return t}}case Ju:return t}}}function md(e){return gd(e)===od}function vd(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}qu.AsyncMode=rd,qu.ConcurrentMode=od,qu.ContextConsumer=nd,qu.ContextProvider=id,qu.Element=Zu,qu.ForwardRef=ad,qu.Fragment=Qu,qu.Lazy=hd,qu.Memo=cd,qu.Portal=Ju,qu.Profiler=td,qu.StrictMode=ed,qu.Suspense=sd,qu.isAsyncMode=function(e){return md(e)||gd(e)===rd},qu.isConcurrentMode=md,qu.isContextConsumer=function(e){return gd(e)===nd},qu.isContextProvider=function(e){return gd(e)===id},qu.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Zu},qu.isForwardRef=function(e){return gd(e)===ad},qu.isFragment=function(e){return gd(e)===Qu},qu.isLazy=function(e){return gd(e)===hd},qu.isMemo=function(e){return gd(e)===cd},qu.isPortal=function(e){return gd(e)===Ju},qu.isProfiler=function(e){return gd(e)===td},qu.isStrictMode=function(e){return gd(e)===ed},qu.isSuspense=function(e){return gd(e)===sd},qu.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Qu||e===od||e===td||e===ed||e===sd||e===ld||"object"==typeof e&&null!==e&&(e.$$typeof===hd||e.$$typeof===cd||e.$$typeof===id||e.$$typeof===nd||e.$$typeof===ad||e.$$typeof===dd||e.$$typeof===fd||e.$$typeof===pd||e.$$typeof===ud)},qu.typeOf=gd;var _d={exports:{}},bd={},yd="function"==typeof Symbol&&Symbol.for,wd=yd?Symbol.for("react.element"):60103,xd=yd?Symbol.for("react.portal"):60106,Sd=yd?Symbol.for("react.fragment"):60107,Cd=yd?Symbol.for("react.strict_mode"):60108,Td=yd?Symbol.for("react.profiler"):60114,Ed=yd?Symbol.for("react.provider"):60109,Id=yd?Symbol.for("react.context"):60110,kd=yd?Symbol.for("react.async_mode"):60111,Od=yd?Symbol.for("react.concurrent_mode"):60111,Rd=yd?Symbol.for("react.forward_ref"):60112,Ad=yd?Symbol.for("react.suspense"):60113,Dd=yd?Symbol.for("react.suspense_list"):60120,Ld=yd?Symbol.for("react.memo"):60115,Md=yd?Symbol.for("react.lazy"):60116,Pd=yd?Symbol.for("react.block"):60121,Fd=yd?Symbol.for("react.fundamental"):60117,Bd=yd?Symbol.for("react.responder"):60118,Nd=yd?Symbol.for("react.scope"):60119;function jd(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case wd:switch(e=e.type){case kd:case Od:case Sd:case Td:case Cd:case Ad:return e;default:switch(e=e&&e.$$typeof){case Id:case Rd:case Md:case Ld:case Ed:return e;default:return t}}case xd:return t}}}function Vd(e){return jd(e)===Od}bd.AsyncMode=kd,bd.ConcurrentMode=Od,bd.ContextConsumer=Id,bd.ContextProvider=Ed,bd.Element=wd,bd.ForwardRef=Rd,bd.Fragment=Sd,bd.Lazy=Md,bd.Memo=Ld,bd.Portal=xd,bd.Profiler=Td,bd.StrictMode=Cd,bd.Suspense=Ad,bd.isAsyncMode=function(e){return Vd(e)||jd(e)===kd},bd.isConcurrentMode=Vd,bd.isContextConsumer=function(e){return jd(e)===Id},bd.isContextProvider=function(e){return jd(e)===Ed},bd.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===wd},bd.isForwardRef=function(e){return jd(e)===Rd},bd.isFragment=function(e){return jd(e)===Sd},bd.isLazy=function(e){return jd(e)===Md},bd.isMemo=function(e){return jd(e)===Ld},bd.isPortal=function(e){return jd(e)===xd},bd.isProfiler=function(e){return jd(e)===Td},bd.isStrictMode=function(e){return jd(e)===Cd},bd.isSuspense=function(e){return jd(e)===Ad},bd.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Sd||e===Od||e===Td||e===Cd||e===Ad||e===Dd||"object"==typeof e&&null!==e&&(e.$$typeof===Md||e.$$typeof===Ld||e.$$typeof===Ed||e.$$typeof===Id||e.$$typeof===Rd||e.$$typeof===Fd||e.$$typeof===Bd||e.$$typeof===Nd||e.$$typeof===Pd)},bd.typeOf=jd,_d.exports=bd;var $d=_d.exports,Ud={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Wd={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},zd={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Hd={};function Gd(e){return $d.isMemo(e)?zd:Hd[e.$$typeof]||Ud}Hd[$d.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Hd[$d.Memo]=zd;var Yd=Object.defineProperty,Xd=Object.getOwnPropertyNames,qd=Object.getOwnPropertySymbols,Kd=Object.getOwnPropertyDescriptor,Zd=Object.getPrototypeOf,Jd=Object.prototype;var Qd=function e(t,i,n){if("string"!=typeof i){if(Jd){var r=Zd(i);r&&r!==Jd&&e(t,r,n)}var o=Xd(i);qd&&(o=o.concat(qd(i)));for(var a=Gd(t),s=Gd(i),l=0;l<o.length;++l){var c=o[l];if(!(Wd[c]||n&&n[c]||s&&s[c]||a&&a[c])){var h=Kd(i,c);try{Yd(t,c,h)}catch(cy){}}}}return t};const ef=n(Qd);var tf=1073741823,nf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};var rf=U.createContext||function(e,t){var i,n,r,o="__create-react-context-"+((nf[r="__global_unique_id__"]=(nf[r]||0)+1)+"__"),a=function(e){function i(){for(var t,i,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).emitter=(i=t.props.value,n=[],{on:function(e){n.push(e)},off:function(e){n=n.filter((function(t){return t!==e}))},get:function(){return i},set:function(e,t){i=e,n.forEach((function(e){return e(i,t)}))}}),t}hu(i,e);var n=i.prototype;return n.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},n.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var i,n=this.props.value,r=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)?(i="function"==typeof t?t(n,r):tf,0!==(i|=0)&&this.emitter.set(e.value,i)):i=0}},n.render=function(){return this.props.children},i}(U.Component);a.childContextTypes=((i={})[o]=pu.object.isRequired,i);var s=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,i){0!=((0|e.observedBits)&i)&&e.setState({value:e.getValue()})},e}hu(i,t);var n=i.prototype;return n.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?tf:t},n.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?tf:e},n.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},n.getValue=function(){return this.context[o]?this.context[o].get():e},n.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},i}(U.Component);return s.contextTypes=((n={})[o]=pu.object,n),{Provider:a,Consumer:s}},of=function(e){var t=rf();return t.displayName=e,t},af=of("Router-History"),sf=of("Router"),lf=function(e){function t(t){var i;return(i=e.call(this,t)||this).state={location:t.history.location},i._isMounted=!1,i._pendingLocation=null,t.staticContext||(i.unlisten=t.history.listen((function(e){i._pendingLocation=e}))),i}hu(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var i=t.prototype;return i.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},i.render=function(){return U.createElement(sf.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},U.createElement(af.Provider,{children:this.props.children||null,value:this.props.history}))},t}(U.Component);U.Component;var cf=function(e){function t(){return e.apply(this,arguments)||this}hu(t,e);var i=t.prototype;return i.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},i.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},i.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},i.render=function(){return null},t}(U.Component),hf={},uf=1e4,df=0;function ff(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(hf[e])return hf[e];var t=Xu.compile(e);return df<uf&&(hf[e]=t,df++),t}(e)(t,{pretty:!0})}function pf(e){var t=e.computedMatch,i=e.to,n=e.push,r=void 0!==n&&n;return U.createElement(sf.Consumer,null,(function(e){e||xu(!1);var n=e.history,o=e.staticContext,a=r?n.push:n.replace,s=Iu(t?"string"==typeof i?ff(i,t.params):gu({},i,{pathname:ff(i.pathname,t.params)}):i);return o?(a(s),null):U.createElement(cf,{onMount:function(){a(s)},onUpdate:function(e,t){var i=Iu(t.to);ku(i,gu({},s,{key:i.key}))||a(s)},to:i})}))}var gf={},mf=1e4,vf=0;function _f(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var i=t,n=i.path,r=i.exact,o=void 0!==r&&r,a=i.strict,s=void 0!==a&&a,l=i.sensitive,c=void 0!==l&&l;return[].concat(n).reduce((function(t,i){if(!i&&""!==i)return null;if(t)return t;var n=function(e,t){var i=""+t.end+t.strict+t.sensitive,n=gf[i]||(gf[i]={});if(n[e])return n[e];var r=[],o={regexp:Xu(e,r,t),keys:r};return vf<mf&&(n[e]=o,vf++),o}(i,{end:o,strict:s,sensitive:c}),r=n.regexp,a=n.keys,l=r.exec(e);if(!l)return null;var h=l[0],u=l.slice(1),d=e===h;return o&&!d?null:{path:i,url:"/"===i&&""===h?"/":h,isExact:d,params:a.reduce((function(e,t,i){return e[t.name]=u[i],e}),{})}}),null)}var bf=function(e){function t(){return e.apply(this,arguments)||this}return hu(t,e),t.prototype.render=function(){var e=this;return U.createElement(sf.Consumer,null,(function(t){t||xu(!1);var i=e.props.location||t.location,n=gu({},t,{location:i,match:e.props.computedMatch?e.props.computedMatch:e.props.path?_f(i.pathname,e.props):t.match}),r=e.props,o=r.children,a=r.component,s=r.render;return Array.isArray(o)&&function(e){return 0===U.Children.count(e)}(o)&&(o=null),U.createElement(sf.Provider,{value:n},n.match?o?"function"==typeof o?o(n):o:a?U.createElement(a,n):s?s(n):null:"function"==typeof o?o(n):null)}))},t}(U.Component);U.Component,U.Component,U.useContext;const yf=function(e,t,i){return e()},wf=!0,xf=!0,Sf=!0,Cf=!1,Tf=!1;let Ef,If,kf,Of=!1,Rf=!1,Af=!1,Df=!1,Lf=null,Mf=!1;const Pf=!0,Ff="http://www.w3.org/1999/xlink",Bf={},Nf=e=>"object"===(e=typeof e)||"function"===e;const jf=(e,t,...i)=>{let n=null,r=null,o=null,a=!1,s=!1;const l=[],c=t=>{for(let i=0;i<t.length;i++)n=t[i],Array.isArray(n)?c(n):null!=n&&"boolean"!=typeof n&&((a="function"!=typeof e&&!Nf(n))&&(n=String(n)),a&&s?l[l.length-1].$text$+=n:l.push(a?Vf(null,n):n),s=a)};if(c(i),t){t.key&&(r=t.key),t.name&&(o=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,l,Uf);const h=Vf(e,null);return h.$attrs$=t,l.length>0&&(h.$children$=l),h.$key$=r,h.$name$=o,h},Vf=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return i},$f={},Uf={forEach:(e,t)=>e.map(Wf).forEach(t),map:(e,t)=>e.map(Wf).map(t).map(zf)},Wf=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),zf=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),jf(e.vtag,t,...e.vchildren||[])}const t=Vf(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Hf=(e,t,i)=>{const n=e;return{emit:e=>Gf(n,t,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:e})}},Gf=(e,t,i)=>{const n=$p.ce(t,i);return e.dispatchEvent(n),n},Yf=new WeakMap,Xf=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,n=t.$flags$,r=(t.$tagName$,()=>{}),o=((e,t,i,n)=>{var r;let o=qf(t,i);const a=Fp.get(o);if(e=11===e.nodeType?e:jp,a)if("string"==typeof a){e=e.head||e;let t,i=Yf.get(e);if(i||Yf.set(e,i=new Set),!i.has(o)){{t=jp.createElement("style"),t.innerHTML=a;const i=null!==(r=$p.$nonce$)&&void 0!==r?r:function(e){var t,i,n;return null!==(n=null===(i=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===i?void 0:i.getAttribute("content"))&&void 0!==n?n:void 0}(jp);null!=i&&t.setAttribute("nonce",i),e.insertBefore(t,e.querySelector("link"))}i&&i.add(o)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return o})(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);10&n&&(i["s-sc"]=o,i.classList.add(o+"-h"),2&n&&i.classList.add(o+"-s")),r()},qf=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),Kf=(e,t,i,n,r,o)=>{if(i!==n){let a=Mp(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,r=Jf(i),o=Jf(n);t.remove(...r.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!r.includes(e))))}else if("style"===t){for(const t in i)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)i&&n[t]===i[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=Nf(n);if((a||l&&null!==n)&&!r)try{if(e.tagName.includes("-"))e[t]=n;else{const r=null==n?"":n;"list"===t?a=!1:null!=i&&e[t]==r||(e[t]=r)}}catch(cy){}let c=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,c=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(Ff,t):e.removeAttribute(t)):(!a||4&o||r)&&!l&&(n=!0===n?"":n,c?e.setAttributeNS(Ff,t,n):e.setAttribute(t,n))}else t="-"===t[2]?t.slice(3):Mp(Np,s)?s.slice(2):s[2]+t.slice(3),i&&$p.rel(e,t,i,!1),n&&$p.ael(e,t,n,!1)}},Zf=/\s/,Jf=e=>e?e.split(Zf):[],Qf=(e,t,i,n)=>{const r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||Bf,a=t.$attrs$||Bf;for(n in o)n in a||Kf(r,n,o[n],void 0,i,t.$flags$);for(n in a)Kf(r,n,o[n],a[n],i,t.$flags$)},ep=(e,t,i,n)=>{const r=t.$children$[i];let o,a,s,l=0;if(Of||(Af=!0,"slot"===r.$tag$&&(Ef&&n.classList.add(Ef+"-s"),r.$flags$|=r.$children$?2:1)),null!==r.$text$)o=r.$elm$=jp.createTextNode(r.$text$);else if(1&r.$flags$)o=r.$elm$=jp.createTextNode("");else{if(Df||(Df="svg"===r.$tag$),o=r.$elm$=jp.createElementNS(Df?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&r.$flags$?"slot-fb":r.$tag$),Df&&"foreignObject"===r.$tag$&&(Df=!1),Qf(null,r,Df),(e=>null!=e)(Ef)&&o["s-si"]!==Ef&&o.classList.add(o["s-si"]=Ef),r.$children$)for(l=0;l<r.$children$.length;++l)a=ep(e,r,l,o),a&&o.appendChild(a);"svg"===r.$tag$?Df=!1:"foreignObject"===o.tagName&&(Df=!0)}return o["s-hn"]=kf,3&r.$flags$&&(o["s-sr"]=!0,o["s-cr"]=If,o["s-sn"]=r.$name$||"",s=e&&e.$children$&&e.$children$[i],s&&s.$tag$===r.$tag$&&e.$elm$&&tp(e.$elm$,!1)),o},tp=(e,t)=>{$p.$flags$|=1;const i=e.childNodes;for(let n=i.length-1;n>=0;n--){const e=i[n];e["s-hn"]!==kf&&e["s-ol"]&&(ap(e).insertBefore(e,op(e)),e["s-ol"].remove(),e["s-ol"]=void 0,Af=!0),t&&tp(e,t)}$p.$flags$&=-2},ip=(e,t,i,n,r,o)=>{let a,s=e["s-cr"]&&e["s-cr"].parentNode||e;for(s.shadowRoot&&s.tagName===kf&&(s=s.shadowRoot);r<=o;++r)n[r]&&(a=ep(null,i,r,e),a&&(n[r].$elm$=a,s.insertBefore(a,op(t))))},np=(e,t,i)=>{for(let n=t;n<=i;++n){const t=e[n];if(t){const e=t.$elm$;dp(t),e&&(Rf=!0,e["s-ol"]?e["s-ol"].remove():tp(e,!0),e.remove())}}},rp=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),op=e=>e&&e["s-ol"]||e,ap=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,sp=(e,t)=>{const i=t.$elm$=e.$elm$,n=e.$children$,r=t.$children$,o=t.$tag$,a=t.$text$;let s;null===a?(Df="svg"===o||"foreignObject"!==o&&Df,"slot"===o||Qf(e,t,Df),null!==n&&null!==r?((e,t,i,n)=>{let r,o,a=0,s=0,l=0,c=0,h=t.length-1,u=t[0],d=t[h],f=n.length-1,p=n[0],g=n[f];for(;a<=h&&s<=f;)if(null==u)u=t[++a];else if(null==d)d=t[--h];else if(null==p)p=n[++s];else if(null==g)g=n[--f];else if(rp(u,p))sp(u,p),u=t[++a],p=n[++s];else if(rp(d,g))sp(d,g),d=t[--h],g=n[--f];else if(rp(u,g))"slot"!==u.$tag$&&"slot"!==g.$tag$||tp(u.$elm$.parentNode,!1),sp(u,g),e.insertBefore(u.$elm$,d.$elm$.nextSibling),u=t[++a],g=n[--f];else if(rp(d,p))"slot"!==u.$tag$&&"slot"!==g.$tag$||tp(d.$elm$.parentNode,!1),sp(d,p),e.insertBefore(d.$elm$,u.$elm$),d=t[--h],p=n[++s];else{for(l=-1,c=a;c<=h;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===p.$key$){l=c;break}l>=0?(o=t[l],o.$tag$!==p.$tag$?r=ep(t&&t[s],i,l,e):(sp(o,p),t[l]=void 0,r=o.$elm$),p=n[++s]):(r=ep(t&&t[s],i,s,e),p=n[++s]),r&&ap(u.$elm$).insertBefore(r,op(u.$elm$))}a>h?ip(e,null==n[f+1]?null:n[f+1].$elm$,i,n,s,f):s>f&&np(t,a,h)})(i,n,t,r):null!==r?(null!==e.$text$&&(i.textContent=""),ip(i,null,t,r,0,r.length-1)):null!==n&&np(n,0,n.length-1),Df&&"svg"===o&&(Df=!1)):(s=i["s-cr"])?s.parentNode.textContent=a:e.$text$!==a&&(i.data=a)},lp=e=>{const t=e.childNodes;let i,n,r,o,a,s;for(n=0,r=t.length;n<r;n++)if(i=t[n],1===i.nodeType){if(i["s-sr"])for(a=i["s-sn"],i.hidden=!1,o=0;o<r;o++)if(s=t[o].nodeType,t[o]["s-hn"]!==i["s-hn"]||""!==a){if(1===s&&a===t[o].getAttribute("slot")){i.hidden=!0;break}}else if(1===s||3===s&&""!==t[o].textContent.trim()){i.hidden=!0;break}lp(i)}},cp=[],hp=e=>{let t,i,n,r,o,a,s=0;const l=e.childNodes,c=l.length;for(;s<c;s++){if(t=l[s],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(n=i.parentNode.childNodes,r=t["s-sn"],a=n.length-1;a>=0;a--)i=n[a],i["s-cn"]||i["s-nr"]||i["s-hn"]===t["s-hn"]||(up(i,r)?(o=cp.find((e=>e.$nodeToRelocate$===i)),Rf=!0,i["s-sn"]=i["s-sn"]||r,o?o.$slotRefNode$=t:cp.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&cp.map((e=>{up(e.$nodeToRelocate$,i["s-sn"])&&(o=cp.find((e=>e.$nodeToRelocate$===i)),o&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$))}))):cp.some((e=>e.$nodeToRelocate$===i))||cp.push({$nodeToRelocate$:i}));1===t.nodeType&&hp(t)}},up=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,dp=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(dp)},fp=(e,t)=>{const i=e.$hostElement$,n=e.$cmpMeta$,r=e.$vnode$||Vf(null,null),o=(a=t)&&a.$tag$===$f?t:jf(null,null,t);var a;if(kf=i.tagName,n.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},n.$attrsToReflect$.map((([e,t])=>o.$attrs$[t]=i[e]))),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=r.$elm$=i.shadowRoot||i,Ef=i["s-sc"],If=i["s-cr"],Of=0!=(1&n.$flags$),Rf=!1,sp(r,o),$p.$flags$|=1,Af){let e,t,i,n,r,a;hp(o.$elm$);let s=0;for(;s<cp.length;s++)e=cp[s],t=e.$nodeToRelocate$,t["s-ol"]||(i=jp.createTextNode(""),i["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=i,t));for(s=0;s<cp.length;s++)if(e=cp[s],t=e.$nodeToRelocate$,e.$slotRefNode$){for(n=e.$slotRefNode$.parentNode,r=e.$slotRefNode$.nextSibling,i=t["s-ol"];i=i.previousSibling;)if(a=i["s-nr"],a&&a["s-sn"]===t["s-sn"]&&n===a.parentNode&&(a=a.nextSibling,!a||!a["s-nr"])){r=a;break}(!r&&n!==t.parentNode||t.nextSibling!==r)&&t!==r&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),n.insertBefore(t,r))}else 1===t.nodeType&&(t.hidden=!0)}Rf&&lp(o.$elm$),$p.$flags$&=-2,cp.length=0},pp=(e,t)=>{e.$flags$|=16,e.$ancestorComponent$;return Zp((()=>gp(e,t)))},gp=(e,t)=>{const i=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{}),r=i;let o;return o=wp(r,t?"componentWillLoad":"componentWillUpdate"),o=mp(o,(()=>wp(r,"componentWillRender"))),n(),mp(o,(()=>vp(e,r,t)))},mp=(e,t)=>e instanceof Promise?e.then(t):t(),vp=async(e,t,i)=>{const n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{});n["s-rc"],i&&Xf(e);const o=(e.$cmpMeta$.$tagName$,()=>{});_p(e,t,n),o(),r(),bp(e)},_p=(e,t,i)=>{try{Lf=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(wf||xf)&&(Sf||xf)&&(Cf||fp(e,t))}catch(cy){Pp(cy,e.$hostElement$)}return Lf=null,null},bp=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},i=e.$hostElement$;e.$ancestorComponent$,wp(i,"componentDidRender"),64&e.$flags$?(wp(i,"componentDidUpdate"),t()):(e.$flags$|=64,wp(i,"componentDidLoad"),t())},yp=e=>{{const t=Dp(e),i=t.$hostElement$.isConnected;return i&&2==(18&t.$flags$)&&pp(t,!1),i}},wp=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(cy){Pp(cy)}},xp=(e,t,i,n)=>{const r=Dp(e),o=e,a=r.$instanceValues$.get(t),s=r.$flags$,l=o;var c,h;c=i,h=n.$members$[t][0],i=null==c||Nf(c)?c:4&h?"false"!==c&&(""===c||!!c):2&h?parseFloat(c):1&h?String(c):c;const u=Number.isNaN(a)&&Number.isNaN(i);if(i!==a&&!u){if(r.$instanceValues$.set(t,i),n.$watchers$&&128&s){const e=n.$watchers$[t];e&&e.map((e=>{try{l[e](i,a,t)}catch(cy){Pp(cy,o)}}))}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(i,a,t))return;pp(r,!1)}}},Sp=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),n=e.prototype;i.map((([e,[i]])=>{(31&i||32&i)&&Object.defineProperty(n,e,{get(){return t=e,Dp(this).$instanceValues$.get(t);var t},set(i){xp(this,e,i,t)},configurable:!0,enumerable:!0})}));{const r=new Map;n.attributeChangedCallback=function(e,t,i){$p.jmp((()=>{const t=r.get(e);if(this.hasOwnProperty(t))i=this[t],delete this[t];else if(n.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==i)return;this[t]=(null!==i||"boolean"!=typeof this[t])&&i}))},e.observedAttributes=i.filter((([e,t])=>15&t[0])).map((([e,i])=>{const n=i[1]||e;return r.set(n,e),512&i[0]&&t.$attrsToReflect$.push([e,n]),n}))}}return e},Cp=async(e,t,i,n,r)=>{if(0==(32&t.$flags$)&&(t.$flags$|=32,r=e.constructor,customElements.whenDefined(i.$tagName$).then((()=>t.$flags$|=128)),r.style)){let n=r.style;"string"!=typeof n&&(n=n[t.$modeName$=(e=>Bp.map((t=>t(e))).find((e=>!!e)))(e)]);const o=qf(i,t.$modeName$);if(!Fp.has(o)){const e=(i.$tagName$,()=>{});((e,t,i)=>{let n=Fp.get(e);Wp&&i?(n=n||new CSSStyleSheet,"string"==typeof n?n=t:n.replaceSync(t)):n=t,Fp.set(e,n)})(o,n,!!(1&i.$flags$)),e()}}t.$ancestorComponent$;pp(t,!0)},Tp=e=>{const t=e["s-cr"]=jp.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Ep=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const n=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Lp(this,i)},connectedCallback(){(e=>{if(0==(1&$p.$flags$)){const t=Dp(e),i=t.$cmpMeta$,n=(i.$tagName$,()=>{});1&t.$flags$?(Ip(e,t,i.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&i.$flags$&&Tp(e),i.$members$&&Object.entries(i.$members$).map((([t,[i]])=>{if(31&i&&e.hasOwnProperty(t)){const i=e[t];delete e[t],e[t]=i}})),Cp(e,t,i)),n()}})(this),n&&n.call(this)},disconnectedCallback(){(e=>{if(0==(1&$p.$flags$)){const t=Dp(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&i.$flags$)})}}),e.is=i.$tagName$,Sp(e,i)},Ip=(e,t,i,n)=>{i&&i.map((([i,n,r])=>{const o=Op(e,i),a=kp(t,r),s=Rp(i);$p.ael(o,n,a,s),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>$p.rel(o,n,a,s)))}))},kp=(e,t)=>i=>{try{Tf||e.$hostElement$[t](i)}catch(cy){Pp(cy)}},Op=(e,t)=>4&t?jp:8&t?Np:16&t?jp.body:e,Rp=e=>Up?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),Ap=new WeakMap,Dp=e=>Ap.get(e),Lp=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Ip(e,i,t.$listeners$),Ap.set(e,i)},Mp=(e,t)=>t in e,Pp=(e,t)=>(0,console.error)(e,t),Fp=new Map,Bp=[],Np="undefined"!=typeof window?window:{},jp=Np.document||{head:{}},Vp=Np.HTMLElement||class{},$p={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,n)=>e.addEventListener(t,i,n),rel:(e,t,i,n)=>e.removeEventListener(t,i,n),ce:(e,t)=>new CustomEvent(e,t)},Up=(()=>{let e=!1;try{jp.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(cy){}return e})(),Wp=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(cy){}return!1})(),zp=[],Hp=[],Gp=(e,t)=>i=>{e.push(i),Mf||(Mf=!0,t&&4&$p.$flags$?qp(Xp):$p.raf(Xp))},Yp=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(cy){Pp(cy)}e.length=0},Xp=()=>{Yp(zp),Yp(Hp),(Mf=zp.length>0)&&$p.raf(Xp)},qp=e=>(e=>Promise.resolve(e))().then(e),Kp=t("r",Gp(zp,!1)),Zp=t("w",Gp(Hp,!0)),Jp=t("a",((e,t)=>{e.componentOnReady?e.componentOnReady().then((e=>t(e))):tg((()=>t(e)))})),Qp=(e,t=[])=>{const i={};return t.forEach((t=>{if(e.hasAttribute(t)){null!==e.getAttribute(t)&&(i[t]=e.getAttribute(t)),e.removeAttribute(t)}})),i},eg=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],tg=(t("d",((e,t,i,n)=>{var r;if("undefined"!=typeof window){const o=window,a=null===(r=null==o?void 0:o.Ionic)||void 0===r?void 0:r.config;if(a){const r=a.get("_ael");if(r)return r(e,t,i,n);if(a._ael)return a._ael(e,t,i,n)}}return e.addEventListener(t,i,n)})),t("e",((e,t,i,n)=>{var r;if("undefined"!=typeof window){const o=window,a=null===(r=null==o?void 0:o.Ionic)||void 0===r?void 0:r.config;if(a){const r=a.get("_rel");if(r)return r(e,t,i,n);if(a._rel)return a._rel(e,t,i,n)}}return e.removeEventListener(t,i,n)})),t("g",(e=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(e):"function"==typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e)))),ig=t("c",((e,t,i)=>Math.max(e,Math.min(t,i)))),ng=(e,t)=>{if(!e){const e="ASSERT: "+t;throw console.error(e),new Error(e)}},rg=(t("n",(e=>e.timeStamp||Date.now())),t("p",(e=>{if(e){const t=e.changedTouches;if(t&&t.length>0){const e=t[0];return{x:e.clientX,y:e.clientY}}if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY}}return{x:0,y:0}})),(e,t)=>{if(null!=e||(e={}),null!=t||(t={}),e===t)return!0;const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(const n of i){if(!(n in t))return!1;if(e[n]!==t[n])return!1}return!0}),og=t("b","undefined"!=typeof window?window:void 0);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
let ag;const sg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lg=e=>{if(void 0===ag){const t=void 0!==e.style.animationName,i=void 0!==e.style.webkitAnimationName;ag=!t&&i?"-webkit-":""}return ag},cg=(e,t,i)=>{const n=t.startsWith("animation")?lg(e):"";e.style.setProperty(n+t,i)},hg=(e,t)=>{const i=t.startsWith("animation")?lg(e):"";e.style.removeProperty(i+t)},ug=[],dg=(e=[],t)=>{if(void 0!==t){const i=Array.isArray(t)?t:[t];return[...e,...i]}return e},fg=(t("k",(e=>{let t,i,n,r,o,a,s,l,c,h,u,d,f,p=[],g=[],m=[],v=!1,_={},b=[],y=[],w={},x=0,S=!1,C=!1,T=!0,E=!1,I=!0,k=!1;const O=e,R=[],A=[],D=[],L=[],M=[],P=[],F=[],B=[],N=[],j=[],V="function"==typeof AnimationEffect||void 0!==og&&"function"==typeof og.AnimationEffect,$="function"==typeof Element&&"function"==typeof Element.prototype.animate&&V,U=()=>j,W=e=>{G(),e&&Y()},z=(e,t)=>(((null==t?void 0:t.oneTimeCallback)?A:R).push({c:e,o:t}),f),H=()=>(R.length=0,A.length=0,f),G=()=>{if($)j.forEach((e=>{e.cancel()})),j.length=0;else{const e=D.slice();tg((()=>{e.forEach((e=>{hg(e,"animation-name"),hg(e,"animation-duration"),hg(e,"animation-timing-function"),hg(e,"animation-iteration-count"),hg(e,"animation-delay"),hg(e,"animation-play-state"),hg(e,"animation-fill-mode"),hg(e,"animation-direction")}))}))}},Y=()=>{M.forEach((e=>{(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)})),M.length=0},X=()=>void 0!==o?o:s?s.getFill():"both",q=()=>void 0!==c?c:void 0!==a?a:s?s.getDirection():"normal",K=()=>S?"linear":void 0!==n?n:s?s.getEasing():"linear",Z=()=>C?0:void 0!==h?h:void 0!==i?i:s?s.getDuration():0,J=()=>void 0!==r?r:s?s.getIterations():1,Q=()=>void 0!==u?u:void 0!==t?t:s?s.getDelay():0,ee=e=>{$?U().forEach((t=>{if(t.effect.setKeyframes)t.effect.setKeyframes(e);else{const i=new KeyframeEffect(t.effect.target,e,t.effect.getTiming());t.effect=i}})):ie()},te=()=>{0!==x&&(x--,0===x&&((()=>{he(),B.forEach((e=>e())),N.forEach((e=>e()));const e=T?1:0,t=b,i=y,n=w;D.forEach((e=>{const r=e.classList;t.forEach((e=>r.add(e))),i.forEach((e=>r.remove(e)));for(const t in n)n.hasOwnProperty(t)&&cg(e,t,n[t])})),R.forEach((t=>t.c(e,f))),A.forEach((t=>t.c(e,f))),A.length=0,I=!0,T&&(E=!0),T=!0})(),s&&s.animationFinish()))},ie=(t=!0)=>{Y();const i=(e=>(e.forEach((e=>{for(const t in e)if(e.hasOwnProperty(t)){const i=e[t];if("easing"===t)e["animation-timing-function"]=i,delete e[t];else{const n=sg(t);n!==t&&(e[n]=i,delete e[t])}}})),e))(p);D.forEach((n=>{if(i.length>0){const r=((e=[])=>e.map((e=>{const t=e.offset,i=[];for(const n in e)e.hasOwnProperty(n)&&"offset"!==n&&i.push(`${n}: ${e[n]};`);return`${100*t}% { ${i.join(" ")} }`})).join(" "))(i);d=void 0!==e?e:(e=>{let t=ug.indexOf(e);return t<0&&(t=ug.push(e)-1),`ion-animation-${t}`})(r);const o=((e,t,i)=>{var n;const r=(e=>{const t=void 0!==e.getRootNode?e.getRootNode():e;return t.head||t})(i),o=lg(i),a=r.querySelector("#"+e);if(a)return a;const s=(null!==(n=i.ownerDocument)&&void 0!==n?n:document).createElement("style");return s.id=e,s.textContent=`@${o}keyframes ${e} { ${t} } @${o}keyframes ${e}-alt { ${t} }`,r.appendChild(s),s})(d,r,n);M.push(o),cg(n,"animation-duration",`${Z()}ms`),cg(n,"animation-timing-function",K()),cg(n,"animation-delay",`${Q()}ms`),cg(n,"animation-fill-mode",X()),cg(n,"animation-direction",q());const a=J()===1/0?"infinite":J().toString();cg(n,"animation-iteration-count",a),cg(n,"animation-play-state","paused"),t&&cg(n,"animation-name",`${o.id}-alt`),tg((()=>{cg(n,"animation-name",o.id||null)}))}}))},ne=(e=!0)=>{(()=>{P.forEach((e=>e())),F.forEach((e=>e()));const e=g,t=m,i=_;D.forEach((n=>{const r=n.classList;e.forEach((e=>r.add(e))),t.forEach((e=>r.remove(e)));for(const e in i)i.hasOwnProperty(e)&&cg(n,e,i[e])}))})(),p.length>0&&($?(D.forEach((e=>{const t=e.animate(p,{id:O,delay:Q(),duration:Z(),easing:K(),iterations:J(),fill:X(),direction:q()});t.pause(),j.push(t)})),j.length>0&&(j[0].onfinish=()=>{te()})):ie(e)),v=!0},re=e=>{if(e=Math.min(Math.max(e,0),.9999),$)j.forEach((t=>{t.currentTime=t.effect.getComputedTiming().delay+Z()*e,t.pause()}));else{const t=`-${Z()*e}ms`;D.forEach((e=>{p.length>0&&(cg(e,"animation-delay",t),cg(e,"animation-play-state","paused"))}))}},oe=e=>{j.forEach((e=>{e.effect.updateTiming({delay:Q(),duration:Z(),easing:K(),iterations:J(),fill:X(),direction:q()})})),void 0!==e&&re(e)},ae=(e=!0,t)=>{tg((()=>{D.forEach((i=>{cg(i,"animation-name",d||null),cg(i,"animation-duration",`${Z()}ms`),cg(i,"animation-timing-function",K()),cg(i,"animation-delay",void 0!==t?`-${t*Z()}ms`:`${Q()}ms`),cg(i,"animation-fill-mode",X()||null),cg(i,"animation-direction",q()||null);const n=J()===1/0?"infinite":J().toString();cg(i,"animation-iteration-count",n),e&&cg(i,"animation-name",`${d}-alt`),tg((()=>{cg(i,"animation-name",d||null)}))}))}))},se=(e=!1,t=!0,i)=>(e&&L.forEach((n=>{n.update(e,t,i)})),$?oe(i):ae(t,i),f),le=()=>{v&&($?j.forEach((e=>{e.pause()})):D.forEach((e=>{cg(e,"animation-play-state","paused")})),k=!0)},ce=()=>{l=void 0,te()},he=()=>{l&&clearTimeout(l)},ue=()=>{D.forEach((e=>{hg(e,"animation-duration"),hg(e,"animation-delay"),hg(e,"animation-play-state")}))},de=e=>new Promise((t=>{(null==e?void 0:e.sync)&&(C=!0,z((()=>C=!1),{oneTimeCallback:!0})),v||ne(),E&&($?(re(0),oe()):ae(),E=!1),I&&(x=L.length+1,I=!1),z((()=>t()),{oneTimeCallback:!0}),L.forEach((e=>{e.play()})),$?(j.forEach((e=>{e.play()})),0!==p.length&&0!==D.length||te()):(()=>{if(he(),tg((()=>{D.forEach((e=>{p.length>0&&cg(e,"animation-play-state","running")}))})),0===p.length||0===D.length)te();else{const e=Q()||0,t=Z()||0,i=J()||1;isFinite(i)&&(l=setTimeout(ce,e+t*i+100)),((e,t)=>{let i;const n={passive:!0},r=()=>{i&&i()},o=i=>{e===i.target&&(r(),t(i))};e&&(e.addEventListener("webkitAnimationEnd",o,n),e.addEventListener("animationend",o,n),i=()=>{e.removeEventListener("webkitAnimationEnd",o,n),e.removeEventListener("animationend",o,n)})})(D[0],(()=>{he(),tg((()=>{ue(),tg(te)}))}))}})(),k=!1})),fe=(e,t)=>{const i=p[0];return void 0===i||void 0!==i.offset&&0!==i.offset?p=[{offset:0,[e]:t},...p]:i[e]=t,f};return f={parentAnimation:s,elements:D,childAnimations:L,id:O,animationFinish:te,from:fe,to:(e,t)=>{const i=p[p.length-1];return void 0===i||void 0!==i.offset&&1!==i.offset?p=[...p,{offset:1,[e]:t}]:i[e]=t,f},fromTo:(e,t,i)=>fe(e,t).to(e,i),parent:e=>(s=e,f),play:de,pause:()=>(L.forEach((e=>{e.pause()})),le(),f),stop:()=>{L.forEach((e=>{e.stop()})),v&&(G(),v=!1),S=!1,C=!1,I=!0,c=void 0,h=void 0,u=void 0,x=0,E=!1,T=!0,k=!1},destroy:e=>(L.forEach((t=>{t.destroy(e)})),W(e),D.length=0,L.length=0,p.length=0,H(),v=!1,I=!0,f),keyframes:e=>{const t=p!==e;return p=e,t&&ee(p),f},addAnimation:e=>{if(null!=e)if(Array.isArray(e))for(const t of e)t.parent(f),L.push(t);else e.parent(f),L.push(e);return f},addElement:e=>{if(null!=e)if(1===e.nodeType)D.push(e);else if(e.length>=0)for(let t=0;t<e.length;t++)D.push(e[t]);else console.error("Invalid addElement value");return f},update:se,fill:e=>(o=e,se(!0),f),direction:e=>(a=e,se(!0),f),iterations:e=>(r=e,se(!0),f),duration:e=>($||0!==e||(e=1),i=e,se(!0),f),easing:e=>(n=e,se(!0),f),delay:e=>(t=e,se(!0),f),getWebAnimations:U,getKeyframes:()=>p,getFill:X,getDirection:q,getDelay:Q,getIterations:J,getEasing:K,getDuration:Z,afterAddRead:e=>(B.push(e),f),afterAddWrite:e=>(N.push(e),f),afterClearStyles:(e=[])=>{for(const t of e)w[t]="";return f},afterStyles:(e={})=>(w=e,f),afterRemoveClass:e=>(y=dg(y,e),f),afterAddClass:e=>(b=dg(b,e),f),beforeAddRead:e=>(P.push(e),f),beforeAddWrite:e=>(F.push(e),f),beforeClearStyles:(e=[])=>{for(const t of e)_[t]="";return f},beforeStyles:(e={})=>(_=e,f),beforeRemoveClass:e=>(m=dg(m,e),f),beforeAddClass:e=>(g=dg(g,e),f),onFinish:z,isRunning:()=>0!==x&&!k,progressStart:(e=!1,t)=>(L.forEach((i=>{i.progressStart(e,t)})),le(),S=e,v||ne(),se(!1,!0,t),f),progressStep:e=>(L.forEach((t=>{t.progressStep(e)})),re(e),f),progressEnd:(e,t,i)=>(S=!1,L.forEach((n=>{n.progressEnd(e,t,i)})),void 0!==i&&(h=i),E=!1,T=!0,0===e?(c="reverse"===q()?"normal":"reverse","reverse"===c&&(T=!1),$?(se(),re(1-t)):(u=(1-t)*Z()*-1,se(!1,!1))):1===e&&($?(se(),re(t)):(u=t*Z()*-1,se(!1,!1))),void 0!==e&&(z((()=>{h=void 0,c=void 0,u=void 0}),{oneTimeCallback:!0}),s||de()),f)}})),"ionViewWillLeave"),pg="ionViewDidLeave",gg="ionViewWillUnload",mg=e=>new Promise(((t,i)=>{Zp((()=>{vg(e),_g(e).then((i=>{i.animation&&i.animation.destroy(),bg(e),t(i)}),(t=>{bg(e),i(t)}))}))})),vg=e=>{const t=e.enteringEl,i=e.leavingEl;Ag(t,i,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),Rg(t,!1),t.style.setProperty("pointer-events","none"),i&&(Rg(i,!1),i.style.setProperty("pointer-events","none"))},_g=async e=>{const t=await yg(e);return t&&Pf?wg(t,e):xg(e)},bg=e=>{const t=e.enteringEl,i=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),void 0!==i&&(i.classList.remove("ion-page-invisible"),i.style.removeProperty("pointer-events"))},yg=async e=>{if(!e.leavingEl||!e.animated||0===e.duration)return;if(e.animationBuilder)return e.animationBuilder;return"ios"===e.mode?(await yf((()=>i.import("./ios.transition-legacy-9aa6bd31.js")))).iosTransitionAnimation:(await yf((()=>i.import("./md.transition-legacy-c6da0d1e.js")))).mdTransitionAnimation},wg=async(e,t)=>{await Sg(t,!0);const i=e(t.baseEl,t);Eg(t.enteringEl,t.leavingEl);const n=await Tg(i,t);return t.progressCallback&&t.progressCallback(void 0),n&&Ig(t.enteringEl,t.leavingEl),{hasCompleted:n,animation:i}},xg=async e=>{const t=e.enteringEl,i=e.leavingEl;return await Sg(e,!1),Eg(t,i),Ig(t,i),{hasCompleted:!0}},Sg=async(e,t)=>{(void 0!==e.deepWait?e.deepWait:t)&&await Promise.all([Og(e.enteringEl),Og(e.leavingEl)]),await Cg(e.viewIsReady,e.enteringEl)},Cg=async(e,t)=>{e&&await e(t)},Tg=(e,t)=>{const i=t.progressCallback,n=new Promise((t=>{e.onFinish((e=>t(1===e)))}));return i?(e.progressStart(!0),i(e)):e.play(),n},Eg=(e,t)=>{kg(t,fg),kg(e,"ionViewWillEnter")},Ig=(e,t)=>{kg(e,"ionViewDidEnter"),kg(t,pg)},kg=(e,t)=>{if(e){const i=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(i)}},Og=async e=>{const t=e;if(t){if(null!=t.componentOnReady){if(null!=await t.componentOnReady())return}else if(null!=t.__registerHost){const e=new Promise((e=>tg(e)));return void(await e)}await Promise.all(Array.from(t.children).map(Og))}},Rg=(e,t)=>{t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},Ag=(e,t,i)=>{void 0!==e&&(e.style.zIndex="back"===i?"99":"101"),void 0!==t&&(t.style.zIndex="100")},Dg=(t("l",(e=>{if(e.classList.contains("ion-page"))return e;const t=e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return t||e})),(e,t,i,n,r)=>Mg(e[1],t[1],i[1],n[1],r).map((r=>Lg(e[0],t[0],i[0],n[0],r)))),Lg=(e,t,i,n,r)=>r*(3*t*Math.pow(r-1,2)+r*(-3*i*r+3*i+n*r))-e*Math.pow(r-1,3),Mg=(e,t,i,n,r)=>Pg((n-=r)-3*(i-=r)+3*(t-=r)-(e-=r),3*i-6*t+3*e,3*t-3*e,e).filter((e=>e>=0&&e<=1)),Pg=(e,t,i,n)=>{if(0===e)return((e,t,i)=>{const n=t*t-4*e*i;return n<0?[]:[(-t+Math.sqrt(n))/(2*e),(-t-Math.sqrt(n))/(2*e)]})(t,i,n);const r=(3*(i/=e)-(t/=e)*t)/3,o=(2*t*t*t-9*t*i+27*(n/=e))/27;if(0===r)return[Math.pow(-o,1/3)];if(0===o)return[Math.sqrt(-r),-Math.sqrt(-r)];const a=Math.pow(o/2,2)+Math.pow(r/3,3);if(0===a)return[Math.pow(o/2,.5)-t/3];if(a>0)return[Math.pow(-o/2+Math.sqrt(a),1/3)-Math.pow(o/2+Math.sqrt(a),1/3)-t/3];const s=Math.sqrt(Math.pow(-r/3,3)),l=Math.acos(-o/(2*Math.sqrt(Math.pow(-r/3,3)))),c=2*Math.pow(s,1/3);return[c*Math.cos(l/3)-t/3,c*Math.cos((l+2*Math.PI)/3)-t/3,c*Math.cos((l+4*Math.PI)/3)-t/3]};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
class Fg{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const i=this.m.get(e);return void 0!==i?i:t}getBoolean(e,t=!1){const i=this.m.get(e);return void 0===i?t:"string"==typeof i?"true"===i:!!i}getNumber(e,t){const i=parseFloat(this.m.get(e));return isNaN(i)?void 0!==t?t:NaN:i}set(e,t){this.m.set(e,t)}}const Bg=new Fg,Ng=(e,t)=>e.substr(0,t.length)===t,jg="ionic:",Vg="ionic-persist-config",$g=(e,t)=>("string"==typeof e&&(t=e,e=void 0),(e=>Ug(e))(e).includes(t)),Ug=(e=window)=>{if(void 0===e)return[];e.Ionic=e.Ionic||{};let t=e.Ionic.platforms;return null==t&&(t=e.Ionic.platforms=Wg(e),t.forEach((t=>e.document.documentElement.classList.add(`plt-${t}`)))),t},Wg=e=>{const t=Bg.get("platform");return Object.keys(Jg).filter((i=>{const n=null==t?void 0:t[i];return"function"==typeof n?n(e):Jg[i](e)}))},zg=e=>!!Kg(e,/iPad/i)||!(!Kg(e,/Macintosh/i)||!Gg(e)),Hg=e=>Kg(e,/android|sink/i),Gg=e=>Zg(e,"(any-pointer:coarse)"),Yg=e=>Xg(e)||qg(e),Xg=e=>!!(e.cordova||e.phonegap||e.PhoneGap),qg=e=>{const t=e.Capacitor;return!!(null==t?void 0:t.isNative)},Kg=(e,t)=>t.test(e.navigator.userAgent),Zg=(e,t)=>{var i;return null===(i=e.matchMedia)||void 0===i?void 0:i.call(e,t).matches},Jg={ipad:zg,iphone:e=>Kg(e,/iPhone/i),ios:e=>Kg(e,/iPhone|iPod/i)||zg(e),android:Hg,phablet:e=>{const t=e.innerWidth,i=e.innerHeight,n=Math.min(t,i),r=Math.max(t,i);return n>390&&n<520&&r>620&&r<800},tablet:e=>{const t=e.innerWidth,i=e.innerHeight,n=Math.min(t,i),r=Math.max(t,i);return zg(e)||(e=>Hg(e)&&!Kg(e,/mobile/i))(e)||n>460&&n<820&&r>780&&r<1400},cordova:Xg,capacitor:qg,electron:e=>Kg(e,/electron/i),pwa:e=>{var t;return!(!(null===(t=e.matchMedia)||void 0===t?void 0:t.call(e,"(display-mode: standalone)").matches)&&!e.navigator.standalone)},mobile:Gg,mobileweb:e=>Gg(e)&&!Yg(e),desktop:e=>!Gg(e),hybrid:Yg};let Qg;const em=e=>e&&(e=>Dp(e).$modeName$)(e)||Qg,tm=(e={})=>{if("undefined"==typeof window)return;const t=window.document,i=window,n=i.Ionic=i.Ionic||{},r={};var o;e._ael&&(r.ael=e._ael),e._rel&&(r.rel=e._rel),e._ce&&(r.ce=e._ce),o=r,Object.assign($p,o);const a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(e=>{try{const t=e.sessionStorage.getItem(Vg);return null!==t?JSON.parse(t):{}}catch(cy){return{}}})(i)),{persistConfig:!1}),n.config),(e=>{const t={};return e.location.search.slice(1).split("&").map((e=>e.split("="))).map((([e,t])=>[decodeURIComponent(e),decodeURIComponent(t)])).filter((([e])=>Ng(e,jg))).map((([e,t])=>[e.slice(jg.length),t])).forEach((([e,i])=>{t[e]=i})),t})(i)),e);Bg.reset(a),Bg.getBoolean("persistConfig")&&((e,t)=>{try{e.sessionStorage.setItem(Vg,JSON.stringify(t))}catch(cy){return}})(i,a),Ug(i),n.config=Bg,n.mode=Qg=Bg.get("mode",t.documentElement.getAttribute("mode")||($g(i,"ios")?"ios":"md")),Bg.set("mode",Qg),t.documentElement.setAttribute("mode",Qg),t.documentElement.classList.add(Qg),Bg.getBoolean("_testing")&&Bg.set("animated",!1);const s=e=>{var t;return null===(t=e.tagName)||void 0===t?void 0:t.startsWith("ION-")},l=e=>["ios","md"].includes(e);var c;c=e=>{for(;e;){const t=e.mode||e.getAttribute("mode");if(t){if(l(t))return t;s(e)&&console.warn('Invalid ionic mode: "'+t+'", expected: "ios" or "md"')}e=e.parentElement}return Qg},Bp.push(c)},im=async(e,t,i,n,r,o)=>{var a;if(e)return e.attachViewToDom(t,i,r,n);if(!(o||"string"==typeof i||i instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof i?null===(a=t.ownerDocument)||void 0===a?void 0:a.createElement(i):i;return n&&n.forEach((e=>s.classList.add(e))),r&&Object.assign(s,r),t.appendChild(s),await new Promise((e=>Jp(s,e))),s};function nm(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const rm=(e,t)=>null!==t.closest(e),om=(e,t)=>"string"==typeof e&&e.length>0?Object.assign({"ion-color":!0,[`ion-color-${e}`]:!0},t):t,am=Ep(class extends Vp{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,t){return new Promise((i=>{Kp((()=>{const n=this.el.getBoundingClientRect(),r=n.width,o=n.height,a=Math.sqrt(r*r+o*o),s=Math.max(o,r),l=this.unbounded?s:a+lm,c=Math.floor(s*cm),h=l/c;let u=e-n.left,d=t-n.top;this.unbounded&&(u=.5*r,d=.5*o);const f=u-.5*c,p=d-.5*c,g=.5*r-u,m=.5*o-d;Zp((()=>{const e=document.createElement("div");e.classList.add("ripple-effect");const t=e.style;t.top=p+"px",t.left=f+"px",t.width=t.height=c+"px",t.setProperty("--final-scale",`${h}`),t.setProperty("--translate-end",`${g}px, ${m}px`);(this.el.shadowRoot||this.el).appendChild(e),setTimeout((()=>{i((()=>{sm(e)}))}),325)}))}))}))}get unbounded(){return"unbounded"===this.type}render(){const e=em(this);return jf($f,{role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}"}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),sm=e=>{e.classList.add("fade-out"),setTimeout((()=>{e.remove()}),200)},lm=10,cm=.5;
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
const hm="undefined"!=typeof window?window:void 0;hm&&hm.CSS&&hm.CSS.supports&&hm.CSS.supports("--a: 0");
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
const um=t("i",(e=>e&&""!==e.dir?"rtl"===e.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))),dm=Ep(class extends Vp{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=Hf(this,"ionScrollStart",7),this.ionScroll=Hf(this,"ionScroll",7),this.ionScrollEnd=Hf(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=null===this.el.closest("ion-menu, ion-popover, ion-modal")}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout((()=>{null!==this.el.offsetParent&&this.resize()}),100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,t=em(this);return void 0===e?"ios"===t&&$g("ios"):e}resize(){this.fullscreen?Kp((()=>this.readDimensions())):0===this.cTop&&0===this.cBottom||(this.cTop=this.cBottom=0,yp(this))}readDimensions(){const e=fm(this.el),t=Math.max(this.el.offsetTop,0),i=Math.max(e.offsetHeight-t-this.el.offsetHeight,0);(t!==this.cTop||i!==this.cBottom)&&(this.cTop=t,this.cBottom=i,yp(this))}onScroll(e){const t=Date.now(),i=!this.isScrolling;this.lastScroll=t,i&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,Kp((t=>{this.queued=!1,this.detail.event=e,pm(this.detail,this.scrollEl,t,i),this.ionScroll.emit(this.detail)})))}async getScrollElement(){return this.scrollEl||await new Promise((e=>Jp(this.el,e))),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise((e=>Jp(this.el,e))),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const t=await this.getScrollElement(),i=t.scrollHeight-t.clientHeight;return this.scrollToPoint(void 0,i,e)}async scrollByPoint(e,t,i){const n=await this.getScrollElement();return this.scrollToPoint(e+n.scrollLeft,t+n.scrollTop,i)}async scrollToPoint(e,t,i=0){const n=await this.getScrollElement();if(i<32)return null!=t&&(n.scrollTop=t),void(null!=e&&(n.scrollLeft=e));let r,o=0;const a=new Promise((e=>r=e)),s=n.scrollTop,l=n.scrollLeft,c=null!=t?t-s:0,h=null!=e?e-l:0,u=e=>{const t=Math.min(1,(e-o)/i)-1,a=Math.pow(t,3)+1;0!==c&&(n.scrollTop=Math.floor(a*c+s)),0!==h&&(n.scrollLeft=Math.floor(a*h+l)),a<1?requestAnimationFrame(u):r()};return requestAnimationFrame((e=>{o=e,u(e)})),a}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval((()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()}),100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:e,scrollX:t,scrollY:i,el:n}=this,r=um(n)?"rtl":"ltr",o=em(this),a=this.shouldForceOverscroll(),s="ios"===o,l=e?"main":"div";return this.resize(),jf($f,{class:om(this.color,{[o]:!0,"content-sizing":rm("ion-popover",this.el),overscroll:a,[`content-${r}`]:!0}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},jf("div",{ref:e=>this.backgroundContentEl=e,id:"background-content",part:"background"}),jf(l,{class:{"inner-scroll":!0,"scroll-x":t,"scroll-y":i,overscroll:(t||i)&&a},ref:e=>this.scrollEl=e,onScroll:this.scrollEvents?e=>this.onScroll(e):void 0,part:"scroll"},jf("slot",null)),s?jf("div",{class:"transition-effect"},jf("div",{class:"transition-cover"}),jf("div",{class:"transition-shadow"})):null,jf("slot",{name:"fixed"}))}get el(){return this}static get style(){return':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}'}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),fm=e=>{const t=e.closest("ion-tabs");if(t)return t;const i=e.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return i||(e=>{var t;return e.parentElement?e.parentElement:(null===(t=e.parentNode)||void 0===t?void 0:t.host)?e.parentNode.host:null})(e)},pm=(e,t,i,n)=>{const r=e.currentX,o=e.currentY,a=e.currentTime,s=t.scrollLeft,l=t.scrollTop,c=i-a;if(n&&(e.startTime=i,e.startX=s,e.startY=l,e.velocityX=e.velocityY=0),e.currentTime=i,e.currentX=e.scrollLeft=s,e.currentY=e.scrollTop=l,e.deltaX=s-e.startX,e.deltaY=l-e.startY,c>0&&c<100){const t=(s-r)/c,i=(l-o)/c;e.velocityX=.7*t+.3*e.velocityX,e.velocityY=.7*i+.3*e.velocityY}};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const gm=function(){if("undefined"==typeof customElements)return;["ion-content"].forEach((e=>{if("ion-content"===e)customElements.get(e)||customElements.define(e,dm)}))},mm=Ep(class extends Vp{constructor(){super(),this.__registerHost(),this.ionColor=Hf(this,"ionColor",7),this.ionStyle=Hf(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate="floating"===this.position,this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout((()=>{this.noAnimate=!1}),1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:e}=this;this.ionColor.emit({"item-label-color":void 0!==e,[`ion-color-${e}`]:void 0!==e})}emitStyle(){const{inRange:e,position:t}=this;e||this.ionStyle.emit({label:!0,[`label-${t}`]:void 0!==t})}render(){const e=this.position,t=em(this);return jf($f,{class:om(this.color,{[t]:!0,"in-item-color":rm("ion-item.ion-color",this.el),[`label-${e}`]:void 0!==e,"label-no-animate":this.noAnimate,"label-rtl":"rtl"===document.dir})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",md:'.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}'}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
const vm="ion-content",_m=".ion-content-scroll-host",bm=`${vm}, ${_m}`,ym=e=>"ION-CONTENT"===e.tagName,wm=t("h",(async e=>ym(e)?(await new Promise((t=>Jp(e,t))),e.getScrollElement()):e)),xm=e=>{const t=e.querySelector(_m);return t||e.querySelector(bm)},Sm=(t("f",(e=>e.closest(bm))),t("s",((e,t)=>{if(ym(e)){return e.scrollToTop(t)}return Promise.resolve(e.scrollTo({top:0,left:0,behavior:t>0?"smooth":"auto"}))})),t("j",((e,t,i,n)=>{if(ym(e)){return e.scrollByPoint(t,i,n)}return Promise.resolve(e.scrollBy({top:i,left:t,behavior:n>0?"smooth":"auto"}))})),e=>((e,...t)=>console.error(`<${e.tagName.toLowerCase()}> must be used inside ${t.join(" or ")}.`))(e,vm)),Cm=e=>{const t=document.querySelector(`${e}.ion-cloned-element`);if(null!==t)return t;const i=document.createElement(e);return i.classList.add("ion-cloned-element"),i.style.setProperty("display","none"),document.body.appendChild(i),i},Tm=e=>{if(!e)return;const t=e.querySelectorAll("ion-toolbar");return{el:e,toolbars:Array.from(t).map((e=>{const t=e.querySelector("ion-title");return{el:e,background:e.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:t,innerTitleEl:t?t.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(e.querySelectorAll("ion-buttons"))}}))}},Em=(e,t)=>{"fade"!==e.collapse&&(void 0===t?e.style.removeProperty("--opacity-scale"):e.style.setProperty("--opacity-scale",t.toString()))},Im=(e,t,i,n)=>{Zp((()=>{const r=n.scrollTop;((e,t,i)=>{if(!e[0].isIntersecting)return;const n=e[0].intersectionRatio>.9||i<=0?0:100*(1-e[0].intersectionRatio)/75;Em(t.el,1===n?void 0:n)})(e,t,r);const o=e[0],a=o.intersectionRect,s=a.width*a.height,l=o.rootBounds.width*o.rootBounds.height,c=0===s&&0===l,h=Math.abs(a.left-o.boundingClientRect.left),u=Math.abs(a.right-o.boundingClientRect.right);if(!c&&!(s>0&&(h>=5||u>=5)))if(o.isIntersecting)km(t,!1),km(i);else{(0===a.x&&0===a.y||0!==a.width&&0!==a.height)&&r>0&&(km(t),km(i,!1),Em(t.el))}}))},km=(e,t=!0)=>{const i=e.el;t?(i.classList.remove("header-collapse-condense-inactive"),i.removeAttribute("aria-hidden")):(i.classList.add("header-collapse-condense-inactive"),i.setAttribute("aria-hidden","true"))},Om=(e=[],t=1,i=!1)=>{e.forEach((e=>{const n=e.ionTitleEl,r=e.innerTitleEl;n&&"large"===n.size&&(r.style.transition=i?"all 0.2s ease-in-out":"",r.style.transform=`scale3d(${t}, ${t}, 1)`)}))},Rm=(e,t,i)=>{Kp((()=>{const n=e.scrollTop,r=t.clientHeight,o=i?i.clientHeight:0;if(null!==i&&n<o)return t.style.setProperty("--opacity-scale","0"),void e.style.setProperty("clip-path",`inset(${r}px 0px 0px 0px)`);const a=ig(0,(n-o)/10,1);Zp((()=>{e.style.removeProperty("clip-path"),t.style.setProperty("--opacity-scale",a.toString())}))}))},Am=Ep(class extends Vp{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(e,t)=>{const i=this.scrollEl=await wm(e);this.contentScrollCallback=()=>{Rm(this.scrollEl,this.el,t)},i.addEventListener("scroll",this.contentScrollCallback),Rm(this.scrollEl,this.el,t)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=((e,t)=>{let i=eg;return t&&t.length>0&&(i=i.filter((e=>!t.includes(e)))),Qp(e,i)})(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if("ios"!==em(this))return;const{collapse:e}=this,t="condense"===e,i="fade"===e;if(this.destroyCollapsibleHeader(),t){const e=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),t=e?xm(e):null;Zp((()=>{Cm("ion-title").size="large",Cm("ion-back-button")})),await this.setupCondenseHeader(t,e)}else if(i){const e=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),t=e?xm(e):null;if(!t)return void Sm(this.el);const i=t.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(t,i)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(e,t){if(!e||!t)return void Sm(this.el);if("undefined"==typeof IntersectionObserver)return;this.scrollEl=await wm(e);const i=t.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(i).find((e=>"condense"!==e.collapse)),!this.collapsibleMainHeader)return;const n=Tm(this.collapsibleMainHeader),r=Tm(this.el);if(!n||!r)return;km(n,!1),Em(n.el,0);this.intersectionObserver=new IntersectionObserver((e=>{Im(e,n,r,this.scrollEl)}),{root:e,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(r.toolbars[r.toolbars.length-1].el),this.contentScrollCallback=()=>{((e,t,i)=>{Kp((()=>{const n=e.scrollTop,r=ig(1,1+-n/500,1.1);null===i.querySelector("ion-refresher.refresher-native")&&Zp((()=>{Om(t.toolbars,r)}))}))})(this.scrollEl,r,e)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),Zp((()=>{void 0!==this.collapsibleMainHeader&&this.collapsibleMainHeader.classList.add("header-collapse-main")}))}render(){const{translucent:e,inheritedAttributes:t}=this,i=em(this),n=this.collapse||"none",r=rm("ion-menu",this.el)?"none":"banner";return jf($f,Object.assign({role:r,class:{[i]:!0,[`header-${i}`]:!0,"header-translucent":this.translucent,[`header-collapse-${n}`]:!0,[`header-translucent-${i}`]:this.translucent}},t),"ios"===i&&e&&jf("div",{class:"header-background"}),jf("slot",null))}get el(){return this}static get style(){return{ios:"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:7px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",md:'ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md::after{bottom:-5px;background-position:left 0 top -2px;position:absolute;width:100%;height:5px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAHBAMAAADzDtBxAAAAD1BMVEUAAAAAAAAAAAAAAAAAAABPDueNAAAABXRSTlMUCS0gBIh/TXEAAAAaSURBVAjXYxCEAgY4UIICBmMogMsgFLtAAQCNSwXZKOdPxgAAAABJRU5ErkJggg==);background-repeat:repeat-x;content:""}@supports (inset-inline-start: 0){.header-md::after{inset-inline-start:0}}@supports not (inset-inline-start: 0){.header-md::after{left:0}[dir=rtl] .header-md::after,:host-context([dir=rtl]) .header-md::after{left:unset;right:unset;right:0}}[dir=rtl] .header-md::after,:host-context([dir=rtl]) .header-md::after{background-position:right 0 top -2px}.header-collapse-condense{display:none}.header-md.ion-no-border::after{display:none}'}}},[36,"ion-header",{collapse:[1],translucent:[4]}]);const Dm=function(){if("undefined"==typeof customElements)return;["ion-header"].forEach((e=>{if("ion-header"===e)customElements.get(e)||customElements.define(e,Am)}))},Lm=function(){if("undefined"==typeof customElements)return;["ion-label"].forEach((e=>{if("ion-label"===e)customElements.get(e)||customElements.define(e,mm)}))};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */class Mm{constructor(e,t){this.component=e,this.params=t,this.state=1}async init(e){if(this.state=2,!this.element){const t=this.component;this.element=await im(this.delegate,e,t,["ion-page","ion-page-invisible"],this.params)}}_destroy(){ng(3!==this.state,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=3}}const Pm=(e,t,i)=>!!e&&(e.component===t&&rg(e.params,i)),Fm=(e,t)=>e?e instanceof Mm?e:new Mm(e,t):null,Bm=Ep(class extends Vp{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Hf(this,"ionNavWillLoad",7),this.ionNavWillChange=Hf(this,"ionNavWillChange",3),this.ionNavDidChange=Hf(this,"ionNavDidChange",3),this.transInstr=[],this.animationEnabled=!0,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(!0===this.swipeGesture)}rootChanged(){void 0!==this.root&&(this.useRouter||this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=null!==document.querySelector("ion-router")&&null===this.el.closest("[no-router]"),void 0===this.swipeGesture){const e=em(this);this.swipeGesture=Bg.getBoolean("swipeBackEnabled","ios"===e)}this.ionNavWillLoad.emit()}async componentDidLoad(){this.rootChanged(),this.gesture=(await yf((()=>i.import("./swipe-back-legacy-c55845e4.js")))).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)kg(e.element,gg),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,t,i,n){return this.insert(-1,e,t,i,n)}insert(e,t,i,n,r){return this.insertPages(e,[{component:t,componentProps:i}],n,r)}insertPages(e,t,i,n){return this.queueTrns({insertStart:e,insertViews:t,opts:i},n)}pop(e,t){return this.removeIndex(-1,1,e,t)}popTo(e,t,i){const n={removeStart:-1,removeCount:-1,opts:t};return"object"==typeof e&&e.component?(n.removeView=e,n.removeStart=1):"number"==typeof e&&(n.removeStart=e+1),this.queueTrns(n,i)}popToRoot(e,t){return this.removeIndex(1,-1,e,t)}removeIndex(e,t=1,i,n){return this.queueTrns({removeStart:e,removeCount:t,opts:i},n)}setRoot(e,t,i,n){return this.setPages([{component:e,componentProps:t}],i,n)}setPages(e,t,i){return null!=t||(t={}),!0!==t.animated&&(t.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},i)}setRouteId(e,t,i,n){const r=this.getActiveSync();if(Pm(r,e,t))return Promise.resolve({changed:!1,element:r.element});let o;const a=new Promise((e=>o=e));let s;const l={updateURL:!1,viewIsReady:e=>{let t;const i=new Promise((e=>t=e));return o({changed:!0,element:e,markVisible:async()=>{t(),await s}}),i}};if("root"===i)s=this.setRoot(e,t,l);else{const r=this.views.find((i=>Pm(i,e,t)));r?s=this.popTo(r,Object.assign(Object.assign({},l),{direction:"back",animationBuilder:n})):"forward"===i?s=this.push(e,t,Object.assign(Object.assign({},l),{animationBuilder:n})):"back"===i&&(s=this.setRoot(e,t,Object.assign(Object.assign({},l),{direction:"back",animated:!0,animationBuilder:n})))}return a}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!(!e||!this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const t=this.views,i=t.indexOf(e);return i>0?t[i-1]:void 0}async queueTrns(e,t){var i,n;if(this.isTransitioning&&(null===(i=e.opts)||void 0===i?void 0:i.skipIfBusy))return!1;const r=new Promise(((t,i)=>{e.resolve=t,e.reject=i}));if(e.done=t,e.opts&&!1!==e.opts.updateURL&&this.useRouter){const t=document.querySelector("ion-router");if(t){const i=await t.canTransition();if(!1===i)return!1;if("string"==typeof i)return t.push(i,e.opts.direction||"back"),!1}}return 0===(null===(n=e.insertViews)||void 0===n?void 0:n.length)&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),r}success(e,t){if(this.destroyed)this.fireError("nav controller was destroyed",t);else if(t.done&&t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),t.resolve(e.hasCompleted),!1!==t.opts.updateURL&&this.useRouter){const t=document.querySelector("ion-router");if(t){const i="back"===e.direction?"back":"forward";t.navChanged(i)}}}failed(e,t){this.destroyed?this.fireError("nav controller was destroyed",t):(this.transInstr.length=0,this.fireError(e,t))}fireError(e,t){t.done&&t.done(!1,!1,e),t.reject&&!this.destroyed?t.reject(e):t.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return!!e&&(this.runTransition(e),!0)}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const t=this.getActiveSync(),i=this.getEnteringView(e,t);if(!t&&!i)throw new Error("no views in the stack to be removed");i&&1===i.state&&await i.init(this.el),this.postViewInit(i,t,e);const n=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&i!==t;if(n&&e.opts&&t){"back"===e.opts.direction&&(e.opts.animationBuilder=e.opts.animationBuilder||(null==i?void 0:i.animationBuilder)),t.animationBuilder=e.opts.animationBuilder}let r;r=n?await this.transition(i,t,e):{hasCompleted:!0,requiresTransition:!1},this.success(r,e),this.ionNavDidChange.emit()}catch(t){this.failed(t,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var t,i,n;const r=this.views.length;if(null!==(t=e.opts)&&void 0!==t||(e.opts={}),null!==(i=(n=e.opts).delegate)&&void 0!==i||(n.delegate=this.delegate),void 0!==e.removeView){ng(void 0!==e.removeStart,"removeView needs removeStart"),ng(void 0!==e.removeCount,"removeView needs removeCount");const t=this.views.indexOf(e.removeView);if(t<0)throw new Error("removeView was not found");e.removeStart+=t}void 0!==e.removeStart&&(e.removeStart<0&&(e.removeStart=r-1),e.removeCount<0&&(e.removeCount=r-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===r),e.insertViews&&((e.insertStart<0||e.insertStart>r)&&(e.insertStart=r),e.enteringRequiresTransition=e.insertStart===r);const o=e.insertViews;if(!o)return;ng(o.length>0,"length can not be zero");const a=o.map((e=>e instanceof Mm?e:"component"in e?Fm(e.component,null===e.componentProps?void 0:e.componentProps):Fm(e,void 0))).filter((e=>null!==e));if(0===a.length)throw new Error("invalid views to insert");for(const s of a){s.delegate=e.opts.delegate;const t=s.nav;if(t&&t!==this)throw new Error("inserted view was already inserted");if(3===s.state)throw new Error("inserted view was already destroyed")}e.insertViews=a}getEnteringView(e,t){const i=e.insertViews;if(void 0!==i)return i[i.length-1];const n=e.removeStart;if(void 0!==n){const i=this.views,r=n+e.removeCount;for(let e=i.length-1;e>=0;e--){const o=i[e];if((e<n||e>=r)&&o!==t)return o}}}postViewInit(e,t,i){var n,r,o;ng(t||e,"Both leavingView and enteringView are null"),ng(i.resolve,"resolve must be valid"),ng(i.reject,"reject must be valid");const a=i.opts,{insertViews:s,removeStart:l,removeCount:c}=i;let h;if(void 0!==l&&void 0!==c){ng(l>=0,"removeStart can not be negative"),ng(c>=0,"removeCount can not be negative"),h=[];for(let i=l;i<l+c;i++){const n=this.views[i];void 0!==n&&n!==e&&n!==t&&h.push(n)}null!==(n=a.direction)&&void 0!==n||(a.direction="back")}const u=this.views.length+(null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0)-(null!=c?c:0);if(ng(u>=0,"final balance can not be negative"),0===u)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(s){let e=i.insertStart;for(const t of s)this.insertViewAt(t,e),e++;i.enteringRequiresTransition&&(null!==(o=a.direction)&&void 0!==o||(a.direction="forward"))}if(h&&h.length>0){for(const e of h)kg(e.element,fg),kg(e.element,pg),kg(e.element,gg);for(const e of h)this.destroyView(e)}}async transition(e,t,i){const n=i.opts,r=n.progressAnimation?e=>this.sbAni=e:void 0,o=em(this),a=e.element,s=t&&t.element,l=Object.assign(Object.assign({mode:o,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:r,animated:this.animated&&Bg.getBoolean("animated",!0),enteringEl:a,leavingEl:s},n),{animationBuilder:n.animationBuilder||this.animation||Bg.get("navAnimation")}),{hasCompleted:c}=await mg(l);return this.transitionFinish(c,e,t,n)}transitionFinish(e,t,i,n){const r=e?t:i;return r&&this.unmountInactiveViews(r),{hasCompleted:e,requiresTransition:!0,enteringView:t,leavingView:i,direction:n.direction}}insertViewAt(e,t){const i=this.views,n=i.indexOf(e);n>-1?(ng(e.nav===this,"view is not part of the nav"),i.splice(n,1),i.splice(t,0,e)):(ng(!e.nav,"nav is used"),e.nav=this,i.splice(t,0,e))}removeView(e){ng(2===e.state||3===e.state,"view state should be loaded or destroyed");const t=this.views,i=t.indexOf(e);ng(i>-1,"view must be part of the stack"),i>=0&&t.splice(i,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const t=this.views,i=t.indexOf(e);for(let n=t.length-1;n>=0;n--){const e=t[n],r=e.element;r&&(n>i?(kg(r,gg),this.destroyView(e)):n<i&&Rg(r,!0))}}canStart(){return!!this.swipeGesture&&!this.isTransitioning&&0===this.transInstr.length&&this.animationEnabled&&this.canGoBackSync()}onStart(){this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,t,i){if(this.sbAni){this.animationEnabled=!1,this.sbAni.onFinish((()=>{this.animationEnabled=!0}),{oneTimeCallback:!0});let n=e?-.001:.001;e?n+=Dg([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),n+=Dg([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.sbAni.progressEnd(e?1:0,n,i)}}render(){return jf("slot",null)}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);const Nm=function(){if("undefined"==typeof customElements)return;["ion-nav"].forEach((e=>{if("ion-nav"===e)customElements.get(e)||customElements.define(e,Bm)}))},jm=Ep(class extends Vp{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=Hf(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const e=this.getSize();this.ionStyle.emit({[`title-${e}`]:!0})}getSize(){return void 0!==this.size?this.size:"default"}render(){const e=em(this),t=this.getSize();return jf($f,{class:om(this.color,{[e]:!0,[`title-${t}`]:!0,"title-rtl":"rtl"===document.dir})},jf("div",{class:"toolbar-title"},jf("slot",null)))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:17px;font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:13px;font-weight:normal}:host(.title-large){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-webkit-transform-origin:left center;transform-origin:left center;bottom:0;-ms-flex-align:end;align-items:flex-end;min-width:100%;padding-bottom:6px;font-size:34px;font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}",md:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:15px;font-weight:normal}"}}},[33,"ion-title",{color:[513],size:[1]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Vm=function(){if("undefined"==typeof customElements)return;["ion-title"].forEach((e=>{if("ion-title"===e)customElements.get(e)||customElements.define(e,jm)}))},$m=Ep(class extends Vp{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const e=Array.from(this.el.querySelectorAll("ion-buttons")),t=e.find((e=>"start"===e.slot));t&&t.classList.add("buttons-first-slot");const i=e.reverse(),n=i.find((e=>"end"===e.slot))||i.find((e=>"primary"===e.slot))||i.find((e=>"secondary"===e.slot));n&&n.classList.add("buttons-last-slot")}childrenStyle(e){e.stopPropagation();const t=e.target.tagName,i=e.detail,n={},r=this.childrenStyles.get(t)||{};let o=!1;Object.keys(i).forEach((e=>{const t=`toolbar-${e}`,a=i[e];a!==r[t]&&(o=!0),a&&(n[t]=!0)})),o&&(this.childrenStyles.set(t,n),yp(this))}render(){const e=em(this),t={};return this.childrenStyles.forEach((e=>{Object.assign(t,e)})),jf($f,{class:Object.assign(Object.assign({},t),om(this.color,{[e]:!0,"in-toolbar":rm("ion-toolbar",this.el)}))},jf("div",{class:"toolbar-background"}),jf("div",{class:"toolbar-container"},jf("slot",{name:"start"}),jf("slot",{name:"secondary"}),jf("div",{class:"toolbar-content"},jf("slot",null)),jf("slot",{name:"primary"}),jf("slot",{name:"end"})))}get el(){return this}static get style(){return{ios:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}:host(.toolbar-searchbar) ::slotted(ion-back-button){height:38px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",md:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, #c1c4cd)));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}"}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Um=function(){if("undefined"==typeof customElements)return;["ion-toolbar"].forEach((e=>{if("ion-toolbar"===e)customElements.get(e)||customElements.define(e,$m)}))};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */var Wm;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(Wm||(Wm={}));const zm=Ep(class extends Vp{constructor(){super(),this.__registerHost()}componentDidLoad(){Gm((async()=>{const e=$g(window,"hybrid");if(Bg.getBoolean("_testing")||yf((()=>i.import("./index9-legacy-a0f5e34c.js"))).then((e=>e.startTapClick(Bg))),Bg.getBoolean("statusTap",e)&&yf((()=>i.import("./status-tap-legacy-18646958.js"))).then((e=>e.startStatusTap())),Bg.getBoolean("inputShims",Hm())){const e=$g(window,"ios")?"ios":"android";yf((()=>i.import("./input-shims-legacy-fd33088b.js"))).then((t=>t.startInputShims(Bg,e)))}const t=await yf((()=>i.import("./hardware-back-button-legacy-7391e573.js")));Bg.getBoolean("hardwareBackButton",e)?t.startHardwareBackButton():t.blockHardwareBackButton(),"undefined"!=typeof window&&yf((()=>i.import("./keyboard-legacy-02d24d9b.js"))).then((e=>e.startKeyboardAssist(window))),yf((()=>i.import("./focus-visible-legacy-e7e63653.js"))).then((e=>this.focusVisible=e.startFocusVisible()))}))}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=em(this);return jf($f,{class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":Bg.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return"html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}"}},[0,"ion-app",{setFocus:[64]}]),Hm=()=>{if($g(window,"ios")&&$g(window,"mobile"))return!0;return!(!$g(window,"android")||!$g(window,"mobileweb"))},Gm=e=>{"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,32)};const Ym=function(){if("undefined"==typeof customElements)return;["ion-app"].forEach((e=>{if("ion-app"===e)customElements.get(e)||customElements.define(e,zm)}))},Xm=Ep(class extends Vp{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Hf(this,"ionNavWillLoad",7),this.ionNavWillChange=Hf(this,"ionNavWillChange",3),this.ionNavDidChange=Hf(this,"ionNavDidChange",3),this.gestureOrAnimationInProgress=!1,this.mode=em(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(void 0!==this.swipeHandler)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await yf((()=>i.import("./swipe-back-legacy-c55845e4.js")))).createSwipeBackGesture(this.el,(()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart()),(()=>e()),(e=>{var t;return null===(t=this.ani)||void 0===t?void 0:t.progressStep(e)}),((e,t,i)=>{if(this.ani){this.ani.onFinish((()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(e)}),{oneTimeCallback:!0});let n=e?-.001:.001;e?n+=Dg([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),n+=Dg([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.ani.progressEnd(e?1:0,n,i)}else this.gestureOrAnimationInProgress=!1})),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,t,i){const n=await this.lock();let r=!1;try{r=await this.transition(e,t,i)}catch(cy){console.error(cy)}return n(),r}async setRouteId(e,t,i,n){return{changed:await this.setRoot(e,t,{duration:"root"===i?0:void 0,direction:"back"===i?"back":"forward",animationBuilder:n}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,t,i){if(this.activeComponent===e&&rg(t,this.activeParams))return!1;const n=this.activeEl,r=await im(this.delegate,this.el,e,["ion-page","ion-page-invisible"],t);return this.activeComponent=e,this.activeEl=r,this.activeParams=t,await this.commit(r,n,i),await((e,t)=>{if(t){if(e){const i=t.parentElement;return e.removeViewFromDom(i,t)}t.remove()}return Promise.resolve()})(this.delegate,n),!0}async transition(e,t,i={}){if(t===e)return!1;this.ionNavWillChange.emit();const{el:n,mode:r}=this,o=this.animated&&Bg.getBoolean("animated",!0),a=i.animationBuilder||this.animation||Bg.get("navAnimation");var s;return await mg(Object.assign(Object.assign({mode:r,animated:o,enteringEl:e,leavingEl:t,baseEl:n,deepWait:(s=n,void 0!==s.componentOnReady),progressCallback:i.progressAnimation?e=>{void 0===e||this.gestureOrAnimationInProgress?this.ani=e:(this.gestureOrAnimationInProgress=!0,e.onFinish((()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)}),{oneTimeCallback:!0}),e.progressEnd(0,0,0))}:void 0},i),{animationBuilder:a})),this.ionNavDidChange.emit(),!0}async lock(){const e=this.waitPromise;let t;return this.waitPromise=new Promise((e=>t=e)),void 0!==e&&await e,t}render(){return jf("slot",null)}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);const qm=function(){if("undefined"==typeof customElements)return;["ion-router-outlet"].forEach((e=>{if("ion-router-outlet"===e)customElements.get(e)||customElements.define(e,Xm)}))},Km=Ep(class extends Vp{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=Hf(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){void 0!==this.selectedTab&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}connectedCallback(){this.keyboardCtrl=(e=>{let t,i,n;const r=()=>{t=()=>{n=!0,e&&e(!0)},i=()=>{n=!1,e&&e(!1)},null==og||og.addEventListener("keyboardWillShow",t),null==og||og.addEventListener("keyboardWillHide",i)};return r(),{init:r,destroy:()=>{null==og||og.removeEventListener("keyboardWillShow",t),null==og||og.removeEventListener("keyboardWillHide",i),t=i=void 0},isKeyboardVisible:()=>n}})((e=>{this.keyboardVisible=e}))}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:e,translucent:t,keyboardVisible:i}=this,n=em(this),r=i&&"top"!==this.el.getAttribute("slot");return jf($f,{role:"tablist","aria-hidden":r?"true":null,class:om(e,{[n]:!0,"tab-bar-translucent":t,"tab-bar-hidden":r})},jf("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-400, #999999));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",md:":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}"}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Zm=function(){if("undefined"==typeof customElements)return;["ion-tab-bar"].forEach((e=>{if("ion-tab-bar"===e)customElements.get(e)||customElements.define(e,Km)}))},Jm=Ep(class extends Vp{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=Hf(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{"Enter"!==e.key&&" "!==e.key||this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const t=e.target,i=this.el.parentElement;(e.composedPath().includes(i)||(null==t?void 0:t.contains(this.el)))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},Qp(this.el,["aria-label"])),void 0===this.layout&&(this.layout=Bg.get("tabButtonLayout","icon-top"))}selectTab(e){void 0!==this.tab&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:t,hasLabel:i,href:n,rel:r,target:o,layout:a,selected:s,tab:l,inheritedAttributes:c}=this,h=em(this),u={download:this.download,href:n,rel:r,target:o};return jf($f,{onClick:this.onClick,onKeyup:this.onKeyUp,id:void 0!==l?`tab-button-${l}`:null,class:{[h]:!0,"tab-selected":s,"tab-disabled":e,"tab-has-label":i,"tab-has-icon":t,"tab-has-label-only":i&&!t,"tab-has-icon-only":t&&!i,[`tab-layout-${a}`]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},jf("a",Object.assign({},u,{class:"button-native",part:"native",role:"tab","aria-selected":s?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},c),jf("span",{class:"button-inner"},jf("slot",null)),"md"===h&&jf("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge),:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',md:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}[dir=rtl] ::slotted(ion-icon),:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge),:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}'}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Qm=function(){if("undefined"==typeof customElements)return;["ion-tab-button","ion-ripple-effect"].forEach((e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,Jm);break;case"ion-ripple-effect":customElements.get(e)||function(){if("undefined"==typeof customElements)return;["ion-ripple-effect"].forEach((e=>{"ion-ripple-effect"===e&&(customElements.get(e)||customElements.define(e,am))}))}()}}))},ev=!0,tv=!0,iv=!0,nv=!1,rv=!1;let ov,av,sv,lv=!1,cv=!1,hv=!1,uv=!1,dv=null,fv=!1;const pv="http://www.w3.org/1999/xlink",gv={},mv=e=>"object"===(e=typeof e)||"function"===e;const vv=(e,t,...i)=>{let n=null,r=null,o=null,a=!1,s=!1;const l=[],c=t=>{for(let i=0;i<t.length;i++)n=t[i],Array.isArray(n)?c(n):null!=n&&"boolean"!=typeof n&&((a="function"!=typeof e&&!mv(n))&&(n=String(n)),a&&s?l[l.length-1].$text$+=n:l.push(a?_v(null,n):n),s=a)};if(c(i),t){t.key&&(r=t.key),t.name&&(o=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,l,yv);const h=_v(e,null);return h.$attrs$=t,l.length>0&&(h.$children$=l),h.$key$=r,h.$name$=o,h},_v=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return i},bv={},yv={forEach:(e,t)=>e.map(wv).forEach(t),map:(e,t)=>e.map(wv).map(t).map(xv)},wv=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),xv=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),vv(e.vtag,t,...e.vchildren||[])}const t=_v(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Sv=new WeakMap,Cv=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,n=t.$flags$,r=(t.$tagName$,()=>{}),o=((e,t,i,n)=>{var r;let o=Tv(t,i);const a=u_.get(o);if(e=11===e.nodeType?e:p_,a)if("string"==typeof a){e=e.head||e;let t,i=Sv.get(e);if(i||Sv.set(e,i=new Set),!i.has(o)){{t=p_.createElement("style"),t.innerHTML=a;const i=null!==(r=m_.$nonce$)&&void 0!==r?r:function(e){var t,i,n;return null!==(n=null===(i=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===i?void 0:i.getAttribute("content"))&&void 0!==n?n:void 0}(p_);null!=i&&t.setAttribute("nonce",i),e.insertBefore(t,e.querySelector("link"))}i&&i.add(o)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return o})(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);10&n&&(i["s-sc"]=o,i.classList.add(o+"-h"),2&n&&i.classList.add(o+"-s")),r()},Tv=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),Ev=(e,t,i,n,r,o)=>{if(i!==n){let a=c_(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,r=kv(i),o=kv(n);t.remove(...r.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!r.includes(e))))}else if("style"===t){for(const t in i)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)i&&n[t]===i[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=mv(n);if((a||l&&null!==n)&&!r)try{if(e.tagName.includes("-"))e[t]=n;else{const r=null==n?"":n;"list"===t?a=!1:null!=i&&e[t]==r||(e[t]=r)}}catch(cy){}let c=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,c=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(pv,t):e.removeAttribute(t)):(!a||4&o||r)&&!l&&(n=!0===n?"":n,c?e.setAttributeNS(pv,t,n):e.setAttribute(t,n))}else t="-"===t[2]?t.slice(3):c_(f_,s)?s.slice(2):s[2]+t.slice(3),i&&m_.rel(e,t,i,!1),n&&m_.ael(e,t,n,!1)}},Iv=/\s/,kv=e=>e?e.split(Iv):[],Ov=(e,t,i,n)=>{const r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||gv,a=t.$attrs$||gv;for(n in o)n in a||Ev(r,n,o[n],void 0,i,t.$flags$);for(n in a)Ev(r,n,o[n],a[n],i,t.$flags$)},Rv=(e,t,i,n)=>{const r=t.$children$[i];let o,a,s,l=0;if(lv||(hv=!0,"slot"===r.$tag$&&(ov&&n.classList.add(ov+"-s"),r.$flags$|=r.$children$?2:1)),null!==r.$text$)o=r.$elm$=p_.createTextNode(r.$text$);else if(1&r.$flags$)o=r.$elm$=p_.createTextNode("");else{if(uv||(uv="svg"===r.$tag$),o=r.$elm$=p_.createElementNS(uv?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&r.$flags$?"slot-fb":r.$tag$),uv&&"foreignObject"===r.$tag$&&(uv=!1),Ov(null,r,uv),(e=>null!=e)(ov)&&o["s-si"]!==ov&&o.classList.add(o["s-si"]=ov),r.$children$)for(l=0;l<r.$children$.length;++l)a=Rv(e,r,l,o),a&&o.appendChild(a);"svg"===r.$tag$?uv=!1:"foreignObject"===o.tagName&&(uv=!0)}return o["s-hn"]=sv,3&r.$flags$&&(o["s-sr"]=!0,o["s-cr"]=av,o["s-sn"]=r.$name$||"",s=e&&e.$children$&&e.$children$[i],s&&s.$tag$===r.$tag$&&e.$elm$&&Av(e.$elm$,!1)),o},Av=(e,t)=>{m_.$flags$|=1;const i=e.childNodes;for(let n=i.length-1;n>=0;n--){const e=i[n];e["s-hn"]!==sv&&e["s-ol"]&&(Fv(e).insertBefore(e,Pv(e)),e["s-ol"].remove(),e["s-ol"]=void 0,hv=!0),t&&Av(e,t)}m_.$flags$&=-2},Dv=(e,t,i,n,r,o)=>{let a,s=e["s-cr"]&&e["s-cr"].parentNode||e;for(s.shadowRoot&&s.tagName===sv&&(s=s.shadowRoot);r<=o;++r)n[r]&&(a=Rv(null,i,r,e),a&&(n[r].$elm$=a,s.insertBefore(a,Pv(t))))},Lv=(e,t,i,n,r)=>{for(;t<=i;++t)(n=e[t])&&(r=n.$elm$,Uv(n),cv=!0,r["s-ol"]?r["s-ol"].remove():Av(r,!0),r.remove())},Mv=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),Pv=e=>e&&e["s-ol"]||e,Fv=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Bv=(e,t)=>{const i=t.$elm$=e.$elm$,n=e.$children$,r=t.$children$,o=t.$tag$,a=t.$text$;let s;null===a?(uv="svg"===o||"foreignObject"!==o&&uv,"slot"===o||Ov(e,t,uv),null!==n&&null!==r?((e,t,i,n)=>{let r,o,a=0,s=0,l=0,c=0,h=t.length-1,u=t[0],d=t[h],f=n.length-1,p=n[0],g=n[f];for(;a<=h&&s<=f;)if(null==u)u=t[++a];else if(null==d)d=t[--h];else if(null==p)p=n[++s];else if(null==g)g=n[--f];else if(Mv(u,p))Bv(u,p),u=t[++a],p=n[++s];else if(Mv(d,g))Bv(d,g),d=t[--h],g=n[--f];else if(Mv(u,g))"slot"!==u.$tag$&&"slot"!==g.$tag$||Av(u.$elm$.parentNode,!1),Bv(u,g),e.insertBefore(u.$elm$,d.$elm$.nextSibling),u=t[++a],g=n[--f];else if(Mv(d,p))"slot"!==u.$tag$&&"slot"!==g.$tag$||Av(d.$elm$.parentNode,!1),Bv(d,p),e.insertBefore(d.$elm$,u.$elm$),d=t[--h],p=n[++s];else{for(l=-1,c=a;c<=h;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===p.$key$){l=c;break}l>=0?(o=t[l],o.$tag$!==p.$tag$?r=Rv(t&&t[s],i,l,e):(Bv(o,p),t[l]=void 0,r=o.$elm$),p=n[++s]):(r=Rv(t&&t[s],i,s,e),p=n[++s]),r&&Fv(u.$elm$).insertBefore(r,Pv(u.$elm$))}a>h?Dv(e,null==n[f+1]?null:n[f+1].$elm$,i,n,s,f):s>f&&Lv(t,a,h)})(i,n,t,r):null!==r?(null!==e.$text$&&(i.textContent=""),Dv(i,null,t,r,0,r.length-1)):null!==n&&Lv(n,0,n.length-1),uv&&"svg"===o&&(uv=!1)):(s=i["s-cr"])?s.parentNode.textContent=a:e.$text$!==a&&(i.data=a)},Nv=e=>{const t=e.childNodes;let i,n,r,o,a,s;for(n=0,r=t.length;n<r;n++)if(i=t[n],1===i.nodeType){if(i["s-sr"])for(a=i["s-sn"],i.hidden=!1,o=0;o<r;o++)if(s=t[o].nodeType,t[o]["s-hn"]!==i["s-hn"]||""!==a){if(1===s&&a===t[o].getAttribute("slot")){i.hidden=!0;break}}else if(1===s||3===s&&""!==t[o].textContent.trim()){i.hidden=!0;break}Nv(i)}},jv=[],Vv=e=>{let t,i,n,r,o,a,s=0;const l=e.childNodes,c=l.length;for(;s<c;s++){if(t=l[s],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(n=i.parentNode.childNodes,r=t["s-sn"],a=n.length-1;a>=0;a--)i=n[a],i["s-cn"]||i["s-nr"]||i["s-hn"]===t["s-hn"]||($v(i,r)?(o=jv.find((e=>e.$nodeToRelocate$===i)),cv=!0,i["s-sn"]=i["s-sn"]||r,o?o.$slotRefNode$=t:jv.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&jv.map((e=>{$v(e.$nodeToRelocate$,i["s-sn"])&&(o=jv.find((e=>e.$nodeToRelocate$===i)),o&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$))}))):jv.some((e=>e.$nodeToRelocate$===i))||jv.push({$nodeToRelocate$:i}));1===t.nodeType&&Vv(t)}},$v=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,Uv=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Uv)},Wv=(e,t)=>{const i=e.$hostElement$,n=e.$cmpMeta$,r=e.$vnode$||_v(null,null),o=(a=t)&&a.$tag$===bv?t:vv(null,null,t);var a;if(sv=i.tagName,n.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},n.$attrsToReflect$.map((([e,t])=>o.$attrs$[t]=i[e]))),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=r.$elm$=i.shadowRoot||i,ov=i["s-sc"],av=i["s-cr"],lv=0!=(1&n.$flags$),cv=!1,Bv(r,o),m_.$flags$|=1,hv){let e,t,i,n,r,a;Vv(o.$elm$);let s=0;for(;s<jv.length;s++)e=jv[s],t=e.$nodeToRelocate$,t["s-ol"]||(i=p_.createTextNode(""),i["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=i,t));for(s=0;s<jv.length;s++)if(e=jv[s],t=e.$nodeToRelocate$,e.$slotRefNode$){for(n=e.$slotRefNode$.parentNode,r=e.$slotRefNode$.nextSibling,i=t["s-ol"];i=i.previousSibling;)if(a=i["s-nr"],a&&a["s-sn"]===t["s-sn"]&&n===a.parentNode&&(a=a.nextSibling,!a||!a["s-nr"])){r=a;break}(!r&&n!==t.parentNode||t.nextSibling!==r)&&t!==r&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),n.insertBefore(t,r))}else 1===t.nodeType&&(t.hidden=!0)}cv&&Nv(o.$elm$),m_.$flags$&=-2,jv.length=0},zv=(e,t)=>{e.$flags$|=16,e.$ancestorComponent$;return T_((()=>Hv(e,t)))},Hv=(e,t)=>{const i=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{}),r=i;let o;return o=qv(r,t?"componentWillLoad":"componentWillUpdate"),o=Kv(o,(()=>qv(r,"componentWillRender"))),n(),Kv(o,(()=>Gv(e,r,t)))},Gv=async(e,t,i)=>{const n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{});n["s-rc"],i&&Cv(e);const o=(e.$cmpMeta$.$tagName$,()=>{});Yv(e,t,n),o(),r(),Xv(e)},Yv=(e,t,i)=>{try{dv=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(ev||tv)&&(iv||tv)&&(nv||Wv(e,t))}catch(cy){h_(cy,e.$hostElement$)}return dv=null,null},Xv=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},i=e.$hostElement$;e.$ancestorComponent$,qv(i,"componentDidRender"),64&e.$flags$?(qv(i,"componentDidUpdate"),t()):(e.$flags$|=64,qv(i,"componentDidLoad"),t())},qv=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(cy){h_(cy)}},Kv=(e,t)=>e&&e.then?e.then(t):t(),Zv=(e,t,i,n)=>{const r=s_(e),o=e,a=r.$instanceValues$.get(t),s=r.$flags$,l=o;var c,h;c=i,h=n.$members$[t][0],i=null==c||mv(c)?c:4&h?"false"!==c&&(""===c||!!c):2&h?parseFloat(c):1&h?String(c):c;const u=Number.isNaN(a)&&Number.isNaN(i);if(i!==a&&!u){if(r.$instanceValues$.set(t,i),n.$watchers$&&128&s){const e=n.$watchers$[t];e&&e.map((e=>{try{l[e](i,a,t)}catch(cy){h_(cy,o)}}))}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(i,a,t))return;zv(r,!1)}}},Jv=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),n=e.prototype;i.map((([e,[i]])=>{(31&i||32&i)&&Object.defineProperty(n,e,{get(){return t=e,s_(this).$instanceValues$.get(t);var t},set(i){Zv(this,e,i,t)},configurable:!0,enumerable:!0})}));{const r=new Map;n.attributeChangedCallback=function(e,t,i){m_.jmp((()=>{const t=r.get(e);if(this.hasOwnProperty(t))i=this[t],delete this[t];else if(n.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==i)return;this[t]=(null!==i||"boolean"!=typeof this[t])&&i}))},e.observedAttributes=i.filter((([e,t])=>15&t[0])).map((([e,i])=>{const n=i[1]||e;return r.set(n,e),512&i[0]&&t.$attrsToReflect$.push([e,n]),n}))}}return e},Qv=async(e,t,i,n,r)=>{if(0==(32&t.$flags$)&&(r=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then((()=>t.$flags$|=128)),r.style)){let n=r.style;"string"!=typeof n&&(n=n[t.$modeName$=(e=>d_.map((t=>t(e))).find((e=>!!e)))(e)]);const o=Tv(i,t.$modeName$);if(!u_.has(o)){const e=(i.$tagName$,()=>{});((e,t,i)=>{let n=u_.get(e);__&&i?(n=n||new CSSStyleSheet,"string"==typeof n?n=t:n.replaceSync(t)):n=t,u_.set(e,n)})(o,n,!!(1&i.$flags$)),e()}}t.$ancestorComponent$;zv(t,!0)},e_=e=>{const t=e["s-cr"]=p_.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},t_=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const n=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){l_(this,i)},connectedCallback(){(e=>{if(0==(1&m_.$flags$)){const t=s_(e),i=t.$cmpMeta$,n=(i.$tagName$,()=>{});1&t.$flags$?(i_(e,t,i.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&i.$flags$&&e_(e),i.$members$&&Object.entries(i.$members$).map((([t,[i]])=>{if(31&i&&e.hasOwnProperty(t)){const i=e[t];delete e[t],e[t]=i}})),Qv(e,t,i)),n()}})(this),n&&n.call(this)},disconnectedCallback(){(e=>{if(0==(1&m_.$flags$)){const t=s_(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&i.$flags$)})}}),e.is=i.$tagName$,Jv(e,i)},i_=(e,t,i,n)=>{i&&i.map((([i,n,r])=>{const o=r_(e,i),a=n_(t,r),s=o_(i);m_.ael(o,n,a,s),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>m_.rel(o,n,a,s)))}))},n_=(e,t)=>i=>{try{rv||e.$hostElement$[t](i)}catch(cy){h_(cy)}},r_=(e,t)=>4&t?p_:8&t?f_:16&t?p_.body:e,o_=e=>v_?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),a_=new WeakMap,s_=e=>a_.get(e),l_=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return i_(e,i,t.$listeners$),a_.set(e,i)},c_=(e,t)=>t in e,h_=(e,t)=>(0,console.error)(e,t),u_=new Map,d_=[],f_="undefined"!=typeof window?window:{},p_=f_.document||{head:{}},g_=f_.HTMLElement||class{},m_={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,n)=>e.addEventListener(t,i,n),rel:(e,t,i,n)=>e.removeEventListener(t,i,n),ce:(e,t)=>new CustomEvent(e,t)},v_=(()=>{let e=!1;try{p_.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(cy){}return e})(),__=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(cy){}return!1})(),b_=[],y_=[],w_=(e,t)=>i=>{e.push(i),fv||(fv=!0,t&&4&m_.$flags$?C_(S_):m_.raf(S_))},x_=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(cy){h_(cy)}e.length=0},S_=()=>{x_(b_),x_(y_),(fv=b_.length>0)&&m_.raf(S_)},C_=e=>(e=>Promise.resolve(e))().then(e),T_=w_(y_,!0);let E_;const I_=e=>{const t=(()=>{if("undefined"==typeof window)return new Map;if(!E_){const e=window;e.Ionicons=e.Ionicons||{},E_=e.Ionicons.map=e.Ionicons.map||new Map}return E_})().get(e);return t||(e=>{const t=new URL(e,m_.$resourcesUrl$);return t.origin!==f_.location.origin?t.href:t.pathname})(`svg/${e}.svg`)},k_=(e,t,i,n,r)=>{if(i="ios"===(i&&D_(i))?"ios":"md",n&&"ios"===i?e=D_(n):r&&"md"===i?e=D_(r):(e||!t||R_(t)||(e=t),A_(e)&&(e=D_(e))),!A_(e)||""===e.trim())return null;return""!==e.replace(/[a-z]|-|\d/gi,"")?null:e},O_=e=>A_(e)&&(e=e.trim(),R_(e))?e:null,R_=e=>e.length>0&&/(\/|\.)/.test(e),A_=e=>"string"==typeof e,D_=e=>e.toLowerCase(),L_=e=>{if(1===e.nodeType){if("script"===e.nodeName.toLowerCase())return!1;for(let t=0;t<e.attributes.length;t++){const i=e.attributes[t].name;if(A_(i)&&0===i.toLowerCase().indexOf("on"))return!1}for(let t=0;t<e.childNodes.length;t++)if(!L_(e.childNodes[t]))return!1}return!0},M_=new Map,P_=new Map;let F_;const B_=(e,t)=>{let i=P_.get(e);if(!i){if("undefined"==typeof fetch||"undefined"==typeof document)return M_.set(e,""),Promise.resolve();if((e=>e.startsWith("data:image/svg+xml"))(e)&&(e=>-1!==e.indexOf(";utf8,"))(e)){F_||(F_=new DOMParser);const t=F_.parseFromString(e,"text/html").querySelector("svg");return t&&M_.set(e,t.outerHTML),Promise.resolve()}i=fetch(e).then((i=>{if(i.ok)return i.text().then((i=>{i&&!1!==t&&(i=(e=>{const t=document.createElement("div");t.innerHTML=e;for(let n=t.childNodes.length-1;n>=0;n--)"svg"!==t.childNodes[n].nodeName.toLowerCase()&&t.removeChild(t.childNodes[n]);const i=t.firstElementChild;if(i&&"svg"===i.nodeName.toLowerCase()){const e=i.getAttribute("class")||"";if(i.setAttribute("class",(e+" s-ion-icon").trim()),L_(i))return t.innerHTML}return""})(i)),M_.set(e,i||"")}));M_.set(e,"")})),P_.set(e,i)}return i},N_=t_(class extends g_{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=j_(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((e,t=[])=>{const i={};return t.forEach((t=>{e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(i[t]=e.getAttribute(t)),e.removeAttribute(t))})),i})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",(()=>{this.isVisible=!0,this.loadIcon()}))}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,i){if(this.lazy&&"undefined"!=typeof window&&window.IntersectionObserver){const n=this.io=new window.IntersectionObserver((e=>{e[0].isIntersecting&&(n.disconnect(),this.io=void 0,i())}),{rootMargin:t});n.observe(e)}else i()}loadIcon(){if(this.isVisible){const e=(e=>{let t=O_(e.src);if(t)return t;if(t=k_(e.name,e.icon,e.mode,e.ios,e.md),t)return I_(t);if(e.icon){if(t=O_(e.icon),t)return t;if(t=O_(e.icon[e.mode]),t)return t}return null})(this);e&&(M_.has(e)?this.svgContent=M_.get(e):B_(e,this.sanitize).then((()=>this.svgContent=M_.get(e))))}this.iconName=k_(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{iconName:e,el:t,inheritedAttributes:i}=this,n=this.mode||"md",r=this.flipRtl||e&&(e.indexOf("arrow")>-1||e.indexOf("chevron")>-1)&&!1!==this.flipRtl;return vv(bv,Object.assign({role:"img",class:Object.assign(Object.assign({[n]:!0},V_(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":!!r&&(o=t,o&&""!==o.dir?"rtl"===o.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))})},i),this.svgContent?vv("div",{class:"icon-inner",innerHTML:this.svgContent}):vv("div",{class:"icon-inner"}));var o}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),j_=()=>"undefined"!=typeof document&&document.documentElement.getAttribute("mode")||"md",V_=e=>e?{"ion-color":!0,[`ion-color-${e}`]:!0}:null;const $_=function(){if("undefined"==typeof customElements)return;["ion-icon"].forEach((e=>{if("ion-icon"===e)customElements.get(e)||customElements.define(e,N_)}))},U_=U.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{}}),W_=U.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:e=>{"undefined"!=typeof window&&("string"==typeof e?window.location.pathname=e:window.history.back())},navigate:e=>{"undefined"!=typeof window&&(window.location.pathname=e)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(e,t)=>{"undefined"!=typeof window&&(window.location.pathname=t)},resetTab:(e,t)=>{"undefined"!=typeof window&&(window.location.pathname=t)}}),z_=e=>e.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),H_=(e,t,i)=>{const n=t.className||t.class,r=i.className||i.class,o=X_(e),a=X_(n?n.split(" "):[]),s=X_(r?r.split(" "):[]),l=[];return o.forEach((e=>{a.has(e)?(l.push(e),a.delete(e)):s.has(e)||l.push(e)})),a.forEach((e=>l.push(e))),l.join(" ")},G_=e=>{if("undefined"==typeof document)return!0;{const t="on"+e;let i=t in document;if(!i){const e=document.createElement("div");e.setAttribute(t,"return;"),i="function"==typeof e[t]}return i}},Y_=(e,t,i)=>{const n=e.__events||(e.__events={}),r=n[t];r&&e.removeEventListener(t,r),e.addEventListener(t,n[t]=function(e){i&&i.call(this,e)})},X_=e=>{const t=new Map;return e.forEach((e=>t.set(e,e))),t},q_=(...e)=>t=>{e.forEach((e=>{((e,t)=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})(e,t)}))},K_=(e,t,i,n)=>{void 0!==n&&n();const r=e.toLowerCase().split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("");const o=class extends U.Component{constructor(e){super(e),this.setComponentElRef=e=>{this.componentEl=e}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(e){((e,t,i={})=>{if(e instanceof Element){const n=H_(e.classList,t,i);""!==n&&(e.className=n),Object.keys(t).forEach((i=>{if("children"!==i&&"style"!==i&&"ref"!==i&&"class"!==i&&"className"!==i&&"forwardedRef"!==i)if(0===i.indexOf("on")&&i[2]===i[2].toUpperCase()){const n=i.substring(2),r=n[0].toLowerCase()+n.substring(1);G_(r)||Y_(e,r,t[i])}else e[i]=t[i],"string"==typeof t[i]&&e.setAttribute(z_(i),t[i])}))}})(this.componentEl,this.props,e)}render(){const t=this.props,{children:n,forwardedRef:r,style:o,className:a,ref:s}=t,l=nm(t,["children","forwardedRef","style","className","ref"]);let c=Object.keys(l).reduce(((e,t)=>{const i=l[t];if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const n=t.substring(2).toLowerCase();"undefined"!=typeof document&&G_(n)&&(e[t]=i)}else{const n=typeof i;"string"!==n&&"boolean"!==n&&"number"!==n||(e[z_(t)]=i)}return e}),{});i&&(c=i(this.props,c));const h=Object.assign(Object.assign({},c),{ref:q_(r,this.setComponentElRef),style:o});return $.createElement(e,h,n)}static get displayName(){return r}};return t&&(o.contextType=t),((e,t)=>{const i=(t,i)=>U.createElement(e,Object.assign({},t,{forwardedRef:i}));return i.displayName=t,U.forwardRef(i)})(o,r)},Z_=K_("ion-content",void 0,void 0,gm),J_=K_("ion-header",void 0,void 0,Dm),Q_=K_("ion-label",void 0,void 0,Lm),eb=K_("ion-title",void 0,void 0,Vm),tb=K_("ion-toolbar",void 0,void 0,Um),ib=(e,t)=>{const i=(t,i)=>U.createElement(e,Object.assign({},t,{forwardedRef:i}));return i.displayName=t,U.forwardRef(i)},nb=()=>{if("undefined"!=typeof window){const e=window.Ionic;if(e&&e.config)return e.config}return null},rb=U.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),ob=({onAddOverlay:e,onRemoveOverlay:t})=>{const[i,n]=$.useState({}),r=$.useRef({});r.current=i,$.useEffect((()=>{e(o),t(a)}),[]);const o=(e,t,i)=>{const o=Object.assign({},r.current);o[e]={component:t,containerElement:i},n(o)},a=e=>{const t=Object.assign({},r.current);delete t[e],n(t)},s=Object.keys(i);return U.createElement(U.Fragment,null,s.map((e=>{const t=i[e];return au.createPortal(t.component,t.containerElement,`overlay-${e}`)})))},ab=K_("ion-tab-button",void 0,void 0,Qm),sb=K_("ion-tab-bar",void 0,void 0,Zm),lb=K_("ion-router-outlet",void 0,void 0,qm),cb=K_("ion-app",void 0,void 0,Ym),hb=K_("ion-icon",void 0,void 0,$_),ub=(()=>class extends U.Component{constructor(e){super(e),this.ionContext={addOverlay:(e,t,i)=>{this.addOverlayCallback&&this.addOverlayCallback(e,t,i)},removeOverlay:e=>{this.removeOverlayCallback&&this.removeOverlayCallback(e)}}}render(){return U.createElement(rb.Provider,{value:this.ionContext},U.createElement(cb,Object.assign({},this.props),this.props.children),U.createElement(ob,{onAddOverlay:e=>{this.addOverlayCallback=e},onRemoveOverlay:e=>{this.removeOverlayCallback=e}}))}static get displayName(){return"IonApp"}})(),db=U.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class fb extends U.PureComponent{constructor(e){super(e),this.ionPageElementRef=U.createRef(),this.stableMergedRefs=q_(this.ionPageElementRef,this.props.forwardedRef)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{className:t,children:i,routeInfo:n,forwardedRef:r}=e,o=nm(e,["className","children","routeInfo","forwardedRef"]);return U.createElement(U_.Consumer,null,(e=>(this.ionLifeCycleContext=e,U.createElement("div",Object.assign({className:t?`${t} ion-page`:"ion-page",ref:this.stableMergedRefs},o),i))))}static get contextType(){return db}}class pb extends U.Component{constructor(e){super(e)}render(){const e=this.props,{className:t,children:i,forwardedRef:n}=e,r=nm(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?U.createElement(fb,Object.assign({className:t?`${t}`:"",routeInfo:this.context.routeInfo,forwardedRef:n},r),i):U.createElement("div",Object.assign({className:t?`ion-page ${t}`:"ion-page",ref:n},r),i)}static get displayName(){return"IonPage"}static get contextType(){return W_}}const gb=ib(pb,"IonPage"),mb=K_("ion-nav",void 0,void 0,Nm);ib((e=>{var{children:t,forwardedRef:i}=e,n=nm(e,["children","forwardedRef"]);const[r,o]=$.useState([]),a=e=>o((t=>[...t,e])),s=e=>o((t=>t.filter((t=>t!==e)))),l=$.useMemo((()=>((e,t)=>{const i=new WeakMap;return{attachViewToDom:async(t,n,r,o)=>{const a=document.createElement("div");o&&a.classList.add(...o),t.appendChild(a);const s=n(r),l=ou.createPortal(s,a);return i.set(a,l),e(l),Promise.resolve(a)},removeViewFromDom:(e,n)=>{const r=i.get(n);return r&&t(r),n.remove(),Promise.resolve()}}})(a,s)),[]);return U.createElement(mb,Object.assign({delegate:l,ref:i},n),r)}),"IonNav");const vb=U.createContext({activeTab:void 0,selectTab:()=>!1}),_b="undefined"!=typeof HTMLElement?HTMLElement:class{};class bb extends U.Component{constructor(e){super(e),this.outletIsReady=!1}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||Jp(this.ionRouterOutlet,(()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)})),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{StackManager:t,children:i,routeInfo:n}=e,r=nm(e,["StackManager","children","routeInfo"]);return U.createElement(U_.Consumer,null,(e=>(this.ionLifeCycleContext=e,U.createElement(t,{routeInfo:n},U.createElement(lb,Object.assign({setRef:e=>this.ionRouterOutlet=e},r),i)))))}static get contextType(){return db}}class yb extends U.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),t=this.props,{children:i,forwardedRef:n}=t,r=nm(t,["children","forwardedRef"]);return this.context.hasIonicRouter()?r.ionPage?U.createElement(bb,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},r),i):U.createElement(e,{routeInfo:this.context.routeInfo},U.createElement(lb,Object.assign({},r,{forwardedRef:n}),i)):U.createElement(lb,Object.assign({ref:n},this.props),this.props.children)}static get contextType(){return W_}}const wb=ib(yb,"IonRouterOutlet"),xb=(()=>class extends U.Component{constructor(e){super(e),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const e=nm(this.props,["onClick"]);return U.createElement(ab,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}static get displayName(){return"IonTabButton"}})();class Sb extends U.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=e=>{};const t={};U.Children.forEach(e.children,(i=>{var n,r,o,a;null!=i&&"object"==typeof i&&i.props&&(i.type===xb||i.type.isTabButton)&&(t[i.props.tab]={originalHref:i.props.href,currentHref:i.props.href,originalRouteOptions:i.props.href===(null===(n=e.routeInfo)||void 0===n?void 0:n.pathname)?null===(r=e.routeInfo)||void 0===r?void 0:r.routeOptions:void 0,currentRouteOptions:i.props.href===(null===(o=e.routeInfo)||void 0===o?void 0:o.pathname)?null===(a=e.routeInfo)||void 0===a?void 0:a.routeOptions:void 0})})),this.state={tabs:t},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,t=Object.keys(e).find((t=>{const i=e[t].originalHref;return this.props.routeInfo.pathname.startsWith(i)}));t&&this.setState({activeTab:t})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const t=this.state.tabs[e];return!!t&&(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:t.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0)}static getDerivedStateFromProps(e,t){var i,n,r;const o=Object.assign({},t.tabs),a=Object.keys(t.tabs).find((i=>{const n=t.tabs[i].originalHref;return e.routeInfo.pathname.startsWith(n)}));U.Children.forEach(e.children,(e=>{if(null!=e&&"object"==typeof e&&e.props&&(e.type===xb||e.type.isTabButton)){const t=o[e.props.tab];t&&t.originalHref===e.props.href||(o[e.props.tab]={originalHref:e.props.href,currentHref:e.props.href,originalRouteOptions:e.props.routeOptions,currentRouteOptions:e.props.routeOptions})}}));const{activeTab:s}=t;if(a&&s){const l=t.tabs[s].currentHref,c=t.tabs[s].currentRouteOptions;a===s&&l===(null===(i=e.routeInfo)||void 0===i?void 0:i.pathname)&&c===(null===(n=e.routeInfo)||void 0===n?void 0:n.routeOptions)||(o[a]={originalHref:o[a].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:o[a].originalRouteOptions,currentRouteOptions:null===(r=e.routeInfo)||void 0===r?void 0:r.routeOptions},"pop"===e.routeInfo.routeAction&&a!==s&&(o[s]={originalHref:o[s].originalHref,currentHref:o[s].originalHref,originalRouteOptions:o[s].originalRouteOptions,currentRouteOptions:o[s].currentRouteOptions}))}return a&&e.onSetCurrentTab(a,e.routeInfo),{activeTab:a,tabs:o}}onTabButtonClick(e,t){const i=this.state.tabs[e.detail.tab],n=i.originalHref,r=e.detail.href,{activeTab:o}=this.state;t&&t(e),o===e.detail.tab?n!==r&&this.context.resetTab(e.detail.tab,n,i.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,r,e.detail.routeOptions))}renderTabButton(e){return t=>{var i,n;if(null!=t&&t.props&&(t.type===xb||t.type.isTabButton)){const r=t.props.tab===e?null===(i=this.props.routeInfo)||void 0===i?void 0:i.pathname:this.state.tabs[t.props.tab].currentHref,o=t.props.tab===e?null===(n=this.props.routeInfo)||void 0===n?void 0:n.routeOptions:this.state.tabs[t.props.tab].currentRouteOptions;return U.cloneElement(t,{href:r,routeOptions:o,onClick:e=>this.onTabButtonClick(e,t.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return U.createElement(sb,Object.assign({},this.props,{selectedTab:e}),U.Children.map(this.props.children,this.renderTabButton(e)))}static get contextType(){return W_}}const Cb=U.memo((e=>{var{forwardedRef:t}=e,i=nm(e,["forwardedRef"]);const n=$.useContext(W_);return U.createElement(Sb,Object.assign({ref:t},i,{routeInfo:i.routeInfo||n.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:n.setCurrentTab}),i.children)})),Tb=ib(Cb,"IonTabBar");class Eb extends _b{constructor(){super()}}if("undefined"!=typeof window&&window.customElements){window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",Eb)}const Ib={display:"flex",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",flexDirection:"column",width:"100%",height:"100%",contain:"layout size style"},kb={position:"relative",flex:1,contain:"layout size style"},Ob=(()=>class extends U.Component{constructor(e){super(e),this.routerOutletRef=U.createRef(),this.tabBarRef=U.createRef(),this.ionTabContextState={activeTab:void 0,selectTab:()=>!1}}componentDidMount(){this.tabBarRef.current&&(this.ionTabContextState.activeTab=this.tabBarRef.current.state.activeTab,this.tabBarRef.current.setActiveTabOnContext=e=>{this.ionTabContextState.activeTab=e},this.ionTabContextState.selectTab=this.tabBarRef.current.selectTab)}render(){let e,t;const i=this.props,{className:n,onIonTabsDidChange:r,onIonTabsWillChange:o}=i,a=nm(i,["className","onIonTabsDidChange","onIonTabsWillChange"]),s="function"==typeof this.props.children?this.props.children(this.ionTabContextState):this.props.children;if(U.Children.forEach(s,(i=>{if(null==i||"object"!=typeof i||!i.hasOwnProperty("type"))return;i.type===wb||i.type.isRouterOutlet?e=U.cloneElement(i):i.type===$.Fragment&&i.props.children[0].type===wb&&(e=i.props.children[0]);let n={ref:this.tabBarRef};void 0!==r&&(n=Object.assign(Object.assign({},n),{onIonTabsDidChange:r})),void 0!==o&&(n=Object.assign(Object.assign({},n),{onIonTabsWillChange:o})),i.type===Tb||i.type.isTabBar?t=U.cloneElement(i,n):i.type!==$.Fragment||i.props.children[1].type!==Tb&&!i.props.children[1].type.isTabBar||(t=U.cloneElement(i.props.children[1],n))})),!e)throw new Error("IonTabs must contain an IonRouterOutlet");if(!t)throw new Error("IonTabs needs a IonTabBar");return U.createElement(vb.Provider,{value:this.ionTabContextState},this.context.hasIonicRouter()?U.createElement(fb,Object.assign({className:n?`${n}`:"",routeInfo:this.context.routeInfo},a),U.createElement("ion-tabs",{className:"ion-tabs",style:Ib},"top"===t.props.slot?t:null,U.createElement("div",{style:kb,className:"tabs-inner"},e),"bottom"===t.props.slot?t:null)):U.createElement("div",Object.assign({className:n?`${n}`:"ion-tabs"},a,{style:Ib}),"top"===t.props.slot?t:null,U.createElement("div",{style:kb,className:"tabs-inner"},e),"bottom"===t.props.slot?t:null))}static get contextType(){return W_}})();class Rb extends U.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var e,t;const i=this.props,{icon:n,ios:r,md:o,mode:a}=i,s=nm(i,["icon","ios","md","mode"]);let l;const c=nb(),h=a||(null==c?void 0:c.get("mode"));return l=r||o?"ios"===h?null!==(e=null!=r?r:o)&&void 0!==e?e:n:null!==(t=null!=o?o:r)&&void 0!==t?t:n:n,U.createElement(hb,Object.assign({ref:this.props.forwardedRef,icon:l},s),this.props.children)}static get contextType(){return W_}}const Ab=ib(Rb,"IonIcon");class Db extends U.PureComponent{render(){const e=this.context.getIonRoute();return this.context.hasIonicRouter()&&Db?U.createElement(e,Object.assign({},this.props)):(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null)}static get contextType(){return W_}}class Lb extends U.PureComponent{render(){const e=this.context.getIonRedirect();return this.context.hasIonicRouter()&&Lb?U.createElement(e,Object.assign({},this.props)):(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null)}static get contextType(){return W_}}const Mb=U.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});class Pb extends U.PureComponent{constructor(e){super(e),this.nodes=new Map,this.animation=createAnimation(e.id)}setupAnimation(e){const t=this.animation;this.nodes.size>0&&t.addElement(Array.from(this.nodes.values())),checkConfig(t,e),checkPlayback(t,e)}componentDidMount(){const e=this.props;this.setupAnimation(e)}componentDidUpdate(e){const t=this.animation,i=this.props;checkConfig(t,i,e),checkProgress(t,i,e),checkPlayback(t,i,e)}render(){const{children:e}=this.props;return U.createElement(U.Fragment,null,U.Children.map(e,((e,t)=>U.cloneElement(e,{ref:e=>this.nodes.set(t,e)}))))}}const Fb={main:0},Bb=(e="main")=>{var t;const i=(null!==(t=Fb[e])&&void 0!==t?t:0)+1;return Fb[e]=i,i.toString()},Nb=U.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class jb extends U.Component{constructor(e){super(e),this.ionLifeCycleContext=new class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}onIonViewWillEnter(e){if(e.id){const t=this.ionViewWillEnterCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewWillEnterCallbacks[t]=e:this.ionViewWillEnterCallbacks.push(e)}else this.ionViewWillEnterCallbacks.push(e)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach((e=>e()))}onIonViewDidEnter(e){if(e.id){const t=this.ionViewDidEnterCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewDidEnterCallbacks[t]=e:this.ionViewDidEnterCallbacks.push(e)}else this.ionViewDidEnterCallbacks.push(e)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach((e=>e()))}onIonViewWillLeave(e){if(e.id){const t=this.ionViewWillLeaveCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewWillLeaveCallbacks[t]=e:this.ionViewWillLeaveCallbacks.push(e)}else this.ionViewWillLeaveCallbacks.push(e)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach((e=>e()))}onIonViewDidLeave(e){if(e.id){const t=this.ionViewDidLeaveCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewDidLeaveCallbacks[t]=e:this.ionViewDidLeaveCallbacks.push(e)}else this.ionViewDidLeaveCallbacks.push(e)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach((e=>e())),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(e){this.componentCanBeDestroyedCallback=e}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed((()=>{this.props.mount||this._isMounted&&this.setState({show:!1},(()=>this.props.removeView()))})),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return U.createElement(U_.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}class Vb{constructor(){this.locationHistory=[],this.tabHistory={}}add(e){"push"===e.routeAction||null==e.routeAction?this._add(e):"pop"===e.routeAction?this._pop(e):"replace"===e.routeAction&&this._replace(e),"root"===e.routeDirection&&(this._clear(),this._add(e))}clearTabStack(e){const t=this._getRouteInfosByKey(e);t&&(t.forEach((e=>{this.locationHistory=this.locationHistory.filter((t=>t.id!==e.id))})),this.tabHistory[e]=[])}update(e){const t=this.locationHistory.findIndex((t=>t.id===e.id));t>-1&&this.locationHistory.splice(t,1,e);const i=this.tabHistory[e.tab||""];if(i){const t=i.findIndex((t=>t.id===e.id));t>-1?i.splice(t,1,e):i.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}_add(e){const t=this._getRouteInfosByKey(e.tab);t&&(this._areRoutesEqual(t[t.length-1],e)&&t.pop(),t.push(e)),this.locationHistory.push(e)}_areRoutesEqual(e,t){return!(!e||!t)&&(e.pathname===t.pathname&&e.search===t.search)}_pop(e){const t=this._getRouteInfosByKey(e.tab);t&&(t.pop(),t.pop(),t.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}_replace(e){const t=this._getRouteInfosByKey(e.tab);t&&t.pop(),this.locationHistory.pop(),this._add(e)}_clear(){Object.keys(this.tabHistory).forEach((e=>this.tabHistory[e]=[])),this.locationHistory=[]}_getRouteInfosByKey(e){let t;return e&&(t=this.tabHistory[e],t||(t=this.tabHistory[e]=[])),t}getFirstRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[0]}getCurrentRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[t.length-1]}findLastLocation(e){const t=this._getRouteInfosByKey(e.tab);if(t)for(let i=t.length-2;i>=0;i--){const n=t[i];if(n&&n.pathname===e.pushedByRoute)return n}for(let i=this.locationHistory.length-2;i>=0;i--){const t=this.locationHistory[i];if(t&&t.pathname===e.pushedByRoute)return t}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class $b extends U.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(e,t,i,n,r)=>{this.navigate(e,t,i,r,n)},back:e=>{this.goBack(void 0,e)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){"undefined"!=typeof document&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){"undefined"!=typeof document&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,(e=>{this.nativeGoBack(),e()}))}goBack(e,t){this.props.onNavigateBack(e,t)}nativeGoBack(){this.props.onNativeBack()}navigate(e,t="forward",i="push",n,r,o){this.props.onNavigate(e,i,t,n,r,o)}getPageManager(){return fb}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return U.createElement(W_.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},U.createElement(Mb.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class Ub{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(e){const{outletId:t}=e;this.viewStacks[t]?this.viewStacks[t].push(e):this.viewStacks[t]=[e]}clear(e){return setTimeout((()=>{delete this.viewStacks[e]}),500)}getViewItemsForOutlet(e){return this.viewStacks[e]||[]}remove(e){const{outletId:t}=e,i=this.viewStacks[t];if(i){const n=i.find((t=>t.id===e.id));n&&(n.mount=!1,this.viewStacks[t]=i.filter((e=>e.id!==n.id)))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const e=this.getStackIds(),t=[];return e.forEach((e=>{t.push(...this.viewStacks[e])})),t}}class Wb extends U.PureComponent{render(){return U.createElement(bf,{path:this.props.path,exact:this.props.exact,render:this.props.render,computedMatch:this.props.computedMatch})}}class zb extends Ub{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(e,t,i,n){const r={id:Bb("viewItem"),outletId:e,ionPageElement:n,reactElement:t,mount:!0,ionRoute:!1},o={exact:t.props.exact,path:t.props.path||t.props.from,component:t.props.component},a=_f(i.pathname,o);return t.type===Db&&(r.ionRoute=!0,r.disableIonPageManagement=t.props.disableIonPageManagement),r.routeData={match:a,childProps:t.props},r}getChildrenToRender(e,t,i){const n=this.getViewItemsForOutlet(e);U.Children.forEach(t.props.children,(e=>{const t=n.find((t=>Hb(e,t.routeData.childProps.path||t.routeData.childProps.from)));t&&(t.reactElement=e)}));return n.map((e=>{let t;if(e.ionRoute&&!e.disableIonPageManagement)t=U.createElement(jb,{key:`view-${e.id}`,mount:e.mount,removeView:()=>this.remove(e)},U.cloneElement(e.reactElement,{computedMatch:e.routeData.match}));else{const n=Hb(e.reactElement,i.pathname);t=U.createElement(jb,{key:`view-${e.id}`,mount:e.mount,removeView:()=>this.remove(e)},U.cloneElement(e.reactElement,{computedMatch:e.routeData.match})),!n&&e.routeData.match&&(e.routeData.match=void 0,e.mount=!1)}return t}))}findViewItemByRouteInfo(e,t,i){const{viewItem:n,match:r}=this.findViewItemByPath(e.pathname,t);return(void 0===i||!0===i)&&n&&r&&(n.routeData.match=r),n}findLeavingViewItemByRouteInfo(e,t,i=!0){const{viewItem:n}=this.findViewItemByPath(e.lastPathname,t,!1,i);return n}findViewItemByPathname(e,t){const{viewItem:i}=this.findViewItemByPath(e,t);return i}findViewItemByPath(e,t,i,n){let r,o,a;if(t)a=this.getViewItemsForOutlet(t),a.some(s),r||a.some(l);else{const e=this.getAllViewItems();e.some(s),r||e.some(l)}return{viewItem:r,match:o};function s(t){if(n&&!t.ionRoute)return!1;const a={exact:!!i||t.routeData.childProps.exact,path:t.routeData.childProps.path||t.routeData.childProps.from,component:t.routeData.childProps.component},s=_f(e,a);return!!s&&(r=t,o=s,!0)}function l(t){return!t.routeData.childProps.path&&!t.routeData.childProps.from&&(o={path:e,url:e,isExact:!0,params:{}},r=t,!0)}}}function Hb(e,t,i){return _f(t,{exact:!!i||e.props.exact,path:e.props.path||e.props.from,component:e.props.component})}const Gb=e=>!e.classList.contains("ion-page-invisible")&&!e.classList.contains("ion-page-hidden");class Yb extends U.PureComponent{constructor(e){super(e),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=Bb("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(e){const{pathname:t}=this.props.routeInfo,{pathname:i}=e.routeInfo;t!==i?(this.prevProps=e,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(e){var t,i;if(this.routerOutletElement&&this.routerOutletElement.commit){let n=this.context.findViewItemByRouteInfo(e,this.id),r=this.context.findLeavingViewItemByRouteInfo(e,this.id);!r&&e.prevRouteLastPathname&&(r=this.context.findViewItemByPathname(e.prevRouteLastPathname,this.id)),r&&("replace"===e.routeAction?r.mount=!1:"push"!==e.routeAction||"forward"!==e.routeDirection?"none"!==e.routeDirection&&n!==r&&(r.mount=!1):(null===(t=e.routeOptions)||void 0===t?void 0:t.unmount)&&(r.mount=!1));const o=function(e,t){let i;if(U.Children.forEach(e,(e=>{const n={exact:e.props.exact,path:e.props.path||e.props.from,component:e.props.component};_f(t.pathname,n)&&(i=e)})),i)return i;return U.Children.forEach(e,(e=>{e.props.path||e.props.from||(i=e)})),i}(null===(i=this.ionRouterOutlet)||void 0===i?void 0:i.props.children,e);if(n?n.reactElement=o:o&&(n=this.context.createViewItem(this.id,o,e),this.context.addViewItem(n)),n&&n.ionPageElement){if(n===r&&n.routeData.match.url!==e.pathname)return;if(!r&&this.props.routeInfo.prevRouteLastPathname&&(r=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),Gb(n.ionPageElement)&&void 0!==r&&!Gb(r.ionPageElement))return;this.transitionPage(e,n,r)}else!r||o||n||r.ionPageElement&&(r.ionPageElement.classList.add("ion-page-hidden"),r.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}else this.pendingPageTransition=!0}registerIonPage(e,t){const i=this.context.findViewItemByRouteInfo(t,this.id);if(i){const t=i.ionPageElement;if(i.ionPageElement=e,i.ionRoute=!0,t===e)return}this.handlePageTransition(t)}async setupRouterOutlet(e){e.swipeHandler={canStart:()=>{const t=nb();if(!(t&&t.get("swipeBackEnabled","ios"===e.mode)))return!1;const{routeInfo:i}=this.props,n=this.prevProps&&this.prevProps.routeInfo.pathname===i.pushedByRoute?this.prevProps.routeInfo:{pathname:i.pushedByRoute||""},r=this.context.findViewItemByRouteInfo(n,this.id,!1);return!!r&&r.mount&&r.routeData.match.path!==i.pathname},onStart:async()=>{const{routeInfo:e}=this.props,t=this.prevProps&&this.prevProps.routeInfo.pathname===e.pushedByRoute?this.prevProps.routeInfo:{pathname:e.pushedByRoute||""},i=this.context.findViewItemByRouteInfo(t,this.id,!1),n=this.context.findViewItemByRouteInfo(e,this.id,!1);return i&&n&&await this.transitionPage(e,i,n,"back",!0),Promise.resolve()},onEnd:e=>{if(e)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:e}=this.props,t=this.prevProps&&this.prevProps.routeInfo.pathname===e.pushedByRoute?this.prevProps.routeInfo:{pathname:e.pushedByRoute||""},i=this.context.findViewItemByRouteInfo(t,this.id,!1);if(i!==this.context.findViewItemByRouteInfo(e,this.id,!1)&&void 0!==(null==i?void 0:i.ionPageElement)){const{ionPageElement:e}=i;e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")}}}}}async transitionPage(e,t,i,n,r=!1){const o=async(t,i)=>{const n=this.skipTransition;n?this.skipTransition=!1:(t.classList.add("ion-page"),t.classList.add("ion-page-invisible")),await a.commit(t,i,{duration:n||void 0===l?0:void 0,direction:l,showGoBack:!!e.pushedByRoute,progressAnimation:r,animationBuilder:e.routeAnimation})},a=this.routerOutletElement,s="none"===e.routeDirection||"root"===e.routeDirection?void 0:e.routeDirection,l=null!=n?n:s;if(t&&t.ionPageElement&&this.routerOutletElement)if(i&&i.ionPageElement&&t===i){if(function(e,t,i){const n={exact:!!i||e.props.exact,path:e.props.path||e.props.from,component:e.props.component},r=_f(t,n);return r}(i.reactElement,e.pathname,!0)){const e=function(e){let t;if(t="string"==typeof e?e:e.outerHTML,document){const e=document.createElement("div");e.innerHTML=t,e.style.zIndex="";const i=e.getElementsByTagName("ion-back-button");return i[0]&&i[0].remove(),e.firstChild}}(i.ionPageElement.outerHTML);e&&(this.routerOutletElement.appendChild(e),await o(t.ionPageElement,e),this.routerOutletElement.removeChild(e))}else await o(t.ionPageElement,void 0)}else await o(t.ionPageElement,null==i?void 0:i.ionPageElement),i&&i.ionPageElement&&!r&&(i.ionPageElement.classList.add("ion-page-hidden"),i.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:e}=this.props,t=U.Children.only(e);this.ionRouterOutlet=t;const i=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,(()=>{this.forceUpdate()}));return U.createElement(db.Provider,{value:this.stackContextValue},U.cloneElement(t,{ref:e=>{t.props.setRef&&t.props.setRef(e),t.props.forwardedRef&&(t.props.forwardedRef.current=e),this.routerOutletElement=e;const{ref:i}=t;"function"==typeof i&&i(e)}},i))}static get contextType(){return Nb}}class Xb extends U.PureComponent{constructor(e){super(e),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new Vb,this.viewStack=new zb,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const t={id:Bb("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(t),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:t}}handleChangeTab(e,t,i){if(!t)return;const n=this.locationHistory.getCurrentRouteInfoForTab(e),[r,o]=t.split("?");n?(this.incomingRouteParams=Object.assign(Object.assign({},n),{routeAction:"push",routeDirection:"none"}),n.pathname===r?(this.incomingRouteParams.routeOptions=i,this.props.history.push(n.pathname+(n.search||""))):(this.incomingRouteParams.pathname=r,this.incomingRouteParams.search=o?"?"+o:void 0,this.incomingRouteParams.routeOptions=i,this.props.history.push(r+(o?"?"+o:"")))):this.handleNavigate(r,"push","none",void 0,i,e)}handleHistoryChange(e,t){var i,n,r;let o;o=this.incomingRouteParams&&"replace"===this.incomingRouteParams.routeAction?this.locationHistory.previous():this.locationHistory.current();if(o.pathname+o.search!==e.pathname){if(!this.incomingRouteParams){if("REPLACE"===t&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),"POP"===t){const e=this.locationHistory.current();if(e&&e.pushedByRoute){const t=this.locationHistory.findLastLocation(e);this.incomingRouteParams=Object.assign(Object.assign({},t),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:(null===(i=e.state)||void 0===i?void 0:i.direction)||"forward",routeOptions:null===(n=e.state)||void 0===n?void 0:n.routerOptions,tab:this.currentTab})}let a;if(null===(r=this.incomingRouteParams)||void 0===r?void 0:r.id)a=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:o.pathname}),this.locationHistory.add(a);else{const t="push"===this.incomingRouteParams.routeAction&&"forward"===this.incomingRouteParams.routeDirection;if(a=Object.assign(Object.assign({id:Bb("routeInfo")},this.incomingRouteParams),{lastPathname:o.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:o.lastPathname}),t)a.tab=o.tab,a.pushedByRoute=o.pathname;else if("pop"===a.routeAction){const e=this.locationHistory.findLastLocation(a);a.pushedByRoute=null==e?void 0:e.pushedByRoute}else if("push"===a.routeAction&&a.tab!==o.tab){const e=this.locationHistory.getCurrentRouteInfoForTab(a.tab);a.pushedByRoute=null==e?void 0:e.pushedByRoute}else if("replace"===a.routeAction){const e=this.locationHistory.current(),t=null==e?void 0:e.pushedByRoute,i=void 0!==t&&t!==a.pathname?t:a.pushedByRoute;a.lastPathname=(null==e?void 0:e.pathname)||a.lastPathname,a.prevRouteLastPathname=null==e?void 0:e.lastPathname,a.pushedByRoute=i,a.routeDirection=(null==e?void 0:e.routeDirection)||a.routeDirection,a.routeAnimation=(null==e?void 0:e.routeAnimation)||a.routeAnimation}this.locationHistory.add(a)}this.setState({routeInfo:a})}this.incomingRouteParams=void 0}handleNativeBack(){const e=this.props.history;(e.goBack||e.back)()}handleNavigate(e,t,i,n,r,o){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:t,routeDirection:i,routeOptions:r,routeAnimation:n,tab:o}),"push"===t?this.props.history.push(e):this.props.history.replace(e)}handleNavigateBack(e="/",t){const i=nb();e=e||i&&i.get("backButtonDefaultHref");const n=this.locationHistory.current();if(n&&n.pushedByRoute){const i=this.locationHistory.findLastLocation(n);if(i)if(this.incomingRouteParams=Object.assign(Object.assign({},i),{routeAction:"pop",routeDirection:"back",routeAnimation:t||n.routeAnimation}),n.lastPathname===n.pushedByRoute||i.pathname===n.pushedByRoute&&""===n.tab&&""===i.tab){const e=this.props.history;(e.goBack||e.back)()}else this.handleNavigate(i.pathname+(i.search||""),"pop","back");else this.handleNavigate(e,"pop","back")}else this.handleNavigate(e,"pop","back")}handleResetTab(e,t,i){const n=this.locationHistory.getFirstRouteInfoForTab(e);if(n){const e=Object.assign({},n);e.pathname=t,e.routeOptions=i,this.incomingRouteParams=Object.assign(Object.assign({},e),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(e.pathname+(e.search||""))}}handleSetCurrentTab(e){this.currentTab=e;const t=Object.assign({},this.locationHistory.current());t.tab!==e&&(t.tab=e,this.locationHistory.update(t))}render(){return U.createElement(Nb.Provider,{value:this.routeMangerContextState},U.createElement($b,{ionRoute:Wb,ionRedirect:{},stackManager:Yb,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const qb=function(e){var t="withRouter("+(e.displayName||e.name)+")",i=function(t){var i=t.wrappedComponentRef,n=vd(t,["wrappedComponentRef"]);return U.createElement(sf.Consumer,null,(function(t){return t||xu(!1),U.createElement(e,gu({},n,t,{ref:i}))}))};return i.displayName=t,i.WrappedComponent=e,ef(i,e)}(Xb);qb.displayName="IonRouter";class Kb extends U.Component{constructor(e){super(e);const{history:t}=e,i=nm(e,["history"]);this.history=t||Pu(i),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const i=e.location||e,n=e.action||t;this.historyListenHandler&&this.historyListenHandler(i,n)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,i=nm(e,["children"]);return U.createElement(lf,Object.assign({history:this.history},i),U.createElement(qb,{registerHistoryListener:this.registerHistoryListener},t))}}class Zb extends U.Component{constructor(e){super(e),this.history=e.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const i=e.location||e,n=e.action||t;this.historyListenHandler&&this.historyListenHandler(i,n)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,i=nm(e,["children"]);return U.createElement(lf,Object.assign({},i),U.createElement(qb,{registerHistoryListener:this.registerHistoryListener},t))}}class Jb extends U.Component{constructor(e){super(e);const{history:t}=e,i=nm(e,["history"]);this.history=t||createHashHistory(i),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const i=e.location||e,n=e.action||t;this.historyListenHandler&&this.historyListenHandler(i,n)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,i=nm(e,["children"]);return U.createElement(lf,Object.assign({history:this.history},i),U.createElement(qb,{registerHistoryListener:this.registerHistoryListener},t))}}
/*!
             *  howler.js v2.2.3
             *  howlerjs.com
             *
             *  (c) 2013-2020, James Simpson of GoldFire Studios
             *  goldfirestudios.com
             *
             *  MIT License
             */
var Qb=function(){this.init()};Qb.prototype={init:function(){var e=this||ey;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||ey;if(e=parseFloat(e),t.ctx||ly(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,ey.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var n=t._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=t._howls[i]._soundById(n[r]);o&&o._node&&(o._node.volume=o._volume*e)}return t}return t._volume},mute:function(e){var t=this||ey;t.ctx||ly(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,ey.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var n=t._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=t._howls[i]._soundById(n[r]);o&&o._node&&(o._node.muted=!!e||o._muted)}return t},stop:function(){for(var e=this||ey,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||ey,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,ly()),e},codecs:function(e){return(this||ey)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||ey;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(cy){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(cy){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||ey,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(c){return e}if(!t||"function"!=typeof t.canPlayType)return e;var i=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n=e._navigator?e._navigator.userAgent:"",r=n.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33,a=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),s=n.match(/Version\/(.*?) /),l=a&&s&&parseInt(s[1],10)<15;return e._codecs={mp3:!(o||!i&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||ey;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(i){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,e._releaseHtml5Audio(n)}catch(i){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var o=e._howls[r]._getSoundIds(),a=0;a<o.length;a++){var s=e._howls[r]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var i=0;i<e._howls.length;i++)e._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||ey;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||ey;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&ey.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var i=0;i<e._howls[t]._sounds.length;i++)if(!e._howls[t]._sounds[i]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&ey.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var ey=new Qb,ty=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};ty.prototype={init:function(e){var t=this;return ey.ctx||ly(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=ey.usingWebAudio&&!t._html5,void 0!==ey.ctx&&ey.ctx&&ey.autoUnlock&&ey._unlockAudio(),ey._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(ey.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var i=0;i<e._src.length;i++){var n,r;if(e._format&&e._format[i])n=e._format[i];else{if("string"!=typeof(r=e._src[i])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&ey.codecs(n)){t=e._src[i];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new iy(e),e._webAudio&&ry(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var i=this,n=null;if("number"==typeof e)n=e,e=null;else{if("string"==typeof e&&"loaded"===i._state&&!i._sprite[e])return null;if(void 0===e&&(e="__default",!i._playLock)){for(var r=0,o=0;o<i._sounds.length;o++)i._sounds[o]._paused&&!i._sounds[o]._ended&&(r++,n=i._sounds[o]._id);1===r?e=null:n=null}}var a=n?i._soundById(n):i._inactiveSound();if(!a)return null;if(n&&!e&&(e=a._sprite||"__default"),"loaded"!==i._state){a._sprite=e,a._ended=!1;var s=a._id;return i._queue.push({event:"play",action:function(){i.play(s)}}),s}if(n&&!a._paused)return t||i._loadQueue("play"),a._id;i._webAudio&&ey._autoResume();var l=Math.max(0,a._seek>0?a._seek:i._sprite[e][0]/1e3),c=Math.max(0,(i._sprite[e][0]+i._sprite[e][1])/1e3-l),h=1e3*c/Math.abs(a._rate),u=i._sprite[e][0]/1e3,d=(i._sprite[e][0]+i._sprite[e][1])/1e3;a._sprite=e,a._ended=!1;var f=function(){a._paused=!1,a._seek=l,a._start=u,a._stop=d,a._loop=!(!a._loop&&!i._sprite[e][2])};if(!(l>=d)){var p=a._node;if(i._webAudio){var g=function(){i._playLock=!1,f(),i._refreshBuffer(a);var e=a._muted||i._muted?0:a._volume;p.gain.setValueAtTime(e,ey.ctx.currentTime),a._playStart=ey.ctx.currentTime,void 0===p.bufferSource.start?a._loop?p.bufferSource.noteGrainOn(0,l,86400):p.bufferSource.noteGrainOn(0,l,c):a._loop?p.bufferSource.start(0,l,86400):p.bufferSource.start(0,l,c),h!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),h)),t||setTimeout((function(){i._emit("play",a._id),i._loadQueue()}),0)};"running"===ey.state&&"interrupted"!==ey.ctx.state?g():(i._playLock=!0,i.once("resume",g),i._clearTimer(a._id))}else{var m=function(){p.currentTime=l,p.muted=a._muted||i._muted||ey._muted||p.muted,p.volume=a._volume*ey.volume(),p.playbackRate=a._rate;try{var n=p.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(i._playLock=!0,f(),n.then((function(){i._playLock=!1,p._unlocked=!0,t?i._loadQueue():i._emit("play",a._id)})).catch((function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):t||(i._playLock=!1,f(),i._emit("play",a._id)),p.playbackRate=a._rate,p.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),h):(i._endTimers[a._id]=function(){i._ended(a),p.removeEventListener("ended",i._endTimers[a._id],!1)},p.addEventListener("ended",i._endTimers[a._id],!1))}catch(r){i._emit("playerror",a._id,r)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===p.src&&(p.src=i._src,p.load());var v=window&&window.ejecta||!p.readyState&&ey._navigator.isCocoonJS;if(p.readyState>=3||v)m();else{i._playLock=!0,i._state="loading";var _=function(){i._state="loaded",m(),p.removeEventListener(ey._canPlayEvent,_,!1)};p.addEventListener(ey._canPlayEvent,_,!1),i._clearTimer(a._id)}}return a._id}i._ended(a)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var i=t._getSoundIds(e),n=0;n<i.length;n++){t._clearTimer(i[n]);var r=t._soundById(i[n]);if(r&&!r._paused&&(r._seek=t.seek(i[n]),r._rateSeek=0,r._paused=!0,t._stopFade(i[n]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(e)}}),i;for(var n=i._getSoundIds(e),r=0;r<n.length;r++){i._clearTimer(n[r]);var o=i._soundById(n[r]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,i._stopFade(n[r]),o._node&&(i._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),i._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&i._clearSound(o._node))),t||i._emit("stop",o._id))}return i},mute:function(e,t){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(e,t)}}),i;if(void 0===t){if("boolean"!=typeof e)return i._muted;i._muted=e}for(var n=i._getSoundIds(t),r=0;r<n.length;r++){var o=i._soundById(n[r]);o&&(o._muted=e,o._interval&&i._stopFade(o._id),i._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,ey.ctx.currentTime):o._node&&(o._node.muted=!!ey._muted||e),i._emit("mute",o._id))}return i},volume:function(){var e,t,i,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&void 0===r[1]?n._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):e=parseFloat(r[0]):r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),!(void 0!==e&&e>=0&&e<=1))return(i=t?n._soundById(t):n._sounds[0])?i._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;void 0===t&&(n._volume=e),t=n._getSoundIds(t);for(var o=0;o<t.length;o++)(i=n._soundById(t[o]))&&(i._volume=e,r[2]||n._stopFade(t[o]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(e,ey.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=e*ey.volume()),n._emit("volume",i._id));return n},fade:function(e,t,i,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,t,i,n)}}),r;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),i=parseFloat(i),r.volume(e,n);for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if(n||r._stopFade(o[a]),r._webAudio&&!s._muted){var l=ey.ctx.currentTime,c=l+i/1e3;s._volume=e,s._node.gain.setValueAtTime(e,l),s._node.gain.linearRampToValueAtTime(t,c)}r._startFadeInterval(s,e,t,i,o[a],void 0===n)}}return r},_startFadeInterval:function(e,t,i,n,r,o){var a=this,s=t,l=i-t,c=Math.abs(l/.01),h=Math.max(4,c>0?n/c:n),u=Date.now();e._fadeTo=i,e._interval=setInterval((function(){var r=(Date.now()-u)/n;u=Date.now(),s+=l*r,s=Math.round(100*s)/100,s=l<0?Math.max(i,s):Math.min(i,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),o&&(a._volume=s),(i<t&&s<=i||i>t&&s>=i)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(i,e._id),a._emit("fade",e._id))}),h)},_stopFade:function(e){var t=this,i=t._soundById(e);return i&&i._interval&&(t._webAudio&&i._node.gain.cancelScheduledValues(ey.ctx.currentTime),clearInterval(i._interval),i._interval=null,t.volume(i._fadeTo,e),i._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,i,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(i=n._soundById(parseInt(r[0],10)))&&i._loop;e=r[0],n._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var o=n._getSoundIds(t),a=0;a<o.length;a++)(i=n._soundById(o[a]))&&(i._loop=e,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=e,e&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop,n.playing(o[a])&&(n.pause(o[a],!0),n.play(o[a],!0)))));return n},rate:function(){var e,t,i,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){n._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("number"!=typeof e)return(i=n._soundById(t))?i._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===t&&(n._rate=e),t=n._getSoundIds(t);for(var o=0;o<t.length;o++)if(i=n._soundById(t[o])){n.playing(t[o])&&(i._rateSeek=n.seek(t[o]),i._playStart=n._webAudio?ey.ctx.currentTime:i._playStart),i._rate=e,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(e,ey.ctx.currentTime):i._node&&(i._node.playbackRate=e);var a=n.seek(t[o]),s=1e3*((n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-a)/Math.abs(i._rate);!n._endTimers[t[o]]&&i._paused||(n._clearTimer(t[o]),n._endTimers[t[o]]=setTimeout(n._ended.bind(n,i),s)),n._emit("rate",i._id)}return n},seek:function(){var e,t,i=this,n=arguments;if(0===n.length)i._sounds.length&&(t=i._sounds[0]._id);else if(1===n.length){i._getSoundIds().indexOf(n[0])>=0?t=parseInt(n[0],10):i._sounds.length&&(t=i._sounds[0]._id,e=parseFloat(n[0]))}else 2===n.length&&(e=parseFloat(n[0]),t=parseInt(n[1],10));if(void 0===t)return 0;if("number"==typeof e&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var r=i._soundById(t);if(r){if(!("number"==typeof e&&e>=0)){if(i._webAudio){var o=i.playing(t)?ey.ctx.currentTime-r._playStart:0,a=r._rateSeek?r._rateSeek-r._seek:0;return r._seek+(a+o*Math.abs(r._rate))}return r._node.currentTime}var s=i.playing(t);s&&i.pause(t,!0),r._seek=e,r._ended=!1,i._clearTimer(t),i._webAudio||!r._node||isNaN(r._node.duration)||(r._node.currentTime=e);var l=function(){s&&i.play(t,!0),i._emit("seek",t)};if(s&&!i._webAudio){var c=function(){i._playLock?setTimeout(c,0):l()};setTimeout(c,0)}else l()}return i},playing:function(e){var t=this;if("number"==typeof e){var i=t._soundById(e);return!!i&&!i._paused}for(var n=0;n<t._sounds.length;n++)if(!t._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this,i=t._duration,n=t._soundById(e);return n&&(i=t._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,i=0;i<t.length;i++)t[i]._paused||e.stop(t[i]._id),e._webAudio||(e._clearSound(t[i]._node),t[i]._node.removeEventListener("error",t[i]._errorFn,!1),t[i]._node.removeEventListener(ey._canPlayEvent,t[i]._loadFn,!1),t[i]._node.removeEventListener("ended",t[i]._endFn,!1),ey._releaseHtml5Audio(t[i]._node)),delete t[i]._node,e._clearTimer(t[i]._id);var n=ey._howls.indexOf(e);n>=0&&ey._howls.splice(n,1);var r=!0;for(i=0;i<ey._howls.length;i++)if(ey._howls[i]._src===e._src||e._src.indexOf(ey._howls[i]._src)>=0){r=!1;break}return ny&&r&&delete ny[e._src],ey.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,i,n){var r=this["_on"+e];return"function"==typeof t&&r.push(n?{id:i,fn:t,once:n}:{id:i,fn:t}),this},off:function(e,t,i){var n=this,r=n["_on"+e],o=0;if("number"==typeof t&&(i=t,t=null),t||i)for(o=0;o<r.length;o++){var a=i===r[o].id;if(t===r[o].fn&&a||!t&&a){r.splice(o,1);break}}else if(e)n["_on"+e]=[];else{var s=Object.keys(n);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(n[s[o]])&&(n[s[o]]=[])}return n},once:function(e,t,i){return this.on(e,t,i,1),this},_emit:function(e,t,i){for(var n=this,r=n["_on"+e],o=r.length-1;o>=0;o--)r[o].id&&r[o].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,i)}.bind(n,r[o].fn),0),r[o].once&&n.off(e,r[o].fn,r[o].id));return n._loadQueue(e),n},_loadQueue:function(e){var t=this;if(t._queue.length>0){var i=t._queue[0];i.event===e&&(t._queue.shift(),t._loadQueue()),e||i.action()}return t},_ended:function(e){var t=this,i=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var n=!(!e._loop&&!t._sprite[i][2]);if(t._emit("end",e._id),!t._webAudio&&n&&t.stop(e._id,!0).play(e._id),t._webAudio&&n){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=ey.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),r)}return t._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),ey._autoSuspend()),t._webAudio||n||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var i=t._soundById(e);i&&i._node&&i._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,i=0;i<t._sounds.length;i++)if(e===t._sounds[i]._id)return t._sounds[i];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new iy(e)},_drain:function(){var e=this,t=e._pool,i=0,n=0;if(!(e._sounds.length<t)){for(n=0;n<e._sounds.length;n++)e._sounds[n]._ended&&i++;for(n=e._sounds.length-1;n>=0;n--){if(i<=t)return;e._sounds[n]._ended&&(e._webAudio&&e._sounds[n]._node&&e._sounds[n]._node.disconnect(0),e._sounds.splice(n,1),i--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],i=0;i<this._sounds.length;i++)t.push(this._sounds[i]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=ey.ctx.createBufferSource(),e._node.bufferSource.buffer=ny[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,ey.ctx.currentTime),this},_cleanBuffer:function(e){var t=ey._navigator&&ey._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return this;if(ey._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=ey._scratchBuffer}catch(cy){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(ey._navigator&&ey._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var iy=function(e){this._parent=e,this.init()};iy.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++ey._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,i=ey._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===ey.ctx.createGain?ey.ctx.createGainNode():ey.ctx.createGain(),e._node.gain.setValueAtTime(i,ey.ctx.currentTime),e._node.paused=!0,e._node.connect(ey.masterGain)):ey.noAudio||(e._node=ey._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(ey._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=i*ey.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++ey._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(ey._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var ny={},ry=function(e){var t=e._src;if(ny[t])return e._duration=ny[t].duration,void sy(e);if(/^data:[^;]+;base64,/.test(t)){for(var i=atob(t.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);ay(n.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){o.setRequestHeader(t,e._xhr.headers[t])})),o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?ay(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete ny[t],e.load())},oy(o)}},oy=function(e){try{e.send()}catch(cy){e.onerror()}},ay=function(e,t){var i=function(){t._emit("loaderror",null,"Decoding audio data failed.")},n=function(e){e&&t._sounds.length>0?(ny[t._src]=e,sy(t,e)):i()};"undefined"!=typeof Promise&&1===ey.ctx.decodeAudioData.length?ey.ctx.decodeAudioData(e).then(n).catch(i):ey.ctx.decodeAudioData(e,n,i)},sy=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},ly=function(){if(ey.usingWebAudio){try{"undefined"!=typeof AudioContext?ey.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?ey.ctx=new webkitAudioContext:ey.usingWebAudio=!1}catch(cy){ey.usingWebAudio=!1}ey.ctx||(ey.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(ey._navigator&&ey._navigator.platform),t=ey._navigator&&ey._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=t?parseInt(t[1],10):null;if(e&&i&&i<9){var n=/safari/.test(ey._navigator&&ey._navigator.userAgent.toLowerCase());ey._navigator&&!n&&(ey.usingWebAudio=!1)}ey.usingWebAudio&&(ey.masterGain=void 0===ey.ctx.createGain?ey.ctx.createGainNode():ey.ctx.createGain(),ey.masterGain.gain.setValueAtTime(ey._muted?0:ey._volume,ey.ctx.currentTime),ey.masterGain.connect(ey.ctx.destination)),ey._setup()}};!
/*!
             *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
             *  
             *  howler.js v2.2.3
             *  howlerjs.com
             *
             *  (c) 2013-2020, James Simpson of GoldFire Studios
             *  goldfirestudios.com
             *
             *  MIT License
             */
function(e,t,i,n){var r;e.prototype._pos=[0,0,0],e.prototype._orientation=[0,0,-1,0,1,0],e.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var i=t._howls.length-1;i>=0;i--)t._howls[i].stereo(e);return t},e.prototype.pos=function(e,i,n){var r=this;return r.ctx&&r.ctx.listener?(i="number"!=typeof i?r._pos[1]:i,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e?r._pos:(r._pos=[e,i,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],t.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],t.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],t.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},e.prototype.orientation=function(e,i,n,r,o,a){var s=this;if(!s.ctx||!s.ctx.listener)return s;var l=s._orientation;return i="number"!=typeof i?l[1]:i,n="number"!=typeof n?l[2]:n,r="number"!=typeof r?l[3]:r,o="number"!=typeof o?l[4]:o,a="number"!=typeof a?l[5]:a,"number"!=typeof e?l:(s._orientation=[e,i,n,r,o,a],void 0!==s.ctx.listener.forwardX?(s.ctx.listener.forwardX.setTargetAtTime(e,t.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(i,t.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(n,t.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(r,t.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(o,t.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(a,t.ctx.currentTime,.1)):s.ctx.listener.setOrientation(e,i,n,r,o,a),s)},i.prototype.init=(r=i.prototype.init,function(e){var t=this;return t._orientation=e.orientation||[1,0,0],t._stereo=e.stereo||null,t._pos=e.pos||null,t._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},t._onstereo=e.onstereo?[{fn:e.onstereo}]:[],t._onpos=e.onpos?[{fn:e.onpos}]:[],t._onorientation=e.onorientation?[{fn:e.onorientation}]:[],r.call(this,e)}),i.prototype.stereo=function(e,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,i)}}),n;var r=void 0===t.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var a=n._getSoundIds(i),s=0;s<a.length;s++){var l=n._soundById(a[s]);if(l){if("number"!=typeof e)return l._stereo;l._stereo=e,l._pos=[e,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",l._panner&&l._panner.pan||o(l,r),"spatial"===r?void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,t.ctx.currentTime),l._panner.positionY.setValueAtTime(0,t.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,t.ctx.currentTime)):l._panner.setPosition(e,0,0):l._panner.pan.setValueAtTime(e,t.ctx.currentTime)),n._emit("stereo",l._id)}}return n},i.prototype.pos=function(e,i,n,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(e,i,n,r)}}),a;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===r){if("number"!=typeof e)return a._pos;a._pos=[e,i,n]}for(var s=a._getSoundIds(r),l=0;l<s.length;l++){var c=a._soundById(s[l]);if(c){if("number"!=typeof e)return c._pos;c._pos=[e,i,n],c._node&&(c._panner&&!c._panner.pan||o(c,"spatial"),void 0!==c._panner.positionX?(c._panner.positionX.setValueAtTime(e,t.ctx.currentTime),c._panner.positionY.setValueAtTime(i,t.ctx.currentTime),c._panner.positionZ.setValueAtTime(n,t.ctx.currentTime)):c._panner.setPosition(e,i,n)),a._emit("pos",c._id)}}return a},i.prototype.orientation=function(e,i,n,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(e,i,n,r)}}),a;if(i="number"!=typeof i?a._orientation[1]:i,n="number"!=typeof n?a._orientation[2]:n,void 0===r){if("number"!=typeof e)return a._orientation;a._orientation=[e,i,n]}for(var s=a._getSoundIds(r),l=0;l<s.length;l++){var c=a._soundById(s[l]);if(c){if("number"!=typeof e)return c._orientation;c._orientation=[e,i,n],c._node&&(c._panner||(c._pos||(c._pos=a._pos||[0,0,-.5]),o(c,"spatial")),void 0!==c._panner.orientationX?(c._panner.orientationX.setValueAtTime(e,t.ctx.currentTime),c._panner.orientationY.setValueAtTime(i,t.ctx.currentTime),c._panner.orientationZ.setValueAtTime(n,t.ctx.currentTime)):c._panner.setOrientation(e,i,n)),a._emit("orientation",c._id)}}return a},i.prototype.pannerAttr=function(){var e,t,i,n=this,r=arguments;if(!n._webAudio)return n;if(0===r.length)return n._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(i=n._soundById(parseInt(r[0],10)))?i._pannerAttr:n._pannerAttr;e=r[0],void 0===t&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:n._panningModel})}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var a=n._getSoundIds(t),s=0;s<a.length;s++)if(i=n._soundById(a[s])){var l=i._pannerAttr;l={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:l.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:l.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:l.panningModel};var c=i._panner;c||(i._pos||(i._pos=n._pos||[0,0,-.5]),o(i,"spatial"),c=i._panner),c.coneInnerAngle=l.coneInnerAngle,c.coneOuterAngle=l.coneOuterAngle,c.coneOuterGain=l.coneOuterGain,c.distanceModel=l.distanceModel,c.maxDistance=l.maxDistance,c.refDistance=l.refDistance,c.rolloffFactor=l.rolloffFactor,c.panningModel=l.panningModel}return n},n.prototype.init=function(e){return function(){var t=this,i=t._parent;t._orientation=i._orientation,t._stereo=i._stereo,t._pos=i._pos,t._pannerAttr=i._pannerAttr,e.call(this),t._stereo?i.stereo(t._stereo):t._pos&&i.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(n.prototype.init),n.prototype.reset=function(e){return function(){var t=this,i=t._parent;return t._orientation=i._orientation,t._stereo=i._stereo,t._pos=i._pos,t._pannerAttr=i._pannerAttr,t._stereo?i.stereo(t._stereo):t._pos?i.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,i._refreshBuffer(t)),e.call(this)}}(n.prototype.reset);var o=function(e,i){"spatial"===(i=i||"spatial")?(e._panner=t.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],t.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],t.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],t.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],t.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],t.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],t.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=t.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,t.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}(Qb,ey,ty,iy);
/*!
             * Dynamsoft JavaScript Library
             * @product Dynamsoft Barcode Reader JS Edition
             * @website http://www.dynamsoft.com
             * @copyright Copyright 2023, Dynamsoft Corporation
             * @author Dynamsoft
             * @version 9.6.20 (js 20230410)
             * @fileoverview Dynamsoft JavaScript Library for Barcode Reader
             * More info on DBR JS: https://www.dynamsoft.com/barcode-reader/sdk-javascript/
             */
const cy="undefined"==typeof self;let hy,uy,dy,fy,py;if("undefined"!=typeof navigator&&(hy=navigator,uy=hy.userAgent,dy=hy.platform,fy=hy.mediaDevices),!cy){const e={Edge:{search:"Edg",verSearch:"Edg"},OPR:null,Chrome:null,Safari:{str:hy.vendor,search:"Apple",verSearch:["Version","iPhone OS","CPU OS"]},Firefox:null,Explorer:{search:"MSIE",verSearch:"MSIE"}},t={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:dy,search:"Win"},Mac:{str:dy},Linux:{str:dy}};let i="unknownBrowser",n=0,r="unknownOS";for(let o in e){const t=e[o]||{};let r=t.str||uy,a=t.search||o,s=t.verStr||uy,l=t.verSearch||o;if(l instanceof Array||(l=[l]),-1!=r.indexOf(a)){i=o;for(let e of l){let t=s.indexOf(e);if(-1!=t){n=parseFloat(s.substring(t+e.length+1));break}}break}}for(let o in t){const e=t[o]||{};let i=e.str||uy,n=e.search||o;if(-1!=i.indexOf(n)){r=o;break}}"Linux"==r&&-1!=uy.indexOf("Windows NT")&&(r="HarmonyOS"),py={browser:i,version:n,OS:r}}cy&&(py={browser:"ssr",version:0,OS:"ssr"});const gy="undefined"!=typeof WebAssembly&&uy&&!(/Safari/.test(uy)&&!/Chrome/.test(uy)&&/\(.+\s11_2_([2-6]).*\)/.test(uy)),my=!("undefined"==typeof Worker),vy=!(!fy||!fy.getUserMedia),_y=async()=>{let e=!1;if(vy)try{(await fy.getUserMedia({video:!0})).getTracks().forEach((e=>{e.stop()})),e=!0}catch(e){}return e};"Chrome"===py.browser&&py.version>66||"Safari"===py.browser&&py.version>13||"OPR"===py.browser&&py.version>43||"Edge"===py.browser&&py.version;const by=(()=>{if(!cy&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"})(),yy=" is not allowed to change after `createInstance` or `loadWasm` is called.",wy=!cy&&document.currentScript&&(document.currentScript.getAttribute("data-license")||document.currentScript.getAttribute("data-productKeys")||document.currentScript.getAttribute("data-licenseKey")||document.currentScript.getAttribute("data-handshakeCode")||document.currentScript.getAttribute("data-organizationID"))||"",xy=!cy&&document.currentScript&&document.currentScript.getAttribute("data-sessionPassword")||"",Sy=e=>{if(null==e)e=[];else{e=e instanceof Array?[...e]:[e];for(let t=0;t<e.length;++t){if(!cy){let i=document.createElement("a");i.href=e[t],e[t]=i.href}e[t].endsWith("/")||(e[t]+="/")}}return e};var Cy,Ty,Ey,Iy,ky;!function(e){e[e.IPF_Binary=0]="IPF_Binary",e[e.IPF_BinaryInverted=1]="IPF_BinaryInverted",e[e.IPF_GrayScaled=2]="IPF_GrayScaled",e[e.IPF_NV21=3]="IPF_NV21",e[e.IPF_RGB_565=4]="IPF_RGB_565",e[e.IPF_RGB_555=5]="IPF_RGB_555",e[e.IPF_RGB_888=6]="IPF_RGB_888",e[e.IPF_ARGB_8888=7]="IPF_ARGB_8888",e[e.IPF_RGB_161616=8]="IPF_RGB_161616",e[e.IPF_ARGB_16161616=9]="IPF_ARGB_16161616",e[e.IPF_ABGR_8888=10]="IPF_ABGR_8888",e[e.IPF_ABGR_16161616=11]="IPF_ABGR_16161616",e[e.IPF_BGR_888=12]="IPF_BGR_888"}(Cy||(Cy={})),function(e){e[e.DBR_SYSTEM_EXCEPTION=1]="DBR_SYSTEM_EXCEPTION",e[e.DBR_SUCCESS=0]="DBR_SUCCESS",e[e.DBR_UNKNOWN=-1e4]="DBR_UNKNOWN",e[e.DBR_NO_MEMORY=-10001]="DBR_NO_MEMORY",e[e.DBR_NULL_REFERENCE=-10002]="DBR_NULL_REFERENCE",e[e.DBR_LICENSE_INVALID=-10003]="DBR_LICENSE_INVALID",e[e.DBR_LICENSE_EXPIRED=-10004]="DBR_LICENSE_EXPIRED",e[e.DBR_FILE_NOT_FOUND=-10005]="DBR_FILE_NOT_FOUND",e[e.DBR_FILETYPE_NOT_SUPPORTED=-10006]="DBR_FILETYPE_NOT_SUPPORTED",e[e.DBR_BPP_NOT_SUPPORTED=-10007]="DBR_BPP_NOT_SUPPORTED",e[e.DBR_INDEX_INVALID=-10008]="DBR_INDEX_INVALID",e[e.DBR_BARCODE_FORMAT_INVALID=-10009]="DBR_BARCODE_FORMAT_INVALID",e[e.DBR_CUSTOM_REGION_INVALID=-10010]="DBR_CUSTOM_REGION_INVALID",e[e.DBR_MAX_BARCODE_NUMBER_INVALID=-10011]="DBR_MAX_BARCODE_NUMBER_INVALID",e[e.DBR_IMAGE_READ_FAILED=-10012]="DBR_IMAGE_READ_FAILED",e[e.DBR_TIFF_READ_FAILED=-10013]="DBR_TIFF_READ_FAILED",e[e.DBR_QR_LICENSE_INVALID=-10016]="DBR_QR_LICENSE_INVALID",e[e.DBR_1D_LICENSE_INVALID=-10017]="DBR_1D_LICENSE_INVALID",e[e.DBR_DIB_BUFFER_INVALID=-10018]="DBR_DIB_BUFFER_INVALID",e[e.DBR_PDF417_LICENSE_INVALID=-10019]="DBR_PDF417_LICENSE_INVALID",e[e.DBR_DATAMATRIX_LICENSE_INVALID=-10020]="DBR_DATAMATRIX_LICENSE_INVALID",e[e.DBR_PDF_READ_FAILED=-10021]="DBR_PDF_READ_FAILED",e[e.DBR_PDF_DLL_MISSING=-10022]="DBR_PDF_DLL_MISSING",e[e.DBR_PAGE_NUMBER_INVALID=-10023]="DBR_PAGE_NUMBER_INVALID",e[e.DBR_CUSTOM_SIZE_INVALID=-10024]="DBR_CUSTOM_SIZE_INVALID",e[e.DBR_CUSTOM_MODULESIZE_INVALID=-10025]="DBR_CUSTOM_MODULESIZE_INVALID",e[e.DBR_RECOGNITION_TIMEOUT=-10026]="DBR_RECOGNITION_TIMEOUT",e[e.DBR_JSON_PARSE_FAILED=-10030]="DBR_JSON_PARSE_FAILED",e[e.DBR_JSON_TYPE_INVALID=-10031]="DBR_JSON_TYPE_INVALID",e[e.DBR_JSON_KEY_INVALID=-10032]="DBR_JSON_KEY_INVALID",e[e.DBR_JSON_VALUE_INVALID=-10033]="DBR_JSON_VALUE_INVALID",e[e.DBR_JSON_NAME_KEY_MISSING=-10034]="DBR_JSON_NAME_KEY_MISSING",e[e.DBR_JSON_NAME_VALUE_DUPLICATED=-10035]="DBR_JSON_NAME_VALUE_DUPLICATED",e[e.DBR_TEMPLATE_NAME_INVALID=-10036]="DBR_TEMPLATE_NAME_INVALID",e[e.DBR_JSON_NAME_REFERENCE_INVALID=-10037]="DBR_JSON_NAME_REFERENCE_INVALID",e[e.DBR_PARAMETER_VALUE_INVALID=-10038]="DBR_PARAMETER_VALUE_INVALID",e[e.DBR_DOMAIN_NOT_MATCHED=-10039]="DBR_DOMAIN_NOT_MATCHED",e[e.DBR_RESERVEDINFO_NOT_MATCHED=-10040]="DBR_RESERVEDINFO_NOT_MATCHED",e[e.DBR_AZTEC_LICENSE_INVALID=-10041]="DBR_AZTEC_LICENSE_INVALID",e[e.DBR_LICENSE_DLL_MISSING=-10042]="DBR_LICENSE_DLL_MISSING",e[e.DBR_LICENSEKEY_NOT_MATCHED=-10043]="DBR_LICENSEKEY_NOT_MATCHED",e[e.DBR_REQUESTED_FAILED=-10044]="DBR_REQUESTED_FAILED",e[e.DBR_LICENSE_INIT_FAILED=-10045]="DBR_LICENSE_INIT_FAILED",e[e.DBR_PATCHCODE_LICENSE_INVALID=-10046]="DBR_PATCHCODE_LICENSE_INVALID",e[e.DBR_POSTALCODE_LICENSE_INVALID=-10047]="DBR_POSTALCODE_LICENSE_INVALID",e[e.DBR_DPM_LICENSE_INVALID=-10048]="DBR_DPM_LICENSE_INVALID",e[e.DBR_FRAME_DECODING_THREAD_EXISTS=-10049]="DBR_FRAME_DECODING_THREAD_EXISTS",e[e.DBR_STOP_DECODING_THREAD_FAILED=-10050]="DBR_STOP_DECODING_THREAD_FAILED",e[e.DBR_SET_MODE_ARGUMENT_ERROR=-10051]="DBR_SET_MODE_ARGUMENT_ERROR",e[e.DBR_LICENSE_CONTENT_INVALID=-10052]="DBR_LICENSE_CONTENT_INVALID",e[e.DBR_LICENSE_KEY_INVALID=-10053]="DBR_LICENSE_KEY_INVALID",e[e.DBR_LICENSE_DEVICE_RUNS_OUT=-10054]="DBR_LICENSE_DEVICE_RUNS_OUT",e[e.DBR_GET_MODE_ARGUMENT_ERROR=-10055]="DBR_GET_MODE_ARGUMENT_ERROR",e[e.DBR_IRT_LICENSE_INVALID=-10056]="DBR_IRT_LICENSE_INVALID",e[e.DBR_MAXICODE_LICENSE_INVALID=-10057]="DBR_MAXICODE_LICENSE_INVALID",e[e.DBR_GS1_DATABAR_LICENSE_INVALID=-10058]="DBR_GS1_DATABAR_LICENSE_INVALID",e[e.DBR_GS1_COMPOSITE_LICENSE_INVALID=-10059]="DBR_GS1_COMPOSITE_LICENSE_INVALID",e[e.DBR_PANORAMA_LICENSE_INVALID=-10060]="DBR_PANORAMA_LICENSE_INVALID",e[e.DBR_DOTCODE_LICENSE_INVALID=-10061]="DBR_DOTCODE_LICENSE_INVALID",e[e.DBR_PHARMACODE_LICENSE_INVALID=-10062]="DBR_PHARMACODE_LICENSE_INVALID",e[e.DBR_IMAGE_ORIENTATION_INVALID=-10063]="DBR_IMAGE_ORIENTATION_INVALID",e[e.DMERR_NO_LICENSE=-2e4]="DMERR_NO_LICENSE",e[e.DMERR_LICENSE_SYNC_FAILED=-20003]="DMERR_LICENSE_SYNC_FAILED",e[e.DMERR_TRIAL_LICENSE=-20010]="DMERR_TRIAL_LICENSE",e[e.DMERR_FAILED_TO_REACH_LTS=-20200]="DMERR_FAILED_TO_REACH_LTS"}(Ty||(Ty={})),function(e){e[e.IMRDT_IMAGE=1]="IMRDT_IMAGE",e[e.IMRDT_CONTOUR=2]="IMRDT_CONTOUR",e[e.IMRDT_LINESEGMENT=4]="IMRDT_LINESEGMENT",e[e.IMRDT_LOCALIZATIONRESULT=8]="IMRDT_LOCALIZATIONRESULT",e[e.IMRDT_REGIONOFINTEREST=16]="IMRDT_REGIONOFINTEREST",e[e.IMRDT_QUADRILATERAL=32]="IMRDT_QUADRILATERAL"}(Ey||(Ey={})),function(e){e[e.BF_ALL=-29360129]="BF_ALL",e[e.BF_ONED=3147775]="BF_ONED",e[e.BF_GS1_DATABAR=260096]="BF_GS1_DATABAR",e[e.BF_CODE_39=1]="BF_CODE_39",e[e.BF_CODE_128=2]="BF_CODE_128",e[e.BF_CODE_93=4]="BF_CODE_93",e[e.BF_CODABAR=8]="BF_CODABAR",e[e.BF_ITF=16]="BF_ITF",e[e.BF_EAN_13=32]="BF_EAN_13",e[e.BF_EAN_8=64]="BF_EAN_8",e[e.BF_UPC_A=128]="BF_UPC_A",e[e.BF_UPC_E=256]="BF_UPC_E",e[e.BF_INDUSTRIAL_25=512]="BF_INDUSTRIAL_25",e[e.BF_CODE_39_EXTENDED=1024]="BF_CODE_39_EXTENDED",e[e.BF_GS1_DATABAR_OMNIDIRECTIONAL=2048]="BF_GS1_DATABAR_OMNIDIRECTIONAL",e[e.BF_GS1_DATABAR_TRUNCATED=4096]="BF_GS1_DATABAR_TRUNCATED",e[e.BF_GS1_DATABAR_STACKED=8192]="BF_GS1_DATABAR_STACKED",e[e.BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL=16384]="BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL",e[e.BF_GS1_DATABAR_EXPANDED=32768]="BF_GS1_DATABAR_EXPANDED",e[e.BF_GS1_DATABAR_EXPANDED_STACKED=65536]="BF_GS1_DATABAR_EXPANDED_STACKED",e[e.BF_GS1_DATABAR_LIMITED=131072]="BF_GS1_DATABAR_LIMITED",e[e.BF_PATCHCODE=262144]="BF_PATCHCODE",e[e.BF_PDF417=33554432]="BF_PDF417",e[e.BF_QR_CODE=67108864]="BF_QR_CODE",e[e.BF_DATAMATRIX=134217728]="BF_DATAMATRIX",e[e.BF_AZTEC=268435456]="BF_AZTEC",e[e.BF_MAXICODE=536870912]="BF_MAXICODE",e[e.BF_MICRO_QR=1073741824]="BF_MICRO_QR",e[e.BF_MICRO_PDF417=524288]="BF_MICRO_PDF417",e[e.BF_GS1_COMPOSITE=-2147483648]="BF_GS1_COMPOSITE",e[e.BF_MSI_CODE=1048576]="BF_MSI_CODE",e[e.BF_CODE_11=2097152]="BF_CODE_11",e[e.BF_NULL=0]="BF_NULL"}(Iy||(Iy={})),function(e){e[e.IRT_NO_RESULT=0]="IRT_NO_RESULT",e[e.IRT_ORIGINAL_IMAGE=1]="IRT_ORIGINAL_IMAGE",e[e.IRT_COLOUR_CLUSTERED_IMAGE=2]="IRT_COLOUR_CLUSTERED_IMAGE",e[e.IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE=4]="IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE",e[e.IRT_TRANSFORMED_GRAYSCALE_IMAGE=8]="IRT_TRANSFORMED_GRAYSCALE_IMAGE",e[e.IRT_PREDETECTED_REGION=16]="IRT_PREDETECTED_REGION",e[e.IRT_PREPROCESSED_IMAGE=32]="IRT_PREPROCESSED_IMAGE",e[e.IRT_BINARIZED_IMAGE=64]="IRT_BINARIZED_IMAGE",e[e.IRT_TEXT_ZONE=128]="IRT_TEXT_ZONE",e[e.IRT_CONTOUR=256]="IRT_CONTOUR",e[e.IRT_LINE_SEGMENT=512]="IRT_LINE_SEGMENT",e[e.IRT_FORM=1024]="IRT_FORM",e[e.IRT_SEGMENTATION_BLOCK=2048]="IRT_SEGMENTATION_BLOCK",e[e.IRT_TYPED_BARCODE_ZONE=4096]="IRT_TYPED_BARCODE_ZONE",e[e.IRT_PREDETECTED_QUADRILATERAL=8192]="IRT_PREDETECTED_QUADRILATERAL"}(ky||(ky={}));const Oy=e=>e&&"object"==typeof e&&"function"==typeof e.then;class Ry extends Promise{constructor(e){let t,i;super(((e,n)=>{t=e,i=n})),this._s="pending",this.resolve=e=>{this.isPending&&(Oy(e)?this.task=e:(this._s="fulfilled",t(e)))},this.reject=e=>{this.isPending&&(this._s="rejected",i(e))},this.task=e}get status(){return this._s}get isPending(){return"pending"===this._s}get isFulfilled(){return"fulfilled"===this._s}get isRejected(){return"rejected"===this._s}get task(){return this._task}set task(e){let t;this._task=e,Oy(e)?t=e:"function"==typeof e&&(t=new Promise(e)),t&&(async()=>{try{const i=await t;e===this._task&&this.resolve(i)}catch(t){e===this._task&&this.reject(t)}})()}get isEmpty(){return null==this._task}}const Ay=["iPhone","iPad","Android","HarmonyOS"].includes(py.OS)?2048:4096;class Dy{constructor(){this._instanceID=void 0,this._ifSaveOriginalImageInACanvas=!1,this.oriCanvas=null,this.oriCanvasData=null,this.canvas=null,this.bFilterRegionInJs=!1,this._region=null,this._timeStartDecode=null,this._timeEnterInnerDBR=null,this._timeGetMessage=null,this.decodeRecords={},this.bDestroyed=!1,this._lastErrorCode=0,this._lastErrorString="",this._lastInnerDecodeDuration=0,this.intervalTime=0,this._intervalGetVideoFrame=0,this.array_getFrameTimeCost=[],this.array_decodeFrameTimeCost=[],this._indexCurrentDecodingFrame=0,this._arrPolygons=[],this._bPauseScan=!1,this._intervalDetectVideoPause=1e3,this._soundSource="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",this.bPlaySoundOnSuccessfulRead=!1,this.bVibrateOnSuccessfulRead=!1,this.vibrateDuration=300,this.captureAndDecodeInParallel=!0,this.autoSuggestTip=!1,this.suggestTipFrameArray=[],this.suggestTipFrameLimit=[5,3],this.noIntermediateResultsCount=0,this.noIntermediateResultsTipLimit=100,this.tinyBarcodeTipModuleSizeLimit=3,this.hugeBarcodeTipLimit=.9,this.autoZoomInFrameArray=[],this.autoZoomInFrameLimit=[5,3],this.autoZoomInStepRate=1/3,this.autoZoomInMaxStep=1.5,this.autoZoomInMaxTimes=5,this.autoZoomInMinStep=Math.pow(10,1/this.autoZoomInMaxTimes),this.autoZoomInIdealModuleSize=6,this.autoZoomOutFrameCount=0,this.autoZoomOutFrameLimit=3,this.autoZoomOutStepRate=1/3,this.autoZoomOutMinValue=1,this.autoZoomOutMinStep=2,this.autoZoomOutStepRate_2=.05,this.autoZoomOutMinValue_2=2,this.frameArrayInIdealZoom=[],this.frameLimitInIdealZoom=[5,3],this.enableZoomOutInIdealZoom=!1,this.nextActionInIdealZoom="focus",this.autoFocusFrameArray=[],this.autoFocusFrameLimit=[5,3],this.autoZoomIdealArea=[0,.05],this.autoZoomTargetBorder=.9,this.autoZoomDetectionArea=.5,this.autoZoom=!1,this.autoFocus=!1,this._resultHighlightingDuration=-1,this._dce=null,this._imgSource=null,this._maxCvsSideLength=Ay,this._promiseStartScan=null,this.beepSound=new ty({src:[this._soundSource],onplayerror:(e,t)=>{console.warn(`Sound '${e}' playback failure: ${t}`)}})}static get version(){return this._version}static get license(){return this._license}static set license(e){((e,t)=>{const i=e;if(!i._pLoad.isEmpty)throw new Error("`license`"+yy);i._license=t})(Dy,e)}static get productKeys(){return this._license}static set productKeys(e){Dy.license=e}static get handshakeCode(){return this._license}static set handshakeCode(e){Dy.license=e}static get organizationID(){return this._license}static set organizationID(e){Dy.license=e}static set sessionPassword(e){((e,t)=>{const i=e;if(!i._pLoad.isEmpty)throw new Error("`sessionPassword`"+yy);i._sessionPassword=t})(Dy,e)}static get sessionPassword(){return this._sessionPassword}static async detectEnvironment(){return await(async()=>({wasm:gy,worker:my,getUserMedia:vy,camera:await _y(),browser:py.browser,version:py.version,OS:py.OS}))()}static get engineResourcePath(){return this._engineResourcePath}static set engineResourcePath(e){if(!this._pLoad.isEmpty)throw new Error("`engineResourcePath` is not allowed to change after `createInstance` or `loadWasm` is called.");Dy._engineResourcePath=(e=>{if(null==e&&(e="./"),!cy){let t=document.createElement("a");t.href=e,e=t.href}return e.endsWith("/")||(e+="/"),e})(e)}static get licenseServer(){return this._licenseServer}static set licenseServer(e){((e,t)=>{const i=e;if(!i._pLoad.isEmpty)throw new Error("`licenseServer`"+yy);i._licenseServer=Sy(t)})(Dy,e)}static get deviceFriendlyName(){return this._deviceFriendlyName}static set deviceFriendlyName(e){((e,t)=>{const i=e;if(!i._pLoad.isEmpty)throw new Error("`deviceFriendlyName`"+yy);i._deviceFriendlyName=t||""})(Dy,e)}static get _bUseFullFeature(){return this.__bUseFullFeature}static set _bUseFullFeature(e){if(!this._pLoad.isEmpty)throw new Error("`_bUseFullFeature` is not allowed to change after `createInstance` or `loadWasm` is called.");Dy.__bUseFullFeature=e}static isImageSource(e){return!(!e||"object"!=typeof e||Array.isArray(e))&&"getImage"in e}static isDSImage(e){return!(!e||"object"!=typeof e||Array.isArray(e))&&"data"in e&&"width"in e&&"height"in e&&"pixelFormat"in e}static isDCEFrame(e){return!(!e||"object"!=typeof e||Array.isArray(e))&&"data"in e&&"region"in e&&"sx"in e&&"sy"in e&&"width"in e&&"height"in e&&("colorMode"in e||"pixelFormat"in e)&&"timeSpent"in e&&"timeStamp"in e&&"isCropped"in e&&"toCanvas"in e&&"_sWidth"in e&&"_sHeight"in e&&"_bUseWebGL"in e}get ifSaveOriginalImageInACanvas(){return this._ifSaveOriginalImageInACanvas}set ifSaveOriginalImageInACanvas(e){this._ifSaveOriginalImageInACanvas=e}getOriginalImageInACanvas(){return!this.oriCanvas&&this.oriCanvasData?this.oriCanvasData.toCanvas():this.oriCanvas}set region(e){this._region=e,this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}get region(){return this._region}static isWasmLoaded(){return this._pLoad.isFulfilled}isContextDestroyed(){return this.bDestroyed}static get lastErrorCode(){return this._lastErrorCode}static get lastErrorString(){return this._lastErrorString}get lastErrorCode(){return this._lastErrorCode}get lastErrorString(){return this._lastErrorString}static get defaultUIElementURL(){var e;return null===(e=Dy._defaultUIElementURL)||void 0===e?void 0:e.replace("@engineResourcePath/",Dy.engineResourcePath)}static set defaultUIElementURL(e){Dy._defaultUIElementURL=e}static _fireHTTPSWarnning(){Dy.onWarning&&location&&"https:"!==location.protocol&&setTimeout((()=>{Dy.onWarning&&Dy.onWarning({id:2,message:"Not connected via SSL (HTTPS), the SDK may not work correctly."})}),0)}get soundSource(){return this._soundSource}set soundSource(e){this._soundSource=e,this.beepSound=new ty({src:[this._soundSource],onplayerror:(e,t)=>{console.warn(`Sound '${e}' playback failure: ${t}`)}})}get whenToPlaySoundforSuccessfulRead(){return!0===this.bPlaySoundOnSuccessfulRead?"frame":this.bPlaySoundOnSuccessfulRead?this.bPlaySoundOnSuccessfulRead:"never"}set whenToPlaySoundforSuccessfulRead(e){this.bPlaySoundOnSuccessfulRead="never"!==e&&e}get whenToVibrateforSuccessfulRead(){return!0===this.bVibrateOnSuccessfulRead?"frame":this.bVibrateOnSuccessfulRead?this.bVibrateOnSuccessfulRead:"never"}set whenToVibrateforSuccessfulRead(e){this.bVibrateOnSuccessfulRead="never"!==e&&e}set dce(e){this._dce=e}get dce(){return!this._dce||this._dce.isDisposed||this._dce.disposed?null:this._dce}set maxCvsSideLength(e){this._maxCvsSideLength=e,this._dceControler&&this._dceControler.setDisiredValue(this,"maxCvsSideLength",e)}get maxCvsSideLength(){return this._maxCvsSideLength}async _registerDCEControler(){if(!this.dce)return;Dy._onLog&&Dy._onLog("_registerDCEControler()");const e=this.dce;this._dceControler=e._createControler();const t=this._dceControler;t.register(this),t.setDisiredValue(this,"refreshInterval",200),t.setDisiredValue(this,"maxCvsSideLength",this._maxCvsSideLength),this._styleIdBeforeVerification=this.dce.createDrawingStyle({fillStyle:"rgba(248,252,0,0.2)",strokeStyle:"transparent",paintMode:"strokeAndFill"});try{ResizeObserver}catch(e){"ReferenceError"===e.name&&window&&(window.ResizeObserver=void 0)}const i=e.getUIElement(),n=this.dce.constructor;if("@engineResourcePath/dce.ui.html"===n._defaultUIElementURL)try{i?i===t._innerSetUI&&(await e.setUIElement(`${n.engineResourcePath}dce.ui.html`),t._innerSetUI=e.getUIElement()):(await e.setUIElement(`${n.engineResourcePath}dbr.ui.html`),t._innerSetUI=e.getUIElement())}catch(t){await e.setUIElement(n.defaultUIElementURL)}else i||await e.setUIElement(n.defaultUIElementURL);this.callbackCameraChange=()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this.callbackResolutionChange=()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this.callbackCameraClose=()=>{this.stopScanning(!0),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0,this._bPauseScan=!1},this.callbackSingleFrameAcquired=async e=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null);let t=await this._decode_DCEFrame(e,{bCopyData:!1}),i=null;if(t&&t.length){const{sx:n,sy:r,width:o,height:a,_sWidth:s,_sHeight:l}=e;i=t.map((e=>({localizationResult:JSON.parse(JSON.stringify(e.localizationResult))}))),Dy.recalculateResultLocation(i,n,r,s,l,o,a)}if(this._drawResults(i,t),await this.clearMapDecodeRecord(),this.onImageRead&&this.dce.isOpen()&&!this._bPauseScan){let e=this._cloneDecodeResults(t);this.onImageRead(e)}if(this.onUniqueRead&&this.dce.isOpen()&&!this._bPauseScan)for(let n of t)this.onUniqueRead(n.barcodeText,this._cloneDecodeResults(n))},e.on("cameraChange",this.callbackCameraChange),e.on("resolutionChange",this.callbackResolutionChange),e.on("cameraClose",this.callbackCameraClose),e.on("singleFrameAcquired",this.callbackSingleFrameAcquired)}_logoutDCEControler(){this.dce&&this._dceControler&&(Dy._onLog&&Dy._onLog("_logoutDCEControler()"),this._dceControler.logout(this),this.dce.off("cameraChange",this.callbackCameraChange),this.dce.off("resolutionChange",this.callbackResolutionChange),this.dce.off("cameraClose",this.callbackCameraClose),this.dce.off("singleFrameAcquired",this.callbackSingleFrameAcquired),this._dceControler=null,this.dce=null)}async setImageSource(e,t){if(null==e)return this._imgSource=null,this._logoutDCEControler(),void(this._drawingItemNamespace=null);if(e&&e.isCameraEnhancer)this.dce=e,await this._registerDCEControler(),this._imgSource=null;else{if(!Dy.isImageSource(e))throw new Error("Invalid value.");this._logoutDCEControler(),this._imgSource=e}t&&t.resultsHighlightBaseShapes&&(this._drawingItemNamespace=t.resultsHighlightBaseShapes)}static async loadWasm(){if(this._pLoad.isEmpty){let{lt:e,l:t,ls:i,sp:n,rmk:r}=(e=>{const t=e;if(t._pLoad.isEmpty){let i,n,r=t._license||"",o=JSON.parse(JSON.stringify(t._licenseServer)),a=t._sessionPassword,s=0;if(r.startsWith("t")||r.startsWith("f"))s=0;else if(0===r.length||r.startsWith("P")||r.startsWith("L")||r.startsWith("Y")||r.startsWith("A"))s=1;else{s=2;const t=r.indexOf(":");if(-1!=t&&(r=r.substring(t+1)),r.startsWith("DLS2")){let t;try{let e=r.substring(4);e=atob(e),t=JSON.parse(e)}catch(e){throw new Error("Format Error: The license string you specified is invalid, please check to make sure it is correct.")}if(r=t.handshakeCode?t.handshakeCode:t.organizationID?t.organizationID:"","number"==typeof r&&(r=JSON.stringify(r)),0===o.length){let e=[];t.mainServerURL&&(e[0]=t.mainServerURL),t.standbyServerURL&&(e[1]=t.standbyServerURL),o=Sy(e)}!a&&t.sessionPassword&&(a=t.sessionPassword),i=t.remark}("200001"===r||r.startsWith("200001-"))&&(o&&o.length||(r="")),r||(s=1)}if(s&&(globalThis.crypto||(n="Please upgrade your browser to support online key."),globalThis.crypto.subtle||(n="Require https to use online key in this browser.")),n){if(1!==s)throw new Error(n);s=0,console.warn(n),t._lastErrorCode=-1,t._lastErrorString=n}return 1===s&&(r="",console.warn("Applying for a public trial license ...")),{lt:s,l:r,ls:o,sp:a,rmk:i}}throw new Error("Can't preprocess license again"+yy)})(Dy);this._pLoad.task=async(o,a)=>{let s=Dy.engineResourcePath+Dy._workerName;Dy.engineResourcePath.startsWith(location.origin)||(s=await fetch(s).then((e=>e.blob())).then((e=>URL.createObjectURL(e)))),Dy._dbrWorker=new Worker(s),Dy._dbrWorker.onerror=e=>{let t=new Error(e.message);a(t)},Dy._dbrWorker.onmessage=async t=>{let i=t.data?t.data:t;switch(i.type){case"log":Dy._onLog&&Dy._onLog(i.message);break;case"load":{i.message&&(i.message=i.message.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamsoft-barcode-reader/#javascript)"));let t,n=!1;1===e&&(n=!0,i.message||(i.message="Using a temporary license. [Register for a 30-day trial license >>>](https://www.dynamsoft.com/customer/license/trialLicense?product=dbr&deploymenttype=browser)")),i.success?(Dy._dbrWorker.onerror=null,Dy._version=i.version+"(JS "+Dy._jsVersion+"."+Dy._jsEditVersion+")",Dy._onLog&&Dy._onLog("load dbr worker success"),i.message&&console.warn(i.message)):(t=new Error(i.message),t.stack=i.stack+"\n"+t.stack,t.ltsErrorCode=i.ltsErrorCode,n||111==i.ltsErrorCode&&-1!=i.message.toLowerCase().indexOf("trial license")&&(n=!0)),n&&Dy.showDialog(i.success?"warn":"error",i.message),i.success?o():a(t);break}case"task":{let e=i.id,n=i.body;try{Dy._taskCallbackMap.get(e)(n),Dy._taskCallbackMap.delete(e)}catch(t){throw Dy._taskCallbackMap.delete(e),t}break}default:Dy._onLog&&Dy._onLog(t)}},Dy._dbrWorker.postMessage({type:"loadWasm",engineResourcePath:Dy.engineResourcePath,bUseFullFeature:Dy._bUseFullFeature,bd:Dy._bWasmDebug,v:Dy._jsVersion,brtk:!!e,bptk:1===e,l:t,dm:location.origin.startsWith("http")?location.origin:"https://localhost",os:py,cv:Dy.authCacheVersion,fn:Dy.deviceFriendlyName,ls:i,sp:n,rmk:r})}}await this._pLoad}static async showDialog(e,t){await(async(e,t,i)=>{if(!e._bNeverShowDialog)try{let n=await fetch(e.engineResourcePath+"dls.license.dialog.html");if(!n.ok)throw Error("Get license dialog fail. Network Error: "+n.statusText);let r=await n.text();if(!r.trim().startsWith("<"))throw Error("Get license dialog fail. Can't get valid HTMLElement.");let o=document.createElement("div");o.innerHTML=r;let a=[];for(let e=0;e<o.childElementCount;++e){let t=o.children[e];t instanceof HTMLStyleElement&&(a.push(t),document.head.append(t))}let s=1==o.childElementCount?o.children[0]:o;s.remove();let l,c,h,u,d,f=[s],p=s.children;for(let e of p)f.push(e);for(let e=0;e<f.length;++e)for(let t of f[e].children)f.push(t);for(let e of f)if(!l&&e.classList.contains("dls-license-mask"))l=e,e.addEventListener("click",(t=>{if(e==t.target){s.remove();for(let e of a)e.remove()}}));else if(!c&&e.classList.contains("dls-license-icon-close"))c=e,e.addEventListener("click",(()=>{s.remove();for(let e of a)e.remove()}));else if(!h&&e.classList.contains("dls-license-icon-error"))h=e,"error"!=t&&e.remove();else if(!u&&e.classList.contains("dls-license-icon-warn"))u=e,"warn"!=t&&e.remove();else if(!d&&e.classList.contains("dls-license-msg-content")){d=e;let t=i;for(;t;){let i=t.indexOf("["),n=t.indexOf("]",i),r=t.indexOf("(",n),o=t.indexOf(")",r);if(-1==i||-1==n||-1==r||-1==o){e.appendChild(new Text(t));break}i>0&&e.appendChild(new Text(t.substring(0,i)));let a=document.createElement("a"),s=t.substring(i+1,n);a.innerText=s;let l=t.substring(r+1,o);a.setAttribute("href",l),a.setAttribute("target","_blank"),e.appendChild(a),t=t.substring(o+1)}}document.body.appendChild(s)}catch(t){e._onLog&&e._onLog(t.message||t)}})(this,e,t)}static async createInstanceInWorker(e=!1){return await Dy.loadWasm(),await new Promise(((t,i)=>{let n=Dy._nextTaskID++;Dy._taskCallbackMap.set(n,(e=>{if(e.success)return t(e.instanceID);{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,i(t)}})),Dy._dbrWorker.postMessage({type:"createInstance",id:n,bScanner:e})}))}static async createInstance(){const e=new Dy;return e._instanceID=await Dy.createInstanceInWorker(),Dy._fireHTTPSWarnning(),e}async clearMapDecodeRecord(){return await new Promise(((e,t)=>{let i=Dy._nextTaskID++;Dy._taskCallbackMap.set(i,(i=>{if(i.success)return e();{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),Dy._dbrWorker.postMessage({type:"clearMapDecodeRecord",id:i,instanceID:this._instanceID})}))}async decode(e){Dy._onLog&&Dy._onLog("decode(source: any)"),Dy._onLog&&(this._timeStartDecode=Date.now());{let t={};return!this.region||this.region instanceof Array||(t.region=JSON.parse(JSON.stringify(this.region))),e instanceof Blob?await this._decode_Blob(e,t):e instanceof ArrayBuffer?await this._decode_ArrayBuffer(e,t):e instanceof Uint8Array||e instanceof Uint8ClampedArray?await this._decode_Uint8Array(e,t):e instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?await this._decode_Image(e,t):e instanceof HTMLCanvasElement?await this._decode_Canvas(e,t):e instanceof HTMLVideoElement?await this._decode_Video(e,t):"string"==typeof e?"data:image/"==e.substring(0,11)?await this._decode_Base64(e,t):await this._decode_Url(e,t):Dy.isDCEFrame(e)?(t.bCopyData=!0,await this._decode_DCEFrame(e,t)):Dy.isDSImage(e)?(t.bCopyData=!0,await this._decode_DSImage(e,t)):await Promise.reject(TypeError("'_decode(source, config)': Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'."))}}async decodeBase64String(e){let t={};return!this.region||this.region instanceof Array||(t.region=JSON.parse(JSON.stringify(this.region))),this._decode_Base64(e,t)}async decodeUrl(e){let t={};return!this.region||this.region instanceof Array||(t.region=JSON.parse(JSON.stringify(this.region))),this._decode_Url(e,t)}async _decodeBuffer_Uint8Array(e,t,i,n,r,o,a){return await new Promise(((s,l)=>{let c=Dy._nextTaskID++;Dy._taskCallbackMap.set(c,(e=>{if(e.success){let t,i=Dy._onLog?Date.now():0;Dy._onLog&&Dy._onLog("worker return result: "+i),this._lastInnerDecodeDuration=e.duration;try{t=this._handleRetJsonString(e.decodeReturn)}catch(e){return l(e)}if(Dy._onLog){let e=Date.now();Dy._onLog("DBR getting message from worker timestamp: "+i),Dy._onLog("From DBR staring decoding to entering worker costs: "+(this._timeEnterInnerDBR-this._timeStartDecode)),Dy._onLog("From DBR entering worker to returning message from worker costs: "+(i-this._timeEnterInnerDBR)),Dy._onLog("Handling results from DBR worker costs: "+(e-i)),Dy._onLog("Total decoding image costs: "+(e-this._timeStartDecode))}return s(t)}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,l(t)}})),this._timeEnterInnerDBR=Date.now(),Dy._onLog&&Dy._onLog("Sending buffer to worker timestamp:"+this._timeEnterInnerDBR),Dy._dbrWorker.postMessage({type:"decodeBuffer",id:c,instanceID:this._instanceID,body:{buffer:e,width:t,height:i,stride:n,format:r,orientation:o,config:a}},[e.buffer]),Dy._onLog&&a&&a.timeStamp&&Dy._onLog("Delay of decoding image: "+(this._timeEnterInnerDBR-a.timeStamp))}))}async _decodeBuffer_Blob(e,t,i,n,r,o,a){Dy._onLog&&Dy._onLog("_decodeBuffer_Blob(buffer,width,height,stride,format)");const s=e.arrayBuffer?await e.arrayBuffer():await new Promise(((t,i)=>{let n=new FileReader;n.readAsArrayBuffer(e),n.onload=()=>{t(n.result)},n.onerror=()=>{i(n.error)}}));return await this._decodeBuffer_Uint8Array(new Uint8Array(s),t,i,n,r,o,a)}async decodeBuffer(e,t,i,n,r,o,a){let s;return Dy._onLog&&Dy._onLog("decodeBuffer(buffer,width,height,stride,format)"),Dy._onLog&&(this._timeStartDecode=Date.now()),e instanceof Uint8Array||e instanceof Uint8ClampedArray?s=await this._decodeBuffer_Uint8Array(e,t,i,n,r,o,a):e instanceof ArrayBuffer?s=await this._decodeBuffer_Uint8Array(new Uint8Array(e),t,i,n,r,o,a):e instanceof Blob&&(s=await this._decodeBuffer_Blob(e,t,i,n,r,o,a)),s}async _decodeFileInMemory_Uint8Array(e){return await new Promise(((t,i)=>{let n=Dy._nextTaskID++;Dy._taskCallbackMap.set(n,(e=>{if(e.success){let n;this._lastInnerDecodeDuration=e.duration;try{n=this._handleRetJsonString(e.decodeReturn)}catch(e){return i(e)}return t(n)}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,i(t)}})),Dy._dbrWorker.postMessage({type:"decodeFileInMemory",id:n,instanceID:this._instanceID,body:{bytes:e}})}))}async getRuntimeSettings(){return await new Promise(((e,t)=>{let i=Dy._nextTaskID++;Dy._taskCallbackMap.set(i,(i=>{if(i.success){let t=JSON.parse(i.results);return null!=this.userDefinedRegion&&(t.region=JSON.parse(JSON.stringify(this.userDefinedRegion))),e(t)}{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),Dy._dbrWorker.postMessage({type:"getRuntimeSettings",id:i,instanceID:this._instanceID})}))}async updateRuntimeSettings(e){let t;if("string"==typeof e)if("speed"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,t.region=e.region,t.deblurLevel=3,t.expectedBarcodesCount=0,t.localizationModes=[2,0,0,0,0,0,0,0]}else if("balance"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,t.region=e.region,t.deblurLevel=5,t.expectedBarcodesCount=512,t.localizationModes=[2,16,0,0,0,0,0,0]}else if("coverage"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,t.region=e.region}else if("dense"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),this.maxCvsSideLength=4096,t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,t.region=e.region,t.deblurLevel=9,t.expectedBarcodesCount=0,t.localizationModes=[2,8,0,0,0,0,0,0]}else if("distance"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),this.maxCvsSideLength=4096,t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,t.region=e.region,t.deblurLevel=3,t.expectedBarcodesCount=0,t.localizationModes=[2,8,0,0,0,0,0,0]}else t=JSON.parse(e);else{if("object"!=typeof e)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");if(t=JSON.parse(JSON.stringify(e)),t.region instanceof Array){let e=t.region;[e.regionLeft,e.regionTop,e.regionLeft,e.regionBottom,e.regionMeasuredByPercentage].some((e=>void 0!==e))&&(t.region={regionLeft:e.regionLeft||0,regionTop:e.regionTop||0,regionRight:e.regionRight||0,regionBottom:e.regionBottom||0,regionMeasuredByPercentage:e.regionMeasuredByPercentage||0})}}if(!Dy._bUseFullFeature){if(0!=(t.barcodeFormatIds&~(Iy.BF_ONED|Iy.BF_QR_CODE|Iy.BF_PDF417|Iy.BF_DATAMATRIX))||0!=t.barcodeFormatIds_2)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(0!=t.intermediateResultTypes)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}if(this.bFilterRegionInJs){let e=t.region;if(e instanceof Array)throw Error("The `region` of type `Array` is only allowed in `BarcodeScanner`.");this.userDefinedRegion=JSON.parse(JSON.stringify(e)),(e.regionLeft||e.regionTop||e.regionRight||e.regionBottom||e.regionMeasuredByPercentage)&&(e.regionLeft||e.regionTop||100!=e.regionRight||100!=e.regionBottom||!e.regionMeasuredByPercentage)?this.region=e:this.region=null,t.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0}}else this.userDefinedRegion=null,this.region=null;return(this.autoZoom||this.autoFocus)&&(t.intermediateResultTypes|=ky.IRT_TYPED_BARCODE_ZONE),await new Promise(((e,i)=>{let n=Dy._nextTaskID++;Dy._taskCallbackMap.set(n,(t=>{if(t.success){try{this._handleRetJsonString(t.updateReturn)}catch(e){i(e)}return e()}{let e=new Error(t.message);return e.stack=t.stack+"\n"+e.stack,i(e)}})),Dy._dbrWorker.postMessage({type:"updateRuntimeSettings",id:n,instanceID:this._instanceID,body:{settings:JSON.stringify(t)}})}))}async resetRuntimeSettings(){return this.userDefinedRegion=null,this.region=null,this.maxCvsSideLength=Ay,await new Promise(((e,t)=>{let i=Dy._nextTaskID++;Dy._taskCallbackMap.set(i,(i=>{if(i.success)return e();{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),Dy._dbrWorker.postMessage({type:"resetRuntimeSettings",id:i,instanceID:this._instanceID})}))}async _resetRuntimeSettingsToCppDefault(){return this.userDefinedRegion=null,this.region=null,this.maxCvsSideLength=Ay,await new Promise(((e,t)=>{let i=Dy._nextTaskID++;Dy._taskCallbackMap.set(i,(i=>{if(i.success)return e();{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),Dy._dbrWorker.postMessage({type:"resetRuntimeSettingsToCppDefault",id:i,instanceID:this._instanceID})}))}async outputRuntimeSettingsToString(){if(!Dy._bUseFullFeature)throw Error("outputRuntimeSettingsToString() is not supported in the compact version. Please try the full-featured version.");return await new Promise(((e,t)=>{let i=Dy._nextTaskID++;Dy._taskCallbackMap.set(i,(i=>{if(i.success)return e(i.results);{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),Dy._dbrWorker.postMessage({type:"outputRuntimeSettingsToString",id:i,instanceID:this._instanceID})}))}async initRuntimeSettingsWithString(e){if(!Dy._bUseFullFeature)throw Error("initRuntimeSettingsWithString() is not supported in the compact version. Please try the full-featured version.");if("string"==typeof e);else{if("object"!=typeof e)throw TypeError("'initRuntimeSettingstWithString(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");e=JSON.stringify(e)}return await new Promise(((t,i)=>{let n=Dy._nextTaskID++;Dy._taskCallbackMap.set(n,(e=>{if(e.success){try{this._handleRetJsonString(e.initReturn)}catch(e){i(e)}return t()}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,i(t)}})),Dy._dbrWorker.postMessage({type:"initRuntimeSettingsWithString",id:n,instanceID:this._instanceID,body:{settings:e}})}))}async _decode_Blob(e,t){Dy._onLog&&Dy._onLog("_decode_Blob(blob: Blob)");let i=null,n=null;if("undefined"!=typeof createImageBitmap)try{i=await createImageBitmap(e)}catch(e){}i||(n=await function(e){return new Promise(((t,i)=>{let n=URL.createObjectURL(e),r=new Image;r.dbrObjUrl=n,r.src=n,r.onload=()=>{t(r)},r.onerror=e=>{i(new Error("Can't convert blob to image : "+(e instanceof Event?e.type:e)))}}))}(e));let r=await this._decode_Image(i||n,t);return i&&i.close(),r}async _decode_ArrayBuffer(e,t){return await this._decode_Blob(new Blob([e]),t)}async _decode_Uint8Array(e,t){return await this._decode_Blob(new Blob([e]),t)}async _decode_Image(e,t){Dy._onLog&&Dy._onLog("_decode_Image(image: HTMLImageElement|ImageBitmap)"),t=t||{};let i,n,r=e instanceof HTMLImageElement?e.naturalWidth:e.width,o=e instanceof HTMLImageElement?e.naturalHeight:e.height,a=Math.max(r,o);if(a>this._maxCvsSideLength){let e=this._maxCvsSideLength/a;i=Math.round(r*e),n=Math.round(o*e)}else i=r,n=o;this.canvas||(this.canvas=document.createElement("canvas"));const s=this.canvas;s.width===i&&s.height===n||(s.width=i,s.height=n),s.ctx2d||(s.ctx2d=s.getContext("2d",{willReadFrequently:!0})),s.ctx2d.drawImage(e,0,0,r,o,0,0,i,n),e.dbrObjUrl&&URL.revokeObjectURL(e.dbrObjUrl);let l=await this._decode_Canvas(s,t);if(this.ifSaveOriginalImageInACanvas){const t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),this.oriCanvas=t,this.oriCanvasData=null}return Dy.recalculateResultLocation(l,0,0,r,o,i,n),l}async _decode_Canvas(e,t){if(Dy._onLog&&Dy._onLog("_decode_Canvas(canvas:HTMLCanvasElement)"),e.crossOrigin&&"anonymous"!=e.crossOrigin)throw"cors";if(0===e.width||0===e.height)throw Error("The width or height of the 'canvas' is 0.");this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=e,this.oriCanvasData=null);let i=(e.ctx2d||e.getContext("2d",{willReadFrequently:!0})).getImageData(0,0,e.width,e.height).data;return await this._decodeBuffer_Uint8Array(i,e.width,e.height,4*e.width,Cy.IPF_ABGR_8888,0,t)}async _decode_Video(e,t){if(Dy._onLog&&Dy._onLog("_decode_Video(video)"),!(e instanceof HTMLVideoElement))throw TypeError("'_decode_Video(video [, config] )': Type of 'video' should be 'HTMLVideoElement'.");if(e.crossOrigin&&"anonymous"!=e.crossOrigin)throw"cors";t=t||{};let i,n,r=e.videoWidth,o=e.videoHeight,a=Math.max(r,o);if(a>this._maxCvsSideLength){let e=this._maxCvsSideLength/a;i=Math.round(r*e),n=Math.round(o*e)}else i=r,n=o;this.canvas||(this.canvas=document.createElement("canvas"));const s=this.canvas;s.width===i&&s.height===n||(s.width=i,s.height=n),s.ctx2d||(s.ctx2d=s.getContext("2d",{willReadFrequently:!0})),s.ctx2d.drawImage(e,0,0,r,o,0,0,i,n);let l=await this._decode_Canvas(s,t);if(this.ifSaveOriginalImageInACanvas){const t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0),this.oriCanvas=t,this.oriCanvasData=null}return Dy.recalculateResultLocation(l,0,0,r,o,i,n),l}async _decode_DCEFrame(e,t){if(Dy._onLog&&Dy._onLog("_decode_DCEFrame(dceFrame)"),!Dy.isDCEFrame(e))return[];let i=[];this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=null,this.oriCanvasData={width:e.width,height:e.height,colorMode:e.colorMode,pixelFormat:e.pixelFormat,data:new Uint8Array(e.data),toCanvas:e.toCanvas});const{width:n,height:r,colorMode:o,pixelFormat:a,stride:s,timeStamp:l}=e;let c;c=t&&t.bCopyData?new Uint8Array(e.data):e.data;let h=null;if(t?(h=JSON.parse(JSON.stringify(t)),h.timeStamp=l):h={timeStamp:l},a&&s)if("grey"===a)i=await this._decodeBuffer_Uint8Array(c,n,r,s,Cy.IPF_GrayScaled,0,h);else if("rgba"===a)i=await this._decodeBuffer_Uint8Array(c,n,r,s,Cy.IPF_ABGR_8888,0,h);else{if("bgra"!==a)throw new Error(`Pixel format '${a}' is not supported to decode.`);i=await this._decodeBuffer_Uint8Array(c,n,r,s,Cy.IPF_ARGB_8888,0,h)}else if("grey"===o)i=await this._decodeBuffer_Uint8Array(c,n,r,n,Cy.IPF_GrayScaled,0,h);else if("rgba"===o)i=await this._decodeBuffer_Uint8Array(c,n,r,4*n,Cy.IPF_ABGR_8888,0,h);else{if("bgra"!==o)throw new Error(`Color mode '${o}' is not supported to decode.`);i=await this._decodeBuffer_Uint8Array(c,n,r,4*n,Cy.IPF_ARGB_8888,0,h)}return i}async _decode_DSImage(e,t){if(Dy._onLog&&Dy._onLog("_decode_DSImage(dsImage)"),!Dy.isDSImage(e))return null;this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=null,this.oriCanvasData={width:e.width,height:e.height,pixelFormat:e.pixelFormat.toLowerCase(),data:new Uint8Array(e.data),toCanvas:function(){const e=document.createElement("canvas");let t;switch(e.width=this.width,e.height=this.height,this.pixelFormat){case"grey":t=new Uint8ClampedArray(this.width*this.height*4);for(let e=0;e<t.length;e+=4)t[e]=this.data[e/4],t[e+1]=this.data[e/4],t[e+2]=this.data[e/4],t[e+3]=255;break;case"rgb":t=new Uint8ClampedArray(this.width*this.height*4);for(let e=0;e<t.length;e+=4)t[e]=this.data[e],t[e+1]=this.data[e+1],t[e+2]=this.data[e+2],t[e+3]=255;break;case"bgr":t=new Uint8ClampedArray(this.width*this.height*4);for(let e=0;e<t.length;e+=4)t[e]=this.data[e],t[e+1]=this.data[e+1],t[e+2]=this.data[e+2],t[e+3]=255;break;case"rgba":case"bgra":t=new Uint8ClampedArray(this.data);break;default:throw new Error("The content of 2D Canvas is currently limited to the sRGB color space.")}const i=new ImageData(t,this.width,this.height);return e.getContext("2d").putImageData(i,0,0),e}});const{width:i,height:n}=e;let r,o,a,s=e.pixelFormat.toLowerCase();switch(r=t&&t.bCopyData?new Uint8Array(e.data):e.data,s){case"grey":a=Cy.IPF_GrayScaled,o=i;break;case"rgb":a=Cy.IPF_BGR_888,o=3*i;break;case"bgr":a=Cy.IPF_RGB_888,o=3*i;break;case"rgba":a=Cy.IPF_ABGR_8888,o=4*i;break;case"bgra":a=Cy.IPF_ARGB_8888,o=4*i;break;default:throw new Error("The pixel format is not supported to decode.")}return await this._decodeBuffer_Uint8Array(r,i,n,o,a,0,t)}async _decode_Base64(e,t){if(Dy._onLog&&Dy._onLog("_decode_Base64(base64Str)"),"string"!=typeof e)return Promise.reject("'_decode_Base64(base64Str, config)': Type of 'base64Str' should be 'string'.");"data:image/"==e.substring(0,11)&&(e=e.substring(e.indexOf(",")+1));{let i=atob(e),n=i.length,r=new Uint8Array(n);for(;n--;)r[n]=i.charCodeAt(n);return await this._decode_Blob(new Blob([r]),t)}}async _decode_Url(e,t){if(Dy._onLog&&Dy._onLog("_decode_Url(url)"),"string"!=typeof e)throw TypeError("'_decode_Url(url, config)': Type of 'url' should be 'string'.");{let i=await new Promise(((t,i)=>{let n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.send(),n.onloadend=async()=>{t(n.response)},n.onerror=()=>{i(new Error("Network Error: "+n.statusText))}}));return await this._decode_Blob(i,t)}}async _decode_FilePath(e,t){throw Dy._onLog&&Dy._onLog("_decode_FilePath(path)"),Error("'_decode_FilePath(path, config)': The method is only supported in node environment.")}static recalculateResultLocation(e,t,i,n,r,o,a){if(e.length>0)for(let s of e){let e=s.localizationResult;2==e.resultCoordinateType&&(e.x1*=.01*o,e.x2*=.01*o,e.x3*=.01*o,e.x4*=.01*o,e.y1*=.01*a,e.y2*=.01*a,e.y3*=.01*a,e.y4*=.01*a);let l=o/n,c=a/r;e.x1=e.x1/l+t,e.x2=e.x2/l+t,e.x3=e.x3/l+t,e.x4=e.x4/l+t,e.y1=e.y1/c+i,e.y2=e.y2/c+i,e.y3=e.y3/c+i,e.y4=e.y4/c+i,2==e.resultCoordinateType&&(e.x1*=100/n,e.x2*=100/n,e.x3*=100/n,e.x4*=100/n,e.y1*=100/r,e.y2*=100/r,e.y3*=100/r,e.y4*=100/r),e.x1=Math.round(e.x1),e.x2=Math.round(e.x2),e.x3=Math.round(e.x3),e.x4=Math.round(e.x4),e.y1=Math.round(e.y1),e.y2=Math.round(e.y2),e.y3=Math.round(e.y3),e.y4=Math.round(e.y4)}}static BarcodeReaderException(e,t){let i,n=Ty.DBR_UNKNOWN;return"number"==typeof e?(n=e,i=new Error(t)):i=new Error(e),i.code=n,i}_handleRetJsonString(e){let t=Ty;if(e.textResults){for(let t=0;t<e.textResults.length;t++){let i=e.textResults[t];try{let t=i.barcodeText,n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);try{i.barcodeText=decodeURIComponent(escape(n))}catch(e){i.barcodeText=n}}catch(e){i.barcodeText=""}if(null!=i.exception){Dy._setWarnnedEx.has(i.exception)||(Dy._setWarnnedEx.add(i.exception),console.warn(i.exception));let e={};i.exception.split(";").forEach((t=>{let i=t.indexOf(":");e[t.substring(0,i)]=t.substring(i+1)})),i.exception=e}}return e.decodeRecords?this.decodeRecords=e.decodeRecords:this.decodeRecords={},this._lastErrorCode=e.exception,this._lastErrorString=e.description,e.exception&&!Dy._setWarnnedEx.has(e.description)&&(Dy._setWarnnedEx.add(e.description),console.warn(e.description)),e.textResults}if(e.exception==t.DBR_SUCCESS)return e.data;throw Dy.BarcodeReaderException(e.exception,e.description)}async setModeArgument(e,t,i,n){return await new Promise(((r,o)=>{let a=Dy._nextTaskID++;Dy._taskCallbackMap.set(a,(e=>{if(e.success){try{this._handleRetJsonString(e.setReturn)}catch(e){return o(e)}return r()}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,o(t)}})),Dy._dbrWorker.postMessage({type:"setModeArgument",id:a,instanceID:this._instanceID,body:{modeName:e,index:t,argumentName:i,argumentValue:n}})}))}async getModeArgument(e,t,i){return await new Promise(((n,r)=>{let o=Dy._nextTaskID++;Dy._taskCallbackMap.set(o,(e=>{if(e.success){let t;try{t=this._handleRetJsonString(e.getReturn)}catch(e){return r(e)}return n(t)}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,r(t)}})),Dy._dbrWorker.postMessage({type:"getModeArgument",id:o,instanceID:this._instanceID,body:{modeName:e,index:t,argumentName:i}})}))}async getIntermediateResults(){return await new Promise(((e,t)=>{let i=Dy._nextTaskID++;Dy._taskCallbackMap.set(i,(i=>{if(i.success)return e(i.results);{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),Dy._dbrWorker.postMessage({type:"getIntermediateResults",id:i,instanceID:this._instanceID})}))}async getIntermediateCanvas(){let e=await this.getIntermediateResults(),t=[];for(let i of e)if(i.dataType==Ey.IMRDT_IMAGE)for(let e of i.results){const i=e.bytes;let n;switch(Dy._onLog&&Dy._onLog(" "+i.length+" "+i.byteLength+" "+e.width+" "+e.height+" "+e.stride+" "+e.format),e.format){case Cy.IPF_ABGR_8888:n=new Uint8ClampedArray(i);break;case Cy.IPF_RGB_888:{const e=i.length/3;n=new Uint8ClampedArray(4*e);for(let t=0;t<e;++t)n[4*t]=i[3*t+2],n[4*t+1]=i[3*t+1],n[4*t+2]=i[3*t],n[4*t+3]=255;break}case Cy.IPF_GrayScaled:{const e=i.length;n=new Uint8ClampedArray(4*e);for(let t=0;t<e;t++)n[4*t]=n[4*t+1]=n[4*t+2]=i[t],n[4*t+3]=255;break}case Cy.IPF_Binary:case Cy.IPF_BinaryInverted:{const t=i.length,r=e.width,o=e.height,a=e.stride;n=new Uint8ClampedArray(r*o*4);for(let e=0;e<t;e++){let t=i[e],o=e%a*8,s=Math.floor(e/a);for(let e=0;e<8;e++){let i=o+e,a=4*(s*r+i);if(i>=r)break;n[a]=n[a+1]=n[a+2]=(128&t)/128*255,n[a+3]=255,t<<=1}}break}default:console.warn("unknow intermediate image",e)}if(!n)continue;let r=new ImageData(n,e.width,e.height),o=document.createElement("canvas");o.width=e.width,o.height=e.height,o.getContext("2d").putImageData(r,0,0),t.push(o)}return t}async getScanSettings(){return await new Promise(((e,t)=>{let i=Dy._nextTaskID++;Dy._taskCallbackMap.set(i,(i=>{if(i.success){let t=i.results;return t.intervalTime=this.intervalTime,t.whenToPlaySoundforSuccessfulRead=this.whenToPlaySoundforSuccessfulRead,t.soundOnSuccessfullRead=this.soundSource,t.whenToVibrateforSuccessfulRead=this.whenToVibrateforSuccessfulRead,t.vibrateDuration=this.vibrateDuration,t.captureAndDecodeInParallel=this.captureAndDecodeInParallel,t.autoZoom=this.autoZoom,t.autoFocus=this.autoFocus,t.autoSuggestTip=this.autoSuggestTip,e(t)}{let e=new Error(i.message);return e.stack+="\n"+i.stack,t(e)}})),Dy._dbrWorker.postMessage({type:"getScanSettings",id:i,instanceID:this._instanceID})}))}async updateScanSettings(e){if(!e)return;const t=JSON.parse(JSON.stringify(e));if(t.autoZoom||t.autoFocus||t.autoSuggestTip){if(!Dy._bUseFullFeature)throw new Error("'autoZoom', 'autoFocus' and 'autoSuggestTip' are not supported in the compact version. Please try the full-featured version.");const e=await this.getRuntimeSettings();e.intermediateResultTypes|=ky.IRT_TYPED_BARCODE_ZONE,await this.updateRuntimeSettings(e)}return t.hasOwnProperty("intervalTime")&&(this.intervalTime=Math.max(t.intervalTime,0),delete t.intervalTime),t.hasOwnProperty("whenToPlaySoundforSuccessfulRead")&&(this.whenToPlaySoundforSuccessfulRead=t.whenToPlaySoundforSuccessfulRead,delete t.whenToPlaySoundforSuccessfulRead),t.hasOwnProperty("soundOnSuccessfullRead")&&(this.soundSource=t.soundOnSuccessfullRead,delete t.soundOnSuccessfullRead),t.hasOwnProperty("whenToVibrateforSuccessfulRead")&&(this.whenToVibrateforSuccessfulRead=t.whenToVibrateforSuccessfulRead,delete t.whenToVibrateforSuccessfulRead),t.hasOwnProperty("vibrateDuration")&&(this.vibrateDuration=t.vibrateDuration,delete t.vibrateDuration),t.hasOwnProperty("captureAndDecodeInParallel")&&(this.captureAndDecodeInParallel=t.captureAndDecodeInParallel,delete t.captureAndDecodeInParallel),t.hasOwnProperty("autoZoom")&&(this.autoZoom&&this.autoZoom!=t.autoZoom&&this.dce&&this.dce.setZoom({factor:1}).catch((()=>{})),this.autoZoom=t.autoZoom,delete t.autoZoom),t.hasOwnProperty("autoFocus")&&(this.autoFocus=t.autoFocus,this.dce&&this.dce.setFocus({mode:"continuous"}).catch((()=>{})),delete t.autoFocus),t.hasOwnProperty("autoSuggestTip")&&(this.autoSuggestTip=t.autoSuggestTip,delete t.autoFocus),await new Promise(((e,i)=>{let n=Dy._nextTaskID++;Dy._taskCallbackMap.set(n,(t=>{if(t.success)return e();{let e=new Error(t.message);return e.stack+="\n"+t.stack,i(e)}})),Dy._dbrWorker.postMessage({type:"updateScanSettings",id:n,instanceID:this._instanceID,body:{settings:t}})}))}_cloneDecodeResults(e){if(e instanceof Array){let t=[];for(let i of e)t.push(this._cloneDecodeResults(i));return t}{let t=e,i=JSON.parse(JSON.stringify(t,((e,t)=>"oriVideoCanvas"==e||"searchRegionCanvas"==e?void 0:t)));return i}}async _loopReadVideo(){if(this.bDestroyed)return this.dce&&this._dceControler&&this._dceControler.setDisiredAction(this,"stopFetchingLoop"),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),void this._drawResults(null);if(this.dce&&!this.dce.isOpen())return this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),void(await this.clearMapDecodeRecord());if(!this.dce&&!this._imgSource||this._bPauseScan)return Dy._onLog&&Dy._onLog("Scan is paused, or imageSource is not set. Ask in 1s."),await this.clearMapDecodeRecord(),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),this._intervalDetectVideoPause));Dy._onLog&&Dy._onLog("======= once read ======="),Dy._onLog&&(this._timeStartDecode=Date.now());let e=null,t=null;if(this.dce)e=this._getVideoFrame();else if(this._imgSource&&(t=await this._imgSource.getImage(),!Dy.isDSImage(t)))throw new Error("Invalid DSImage.");if(!e&&!t)return Dy._onLog&&Dy._onLog("Get invalid frame."),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),0));(async()=>{let i=[];if(e){i=await this._decode_DCEFrame(e,{bScanner:!0,bCopyData:!1});let t=null;if(i&&i.length){const{sx:n,sy:r,width:o,height:a,_sWidth:s,_sHeight:l}=e;t=i.map((e=>({resultState:e.resultState,localizationResult:JSON.parse(JSON.stringify(e.localizationResult))}))),Dy.recalculateResultLocation(t,n,r,s,l,o,a)}0==this._resultHighlightingDuration?this._drawResults(null):this._drawResults(t,i),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._resultHighlightingDuration>0&&(this._clearResultsCanvasTimeoutId=setTimeout((()=>{this.bDestroyed||this._drawResults(null)}),this._resultHighlightingDuration))}else t&&(i=await this._decode_DSImage(t,{bScanner:!0,bCopyData:!1}));return i})().then((e=>{if(Dy._onLog&&Dy._onLog(e),this.dce&&this.captureAndDecodeInParallel){let e=this.array_decodeFrameTimeCost,t=this.array_getFrameTimeCost;const i=()=>{let i=0;if(t&&t.length){let n=Math.min(...e),r=Math.max(...t);n&&r&&(i=n-r)}else i=0;return i>0?i:0};(()=>{for(;e.length>=5;)e.shift();e.push(this._lastInnerDecodeDuration)})(),this._intervalGetVideoFrame=i()+this.intervalTime}if((this.dce&&this.dce.isOpen()||this._imgSource)&&!this._bPauseScan){if(this.bPlaySoundOnSuccessfulRead&&e.length){let t=!1;!0===this.bPlaySoundOnSuccessfulRead||"frame"===this.bPlaySoundOnSuccessfulRead?t=e.some((e=>e.resultState>=0)):"unique"===this.bPlaySoundOnSuccessfulRead&&(t=e.some((e=>0==e.resultState))),t&&this.beepSound&&(this.beepSound.stop(),this.beepSound.play())}if(navigator.vibrate&&this.bVibrateOnSuccessfulRead&&e.length){let t=!1;if(!0===this.bVibrateOnSuccessfulRead||"frame"===this.bVibrateOnSuccessfulRead?t=e.some((e=>e.resultState>=0)):"unique"===this.bVibrateOnSuccessfulRead&&(t=e.some((e=>0==e.resultState))),t)try{navigator.vibrate(this.vibrateDuration)}catch(e){console.warn("Vibration not allowed. User interaction required: "+(e.message||e))}}if(this.onImageRead){e=e.filter((e=>e.resultState>=0));const t=this._cloneDecodeResults(e);this.onImageRead(t)}if(this.onUniqueRead){e=e.filter((e=>0==e.resultState));const t=this._cloneDecodeResults(e);for(let e of t)this.onUniqueRead(e.barcodeText,e)}}this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.intervalTime?this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),this.intervalTime):this._loopReadVideo()})).catch((e=>{this.dce&&this._dceControler&&this._dceControler.setDisiredAction(this,"stopFetchingLoop"),Dy._onLog&&Dy._onLog(e.message||e),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout((()=>{this.dce&&(this.dce.startFetchingLoop(),this._dceControler&&this._dceControler.clearUserDisiredAction({user:this,actionName:"stopFetchingLoop"})),this._loopReadVideo()}),Math.max(this.intervalTime,1e3)),"platform error"==e.message||console.warn(e.message)}))}_getVideoFrame(){if(!this.dce)return null;let e;if(this.captureAndDecodeInParallel){if(Dy._onLog&&Dy._onLog("Get frame in parallel."),this._dceControler&&this._dceControler.setDisiredValue(this,"loopInterval",this._intervalGetVideoFrame),!this.dce.numberOfFramesInBuffer)return this._dceControler&&this._dceControler.setDisiredValue(this,"loopInterval",0),null;e=this.dce.getFrameFromBuffer();const t=e=>{if(!e)return;let t=e.timeSpent,i=this.array_getFrameTimeCost;for(;i.length>=5;)i.shift();i.push(t)};t(e)}else Dy._onLog&&Dy._onLog("Get frame in serial."),this._dceControler&&this._dceControler.setDisiredAction(this,"stopFetchingLoop"),e=this.dce.getFrame();return e}_drawResults(e,t){if(!this.dce||this.dce.disposed||this._bPauseScan||!this._drawingItemNamespace||!this._drawingItemNamespace.DT_Polygon)return;if(!this._dbrDrawingLayer){if(!this.dce.isOpen())return;if(!(this.dce.singleFrameMode||this.dce.video&&this.dce._videoTrack))return;this._dbrDrawingLayer=this.dce.getDrawingLayer(3)}const i=this._dbrDrawingLayer;e||(e=[]);let n=this._arrPolygons;for(let r=0;r<e.length;r++){let o,a=e[r].localizationResult;n[r]?(o=n[r],i.hasDrawingItem(o)||i.addDrawingItem(o),o.set("vertices",[{x:a.x1,y:a.y1},{x:a.x2,y:a.y2},{x:a.x3,y:a.y3},{x:a.x4,y:a.y4}]),(o.set||o.setAttribute).call(o,"vertices",[{x:a.x1,y:a.y1},{x:a.x2,y:a.y2},{x:a.x3,y:a.y3},{x:a.x4,y:a.y4}])):(o=new this._drawingItemNamespace.DT_Polygon([{x:a.x1,y:a.y1},{x:a.x2,y:a.y2},{x:a.x3,y:a.y3},{x:a.x4,y:a.y4}]),i.addDrawingItem(o),n[r]=o),-1===e[r].resultState?(o.styleId=this._styleIdBeforeVerification,o._mapStyle.set("default",this.dce.getDrawingStyle(this._styleIdBeforeVerification)),o._mapStyle.set("selected",this.dce.getDrawingStyle(this._styleIdBeforeVerification))):(o.styleId=null,o._mapStyle.set("default",this.dce.getDrawingStyle(3)),o._mapStyle.set("selected",this.dce.getDrawingStyle(7))),t&&t[r]?o.addNote({name:"Barcode_Result",content:t[r]},!0):o.addNote({name:"Barcode_Result",content:e[r]},!0)}for(let r=e.length;r<n.length;r++)n[r].deleteNote("Barcode_Result"),i.removeDrawingItem(n[r]);i.renderAll()}async startScanning(e){if(!this.dce&&!this._imgSource)throw new Error("'imageSource' is not set. call 'setImageSource()' before 'startScanning()'.");if(this._promiseStartScan&&this._promiseStartScan.isPending)return this._promiseStartScan;this._promiseStartScan=new Ry;let t=null;if(this.dce){if(this.dce.isOpen())if(e&&this.dce.appendAndShowUI(),this.dce.playCallbackInfo)t=JSON.parse(JSON.stringify(this.dce.playCallbackInfo));else{const e=this.dce.getSelectedCamera();t={width:this.dce.video.videoWidth,height:this.dce.video.videoHeight,deviceId:e&&e.deviceId}}else if(t=await this.dce.open(e),!this._promiseStartScan)return null;this._dceControler&&(this._dceControler.clearUserDisiredAction({user:this,actionName:"close"}),this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!0),this.dce.ifShowScanRegionLaser&&this.dce.showScanRegionLaser())}return this._bPauseScan=!1,this.dce&&this.dce.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout((()=>{this.dce&&(this.dce.startFetchingLoop(),this._dceControler&&this._dceControler.clearUserDisiredAction({user:this,actionName:"stopFetchingLoop"})),this._loopReadVideo()}),0)),this._promiseStartScan.resolve(t),t}stopScanning(e){this.dce&&(this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this._dceControler&&(this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!1),this.dce.ifShowScanRegionLaser||this.dce.hideScanRegionLaser(),this._dceControler.setDisiredAction(this,"close",[e]))),this._bPauseScan=!0,this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0,this._promiseStartScan=null}pauseScanning(e){if(this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),e&&e.keepResultsHighlighted||this._drawResults(null),this._bPauseScan=!0,this.dce){if(this.dce.singleFrameMode)throw new Error("'pauseScanning()' is unavailable when property 'singleFrameMode' of the 'CameraEnhancer' instance is true.");this._dceControler&&(this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!1),this.dce.ifShowScanRegionLaser||this.dce.hideScanRegionLaser(),this._dceControler.setDisiredAction(this,"stopFetchingLoop"))}}resumeScanning(){if(this._bPauseScan=!1,this.dce){if(this.dce.singleFrameMode)throw new Error("'resumeScanning()' is unavailable when property 'singleFrameMode' of the 'CameraEnhancer' instance is true.");this.dce.startFetchingLoop(),this._dceControler&&(this._dceControler.clearUserDisiredAction({user:this,actionName:"stopFetchingLoop"}),this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!0),this.dce.ifShowScanRegionLaser&&this.dce.showScanRegionLaser())}}destroyContext(){if(Dy._onLog&&Dy._onLog("destroyContext()"),this.bDestroyed)return;this.bDestroyed=!0,(this.dce||this._promiseStartScan)&&this.stopScanning(),this.setImageSource(null);let e=Dy._nextTaskID++;Dy._taskCallbackMap.set(e,(e=>{if(!e.success){let t=new Error(e.message);throw t.stack=e.stack+"\n"+t.stack,t}})),Dy._dbrWorker.postMessage({type:"destroyContext",id:e,instanceID:this._instanceID})}}Dy._jsVersion="9.6.20",Dy._jsEditVersion="20230410",Dy._version=`loading...(JS ${Dy._jsVersion}.${Dy._jsEditVersion})`,Dy._license=wy,Dy._sessionPassword=xy,Dy.browserInfo=py,Dy._workerName=`dbr-${Dy._jsVersion}.browser.worker.js`,Dy._engineResourcePath=by,Dy._licenseServer=[],Dy._deviceFriendlyName="",Dy._isShowRelDecodeTimeInResults=!1,Dy._bWasmDebug=!1,Dy._bNeverShowDialog=!1,Dy.__bUseFullFeature=!0,Dy._nextTaskID=0,Dy._taskCallbackMap=new Map,Dy._pLoad=new Ry,Dy._lastErrorCode=0,Dy._lastErrorString="",Dy._setWarnnedEx=new Set,Dy._defaultUIElementURL="@engineResourcePath/dbr.ui.html";var Ly={653:(e,t,i)=>{var n,r,o,a,s,l,c,h,u,d,f,p,g,m,v,_,b,y,w,x,S,C=C||{version:"5.2.1"};if(t.fabric=C,"undefined"!=typeof document&&"undefined"!=typeof window)document instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document)?C.document=document:C.document=document.implementation.createHTMLDocument(""),C.window=window;else{var T=new(i(192).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;C.document=T.document,C.jsdomImplForWrapper=i(898).implForWrapper,C.nodeCanvas=i(245).Canvas,C.window=T,DOMParser=C.window.DOMParser}function E(e,t){var i=e.canvas,n=t.targetCanvas,r=n.getContext("2d");r.translate(0,n.height),r.scale(1,-1);var o=i.height-n.height;r.drawImage(i,0,o,n.width,n.height,0,0,n.width,n.height)}function I(e,t){var i=t.targetCanvas.getContext("2d"),n=t.destinationWidth,r=t.destinationHeight,o=n*r*4,a=new Uint8Array(this.imageBuffer,0,o),s=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,n,r,e.RGBA,e.UNSIGNED_BYTE,a);var l=new ImageData(s,n,r);i.putImageData(l,0,0)}C.isTouchSupported="ontouchstart"in C.window||"ontouchstart"in C.document||C.window&&C.window.navigator&&C.window.navigator.maxTouchPoints>0,C.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,C.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],C.DPI=96,C.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",C.commaWsp="(?:\\s+,?\\s*|,\\s*)",C.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,C.reNonWord=/[ \n\.,;!\?\-]/,C.fontPaths={},C.iMatrix=[1,0,0,1,0,0],C.svgNS="http://www.w3.org/2000/svg",C.perfLimitSizeTotal=2097152,C.maxCacheSideLimit=4096,C.minCacheSideLimit=256,C.charWidthsCache={},C.textureSize=2048,C.disableStyleCopyPaste=!1,C.enableGLFiltering=!0,C.devicePixelRatio=C.window.devicePixelRatio||C.window.webkitDevicePixelRatio||C.window.mozDevicePixelRatio||1,C.browserShadowBlurConstant=1,C.arcToSegmentsCache={},C.boundsOfCurveCache={},C.cachesBoundsOfCurve=!0,C.forceGLPutImageData=!1,C.initFilterBackend=function(){return C.enableGLFiltering&&C.isWebglSupported&&C.isWebglSupported(C.textureSize)?(console.log("max texture size: "+C.maxTextureSize),new C.WebglFilterBackend({tileSize:C.textureSize})):C.Canvas2dFilterBackend?new C.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=C),function(){function e(e,t){if(this.__eventListeners[e]){var i=this.__eventListeners[e];t?i[i.indexOf(t)]=!1:C.util.array.fill(i,!1)}}function t(e,t){var i=function(){t.apply(this,arguments),this.off(e,i)}.bind(this);this.on(e,i)}C.Observable={fire:function(e,t){if(!this.__eventListeners)return this;var i=this.__eventListeners[e];if(!i)return this;for(var n=0,r=i.length;n<r;n++)i[n]&&i[n].call(this,t||{});return this.__eventListeners[e]=i.filter((function(e){return!1!==e})),this},on:function(e,t){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in e)this.on(i,e[i]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t);return this},once:function(e,i){if(1===arguments.length)for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this},off:function(t,i){if(!this.__eventListeners)return this;if(0===arguments.length)for(t in this.__eventListeners)e.call(this,t);else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in t)e.call(this,n,t[n]);else e.call(this,t,i);return this}}}(),C.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(e,t,i){var n=this._objects;return i?n[t]=e:n.splice(t,0,e),this._onObjectAdded&&this._onObjectAdded(e),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var e,t=this._objects,i=!1,n=0,r=arguments.length;n<r;n++)-1!==(e=t.indexOf(arguments[n]))&&(i=!0,t.splice(e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&i&&this.requestRenderAll(),this},forEachObject:function(e,t){for(var i=this.getObjects(),n=0,r=i.length;n<r;n++)e.call(t,i[n],n,i);return this},getObjects:function(e){return void 0===e?this._objects.concat():this._objects.filter((function(t){return t.type===e}))},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e,t){return this._objects.indexOf(e)>-1||!!t&&this._objects.some((function(t){return"function"==typeof t.contains&&t.contains(e,!0)}))},complexity:function(){return this._objects.reduce((function(e,t){return e+(t.complexity?t.complexity():0)}),0)}},C.CommonMethods={_setOptions:function(e){for(var t in e)this.set(t,e[t])},_initGradient:function(e,t){!e||!e.colorStops||e instanceof C.Gradient||this.set(t,new C.Gradient(e))},_initPattern:function(e,t,i){!e||!e.source||e instanceof C.Pattern?i&&i():this.set(t,new C.Pattern(e,i))},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){return"object"==typeof e?this._setObject(e):this._set(e,t),this},_set:function(e,t){this[e]=t},toggle:function(e){var t=this.get(e);return"boolean"==typeof t&&this.set(e,!t),this},get:function(e){return this[e]}},n=t,r=Math.sqrt,o=Math.atan2,a=Math.pow,s=Math.PI/180,l=Math.PI/2,C.util={cos:function(e){if(0===e)return 1;switch(e<0&&(e=-e),e/l){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(0===e)return 0;var t=1;switch(e<0&&(t=-1),e/l){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(e)},removeFromArray:function(e,t){var i=e.indexOf(t);return-1!==i&&e.splice(i,1),e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*s},radiansToDegrees:function(e){return e/s},rotatePoint:function(e,t,i){var n=new C.Point(e.x-t.x,e.y-t.y),r=C.util.rotateVector(n,i);return new C.Point(r.x,r.y).addEquals(t)},rotateVector:function(e,t){var i=C.util.sin(t),n=C.util.cos(t);return{x:e.x*n-e.y*i,y:e.x*i+e.y*n}},createVector:function(e,t){return new C.Point(t.x-e.x,t.y-e.y)},calcAngleBetweenVectors:function(e,t){return Math.acos((e.x*t.x+e.y*t.y)/(Math.hypot(e.x,e.y)*Math.hypot(t.x,t.y)))},getHatVector:function(e){return new C.Point(e.x,e.y).multiply(1/Math.hypot(e.x,e.y))},getBisector:function(e,t,i){var n=C.util.createVector(e,t),r=C.util.createVector(e,i),o=C.util.calcAngleBetweenVectors(n,r),a=o*(0===C.util.calcAngleBetweenVectors(C.util.rotateVector(n,o),r)?1:-1)/2;return{vector:C.util.getHatVector(C.util.rotateVector(n,a)),angle:o}},projectStrokeOnPoints:function(e,t,i){var n=[],r=t.strokeWidth/2,o=t.strokeUniform?new C.Point(1/t.scaleX,1/t.scaleY):new C.Point(1,1),a=function(e){var t=r/Math.hypot(e.x,e.y);return new C.Point(e.x*t*o.x,e.y*t*o.y)};return e.length<=1||e.forEach((function(s,l){var c,h,u=new C.Point(s.x,s.y);0===l?(h=e[l+1],c=i?a(C.util.createVector(h,u)).addEquals(u):e[e.length-1]):l===e.length-1?(c=e[l-1],h=i?a(C.util.createVector(c,u)).addEquals(u):e[0]):(c=e[l-1],h=e[l+1]);var d,f,p=C.util.getBisector(u,c,h),g=p.vector,m=p.angle;if("miter"===t.strokeLineJoin&&(d=-r/Math.sin(m/2),f=new C.Point(g.x*d*o.x,g.y*d*o.y),Math.hypot(f.x,f.y)/r<=t.strokeMiterLimit))return n.push(u.add(f)),void n.push(u.subtract(f));d=-r*Math.SQRT2,f=new C.Point(g.x*d*o.x,g.y*d*o.y),n.push(u.add(f)),n.push(u.subtract(f))})),n},transformPoint:function(e,t,i){return i?new C.Point(t[0]*e.x+t[2]*e.y,t[1]*e.x+t[3]*e.y):new C.Point(t[0]*e.x+t[2]*e.y+t[4],t[1]*e.x+t[3]*e.y+t[5])},makeBoundingBoxFromPoints:function(e,t){if(t)for(var i=0;i<e.length;i++)e[i]=C.util.transformPoint(e[i],t);var n=[e[0].x,e[1].x,e[2].x,e[3].x],r=C.util.array.min(n),o=C.util.array.max(n)-r,a=[e[0].y,e[1].y,e[2].y,e[3].y],s=C.util.array.min(a);return{left:r,top:s,width:o,height:C.util.array.max(a)-s}},invertTransform:function(e){var t=1/(e[0]*e[3]-e[1]*e[2]),i=[t*e[3],-t*e[1],-t*e[2],t*e[0]],n=C.util.transformPoint({x:e[4],y:e[5]},i,!0);return i[4]=-n.x,i[5]=-n.y,i},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e,t){var i=/\D{0,2}$/.exec(e),n=parseFloat(e);switch(t||(t=C.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return n*C.DPI/25.4;case"cm":return n*C.DPI/2.54;case"in":return n*C.DPI;case"pt":return n*C.DPI/72;case"pc":return n*C.DPI/72*12;case"em":return n*t;default:return n}},falseFunction:function(){return!1},getKlass:function(e,t){return e=C.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),C.util.resolveNamespace(t)[e]},getSvgAttributes:function(e){var t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":t=t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":t=t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":t=t.concat(["offset","stop-color","stop-opacity"])}return t},resolveNamespace:function(e){if(!e)return C;var t,i=e.split("."),r=i.length,o=n||C.window;for(t=0;t<r;++t)o=o[i[t]];return o},loadImage:function(e,t,i,n){if(e){var r=C.util.createImage(),o=function(){t&&t.call(i,r,!1),r=r.onload=r.onerror=null};r.onload=o,r.onerror=function(){C.log("Error loading "+r.src),t&&t.call(i,null,!0),r=r.onload=r.onerror=null},0!==e.indexOf("data")&&null!=n&&(r.crossOrigin=n),"data:image/svg"===e.substring(0,14)&&(r.onload=null,C.util.loadImageInDom(r,o)),r.src=e}else t&&t.call(i,e)},loadImageInDom:function(e,t){var i=C.document.createElement("div");i.style.width=i.style.height="1px",i.style.left=i.style.top="-100%",i.style.position="absolute",i.appendChild(e),C.document.querySelector("body").appendChild(i),e.onload=function(){t(),i.parentNode.removeChild(i),i=null}},enlivenObjects:function(e,t,i,n){var r=[],o=0,a=(e=e||[]).length;function s(){++o===a&&t&&t(r.filter((function(e){return e})))}a?e.forEach((function(e,t){e&&e.type?C.util.getKlass(e.type,i).fromObject(e,(function(i,o){o||(r[t]=i),n&&n(e,i,o),s()})):s()})):t&&t(r)},enlivenObjectEnlivables:function(e,t,i){var n=C.Object.ENLIVEN_PROPS.filter((function(t){return!!e[t]}));C.util.enlivenObjects(n.map((function(t){return e[t]})),(function(e){var r={};n.forEach((function(i,n){r[i]=e[n],t&&(t[i]=e[n])})),i&&i(r)}))},enlivenPatterns:function(e,t){function i(){++r===o&&t&&t(n)}var n=[],r=0,o=(e=e||[]).length;o?e.forEach((function(e,t){e&&e.source?new C.Pattern(e,(function(e){n[t]=e,i()})):(n[t]=e,i())})):t&&t(n)},groupSVGElements:function(e,t,i){var n;return e&&1===e.length?e[0]:(t&&(t.width&&t.height?t.centerPoint={x:t.width/2,y:t.height/2}:(delete t.width,delete t.height)),n=new C.Group(e,t),void 0!==i&&(n.sourcePath=i),n)},populateWithProperties:function(e,t,i){if(i&&Array.isArray(i))for(var n=0,r=i.length;n<r;n++)i[n]in e&&(t[i[n]]=e[i[n]])},createCanvasElement:function(){return C.document.createElement("canvas")},copyCanvasElement:function(e){var t=C.util.createCanvasElement();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},toDataURL:function(e,t,i){return e.toDataURL("image/"+t,i)},createImage:function(){return C.document.createElement("img")},multiplyTransformMatrices:function(e,t,i){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],i?0:e[0]*t[4]+e[2]*t[5]+e[4],i?0:e[1]*t[4]+e[3]*t[5]+e[5]]},qrDecompose:function(e){var t=o(e[1],e[0]),i=a(e[0],2)+a(e[1],2),n=r(i),l=(e[0]*e[3]-e[2]*e[1])/n,c=o(e[0]*e[2]+e[1]*e[3],i);return{angle:t/s,scaleX:n,scaleY:l,skewX:c/s,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return C.iMatrix.concat();var t=C.util.degreesToRadians(e.angle),i=C.util.cos(t),n=C.util.sin(t);return[i,n,-n,i,0,0]},calcDimensionsMatrix:function(e){var t=void 0===e.scaleX?1:e.scaleX,i=void 0===e.scaleY?1:e.scaleY,n=[e.flipX?-t:t,0,0,e.flipY?-i:i,0,0],r=C.util.multiplyTransformMatrices,o=C.util.degreesToRadians;return e.skewX&&(n=r(n,[1,0,Math.tan(o(e.skewX)),1],!0)),e.skewY&&(n=r(n,[1,Math.tan(o(e.skewY)),0,1],!0)),n},composeMatrix:function(e){var t=[1,0,0,1,e.translateX||0,e.translateY||0],i=C.util.multiplyTransformMatrices;return e.angle&&(t=i(t,C.util.calcRotateMatrix(e))),(1!==e.scaleX||1!==e.scaleY||e.skewX||e.skewY||e.flipX||e.flipY)&&(t=i(t,C.util.calcDimensionsMatrix(e))),t},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,t,i,n){n>0&&(t>n?t-=n:t=0,i>n?i-=n:i=0);var r,o=!0,a=e.getImageData(t,i,2*n||1,2*n||1),s=a.data.length;for(r=3;r<s&&0!=(o=a.data[r]<=0);r+=4);return a=null,o},parsePreserveAspectRatioAttribute:function(e){var t,i="meet",n=e.split(" ");return n&&n.length&&("meet"!==(i=n.pop())&&"slice"!==i?(t=i,i="meet"):n.length&&(t=n.pop())),{meetOrSlice:i,alignX:"none"!==t?t.slice(1,4):"none",alignY:"none"!==t?t.slice(5,8):"none"}},clearFabricFontCache:function(e){(e=(e||"").toLowerCase())?C.charWidthsCache[e]&&delete C.charWidthsCache[e]:C.charWidthsCache={}},limitDimsByArea:function(e,t){var i=Math.sqrt(t*e),n=Math.floor(t/i);return{x:Math.floor(i),y:n}},capValue:function(e,t,i){return Math.max(e,Math.min(t,i))},findScaleToFit:function(e,t){return Math.min(t.width/e.width,t.height/e.height)},findScaleToCover:function(e,t){return Math.max(t.width/e.width,t.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map((function(e){return C.util.toFixed(e,C.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(e,t){var i=C.util.invertTransform(t),n=C.util.multiplyTransformMatrices(i,e.calcOwnMatrix());C.util.applyTransformToObject(e,n)},addTransformToObject:function(e,t){C.util.applyTransformToObject(e,C.util.multiplyTransformMatrices(t,e.calcOwnMatrix()))},applyTransformToObject:function(e,t){var i=C.util.qrDecompose(t),n=new C.Point(i.translateX,i.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",i.scaleX),e.set("scaleY",i.scaleY),e.skewX=i.skewX,e.skewY=i.skewY,e.angle=i.angle,e.setPositionByOrigin(n,"center","center")},sizeAfterTransform:function(e,t,i){var n=e/2,r=t/2,o=[{x:-n,y:-r},{x:n,y:-r},{x:-n,y:r},{x:n,y:r}],a=C.util.calcDimensionsMatrix(i),s=C.util.makeBoundingBoxFromPoints(o,a);return{x:s.width,y:s.height}},mergeClipPaths:function(e,t){var i=e,n=t;i.inverted&&!n.inverted&&(i=t,n=e),C.util.applyTransformToObject(n,C.util.multiplyTransformMatrices(C.util.invertTransform(i.calcTransformMatrix()),n.calcTransformMatrix()));var r=i.inverted&&n.inverted;return r&&(i.inverted=n.inverted=!1),new C.Group([i],{clipPath:n,inverted:r})}},function(){var e=Array.prototype.join,t={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i={m:"l",M:"L"};function n(e,t,i,n,r,o,a,s,l,c,h){var u=C.util.cos(e),d=C.util.sin(e),f=C.util.cos(t),p=C.util.sin(t),g=i*r*f-n*o*p+a,m=n*r*f+i*o*p+s;return["C",c+l*(-i*r*d-n*o*u),h+l*(-n*r*d+i*o*u),g+l*(i*r*p+n*o*f),m+l*(n*r*p-i*o*f),g,m]}function r(e,t,i,n){var r=Math.atan2(t,e),o=Math.atan2(n,i);return o>=r?o-r:2*Math.PI-(r-o)}function o(e,t,i){for(var o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],h=function(e,t,i,o,a,s,l){var c=Math.PI,h=l*c/180,u=C.util.sin(h),d=C.util.cos(h),f=0,p=0,g=-d*e*.5-u*t*.5,m=-d*t*.5+u*e*.5,v=(i=Math.abs(i))*i,_=(o=Math.abs(o))*o,b=m*m,y=g*g,w=v*_-v*b-_*y,x=0;if(w<0){var S=Math.sqrt(1-w/(v*_));i*=S,o*=S}else x=(a===s?-1:1)*Math.sqrt(w/(v*b+_*y));var T=x*i*m/o,E=-x*o*g/i,I=d*T-u*E+.5*e,k=u*T+d*E+.5*t,O=r(1,0,(g-T)/i,(m-E)/o),R=r((g-T)/i,(m-E)/o,(-g-T)/i,(-m-E)/o);0===s&&R>0?R-=2*c:1===s&&R<0&&(R+=2*c);for(var A=Math.ceil(Math.abs(R/c*2)),D=[],L=R/A,M=8/3*Math.sin(L/4)*Math.sin(L/4)/Math.sin(L/2),P=O+L,F=0;F<A;F++)D[F]=n(O,P,d,u,i,o,I,k,M,f,p),f=D[F][5],p=D[F][6],O=P,P+=L;return D}(i[6]-e,i[7]-t,o,a,l,c,s),u=0,d=h.length;u<d;u++)h[u][1]+=e,h[u][2]+=t,h[u][3]+=e,h[u][4]+=t,h[u][5]+=e,h[u][6]+=t;return h}function a(e,t,i,n){return Math.sqrt((i-e)*(i-e)+(n-t)*(n-t))}function s(e,t,i,n,r,o,a,s){return function(l){var c,h=(c=l)*c*c,u=function(e){return 3*e*e*(1-e)}(l),d=function(e){return 3*e*(1-e)*(1-e)}(l),f=function(e){return(1-e)*(1-e)*(1-e)}(l);return{x:a*h+r*u+i*d+e*f,y:s*h+o*u+n*d+t*f}}}function l(e,t,i,n,r,o,a,s){return function(l){var c=1-l,h=3*c*c*(i-e)+6*c*l*(r-i)+3*l*l*(a-r),u=3*c*c*(n-t)+6*c*l*(o-n)+3*l*l*(s-o);return Math.atan2(u,h)}}function c(e,t,i,n,r,o){return function(a){var s,l=(s=a)*s,c=function(e){return 2*e*(1-e)}(a),h=function(e){return(1-e)*(1-e)}(a);return{x:r*l+i*c+e*h,y:o*l+n*c+t*h}}}function h(e,t,i,n,r,o){return function(a){var s=1-a,l=2*s*(i-e)+2*a*(r-i),c=2*s*(n-t)+2*a*(o-n);return Math.atan2(c,l)}}function u(e,t,i){var n,r,o={x:t,y:i},s=0;for(r=1;r<=100;r+=1)n=e(r/100),s+=a(o.x,o.y,n.x,n.y),o=n;return s}function d(e){for(var t,i,n,r,o=0,d=e.length,f=0,p=0,g=0,m=0,v=[],_=0;_<d;_++){switch(n={x:f,y:p,command:(t=e[_])[0]},t[0]){case"M":n.length=0,g=f=t[1],m=p=t[2];break;case"L":n.length=a(f,p,t[1],t[2]),f=t[1],p=t[2];break;case"C":i=s(f,p,t[1],t[2],t[3],t[4],t[5],t[6]),r=l(f,p,t[1],t[2],t[3],t[4],t[5],t[6]),n.iterator=i,n.angleFinder=r,n.length=u(i,f,p),f=t[5],p=t[6];break;case"Q":i=c(f,p,t[1],t[2],t[3],t[4]),r=h(f,p,t[1],t[2],t[3],t[4]),n.iterator=i,n.angleFinder=r,n.length=u(i,f,p),f=t[3],p=t[4];break;case"Z":case"z":n.destX=g,n.destY=m,n.length=a(f,p,g,m),f=g,p=m}o+=n.length,v.push(n)}return v.push({length:o,x:f,y:p}),v}C.util.joinPath=function(e){return e.map((function(e){return e.join(" ")})).join(" ")},C.util.parsePath=function(e){var n,r,o,a,s,l=[],c=[],h=C.rePathCommand,u="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",d="("+u+")"+C.commaWsp,f="([01])"+C.commaWsp+"?",p=new RegExp(d+"?"+d+"?"+d+f+f+d+"?("+u+")","g");if(!e||!e.match)return l;for(var g,m=0,v=(s=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;m<v;m++){a=(n=s[m]).slice(1).trim(),c.length=0;var _=n.charAt(0);if(g=[_],"a"===_.toLowerCase())for(var b;b=p.exec(a);)for(var y=1;y<b.length;y++)c.push(b[y]);else for(;o=h.exec(a);)c.push(o[0]);y=0;for(var w=c.length;y<w;y++)r=parseFloat(c[y]),isNaN(r)||g.push(r);var x=t[_.toLowerCase()],S=i[_]||_;if(g.length-1>x)for(var T=1,E=g.length;T<E;T+=x)l.push([_].concat(g.slice(T,T+x))),_=S;else l.push(g)}return l},C.util.makePathSimpler=function(e){var t,i,n,r,a,s,l=0,c=0,h=e.length,u=0,d=0,f=[];for(i=0;i<h;++i){switch(n=!1,(t=e[i].slice(0))[0]){case"l":t[0]="L",t[1]+=l,t[2]+=c;case"L":l=t[1],c=t[2];break;case"h":t[1]+=l;case"H":t[0]="L",t[2]=c,l=t[1];break;case"v":t[1]+=c;case"V":t[0]="L",c=t[1],t[1]=l,t[2]=c;break;case"m":t[0]="M",t[1]+=l,t[2]+=c;case"M":l=t[1],c=t[2],u=t[1],d=t[2];break;case"c":t[0]="C",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c,t[5]+=l,t[6]+=c;case"C":a=t[3],s=t[4],l=t[5],c=t[6];break;case"s":t[0]="S",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c;case"S":"C"===r?(a=2*l-a,s=2*c-s):(a=l,s=c),l=t[3],c=t[4],t[0]="C",t[5]=t[3],t[6]=t[4],t[3]=t[1],t[4]=t[2],t[1]=a,t[2]=s,a=t[3],s=t[4];break;case"q":t[0]="Q",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c;case"Q":a=t[1],s=t[2],l=t[3],c=t[4];break;case"t":t[0]="T",t[1]+=l,t[2]+=c;case"T":"Q"===r?(a=2*l-a,s=2*c-s):(a=l,s=c),t[0]="Q",l=t[1],c=t[2],t[1]=a,t[2]=s,t[3]=l,t[4]=c;break;case"a":t[0]="A",t[6]+=l,t[7]+=c;case"A":n=!0,f=f.concat(o(l,c,t)),l=t[6],c=t[7];break;case"z":case"Z":l=u,c=d}n||f.push(t),r=t[0]}return f},C.util.getSmoothPathFromPoints=function(e,t){var i,n=[],r=new C.Point(e[0].x,e[0].y),o=new C.Point(e[1].x,e[1].y),a=e.length,s=1,l=0,c=a>2;for(t=t||0,c&&(s=e[2].x<o.x?-1:e[2].x===o.x?0:1,l=e[2].y<o.y?-1:e[2].y===o.y?0:1),n.push(["M",r.x-s*t,r.y-l*t]),i=1;i<a;i++){if(!r.eq(o)){var h=r.midPointFrom(o);n.push(["Q",r.x,r.y,h.x,h.y])}r=e[i],i+1<e.length&&(o=e[i+1])}return c&&(s=r.x>e[i-2].x?1:r.x===e[i-2].x?0:-1,l=r.y>e[i-2].y?1:r.y===e[i-2].y?0:-1),n.push(["L",r.x+s*t,r.y+l*t]),n},C.util.getPathSegmentsInfo=d,C.util.getBoundsOfCurve=function(t,i,n,r,o,a,s,l){var c;if(C.cachesBoundsOfCurve&&(c=e.call(arguments),C.boundsOfCurveCache[c]))return C.boundsOfCurveCache[c];var h,u,d,f,p,g,m,v,_=Math.sqrt,b=Math.min,y=Math.max,w=Math.abs,x=[],S=[[],[]];u=6*t-12*n+6*o,h=-3*t+9*n-9*o+3*s,d=3*n-3*t;for(var T=0;T<2;++T)if(T>0&&(u=6*i-12*r+6*a,h=-3*i+9*r-9*a+3*l,d=3*r-3*i),w(h)<1e-12){if(w(u)<1e-12)continue;0<(f=-d/u)&&f<1&&x.push(f)}else(m=u*u-4*d*h)<0||(0<(p=(-u+(v=_(m)))/(2*h))&&p<1&&x.push(p),0<(g=(-u-v)/(2*h))&&g<1&&x.push(g));for(var E,I,k,O=x.length,R=O;O--;)E=(k=1-(f=x[O]))*k*k*t+3*k*k*f*n+3*k*f*f*o+f*f*f*s,S[0][O]=E,I=k*k*k*i+3*k*k*f*r+3*k*f*f*a+f*f*f*l,S[1][O]=I;S[0][R]=t,S[1][R]=i,S[0][R+1]=s,S[1][R+1]=l;var A=[{x:b.apply(null,S[0]),y:b.apply(null,S[1])},{x:y.apply(null,S[0]),y:y.apply(null,S[1])}];return C.cachesBoundsOfCurve&&(C.boundsOfCurveCache[c]=A),A},C.util.getPointOnPath=function(e,t,i){i||(i=d(e));for(var n=0;t-i[n].length>0&&n<i.length-2;)t-=i[n].length,n++;var r,o=i[n],s=t/o.length,l=o.command,c=e[n];switch(l){case"M":return{x:o.x,y:o.y,angle:0};case"Z":case"z":return(r=new C.Point(o.x,o.y).lerp(new C.Point(o.destX,o.destY),s)).angle=Math.atan2(o.destY-o.y,o.destX-o.x),r;case"L":return(r=new C.Point(o.x,o.y).lerp(new C.Point(c[1],c[2]),s)).angle=Math.atan2(c[2]-o.y,c[1]-o.x),r;case"C":case"Q":return function(e,t){for(var i,n,r,o=0,s=0,l=e.iterator,c={x:e.x,y:e.y},h=.01,u=e.angleFinder;s<t&&h>1e-4;)i=l(o),r=o,(n=a(c.x,c.y,i.x,i.y))+s>t?(o-=h,h/=2):(c=i,o+=h,s+=n);return i.angle=u(r),i}(o,t)}},C.util.transformPath=function(e,t,i){return i&&(t=C.util.multiplyTransformMatrices(t,[1,0,0,1,-i.x,-i.y])),e.map((function(e){for(var i=e.slice(0),n={},r=1;r<e.length-1;r+=2)n.x=e[r],n.y=e[r+1],n=C.util.transformPoint(n,t),i[r]=n.x,i[r+1]=n.y;return i}))}}(),function(){var e=Array.prototype.slice;function t(e,t,i){if(e&&0!==e.length){var n=e.length-1,r=t?e[n][t]:e[n];if(t)for(;n--;)i(e[n][t],r)&&(r=e[n][t]);else for(;n--;)i(e[n],r)&&(r=e[n]);return r}}C.util.array={fill:function(e,t){for(var i=e.length;i--;)e[i]=t;return e},invoke:function(t,i){for(var n=e.call(arguments,2),r=[],o=0,a=t.length;o<a;o++)r[o]=n.length?t[o][i].apply(t[o],n):t[o][i].call(t[o]);return r},min:function(e,i){return t(e,i,(function(e,t){return e<t}))},max:function(e,i){return t(e,i,(function(e,t){return e>=t}))}}}(),function(){function e(t,i,n){if(n)if(!C.isLikelyNode&&i instanceof Element)t=i;else if(i instanceof Array){t=[];for(var r=0,o=i.length;r<o;r++)t[r]=e({},i[r],n)}else if(i&&"object"==typeof i)for(var a in i)"canvas"===a||"group"===a?t[a]=null:i.hasOwnProperty(a)&&(t[a]=e({},i[a],n));else t=i;else for(var a in i)t[a]=i[a];return t}C.util.object={extend:e,clone:function(t,i){return e({},t,i)}},C.util.object.extend(C.util,C.Observable)}(),function(){function e(e,t){var i=e.charCodeAt(t);if(isNaN(i))return"";if(i<55296||i>57343)return e.charAt(t);if(55296<=i&&i<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";var n=e.charCodeAt(t+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";var r=e.charCodeAt(t-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}C.util.string={camelize:function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(t){var i,n=0,r=[];for(n=0;n<t.length;n++)!1!==(i=e(t,n))&&r.push(i);return r}}}(),function(){var e=Array.prototype.slice,t=function(){},i=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),n=function(e,t,n){for(var r in t)r in e.prototype&&"function"==typeof e.prototype[r]&&(t[r]+"").indexOf("callSuper")>-1?e.prototype[r]=function(e){return function(){var i=this.constructor.superclass;this.constructor.superclass=n;var r=t[e].apply(this,arguments);if(this.constructor.superclass=i,"initialize"!==e)return r}}(r):e.prototype[r]=t[r],i&&(t.toString!==Object.prototype.toString&&(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=t.valueOf))};function r(){}function o(t){for(var i=null,n=this;n.constructor.superclass;){var r=n.constructor.superclass.prototype[t];if(n[t]!==r){i=r;break}n=n.constructor.superclass.prototype}return i?arguments.length>1?i.apply(this,e.call(arguments,1)):i.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}C.util.createClass=function(){var i=null,a=e.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"==typeof a[0]&&(i=a.shift()),s.superclass=i,s.subclasses=[],i&&(r.prototype=i.prototype,s.prototype=new r,i.subclasses.push(s));for(var l=0,c=a.length;l<c;l++)n(s,a[l],i);return s.prototype.initialize||(s.prototype.initialize=t),s.prototype.constructor=s,s.prototype.callSuper=o,s}}(),c=!!C.document.createElement("div").attachEvent,h=["touchstart","touchmove","touchend"],C.util.addListener=function(e,t,i,n){e&&e.addEventListener(t,i,!c&&n)},C.util.removeListener=function(e,t,i,n){e&&e.removeEventListener(t,i,!c&&n)},C.util.getPointer=function(e){var t=e.target,i=C.util.getScrollLeftTop(t),n=function(e){var t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return{x:n.clientX+i.left,y:n.clientY+i.top}},C.util.isTouchEvent=function(e){return h.indexOf(e.type)>-1||"touch"===e.pointerType},d="string"==typeof(u=C.document.createElement("div")).style.opacity,f="string"==typeof u.style.filter,p=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,g=function(e){return e},d?g=function(e,t){return e.style.opacity=t,e}:f&&(g=function(e,t){var i=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(i.zoom=1),p.test(i.filter)?(t=t>=.9999?"":"alpha(opacity="+100*t+")",i.filter=i.filter.replace(p,t)):i.filter+=" alpha(opacity="+100*t+")",e}),C.util.setStyle=function(e,t){var i=e.style;if(!i)return e;if("string"==typeof t)return e.style.cssText+=";"+t,t.indexOf("opacity")>-1?g(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var n in t)"opacity"===n?g(e,t[n]):i["float"===n||"cssFloat"===n?void 0===i.styleFloat?"cssFloat":"styleFloat":n]=t[n];return e},function(){var e,t,i,n,r=Array.prototype.slice,o=function(e){return r.call(e,0)};try{e=o(C.document.childNodes)instanceof Array}catch(e){}function a(e,t){var i=C.document.createElement(e);for(var n in t)"class"===n?i.className=t[n]:"for"===n?i.htmlFor=t[n]:i.setAttribute(n,t[n]);return i}function s(e){for(var t=0,i=0,n=C.document.documentElement,r=C.document.body||{scrollLeft:0,scrollTop:0};e&&(e.parentNode||e.host)&&((e=e.parentNode||e.host)===C.document?(t=r.scrollLeft||n.scrollLeft||0,i=r.scrollTop||n.scrollTop||0):(t+=e.scrollLeft||0,i+=e.scrollTop||0),1!==e.nodeType||"fixed"!==e.style.position););return{left:t,top:i}}e||(o=function(e){for(var t=new Array(e.length),i=e.length;i--;)t[i]=e[i];return t}),t=C.document.defaultView&&C.document.defaultView.getComputedStyle?function(e,t){var i=C.document.defaultView.getComputedStyle(e,null);return i?i[t]:void 0}:function(e,t){var i=e.style[t];return!i&&e.currentStyle&&(i=e.currentStyle[t]),i},i=C.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"",C.util.makeElementUnselectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=C.util.falseFunction),n?e.style[n]="none":"string"==typeof e.unselectable&&(e.unselectable="on"),e},C.util.makeElementSelectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=null),n?e.style[n]="":"string"==typeof e.unselectable&&(e.unselectable=""),e},C.util.setImageSmoothing=function(e,t){e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled,e.imageSmoothingEnabled=t},C.util.getById=function(e){return"string"==typeof e?C.document.getElementById(e):e},C.util.toArray=o,C.util.addClass=function(e,t){e&&-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=(e.className?" ":"")+t)},C.util.makeElement=a,C.util.wrapElement=function(e,t,i){return"string"==typeof t&&(t=a(t,i)),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},C.util.getScrollLeftTop=s,C.util.getElementOffset=function(e){var i,n,r=e&&e.ownerDocument,o={left:0,top:0},a={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return a;for(var c in l)a[l[c]]+=parseInt(t(e,c),10)||0;return i=r.documentElement,void 0!==e.getBoundingClientRect&&(o=e.getBoundingClientRect()),n=s(e),{left:o.left+n.left-(i.clientLeft||0)+a.left,top:o.top+n.top-(i.clientTop||0)+a.top}},C.util.getNodeCanvas=function(e){var t=C.jsdomImplForWrapper(e);return t._canvas||t._image},C.util.cleanUpJsdomNode=function(e){if(C.isLikelyNode){var t=C.jsdomImplForWrapper(e);t&&(t._image=null,t._canvas=null,t._currentSrc=null,t._attributes=null,t._classList=null)}}}(),function(){function e(){}C.util.request=function(t,i){i||(i={});var n=i.method?i.method.toUpperCase():"GET",r=i.onComplete||function(){},o=new C.window.XMLHttpRequest,a=i.body||i.parameters;return o.onreadystatechange=function(){4===o.readyState&&(r(o),o.onreadystatechange=e)},"GET"===n&&(a=null,"string"==typeof i.parameters&&(t=function(e,t){return e+(/\?/.test(e)?"&":"?")+t}(t,i.parameters))),o.open(n,t,!0),"POST"!==n&&"PUT"!==n||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(a),o}}(),C.log=console.log,C.warn=console.warn,function(){var e=C.util.object.extend,t=C.util.object.clone,i=[];function n(){return!1}function r(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t}C.util.object.extend(i,{cancelAll:function(){var e=this.splice(0);return e.forEach((function(e){e.cancel()})),e},cancelByCanvas:function(e){if(!e)return[];var t=this.filter((function(t){return"object"==typeof t.target&&t.target.canvas===e}));return t.forEach((function(e){e.cancel()})),t},cancelByTarget:function(e){var t=this.findAnimationsByTarget(e);return t.forEach((function(e){e.cancel()})),t},findAnimationIndex:function(e){return this.indexOf(this.findAnimation(e))},findAnimation:function(e){return this.find((function(t){return t.cancel===e}))},findAnimationsByTarget:function(e){return e?this.filter((function(t){return t.target===e})):[]}});var o=C.window.requestAnimationFrame||C.window.webkitRequestAnimationFrame||C.window.mozRequestAnimationFrame||C.window.oRequestAnimationFrame||C.window.msRequestAnimationFrame||function(e){return C.window.setTimeout(e,1e3/60)},a=C.window.cancelAnimationFrame||C.window.clearTimeout;function s(){return o.apply(C.window,arguments)}C.util.animate=function(i){i||(i={});var o,a=!1,l=function(){var e=C.runningAnimations.indexOf(o);return e>-1&&C.runningAnimations.splice(e,1)[0]};return o=e(t(i),{cancel:function(){return a=!0,l()},currentValue:"startValue"in i?i.startValue:0,completionRate:0,durationRate:0}),C.runningAnimations.push(o),s((function(e){var t,c=e||+new Date,h=i.duration||500,u=c+h,d=i.onChange||n,f=i.abort||n,p=i.onComplete||n,g=i.easing||r,m="startValue"in i&&i.startValue.length>0,v="startValue"in i?i.startValue:0,_="endValue"in i?i.endValue:100,b=i.byValue||(m?v.map((function(e,t){return _[t]-v[t]})):_-v);i.onStart&&i.onStart(),function e(i){var n=(t=i||+new Date)>u?h:t-c,r=n/h,y=m?v.map((function(e,t){return g(n,v[t],b[t],h)})):g(n,v,b,h),w=m?Math.abs((y[0]-v[0])/b[0]):Math.abs((y-v)/b);if(o.currentValue=m?y.slice():y,o.completionRate=w,o.durationRate=r,!a){if(!f(y,w,r))return t>u?(o.currentValue=m?_.slice():_,o.completionRate=1,o.durationRate=1,d(m?_.slice():_,1,1),p(_,1,1),void l()):(d(y,w,r),void s(e));l()}}(c)})),o.cancel},C.util.requestAnimFrame=s,C.util.cancelAnimFrame=function(){return a.apply(C.window,arguments)},C.runningAnimations=i}(),function(){function e(e,t,i){var n="rgba("+parseInt(e[0]+i*(t[0]-e[0]),10)+","+parseInt(e[1]+i*(t[1]-e[1]),10)+","+parseInt(e[2]+i*(t[2]-e[2]),10);return(n+=","+(e&&t?parseFloat(e[3]+i*(t[3]-e[3])):1))+")"}C.util.animateColor=function(t,i,n,r){var o=new C.Color(t).getSource(),a=new C.Color(i).getSource(),s=r.onComplete,l=r.onChange;return r=r||{},C.util.animate(C.util.object.extend(r,{duration:n||500,startValue:o,endValue:a,byValue:a,easing:function(t,i,n,o){return e(i,n,r.colorEasing?r.colorEasing(t,o):1-Math.cos(t/o*(Math.PI/2)))},onComplete:function(t,i,n){if(s)return s(e(a,a,0),i,n)},onChange:function(t,i,n){if(l){if(Array.isArray(t))return l(e(t,t,0),i,n);l(t,i,n)}}}))}}(),function(){function e(e,t,i,n){return e<Math.abs(t)?(e=t,n=i/4):n=0===t&&0===e?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(t/e),{a:e,c:t,p:i,s:n}}function t(e,t,i){return e.a*Math.pow(2,10*(t-=1))*Math.sin((t*i-e.s)*(2*Math.PI)/e.p)}function i(e,t,i,r){return i-n(r-e,0,i,r)+t}function n(e,t,i,n){return(e/=n)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t}C.util.ease={easeInQuad:function(e,t,i,n){return i*(e/=n)*e+t},easeOutQuad:function(e,t,i,n){return-i*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,i,n){return i*(e/=n)*e*e+t},easeOutCubic:function(e,t,i,n){return i*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,i,n){return i*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,i,n){return-i*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,i,n){return i*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,i,n){return i*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},easeOutSine:function(e,t,i,n){return i*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,i,n){return-i/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,i,n){return 0===e?t:i*Math.pow(2,10*(e/n-1))+t},easeOutExpo:function(e,t,i,n){return e===n?t+i:i*(1-Math.pow(2,-10*e/n))+t},easeInOutExpo:function(e,t,i,n){return 0===e?t:e===n?t+i:(e/=n/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,i,n){return-i*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,i,n){return i*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,i,n){return(e/=n/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(i,n,r,o){var a=0;return 0===i?n:1==(i/=o)?n+r:(a||(a=.3*o),-t(e(r,r,a,1.70158),i,o)+n)},easeOutElastic:function(t,i,n,r){var o=0;if(0===t)return i;if(1==(t/=r))return i+n;o||(o=.3*r);var a=e(n,n,o,1.70158);return a.a*Math.pow(2,-10*t)*Math.sin((t*r-a.s)*(2*Math.PI)/a.p)+a.c+i},easeInOutElastic:function(i,n,r,o){var a=0;if(0===i)return n;if(2==(i/=o/2))return n+r;a||(a=o*(.3*1.5));var s=e(r,r,a,1.70158);return i<1?-.5*t(s,i,o)+n:s.a*Math.pow(2,-10*(i-=1))*Math.sin((i*o-s.s)*(2*Math.PI)/s.p)*.5+s.c+n},easeInBack:function(e,t,i,n,r){return void 0===r&&(r=1.70158),i*(e/=n)*e*((r+1)*e-r)+t},easeOutBack:function(e,t,i,n,r){return void 0===r&&(r=1.70158),i*((e=e/n-1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(e,t,i,n,r){return void 0===r&&(r=1.70158),(e/=n/2)<1?i/2*(e*e*((1+(r*=1.525))*e-r))+t:i/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},easeInBounce:i,easeOutBounce:n,easeInOutBounce:function(e,t,r,o){return e<o/2?.5*i(2*e,0,r,o)+t:.5*n(2*e-o,0,r,o)+.5*r+t}}}(),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.util.object.clone,r=t.util.toFixed,o=t.util.parseUnit,a=t.util.multiplyTransformMatrices,s={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},l={stroke:"strokeOpacity",fill:"fillOpacity"},c="font-size",h="clip-path";function u(e){return e in s?s[e]:e}function d(e,i,n,r){var s,l=Array.isArray(i);if("fill"!==e&&"stroke"!==e||"none"!==i){if("strokeUniform"===e)return"non-scaling-stroke"===i;if("strokeDashArray"===e)i="none"===i?null:i.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)i=n&&n.transformMatrix?a(n.transformMatrix,t.parseTransformAttribute(i)):t.parseTransformAttribute(i);else if("visible"===e)i="none"!==i&&"hidden"!==i,n&&!1===n.visible&&(i=!1);else if("opacity"===e)i=parseFloat(i),n&&void 0!==n.opacity&&(i*=n.opacity);else if("textAnchor"===e)i="start"===i?"left":"end"===i?"right":"center";else if("charSpacing"===e)s=o(i,r)/r*1e3;else if("paintFirst"===e){var c=i.indexOf("fill"),h=i.indexOf("stroke");i="fill",(c>-1&&h>-1&&h<c||-1===c&&h>-1)&&(i="stroke")}else{if("href"===e||"xlink:href"===e||"font"===e)return i;if("imageSmoothing"===e)return"optimizeQuality"===i;s=l?i.map(o):o(i,r)}}else i="";return!l&&isNaN(s)?i:s}function f(e){return new RegExp("^("+e.join("|")+")\\b","i")}function p(e,t){var i,n,r,o,a=[];for(r=0,o=t.length;r<o;r++)i=t[r],n=e.getElementsByTagName(i),a=a.concat(Array.prototype.slice.call(n));return a}function g(e,t){var i,n=!0;return(i=m(e,t.pop()))&&t.length&&(n=function(e,t){for(var i,n=!0;e.parentNode&&1===e.parentNode.nodeType&&t.length;)n&&(i=t.pop()),n=m(e=e.parentNode,i);return 0===t.length}(e,t)),i&&n&&0===t.length}function m(e,t){var i,n,r=e.nodeName,o=e.getAttribute("class"),a=e.getAttribute("id");if(i=new RegExp("^"+r,"i"),t=t.replace(i,""),a&&t.length&&(i=new RegExp("#"+a+"(?![a-zA-Z\\-]+)","i"),t=t.replace(i,"")),o&&t.length)for(n=(o=o.split(" ")).length;n--;)i=new RegExp("\\."+o[n]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(i,"");return 0===t.length}function v(e,t){var i;if(e.getElementById&&(i=e.getElementById(t)),i)return i;var n,r,o,a=e.getElementsByTagName("*");for(r=0,o=a.length;r<o;r++)if(t===(n=a[r]).getAttribute("id"))return n}t.svgValidTagNamesRegEx=f(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),t.svgViewBoxElementsRegEx=f(["symbol","image","marker","pattern","view","svg"]),t.svgInvalidAncestorsRegEx=f(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),t.svgValidParentsRegEx=f(["symbol","g","a","svg","clipPath","defs"]),t.cssRules={},t.gradientDefs={},t.clipPaths={},t.parseTransformAttribute=function(){function e(e,i,n){e[n]=Math.tan(t.util.degreesToRadians(i[0]))}var i=t.iMatrix,n=t.reNum,r=t.commaWsp,o="(?:(?:(matrix)\\s*\\(\\s*("+n+")"+r+"("+n+")"+r+"("+n+")"+r+"("+n+")"+r+"("+n+")"+r+"("+n+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+n+")(?:"+r+"("+n+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+n+")(?:"+r+"("+n+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+n+")(?:"+r+"("+n+")"+r+"("+n+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+n+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+n+")\\s*\\)))",a=new RegExp("^\\s*(?:(?:"+o+"(?:"+r+"*"+o+")*)?)\\s*$"),s=new RegExp(o,"g");return function(n){var r=i.concat(),l=[];if(!n||n&&!a.test(n))return r;n.replace(s,(function(n){var a=new RegExp(o).exec(n).filter((function(e){return!!e})),s=a[1],c=a.slice(2).map(parseFloat);switch(s){case"translate":!function(e,t){e[4]=t[0],2===t.length&&(e[5]=t[1])}(r,c);break;case"rotate":c[0]=t.util.degreesToRadians(c[0]),function(e,i){var n=t.util.cos(i[0]),r=t.util.sin(i[0]),o=0,a=0;3===i.length&&(o=i[1],a=i[2]),e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=o-(n*o-r*a),e[5]=a-(r*o+n*a)}(r,c);break;case"scale":!function(e,t){var i=t[0],n=2===t.length?t[1]:t[0];e[0]=i,e[3]=n}(r,c);break;case"skewX":e(r,c,2);break;case"skewY":e(r,c,1);break;case"matrix":r=c}l.push(r.concat()),r=i.concat()}));for(var c=l[0];l.length>1;)l.shift(),c=t.util.multiplyTransformMatrices(c,l[0]);return c}}();var _=new RegExp("^\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*$");function b(e){if(!t.svgViewBoxElementsRegEx.test(e.nodeName))return{};var i,n,r,a,s,l,c=e.getAttribute("viewBox"),h=1,u=1,d=e.getAttribute("width"),f=e.getAttribute("height"),p=e.getAttribute("x")||0,g=e.getAttribute("y")||0,m=e.getAttribute("preserveAspectRatio")||"",v=!c||!(c=c.match(_)),b=!d||!f||"100%"===d||"100%"===f,y=v&&b,w={},x="",S=0,C=0;if(w.width=0,w.height=0,w.toBeParsed=y,v&&(p||g)&&e.parentNode&&"#document"!==e.parentNode.nodeName&&(x=" translate("+o(p)+" "+o(g)+") ",s=(e.getAttribute("transform")||"")+x,e.setAttribute("transform",s),e.removeAttribute("x"),e.removeAttribute("y")),y)return w;if(v)return w.width=o(d),w.height=o(f),w;if(i=-parseFloat(c[1]),n=-parseFloat(c[2]),r=parseFloat(c[3]),a=parseFloat(c[4]),w.minX=i,w.minY=n,w.viewBoxWidth=r,w.viewBoxHeight=a,b?(w.width=r,w.height=a):(w.width=o(d),w.height=o(f),h=w.width/r,u=w.height/a),"none"!==(m=t.util.parsePreserveAspectRatioAttribute(m)).alignX&&("meet"===m.meetOrSlice&&(u=h=h>u?u:h),"slice"===m.meetOrSlice&&(u=h=h>u?h:u),S=w.width-r*h,C=w.height-a*h,"Mid"===m.alignX&&(S/=2),"Mid"===m.alignY&&(C/=2),"Min"===m.alignX&&(S=0),"Min"===m.alignY&&(C=0)),1===h&&1===u&&0===i&&0===n&&0===p&&0===g)return w;if((p||g)&&"#document"!==e.parentNode.nodeName&&(x=" translate("+o(p)+" "+o(g)+") "),s=x+" matrix("+h+" 0 0 "+u+" "+(i*h+S)+" "+(n*u+C)+") ","svg"===e.nodeName){for(l=e.ownerDocument.createElementNS(t.svgNS,"g");e.firstChild;)l.appendChild(e.firstChild);e.appendChild(l)}else(l=e).removeAttribute("x"),l.removeAttribute("y"),s=l.getAttribute("transform")+s;return l.setAttribute("transform",s),w}function y(e,t){var i="xlink:href",n=v(e,t.getAttribute(i).slice(1));if(n&&n.getAttribute(i)&&y(e,n),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach((function(e){n&&!t.hasAttribute(e)&&n.hasAttribute(e)&&t.setAttribute(e,n.getAttribute(e))})),!t.children.length)for(var r=n.cloneNode(!0);r.firstChild;)t.appendChild(r.firstChild);t.removeAttribute(i)}t.parseSVGDocument=function(e,i,r,o){if(e){!function(e){for(var i=p(e,["use","svg:use"]),n=0;i.length&&n<i.length;){var r=i[n],o=r.getAttribute("xlink:href")||r.getAttribute("href");if(null===o)return;var a,s,l,c,h=o.slice(1),u=r.getAttribute("x")||0,d=r.getAttribute("y")||0,f=v(e,h).cloneNode(!0),g=(f.getAttribute("transform")||"")+" translate("+u+", "+d+")",m=i.length,_=t.svgNS;if(b(f),/^svg$/i.test(f.nodeName)){var y=f.ownerDocument.createElementNS(_,"g");for(s=0,c=(l=f.attributes).length;s<c;s++)a=l.item(s),y.setAttributeNS(_,a.nodeName,a.nodeValue);for(;f.firstChild;)y.appendChild(f.firstChild);f=y}for(s=0,c=(l=r.attributes).length;s<c;s++)"x"!==(a=l.item(s)).nodeName&&"y"!==a.nodeName&&"xlink:href"!==a.nodeName&&"href"!==a.nodeName&&("transform"===a.nodeName?g=a.nodeValue+" "+g:f.setAttribute(a.nodeName,a.nodeValue));f.setAttribute("transform",g),f.setAttribute("instantiated_by_use","1"),f.removeAttribute("id"),r.parentNode.replaceChild(f,r),i.length===m&&n++}}(e);var a,s,l=t.Object.__uid++,c=b(e),h=t.util.toArray(e.getElementsByTagName("*"));if(c.crossOrigin=o&&o.crossOrigin,c.svgUid=l,0===h.length&&t.isLikelyNode){var u=[];for(a=0,s=(h=e.selectNodes('//*[name(.)!="svg"]')).length;a<s;a++)u[a]=h[a];h=u}var d=h.filter((function(e){return b(e),t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))&&!function(e,t){for(;e&&(e=e.parentNode);)if(e.nodeName&&t.test(e.nodeName.replace("svg:",""))&&!e.getAttribute("instantiated_by_use"))return!0;return!1}(e,t.svgInvalidAncestorsRegEx)}));if(!d||d&&!d.length)i&&i([],{});else{var f={};h.filter((function(e){return"clipPath"===e.nodeName.replace("svg:","")})).forEach((function(e){var i=e.getAttribute("id");f[i]=t.util.toArray(e.getElementsByTagName("*")).filter((function(e){return t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))}))})),t.gradientDefs[l]=t.getGradientDefs(e),t.cssRules[l]=t.getCSSRules(e),t.clipPaths[l]=f,t.parseElements(d,(function(e,n){i&&(i(e,c,n,h),delete t.gradientDefs[l],delete t.cssRules[l],delete t.clipPaths[l])}),n(c),r,o)}}};var w=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+t.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+t.reNum+"))?\\s+(.*)");i(t,{parseFontDeclaration:function(e,t){var i=e.match(w);if(i){var n=i[1],r=i[3],a=i[4],s=i[5],l=i[6];n&&(t.fontStyle=n),r&&(t.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),a&&(t.fontSize=o(a)),l&&(t.fontFamily=l),s&&(t.lineHeight="normal"===s?1:s)}},getGradientDefs:function(e){var t,i=p(e,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),n=0,r={};for(n=i.length;n--;)(t=i[n]).getAttribute("xlink:href")&&y(e,t),r[t.getAttribute("id")]=t;return r},parseAttributes:function(e,n,a){if(e){var s,f,p,m={};void 0===a&&(a=e.getAttribute("svgUid")),e.parentNode&&t.svgValidParentsRegEx.test(e.parentNode.nodeName)&&(m=t.parseAttributes(e.parentNode,n,a));var v=n.reduce((function(t,i){return(s=e.getAttribute(i))&&(t[i]=s),t}),{}),_=i(function(e,i){var n={};for(var r in t.cssRules[i])if(g(e,r.split(" ")))for(var o in t.cssRules[i][r])n[o]=t.cssRules[i][r][o];return n}(e,a),t.parseStyleAttribute(e));v=i(v,_),_[h]&&e.setAttribute(h,_[h]),f=p=m.fontSize||t.Text.DEFAULT_SVG_FONT_SIZE,v[c]&&(v[c]=f=o(v[c],p));var b,y,w={};for(var x in v)y=d(b=u(x),v[x],m,f),w[b]=y;w&&w.font&&t.parseFontDeclaration(w.font,w);var S=i(m,w);return t.svgValidParentsRegEx.test(e.nodeName)?S:function(e){for(var i in l)if(void 0!==e[l[i]]&&""!==e[i]){if(void 0===e[i]){if(!t.Object.prototype[i])continue;e[i]=t.Object.prototype[i]}if(0!==e[i].indexOf("url(")){var n=new t.Color(e[i]);e[i]=n.setAlpha(r(n.getAlpha()*e[l[i]],2)).toRgba()}}return e}(S)}},parseElements:function(e,i,n,r,o){new t.ElementsParser(e,i,n,r,o).parse()},parseStyleAttribute:function(e){var t={},i=e.getAttribute("style");return i?("string"==typeof i?function(e,t){var i,n;e.replace(/;\s*$/,"").split(";").forEach((function(e){var r=e.split(":");i=r[0].trim().toLowerCase(),n=r[1].trim(),t[i]=n}))}(i,t):function(e,t){var i,n;for(var r in e)void 0!==e[r]&&(i=r.toLowerCase(),n=e[r],t[i]=n)}(i,t),t):t},parsePointsAttribute:function(e){if(!e)return null;var t,i,n=[];for(t=0,i=(e=(e=e.replace(/,/g," ").trim()).split(/\s+/)).length;t<i;t+=2)n.push({x:parseFloat(e[t]),y:parseFloat(e[t+1])});return n},getCSSRules:function(e){var i,n,r=e.getElementsByTagName("style"),o={};for(i=0,n=r.length;i<n;i++){var a=r[i].textContent;""!==(a=a.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&a.split("}").filter((function(e){return e.trim()})).forEach((function(e){var r=e.split("{"),a={},s=r[1].trim().split(";").filter((function(e){return e.trim()}));for(i=0,n=s.length;i<n;i++){var l=s[i].split(":"),c=l[0].trim(),h=l[1].trim();a[c]=h}(e=r[0].trim()).split(",").forEach((function(e){""!==(e=e.replace(/^svg/i,"").trim())&&(o[e]?t.util.object.extend(o[e],a):o[e]=t.util.object.clone(a))}))}))}return o},loadSVGFromURL:function(e,i,n,r){e=e.replace(/^\n\s*/,"").trim(),new t.util.request(e,{method:"get",onComplete:function(e){var o=e.responseXML;if(!o||!o.documentElement)return i&&i(null),!1;t.parseSVGDocument(o.documentElement,(function(e,t,n,r){i&&i(e,t,n,r)}),n,r)}})},loadSVGFromString:function(e,i,n,r){var o=(new t.window.DOMParser).parseFromString(e.trim(),"text/xml");t.parseSVGDocument(o.documentElement,(function(e,t,n,r){i(e,t,n,r)}),n,r)}})}(t),C.ElementsParser=function(e,t,i,n,r,o){this.elements=e,this.callback=t,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},(m=C.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},m.createObjects=function(){var e=this;this.elements.forEach((function(t,i){t.setAttribute("svgUid",e.svgUid),e.createObject(t,i)}))},m.findTag=function(e){return C[C.util.string.capitalize(e.tagName.replace("svg:",""))]},m.createObject=function(e,t){var i=this.findTag(e);if(i&&i.fromElement)try{i.fromElement(e,this.createCallback(t,e),this.options)}catch(e){C.log(e)}else this.checkIfDone()},m.createCallback=function(e,t){var i=this;return function(n){var r;i.resolveGradient(n,t,"fill"),i.resolveGradient(n,t,"stroke"),n instanceof C.Image&&n._originalElement&&(r=n.parsePreserveAspectRatioAttribute(t)),n._removeTransformMatrix(r),i.resolveClipPath(n,t),i.reviver&&i.reviver(t,n),i.instances[e]=n,i.checkIfDone()}},m.extractPropertyDefinition=function(e,t,i){var n=e[t],r=this.regexUrl;if(r.test(n)){r.lastIndex=0;var o=r.exec(n)[1];return r.lastIndex=0,C[i][this.svgUid][o]}},m.resolveGradient=function(e,t,i){var n=this.extractPropertyDefinition(e,i,"gradientDefs");if(n){var r=t.getAttribute(i+"-opacity"),o=C.Gradient.fromElement(n,e,r,this.options);e.set(i,o)}},m.createClipPathCallback=function(e,t){return function(e){e._removeTransformMatrix(),e.fillRule=e.clipRule,t.push(e)}},m.resolveClipPath=function(e,t){var i,n,r,o,a=this.extractPropertyDefinition(e,"clipPath","clipPaths");if(a){r=[],n=C.util.invertTransform(e.calcTransformMatrix());for(var s=a[0].parentNode,l=t;l.parentNode&&l.getAttribute("clip-path")!==e.clipPath;)l=l.parentNode;l.parentNode.appendChild(s);for(var c=0;c<a.length;c++)i=a[c],this.findTag(i).fromElement(i,this.createClipPathCallback(e,r),this.options);a=1===r.length?r[0]:new C.Group(r),o=C.util.multiplyTransformMatrices(n,a.calcTransformMatrix()),a.clipPath&&this.resolveClipPath(a,l);var h=C.util.qrDecompose(o);a.flipX=!1,a.flipY=!1,a.set("scaleX",h.scaleX),a.set("scaleY",h.scaleY),a.angle=h.angle,a.skewX=h.skewX,a.skewY=0,a.setPositionByOrigin({x:h.translateX,y:h.translateY},"center","center"),e.clipPath=a}else delete e.clipPath},m.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter((function(e){return null!=e})),this.callback(this.instances,this.elements))},function(e){var t=e.fabric||(e.fabric={});function i(e,t){this.x=e,this.y=t}t.Point?t.warn("fabric.Point is already defined"):(t.Point=i,i.prototype={type:"point",constructor:i,add:function(e){return new i(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new i(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new i(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new i(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new i(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new i(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,t){return void 0===t&&(t=.5),t=Math.max(Math.min(1,t),0),new i(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},distanceFrom:function(e){var t=this.x-e.x,i=this.y-e.y;return Math.sqrt(t*t+i*i)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new i(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new i(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setFromPoint:function(e){return this.x=e.x,this.y=e.y,this},swap:function(e){var t=this.x,i=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=i},clone:function(){return new i(this.x,this.y)}})}(t),function(e){var t=e.fabric||(e.fabric={});function i(e){this.status=e,this.points=[]}t.Intersection?t.warn("fabric.Intersection is already defined"):(t.Intersection=i,t.Intersection.prototype={constructor:i,appendPoint:function(e){return this.points.push(e),this},appendPoints:function(e){return this.points=this.points.concat(e),this}},t.Intersection.intersectLineLine=function(e,n,r,o){var a,s=(o.x-r.x)*(e.y-r.y)-(o.y-r.y)*(e.x-r.x),l=(n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x),c=(o.y-r.y)*(n.x-e.x)-(o.x-r.x)*(n.y-e.y);if(0!==c){var h=s/c,u=l/c;0<=h&&h<=1&&0<=u&&u<=1?(a=new i("Intersection")).appendPoint(new t.Point(e.x+h*(n.x-e.x),e.y+h*(n.y-e.y))):a=new i}else a=new i(0===s||0===l?"Coincident":"Parallel");return a},t.Intersection.intersectLinePolygon=function(e,t,n){var r,o,a,s,l=new i,c=n.length;for(s=0;s<c;s++)r=n[s],o=n[(s+1)%c],a=i.intersectLineLine(e,t,r,o),l.appendPoints(a.points);return l.points.length>0&&(l.status="Intersection"),l},t.Intersection.intersectPolygonPolygon=function(e,t){var n,r=new i,o=e.length;for(n=0;n<o;n++){var a=e[n],s=e[(n+1)%o],l=i.intersectLinePolygon(a,s,t);r.appendPoints(l.points)}return r.points.length>0&&(r.status="Intersection"),r},t.Intersection.intersectPolygonRectangle=function(e,n,r){var o=n.min(r),a=n.max(r),s=new t.Point(a.x,o.y),l=new t.Point(o.x,a.y),c=i.intersectLinePolygon(o,s,e),h=i.intersectLinePolygon(s,a,e),u=i.intersectLinePolygon(a,l,e),d=i.intersectLinePolygon(l,o,e),f=new i;return f.appendPoints(c.points),f.appendPoints(h.points),f.appendPoints(u.points),f.appendPoints(d.points),f.points.length>0&&(f.status="Intersection"),f})}(t),function(e){var t=e.fabric||(e.fabric={});function i(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function n(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}t.Color?t.warn("fabric.Color is already defined."):(t.Color=i,t.Color.prototype={_tryParsingColor:function(e){var t;e in i.colorNameMap&&(e=i.colorNameMap[e]),"transparent"===e&&(t=[255,255,255,0]),t||(t=i.sourceFromHex(e)),t||(t=i.sourceFromRgb(e)),t||(t=i.sourceFromHsl(e)),t||(t=[0,0,0,1]),t&&this.setSource(t)},_rgbToHsl:function(e,i,n){e/=255,i/=255,n/=255;var r,o,a,s=t.util.array.max([e,i,n]),l=t.util.array.min([e,i,n]);if(a=(s+l)/2,s===l)r=o=0;else{var c=s-l;switch(o=a>.5?c/(2-s-l):c/(s+l),s){case e:r=(i-n)/c+(i<n?6:0);break;case i:r=(n-e)/c+2;break;case n:r=(e-i)/c+4}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+t[0]+","+t[1]+"%,"+t[2]+"%,"+e[3]+")"},toHex:function(){var e,t,i,n=this.getSource();return e=1===(e=n[0].toString(16)).length?"0"+e:e,t=1===(t=n[1].toString(16)).length?"0"+t:t,i=1===(i=n[2].toString(16)).length?"0"+i:i,e.toUpperCase()+t.toUpperCase()+i.toUpperCase()},toHexa:function(){var e,t=this.getSource();return e=1===(e=(e=Math.round(255*t[3])).toString(16)).length?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();return t[3]=e,this.setSource(t),this},toGrayscale:function(){var e=this.getSource(),t=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),i=e[3];return this.setSource([t,t,t,i]),this},toBlackWhite:function(e){var t=this.getSource(),i=(.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),n=t[3];return e=e||127,i=Number(i)<Number(e)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(e){e instanceof i||(e=new i(e));var t,n=[],r=this.getAlpha(),o=this.getSource(),a=e.getSource();for(t=0;t<3;t++)n.push(Math.round(.5*o[t]+.5*a[t]));return n[3]=r,this.setSource(n),this}},t.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,t.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,t.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,t.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},t.Color.fromRgb=function(e){return i.fromSource(i.sourceFromRgb(e))},t.Color.sourceFromRgb=function(e){var t=e.match(i.reRGBa);if(t){var n=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),r=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),o=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1);return[parseInt(n,10),parseInt(r,10),parseInt(o,10),t[4]?parseFloat(t[4]):1]}},t.Color.fromRgba=i.fromRgb,t.Color.fromHsl=function(e){return i.fromSource(i.sourceFromHsl(e))},t.Color.sourceFromHsl=function(e){var t=e.match(i.reHSLa);if(t){var r,o,a,s=(parseFloat(t[1])%360+360)%360/360,l=parseFloat(t[2])/(/%$/.test(t[2])?100:1),c=parseFloat(t[3])/(/%$/.test(t[3])?100:1);if(0===l)r=o=a=c;else{var h=c<=.5?c*(l+1):c+l-c*l,u=2*c-h;r=n(u,h,s+1/3),o=n(u,h,s),a=n(u,h,s-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*a),t[4]?parseFloat(t[4]):1]}},t.Color.fromHsla=i.fromHsl,t.Color.fromHex=function(e){return i.fromSource(i.sourceFromHex(e))},t.Color.sourceFromHex=function(e){if(e.match(i.reHex)){var t=e.slice(e.indexOf("#")+1),n=3===t.length||4===t.length,r=8===t.length||4===t.length,o=n?t.charAt(0)+t.charAt(0):t.substring(0,2),a=n?t.charAt(1)+t.charAt(1):t.substring(2,4),s=n?t.charAt(2)+t.charAt(2):t.substring(4,6),l=r?n?t.charAt(3)+t.charAt(3):t.substring(6,8):"FF";return[parseInt(o,16),parseInt(a,16),parseInt(s,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},t.Color.fromSource=function(e){var t=new i;return t.setSource(e),t})}(t),function(e){var t=e.fabric||(e.fabric={}),i=["e","se","s","sw","w","nw","n","ne","e"],n=["ns","nesw","ew","nwse"],r={},o="left",a="top",s="right",l="bottom",c="center",h={top:l,bottom:a,left:s,right:o,center:c},u=t.util.radiansToDegrees,d=Math.sign||function(e){return(e>0)-(e<0)||+e};function f(e,t){var i=e.angle+u(Math.atan2(t.y,t.x))+360;return Math.round(i%360/45)}function p(e,i){var n=i.transform.target,r=n.canvas,o=t.util.object.clone(i);o.target=n,r&&r.fire("object:"+e,o),n.fire(e,i)}function g(e,t){var i=t.canvas,n=e[i.uniScaleKey];return i.uniformScaling&&!n||!i.uniformScaling&&n}function m(e){return e.originX===c&&e.originY===c}function v(e,t,i){var n=e.lockScalingX,r=e.lockScalingY;return!((!n||!r)&&(t||!n&&!r||!i)&&(!n||"x"!==t)&&(!r||"y"!==t))}function _(e,t,i,n){return{e:e,transform:t,pointer:{x:i,y:n}}}function b(e){return function(t,i,n,r){var o=i.target,a=o.getCenterPoint(),s=o.translateToOriginPoint(a,i.originX,i.originY),l=e(t,i,n,r);return o.setPositionByOrigin(s,i.originX,i.originY),l}}function y(e,t){return function(i,n,r,o){var a=t(i,n,r,o);return a&&p(e,_(i,n,r,o)),a}}function w(e,i,n,r,o){var a=e.target,s=a.controls[e.corner],l=a.canvas.getZoom(),c=a.padding/l,h=a.toLocalPoint(new t.Point(r,o),i,n);return h.x>=c&&(h.x-=c),h.x<=-c&&(h.x+=c),h.y>=c&&(h.y-=c),h.y<=c&&(h.y+=c),h.x-=s.offsetX,h.y-=s.offsetY,h}function x(e){return e.flipX!==e.flipY}function S(e,t,i,n,r){if(0!==e[t]){var o=r/e._getTransformedDimensions()[n]*e[i];e.set(i,o)}}function C(e,t,i,n){var r,c=t.target,h=c._getTransformedDimensions(0,c.skewY),d=w(t,t.originX,t.originY,i,n),f=Math.abs(2*d.x)-h.x,p=c.skewX;f<2?r=0:(r=u(Math.atan2(f/c.scaleX,h.y/c.scaleY)),t.originX===o&&t.originY===l&&(r=-r),t.originX===s&&t.originY===a&&(r=-r),x(c)&&(r=-r));var g=p!==r;if(g){var m=c._getTransformedDimensions().y;c.set("skewX",r),S(c,"skewY","scaleY","y",m)}return g}function T(e,t,i,n){var r,c=t.target,h=c._getTransformedDimensions(c.skewX,0),d=w(t,t.originX,t.originY,i,n),f=Math.abs(2*d.y)-h.y,p=c.skewY;f<2?r=0:(r=u(Math.atan2(f/c.scaleY,h.x/c.scaleX)),t.originX===o&&t.originY===l&&(r=-r),t.originX===s&&t.originY===a&&(r=-r),x(c)&&(r=-r));var g=p!==r;if(g){var m=c._getTransformedDimensions().x;c.set("skewY",r),S(c,"skewX","scaleX","x",m)}return g}function E(e,t,i,n,r){r=r||{};var o,a,s,l,c,u,f=t.target,p=f.lockScalingX,_=f.lockScalingY,b=r.by,y=g(e,f),x=v(f,b,y),S=t.gestureScale;if(x)return!1;if(S)a=t.scaleX*S,s=t.scaleY*S;else{if(o=w(t,t.originX,t.originY,i,n),c="y"!==b?d(o.x):1,u="x"!==b?d(o.y):1,t.signX||(t.signX=c),t.signY||(t.signY=u),f.lockScalingFlip&&(t.signX!==c||t.signY!==u))return!1;if(l=f._getTransformedDimensions(),y&&!b){var C=Math.abs(o.x)+Math.abs(o.y),T=t.original,E=C/(Math.abs(l.x*T.scaleX/f.scaleX)+Math.abs(l.y*T.scaleY/f.scaleY));a=T.scaleX*E,s=T.scaleY*E}else a=Math.abs(o.x*f.scaleX/l.x),s=Math.abs(o.y*f.scaleY/l.y);m(t)&&(a*=2,s*=2),t.signX!==c&&"y"!==b&&(t.originX=h[t.originX],a*=-1,t.signX=c),t.signY!==u&&"x"!==b&&(t.originY=h[t.originY],s*=-1,t.signY=u)}var I=f.scaleX,k=f.scaleY;return b?("x"===b&&f.set("scaleX",a),"y"===b&&f.set("scaleY",s)):(!p&&f.set("scaleX",a),!_&&f.set("scaleY",s)),I!==f.scaleX||k!==f.scaleY}r.scaleCursorStyleHandler=function(e,t,n){var r=g(e,n),o="";if(0!==t.x&&0===t.y?o="x":0===t.x&&0!==t.y&&(o="y"),v(n,o,r))return"not-allowed";var a=f(n,t);return i[a]+"-resize"},r.skewCursorStyleHandler=function(e,t,i){var r="not-allowed";if(0!==t.x&&i.lockSkewingY)return r;if(0!==t.y&&i.lockSkewingX)return r;var o=f(i,t)%4;return n[o]+"-resize"},r.scaleSkewCursorStyleHandler=function(e,t,i){return e[i.canvas.altActionKey]?r.skewCursorStyleHandler(e,t,i):r.scaleCursorStyleHandler(e,t,i)},r.rotationWithSnapping=y("rotating",b((function(e,t,i,n){var r=t,o=r.target,a=o.translateToOriginPoint(o.getCenterPoint(),r.originX,r.originY);if(o.lockRotation)return!1;var s,l=Math.atan2(r.ey-a.y,r.ex-a.x),c=Math.atan2(n-a.y,i-a.x),h=u(c-l+r.theta);if(o.snapAngle>0){var d=o.snapAngle,f=o.snapThreshold||d,p=Math.ceil(h/d)*d,g=Math.floor(h/d)*d;Math.abs(h-g)<f?h=g:Math.abs(h-p)<f&&(h=p)}return h<0&&(h=360+h),h%=360,s=o.angle!==h,o.angle=h,s}))),r.scalingEqually=y("scaling",b((function(e,t,i,n){return E(e,t,i,n)}))),r.scalingX=y("scaling",b((function(e,t,i,n){return E(e,t,i,n,{by:"x"})}))),r.scalingY=y("scaling",b((function(e,t,i,n){return E(e,t,i,n,{by:"y"})}))),r.scalingYOrSkewingX=function(e,t,i,n){return e[t.target.canvas.altActionKey]?r.skewHandlerX(e,t,i,n):r.scalingY(e,t,i,n)},r.scalingXOrSkewingY=function(e,t,i,n){return e[t.target.canvas.altActionKey]?r.skewHandlerY(e,t,i,n):r.scalingX(e,t,i,n)},r.changeWidth=y("resizing",b((function(e,t,i,n){var r=t.target,o=w(t,t.originX,t.originY,i,n),a=r.strokeWidth/(r.strokeUniform?r.scaleX:1),s=m(t)?2:1,l=r.width,c=Math.abs(o.x*s/r.scaleX)-a;return r.set("width",Math.max(c,0)),l!==c}))),r.skewHandlerX=function(e,t,i,n){var r,l=t.target,h=l.skewX,u=t.originY;return!l.lockSkewingX&&(0===h?r=w(t,c,c,i,n).x>0?o:s:(h>0&&(r=u===a?o:s),h<0&&(r=u===a?s:o),x(l)&&(r=r===o?s:o)),t.originX=r,y("skewing",b(C))(e,t,i,n))},r.skewHandlerY=function(e,t,i,n){var r,s=t.target,h=s.skewY,u=t.originX;return!s.lockSkewingY&&(0===h?r=w(t,c,c,i,n).y>0?a:l:(h>0&&(r=u===o?a:l),h<0&&(r=u===o?l:a),x(s)&&(r=r===a?l:a)),t.originY=r,y("skewing",b(T))(e,t,i,n))},r.dragHandler=function(e,t,i,n){var r=t.target,o=i-t.offsetX,a=n-t.offsetY,s=!r.get("lockMovementX")&&r.left!==o,l=!r.get("lockMovementY")&&r.top!==a;return s&&r.set("left",o),l&&r.set("top",a),(s||l)&&p("moving",_(e,t,i,n)),s||l},r.scaleOrSkewActionName=function(e,t,i){var n=e[i.canvas.altActionKey];return 0===t.x?n?"skewX":"scaleY":0===t.y?n?"skewY":"scaleX":void 0},r.rotationStyleHandler=function(e,t,i){return i.lockRotation?"not-allowed":t.cursorStyle},r.fireEvent=p,r.wrapWithFixedAnchor=b,r.wrapWithFireEvent=y,r.getLocalPoint=w,t.controlsUtils=r}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.degreesToRadians,n=t.controlsUtils;n.renderCircleControl=function(e,t,i,n,r){n=n||{};var o,a=this.sizeX||n.cornerSize||r.cornerSize,s=this.sizeY||n.cornerSize||r.cornerSize,l=void 0!==n.transparentCorners?n.transparentCorners:r.transparentCorners,c=l?"stroke":"fill",h=!l&&(n.cornerStrokeColor||r.cornerStrokeColor),u=t,d=i;e.save(),e.fillStyle=n.cornerColor||r.cornerColor,e.strokeStyle=n.cornerStrokeColor||r.cornerStrokeColor,a>s?(o=a,e.scale(1,s/a),d=i*a/s):s>a?(o=s,e.scale(a/s,1),u=t*s/a):o=a,e.lineWidth=1,e.beginPath(),e.arc(u,d,o/2,0,2*Math.PI,!1),e[c](),h&&e.stroke(),e.restore()},n.renderSquareControl=function(e,t,n,r,o){r=r||{};var a=this.sizeX||r.cornerSize||o.cornerSize,s=this.sizeY||r.cornerSize||o.cornerSize,l=void 0!==r.transparentCorners?r.transparentCorners:o.transparentCorners,c=l?"stroke":"fill",h=!l&&(r.cornerStrokeColor||o.cornerStrokeColor),u=a/2,d=s/2;e.save(),e.fillStyle=r.cornerColor||o.cornerColor,e.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor,e.lineWidth=1,e.translate(t,n),e.rotate(i(o.angle)),e[c+"Rect"](-u,-d,a,s),h&&e.strokeRect(-u,-d,a,s),e.restore()}}(t),function(e){var t=e.fabric||(e.fabric={});t.Control=function(e){for(var t in e)this[t]=e[t]},t.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(e,t){return t.cursorStyle},getActionName:function(e,t){return t.actionName},getVisibility:function(e,t){var i=e._controlsVisibility;return i&&void 0!==i[t]?i[t]:this.visible},setVisibility:function(e){this.visible=e},positionHandler:function(e,i){return t.util.transformPoint({x:this.x*e.x+this.offsetX,y:this.y*e.y+this.offsetY},i)},calcCornerCoords:function(e,i,n,r,o){var a,s,l,c,h=o?this.touchSizeX:this.sizeX,u=o?this.touchSizeY:this.sizeY;if(h&&u&&h!==u){var d=Math.atan2(u,h),f=Math.sqrt(h*h+u*u)/2,p=d-t.util.degreesToRadians(e),g=Math.PI/2-d-t.util.degreesToRadians(e);a=f*t.util.cos(p),s=f*t.util.sin(p),l=f*t.util.cos(g),c=f*t.util.sin(g)}else f=.7071067812*(h&&u?h:i),p=t.util.degreesToRadians(45-e),a=l=f*t.util.cos(p),s=c=f*t.util.sin(p);return{tl:{x:n-c,y:r-l},tr:{x:n+a,y:r-s},bl:{x:n-a,y:r+s},br:{x:n+c,y:r+l}}},render:function(e,i,n,r,o){"circle"===((r=r||{}).cornerStyle||o.cornerStyle)?t.controlsUtils.renderCircleControl.call(this,e,i,n,r,o):t.controlsUtils.renderSquareControl.call(this,e,i,n,r,o)}}}(t),function(){function e(e,t){var i,n,r,o,a=e.getAttribute("style"),s=e.getAttribute("offset")||0;if(s=(s=parseFloat(s)/(/%$/.test(s)?100:1))<0?0:s>1?1:s,a){var l=a.split(/\s*;\s*/);for(""===l[l.length-1]&&l.pop(),o=l.length;o--;){var c=l[o].split(/\s*:\s*/),h=c[0].trim(),u=c[1].trim();"stop-color"===h?i=u:"stop-opacity"===h&&(r=u)}}return i||(i=e.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=e.getAttribute("stop-opacity")),n=(i=new C.Color(i)).getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=n*t,{offset:s,color:i.toRgb(),opacity:r}}var t=C.util.object.clone;C.Gradient=C.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){e||(e={}),e.coords||(e.coords={});var t,i=this;Object.keys(e).forEach((function(t){i[t]=e[t]})),this.id?this.id+="_"+C.Object.__uid++:this.id=C.Object.__uid++,t={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},"radial"===this.type&&(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var t in e){var i=new C.Color(e[t]);this.colorStops.push({offset:parseFloat(t),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(e){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return C.util.populateWithProperties(this,t,e),t},toSVG:function(e,i){var n,r,o,a,s=t(this.coords,!0),l=(i=i||{},t(this.colorStops,!0)),c=s.r1>s.r2,h=this.gradientTransform?this.gradientTransform.concat():C.iMatrix.concat(),u=-this.offsetX,d=-this.offsetY,f=!!i.additionalTransform,p="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(l.sort((function(e,t){return e.offset-t.offset})),"objectBoundingBox"===p?(u/=e.width,d/=e.height):(u+=e.width/2,d+=e.height/2),"path"===e.type&&"percentage"!==this.gradientUnits&&(u-=e.pathOffset.x,d-=e.pathOffset.y),h[4]-=u,h[5]-=d,a='id="SVGID_'+this.id+'" gradientUnits="'+p+'"',a+=' gradientTransform="'+(f?i.additionalTransform+" ":"")+C.util.matrixToSVG(h)+'" ',"linear"===this.type?o=["<linearGradient ",a,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,'">\n']:"radial"===this.type&&(o=["<radialGradient ",a,' cx="',c?s.x1:s.x2,'" cy="',c?s.y1:s.y2,'" r="',c?s.r1:s.r2,'" fx="',c?s.x2:s.x1,'" fy="',c?s.y2:s.y1,'">\n']),"radial"===this.type){if(c)for((l=l.concat()).reverse(),n=0,r=l.length;n<r;n++)l[n].offset=1-l[n].offset;var g=Math.min(s.r1,s.r2);if(g>0){var m=g/Math.max(s.r1,s.r2);for(n=0,r=l.length;n<r;n++)l[n].offset+=m*(1-l[n].offset)}}for(n=0,r=l.length;n<r;n++){var v=l[n];o.push("<stop ",'offset="',100*v.offset+"%",'" style="stop-color:',v.color,void 0!==v.opacity?";stop-opacity: "+v.opacity:";",'"/>\n')}return o.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),o.join("")},toLive:function(e){var t,i,n,r=C.util.object.clone(this.coords);if(this.type){for("linear"===this.type?t=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(t=e.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2)),i=0,n=this.colorStops.length;i<n;i++){var o=this.colorStops[i].color,a=this.colorStops[i].opacity,s=this.colorStops[i].offset;void 0!==a&&(o=new C.Color(o).setAlpha(a).toRgba()),t.addColorStop(s,o)}return t}}}),C.util.object.extend(C.Gradient,{fromElement:function(t,i,n,r){var o=parseFloat(n)/(/%$/.test(n)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var a,s,l,c,h=t.getElementsByTagName("stop"),u="userSpaceOnUse"===t.getAttribute("gradientUnits")?"pixels":"percentage",d=t.getAttribute("gradientTransform")||"",f=[],p=0,g=0;for("linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?(a="linear",s=function(e){return{x1:e.getAttribute("x1")||0,y1:e.getAttribute("y1")||0,x2:e.getAttribute("x2")||"100%",y2:e.getAttribute("y2")||0}}(t)):(a="radial",s=function(e){return{x1:e.getAttribute("fx")||e.getAttribute("cx")||"50%",y1:e.getAttribute("fy")||e.getAttribute("cy")||"50%",r1:0,x2:e.getAttribute("cx")||"50%",y2:e.getAttribute("cy")||"50%",r2:e.getAttribute("r")||"50%"}}(t)),l=h.length;l--;)f.push(e(h[l],o));return c=C.parseTransformAttribute(d),function(e,t,i,n){var r,o;Object.keys(t).forEach((function(e){"Infinity"===(r=t[e])?o=1:"-Infinity"===r?o=0:(o=parseFloat(t[e],10),"string"==typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(o*=.01,"pixels"===n&&("x1"!==e&&"x2"!==e&&"r2"!==e||(o*=i.viewBoxWidth||i.width),"y1"!==e&&"y2"!==e||(o*=i.viewBoxHeight||i.height)))),t[e]=o}))}(0,s,r,u),"pixels"===u&&(p=-i.left,g=-i.top),new C.Gradient({id:t.getAttribute("id"),type:a,coords:s,colorStops:f,gradientUnits:u,gradientTransform:c,offsetX:p,offsetY:g})}})}(),v=C.util.toFixed,C.Pattern=C.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(e,t){if(e||(e={}),this.id=C.Object.__uid++,this.setOptions(e),!e.source||e.source&&"string"!=typeof e.source)t&&t(this);else{var i=this;this.source=C.util.createImage(),C.util.loadImage(e.source,(function(e,n){i.source=e,t&&t(i,n)}),null,this.crossOrigin)}},toObject:function(e){var t,i,n=C.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?t=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(t=this.source.toDataURL()),i={type:"pattern",source:t,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:v(this.offsetX,n),offsetY:v(this.offsetY,n),patternTransform:this.patternTransform?this.patternTransform.concat():null},C.util.populateWithProperties(this,i,e),i},toSVG:function(e){var t="function"==typeof this.source?this.source():this.source,i=t.width/e.width,n=t.height/e.height,r=this.offsetX/e.width,o=this.offsetY/e.height,a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,o&&(n+=Math.abs(o))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,r&&(i+=Math.abs(r))),t.src?a=t.src:t.toDataURL&&(a=t.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+t.width+'" height="'+t.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},setOptions:function(e){for(var t in e)this[t]=e[t]},toLive:function(e){var t=this.source;if(!t)return"";if(void 0!==t.src){if(!t.complete)return"";if(0===t.naturalWidth||0===t.naturalHeight)return""}return e.createPattern(t,this.repeat)}}),function(e){var t=e.fabric||(e.fabric={}),i=t.util.toFixed;t.Shadow?t.warn("fabric.Shadow is already defined."):(t.Shadow=t.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(e){for(var i in"string"==typeof e&&(e=this._parseShadow(e)),e)this[i]=e[i];this.id=t.Object.__uid++},_parseShadow:function(e){var i=e.trim(),n=t.Shadow.reOffsetsAndBlur.exec(i)||[];return{color:(i.replace(t.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(n[1],10)||0,offsetY:parseFloat(n[2],10)||0,blur:parseFloat(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(e){var n=40,r=40,o=t.Object.NUM_FRACTION_DIGITS,a=t.util.rotateVector({x:this.offsetX,y:this.offsetY},t.util.degreesToRadians(-e.angle)),s=new t.Color(this.color);return e.width&&e.height&&(n=100*i((Math.abs(a.x)+this.blur)/e.width,o)+20,r=100*i((Math.abs(a.y)+this.blur)/e.height,o)+20),e.flipX&&(a.x*=-1),e.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+i(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+i(a.x,o)+'" dy="'+i(a.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+s.toRgb()+'" flood-opacity="'+s.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},i=t.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(t){this[t]!==i[t]&&(e[t]=this[t])}),this),e}}),t.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(t),function(){if(C.StaticCanvas)C.warn("fabric.StaticCanvas is already defined.");else{var e=C.util.object.extend,t=C.util.getElementOffset,i=C.util.removeFromArray,n=C.util.toFixed,r=C.util.transformPoint,o=C.util.invertTransform,a=C.util.getNodeCanvas,s=C.util.createCanvasElement,l=new Error("Could not initialize `canvas` element");C.StaticCanvas=C.util.createClass(C.CommonMethods,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:C.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(e,t){var i=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(e),this._initOptions(t),this.interactive||this._initRetinaScaling(),t.overlayImage&&this.setOverlayImage(t.overlayImage,i),t.backgroundImage&&this.setBackgroundImage(t.backgroundImage,i),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,i),t.overlayColor&&this.setOverlayColor(t.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return C.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,C.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var e=C.devicePixelRatio;this.__initRetinaScaling(e,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(e,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(e,t,i){t.setAttribute("width",this.width*e),t.setAttribute("height",this.height*e),i.scale(e,e)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(e,t,i){return this.__setBgOverlayImage("overlayImage",e,t,i)},setBackgroundImage:function(e,t,i){return this.__setBgOverlayImage("backgroundImage",e,t,i)},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},__setBgOverlayImage:function(e,t,i,n){return"string"==typeof t?C.util.loadImage(t,(function(t,r){if(t){var o=new C.Image(t,n);this[e]=o,o.canvas=this}i&&i(t,r)}),this,n&&n.crossOrigin):(n&&t.setOptions(n),this[e]=t,t&&(t.canvas=this),i&&i(t,!1)),this},__setBgOverlayColor:function(e,t,i){return this[e]=t,this._initGradient(t,e),this._initPattern(t,e,i),this},_createCanvasElement:function(){var e=s();if(!e)throw l;if(e.style||(e.style={}),void 0===e.getContext)throw l;return e},_initOptions:function(e){var t=this.lowerCanvasEl;this._setOptions(e),this.width=this.width||parseInt(t.width,10)||0,this.height=this.height||parseInt(t.height,10)||0,this.lowerCanvasEl.style&&(t.width=this.width,t.height=this.height,t.style.width=this.width+"px",t.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){e&&e.getContext?this.lowerCanvasEl=e:this.lowerCanvasEl=C.util.getById(e)||this._createCanvasElement(),C.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,t){return this.setDimensions({width:e},t)},setHeight:function(e,t){return this.setDimensions({height:e},t)},setDimensions:function(e,t){var i;for(var n in t=t||{},e)i=e[n],t.cssOnly||(this._setBackstoreDimension(n,e[n]),i+="px",this.hasLostContext=!0),t.backstoreOnly||this._setCssDimension(n,i);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),t.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.upperCanvasEl&&(this.upperCanvasEl[e]=t),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t),this[e]=t,this},_setCssDimension:function(e,t){return this.lowerCanvasEl.style[e]=t,this.upperCanvasEl&&(this.upperCanvasEl.style[e]=t),this.wrapperEl&&(this.wrapperEl.style[e]=t),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var t,i,n,r=this._activeObject,o=this.backgroundImage,a=this.overlayImage;for(this.viewportTransform=e,i=0,n=this._objects.length;i<n;i++)(t=this._objects[i]).group||t.setCoords(!0);return r&&r.setCoords(),o&&o.setCoords(!0),a&&a.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(e,t){var i=e,n=this.viewportTransform.slice(0);e=r(e,o(this.viewportTransform)),n[0]=t,n[3]=t;var a=r(e,n);return n[4]+=i.x-a.x,n[5]+=i.y-a.y,this.setViewportTransform(n)},setZoom:function(e){return this.zoomToPoint(new C.Point(0,0),e),this},absolutePan:function(e){var t=this.viewportTransform.slice(0);return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)},relativePan:function(e){return this.absolutePan(new C.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState(),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e}),e.fire("removed"),delete e.canvas},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var e=this.contextContainer;return this.renderCanvas(e,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=C.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var e={},t=this.width,i=this.height,n=o(this.viewportTransform);return e.tl=r({x:0,y:0},n),e.br=r({x:t,y:i},n),e.tr=new C.Point(e.br.x,e.tl.y),e.bl=new C.Point(e.tl.x,e.br.y),this.vptCoords=e,e},cancelRequestedRender:function(){this.isRendering&&(C.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(e,t){var i=this.viewportTransform,n=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(e),C.util.setImageSmoothing(e,this.imageSmoothingEnabled),this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(e,t),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),n&&(n.canvas=this,n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e)),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var t=this.viewportTransform,i=this.clipPath;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e.globalCompositeOperation="destination-in",i.transform(e),e.scale(1/i.zoomX,1/i.zoomY),e.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),e.restore()},_renderObjects:function(e,t){var i,n;for(i=0,n=t.length;i<n;++i)t[i]&&t[i].render(e)},_renderBackgroundOrOverlay:function(e,t){var i=this[t+"Color"],n=this[t+"Image"],r=this.viewportTransform,o=this[t+"Vpt"];if(i||n){if(i){e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=i.toLive?i.toLive(e,this):i,o&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),e.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);var a=i.gradientTransform||i.patternTransform;a&&e.transform(a[0],a[1],a[2],a[3],a[4],a[5]),e.fill(),e.restore()}n&&(e.save(),o&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),n.render(e),e.restore())}},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new C.Point(this.width/2,this.height/2)},centerObjectH:function(e){return this._centerObject(e,new C.Point(this.getCenterPoint().x,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new C.Point(e.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(e){var t=this.getCenterPoint();return this._centerObject(e,t)},viewportCenterObject:function(e){var t=this.getVpCenter();return this._centerObject(e,t)},viewportCenterObjectH:function(e){var t=this.getVpCenter();return this._centerObject(e,new C.Point(t.x,e.getCenterPoint().y)),this},viewportCenterObjectV:function(e){var t=this.getVpCenter();return this._centerObject(e,new C.Point(e.getCenterPoint().x,t.y))},getVpCenter:function(){var e=this.getCenterPoint(),t=o(this.viewportTransform);return r(e,t)},_centerObject:function(e,t){return e.setPositionByOrigin(t,"center","center"),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(t,i){var n=this.clipPath,r={version:C.version,objects:this._toObjects(t,i)};return n&&!n.excludeFromExport&&(r.clipPath=this._toObject(this.clipPath,t,i)),e(r,this.__serializeBgOverlay(t,i)),C.util.populateWithProperties(this,r,i),r},_toObjects:function(e,t){return this._objects.filter((function(e){return!e.excludeFromExport})).map((function(i){return this._toObject(i,e,t)}),this)},_toObject:function(e,t,i){var n;this.includeDefaultValues||(n=e.includeDefaultValues,e.includeDefaultValues=!1);var r=e[t](i);return this.includeDefaultValues||(e.includeDefaultValues=n),r},__serializeBgOverlay:function(e,t){var i={},n=this.backgroundImage,r=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return o&&o.toObject?o.excludeFromExport||(i.background=o.toObject(t)):o&&(i.background=o),a&&a.toObject?a.excludeFromExport||(i.overlay=a.toObject(t)):a&&(i.overlay=a),n&&!n.excludeFromExport&&(i.backgroundImage=this._toObject(n,e,t)),r&&!r.excludeFromExport&&(i.overlayImage=this._toObject(r,e,t)),i},svgViewportTransformation:!0,toSVG:function(e,t){e||(e={}),e.reviver=t;var i=[];return this._setSVGPreamble(i,e),this._setSVGHeader(i,e),this.clipPath&&i.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",t),this._setSVGObjects(i,t),this.clipPath&&i.push("</g>\n"),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",t),i.push("</svg>"),i.join("")},_setSVGPreamble:function(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,t){var i,r=t.width||this.width,o=t.height||this.height,a='viewBox="0 0 '+this.width+" "+this.height+'" ',s=C.Object.NUM_FRACTION_DIGITS;t.viewBox?a='viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,a='viewBox="'+n(-i[4]/i[0],s)+" "+n(-i[5]/i[3],s)+" "+n(this.width/i[0],s)+" "+n(this.height/i[3],s)+'" '),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',o,'" ',a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",C.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")},createSVGClipPathMarkup:function(e){var t=this.clipPath;return t?(t.clipPathId="CLIPPATH_"+C.Object.__uid++,'<clipPath id="'+t.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(e.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var e=this;return["background","overlay"].map((function(t){var i=e[t+"Color"];if(i&&i.toLive){var n=e[t+"Vpt"],r=e.viewportTransform,o={width:e.width/(n?r[0]:1),height:e.height/(n?r[3]:1)};return i.toSVG(o,{additionalTransform:n?C.util.matrixToSVG(r):""})}})).join("")},createSVGFontFacesMarkup:function(){var e,t,i,n,r,o,a,s,l="",c={},h=C.fontPaths,u=[];for(this._objects.forEach((function e(t){u.push(t),t._objects&&t._objects.forEach(e)})),a=0,s=u.length;a<s;a++)if(t=(e=u[a]).fontFamily,-1!==e.type.indexOf("text")&&!c[t]&&h[t]&&(c[t]=!0,e.styles))for(r in i=e.styles)for(o in n=i[r])!c[t=n[o].fontFamily]&&h[t]&&(c[t]=!0);for(var d in c)l+=["\t\t@font-face {\n","\t\t\tfont-family: '",d,"';\n","\t\t\tsrc: url('",h[d],"');\n","\t\t}\n"].join("");return l&&(l=['\t<style type="text/css">',"<![CDATA[\n",l,"]]>","</style>\n"].join("")),l},_setSVGObjects:function(e,t){var i,n,r,o=this._objects;for(n=0,r=o.length;n<r;n++)(i=o[n]).excludeFromExport||this._setSVGObject(e,i,t)},_setSVGObject:function(e,t,i){e.push(t.toSVG(i))},_setSVGBgOverlayImage:function(e,t,i){this[t]&&!this[t].excludeFromExport&&this[t].toSVG&&e.push(this[t].toSVG(i))},_setSVGBgOverlayColor:function(e,t){var i=this[t+"Color"],n=this.viewportTransform,r=this.width,o=this.height;if(i)if(i.toLive){var a=i.repeat,s=C.util.invertTransform(n),l=this[t+"Vpt"]?C.util.matrixToSVG(s):"";e.push('<rect transform="'+l+" translate(",r/2,",",o/2,')"',' x="',i.offsetX-r/2,'" y="',i.offsetY-o/2,'" ','width="',"repeat-y"===a||"no-repeat"===a?i.source.width:r,'" height="',"repeat-x"===a||"no-repeat"===a?i.source.height:o,'" fill="url(#SVGID_'+i.id+')"',"></rect>\n")}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',"></rect>\n")},sendToBack:function(e){if(!e)return this;var t,n,r,o=this._activeObject;if(e===o&&"activeSelection"===e.type)for(t=(r=o._objects).length;t--;)n=r[t],i(this._objects,n),this._objects.unshift(n);else i(this._objects,e),this._objects.unshift(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(e){if(!e)return this;var t,n,r,o=this._activeObject;if(e===o&&"activeSelection"===e.type)for(r=o._objects,t=0;t<r.length;t++)n=r[t],i(this._objects,n),this._objects.push(n);else i(this._objects,e),this._objects.push(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(e,t){if(!e)return this;var n,r,o,a,s,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(s=l._objects,n=0;n<s.length;n++)r=s[n],(o=this._objects.indexOf(r))>0+c&&(a=o-1,i(this._objects,r),this._objects.splice(a,0,r)),c++;else 0!==(o=this._objects.indexOf(e))&&(a=this._findNewLowerIndex(e,o,t),i(this._objects,e),this._objects.splice(a,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(e,t,i){var n,r;if(i){for(n=t,r=t-1;r>=0;--r)if(e.intersectsWithObject(this._objects[r])||e.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(e)){n=r;break}}else n=t-1;return n},bringForward:function(e,t){if(!e)return this;var n,r,o,a,s,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(n=(s=l._objects).length;n--;)r=s[n],(o=this._objects.indexOf(r))<this._objects.length-1-c&&(a=o+1,i(this._objects,r),this._objects.splice(a,0,r)),c++;else(o=this._objects.indexOf(e))!==this._objects.length-1&&(a=this._findNewUpperIndex(e,o,t),i(this._objects,e),this._objects.splice(a,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(e,t,i){var n,r,o;if(i){for(n=t,r=t+1,o=this._objects.length;r<o;++r)if(e.intersectsWithObject(this._objects[r])||e.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(e)){n=r;break}}else n=t+1;return n},moveTo:function(e,t){return i(this._objects,e),this._objects.splice(t,0,e),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(C.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),C.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),C.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),e(C.StaticCanvas.prototype,C.Observable),e(C.StaticCanvas.prototype,C.Collection),e(C.StaticCanvas.prototype,C.DataURLExporter),e(C.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=s();if(!t||!t.getContext)return null;var i=t.getContext("2d");return i&&"setLineDash"===e?void 0!==i.setLineDash:null}}),C.StaticCanvas.prototype.toJSON=C.StaticCanvas.prototype.toObject,C.isLikelyNode&&(C.StaticCanvas.prototype.createPNGStream=function(){var e=a(this.lowerCanvasEl);return e&&e.createPNGStream()},C.StaticCanvas.prototype.createJPEGStream=function(e){var t=a(this.lowerCanvasEl);return t&&t.createJPEGStream(e)})}}(),C.BaseBrush=C.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(e){var t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},_setShadow:function(){if(this.shadow){var e=this.canvas,t=this.shadow,i=e.contextTop,n=e.getZoom();e&&e._isRetinaScaling()&&(n*=C.devicePixelRatio),i.shadowColor=t.color,i.shadowBlur=t.blur*n,i.shadowOffsetX=t.offsetX*n,i.shadowOffsetY=t.offsetY*n}},needsFullRender:function(){return new C.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},_isOutSideCanvas:function(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}),C.PencilBrush=C.util.createClass(C.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(e){this.canvas=e,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(e,t,i){var n=t.midPointFrom(i);return e.quadraticCurveTo(t.x,t.y,n.x,n.y),n},onMouseDown:function(e,t){this.canvas._isMainEvent(t.e)&&(this.drawStraightLine=t.e[this.straightLineKey],this._prepareForDrawing(e),this._captureDrawingPath(e),this._render())},onMouseMove:function(e,t){if(this.canvas._isMainEvent(t.e)&&(this.drawStraightLine=t.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(e))&&this._captureDrawingPath(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var i=this._points,n=i.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,i[n-2],i[n-1],!0),r.stroke(),r.restore()}},onMouseUp:function(e){return!this.canvas._isMainEvent(e.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(e){var t=new C.Point(e.x,e.y);this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)},_addPoint:function(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(e){var t=new C.Point(e.x,e.y);return this._addPoint(t)},_render:function(e){var t,i,n=this._points[0],r=this._points[1];if(e=e||this.canvas.contextTop,this._saveAndTransform(e),e.beginPath(),2===this._points.length&&n.x===r.x&&n.y===r.y){var o=this.width/1e3;n=new C.Point(n.x,n.y),r=new C.Point(r.x,r.y),n.x-=o,r.x+=o}for(e.moveTo(n.x,n.y),t=1,i=this._points.length;t<i;t++)this._drawSegment(e,n,r),n=this._points[t],r=this._points[t+1];e.lineTo(n.x,n.y),e.stroke(),e.restore()},convertPointsToSVGPath:function(e){var t=this.width/1e3;return C.util.getSmoothPathFromPoints(e,t)},_isEmptySVGPath:function(e){return"M 0 0 Q 0 0 0 0 L 0 0"===C.util.joinPath(e)},createPath:function(e){var t=new C.Path(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new C.Shadow(this.shadow)),t},decimatePoints:function(e,t){if(e.length<=2)return e;var i,n=this.canvas.getZoom(),r=Math.pow(t/n,2),o=e.length-1,a=e[0],s=[a];for(i=1;i<o-1;i++)Math.pow(a.x-e[i].x,2)+Math.pow(a.y-e[i].y,2)>=r&&(a=e[i],s.push(a));return s.push(e[o]),s},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(e))this.canvas.requestRenderAll();else{var t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}}),C.CircleBrush=C.util.createClass(C.BaseBrush,{width:10,initialize:function(e){this.canvas=e,this.points=[]},drawDot:function(e){var t=this.addPoint(e),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,t),i.restore()},dot:function(e,t){e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill()},onMouseDown:function(e){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)},_render:function(){var e,t,i=this.canvas.contextTop,n=this.points;for(this._saveAndTransform(i),e=0,t=n.length;e<t;e++)this.dot(i,n[e]);i.restore()},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e))},onMouseUp:function(){var e,t,i=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var n=[];for(e=0,t=this.points.length;e<t;e++){var r=this.points[e],o=new C.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(o.shadow=new C.Shadow(this.shadow)),n.push(o)}var a=new C.Group(n);a.canvas=this.canvas,this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=i,this.canvas.requestRenderAll()},addPoint:function(e){var t=new C.Point(e.x,e.y),i=C.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new C.Color(this.color).setAlpha(C.util.getRandomInt(0,100)/100).toRgba();return t.radius=i,t.fill=n,this.points.push(t),t}}),C.SprayBrush=C.util.createClass(C.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e,this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.render(this.sprayChunkPoints)},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.render(this.sprayChunkPoints))},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var t=[],i=0,n=this.sprayChunks.length;i<n;i++)for(var r=this.sprayChunks[i],o=0,a=r.length;o<a;o++){var s=new C.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});t.push(s)}this.optimizeOverlapping&&(t=this._getOptimizedRects(t));var l=new C.Group(t);this.shadow&&l.set("shadow",new C.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()},_getOptimizedRects:function(e){var t,i,n,r={};for(i=0,n=e.length;i<n;i++)r[t=e[i].left+""+e[i].top]||(r[t]=e[i]);var o=[];for(t in r)o.push(r[t]);return o},render:function(e){var t,i,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,i=e.length;t<i;t++){var r=e[t];void 0!==r.opacity&&(n.globalAlpha=r.opacity),n.fillRect(r.x,r.y,r.width,r.width)}n.restore()},_render:function(){var e,t,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),e=0,t=this.sprayChunks.length;e<t;e++)this.render(this.sprayChunks[e]);i.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];var t,i,n,r,o=this.width/2;for(r=0;r<this.density;r++){t=C.util.getRandomInt(e.x-o,e.x+o),i=C.util.getRandomInt(e.y-o,e.y+o),n=this.dotWidthVariance?C.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new C.Point(t,i);a.width=n,this.randomOpacity&&(a.opacity=C.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),C.PatternBrush=C.util.createClass(C.PencilBrush,{getPatternSrc:function(){var e=C.util.createCanvasElement(),t=e.getContext("2d");return e.width=e.height=25,t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill(),e},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(e){return e.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(e){this.callSuper("_setBrushStyles",e),e.strokeStyle=this.getPattern(e)},createPath:function(e){var t=this.callSuper("createPath",e),i=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new C.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),t}}),function(){var e=C.util.getPointer,t=C.util.degreesToRadians,i=C.util.isTouchEvent;for(var n in C.Canvas=C.util.createClass(C.StaticCanvas,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=C.PencilBrush&&new C.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e,t,i,n=this.getActiveObjects();if(n.length>0&&!this.preserveObjectStacking){t=[],i=[];for(var r=0,o=this._objects.length;r<o;r++)e=this._objects[r],-1===n.indexOf(e)?t.push(e):i.push(e);n.length>1&&(this._activeObject._objects=i),t.push.apply(t,i)}else t=this._objects;return t},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,t){var i=e.calcTransformMatrix(),n=C.util.invertTransform(i),r=this.restorePointerVpt(t);return C.util.transformPoint(r,n)},isTargetTransparent:function(e,t,i){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var n=this._normalizePointer(e,{x:t,y:i}),r=Math.max(e.cacheTranslationX+n.x*e.zoomX,0),o=Math.max(e.cacheTranslationY+n.y*e.zoomY,0);return C.util.isTransparent(e._cacheContext,Math.round(r),Math.round(o),this.targetFindTolerance)}var a=this.contextCache,s=e.selectionBackgroundColor,l=this.viewportTransform;return e.selectionBackgroundColor="",this.clearContext(a),a.save(),a.transform(l[0],l[1],l[2],l[3],l[4],l[5]),e.render(a),a.restore(),e.selectionBackgroundColor=s,C.util.isTransparent(a,t,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return Array.isArray(this.selectionKey)?!!this.selectionKey.find((function(t){return!0===e[t]})):e[this.selectionKey]},_shouldClearSelection:function(e,t){var i=this.getActiveObjects(),n=this._activeObject;return!t||t&&n&&i.length>1&&-1===i.indexOf(t)&&n!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&n&&n!==t},_shouldCenterTransform:function(e,t,i){var n;if(e)return"scale"===t||"scaleX"===t||"scaleY"===t||"resizing"===t?n=this.centeredScaling||e.centeredScaling:"rotate"===t&&(n=this.centeredRotation||e.centeredRotation),n?!i:i},_getOriginFromCorner:function(e,t){var i={x:e.originX,y:e.originY};return"ml"===t||"tl"===t||"bl"===t?i.x="right":"mr"!==t&&"tr"!==t&&"br"!==t||(i.x="left"),"tl"===t||"mt"===t||"tr"===t?i.y="bottom":"bl"!==t&&"mb"!==t&&"br"!==t||(i.y="top"),i},_getActionFromCorner:function(e,t,i,n){if(!t||!e)return"drag";var r=n.controls[t];return r.getActionName(i,r,n)},_setupCurrentTransform:function(e,i,n){if(i){var r=this.getPointer(e),o=i.__corner,a=i.controls[o],s=n&&o?a.getActionHandler(e,i,a):C.controlsUtils.dragHandler,l=this._getActionFromCorner(n,o,e,i),c=this._getOriginFromCorner(i,o),h=e[this.centeredKey],u={target:i,action:l,actionHandler:s,corner:o,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:r.x-i.left,offsetY:r.y-i.top,originX:c.x,originY:c.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:t(i.angle),width:i.width*i.scaleX,shiftKey:e.shiftKey,altKey:h,original:C.util.saveObjectTransform(i)};this._shouldCenterTransform(i,l,h)&&(u.originX="center",u.originY="center"),u.original.originX=c.x,u.original.originY=c.y,this._currentTransform=u,this._beforeTransform(e)}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var t=this._groupSelector,i=new C.Point(t.ex,t.ey),n=C.util.transformPoint(i,this.viewportTransform),r=new C.Point(t.ex+t.left,t.ey+t.top),o=C.util.transformPoint(r,this.viewportTransform),a=Math.min(n.x,o.x),s=Math.min(n.y,o.y),l=Math.max(n.x,o.x),c=Math.max(n.y,o.y),h=this.selectionLineWidth/2;this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(a,s,l-a,c-s)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,a+=h,s+=h,l-=h,c-=h,C.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(a,s,l-a,c-s))},findTarget:function(e,t){if(!this.skipTargetFind){var n,r,o=this.getPointer(e,!0),a=this._activeObject,s=this.getActiveObjects(),l=i(e),c=s.length>1&&!t||1===s.length;if(this.targets=[],c&&a._findTargetCorner(o,l))return a;if(s.length>1&&!t&&a===this._searchPossibleTargets([a],o))return a;if(1===s.length&&a===this._searchPossibleTargets([a],o)){if(!this.preserveObjectStacking)return a;n=a,r=this.targets,this.targets=[]}var h=this._searchPossibleTargets(this._objects,o);return e[this.altSelectionKey]&&h&&n&&h!==n&&(h=n,this.targets=r),h}},_checkTarget:function(e,t,i){if(t&&t.visible&&t.evented&&t.containsPoint(e)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return!0;if(!this.isTargetTransparent(t,i.x,i.y))return!0}},_searchPossibleTargets:function(e,t){for(var i,n,r=e.length;r--;){var o=e[r],a=o.group?this._normalizePointer(o.group,t):t;if(this._checkTarget(a,o,t)){(i=e[r]).subTargetCheck&&i instanceof C.Group&&(n=this._searchPossibleTargets(i._objects,t))&&this.targets.push(n);break}}return i},restorePointerVpt:function(e){return C.util.transformPoint(e,C.util.invertTransform(this.viewportTransform))},getPointer:function(t,i){if(this._absolutePointer&&!i)return this._absolutePointer;if(this._pointer&&i)return this._pointer;var n,r=e(t),o=this.upperCanvasEl,a=o.getBoundingClientRect(),s=a.width||0,l=a.height||0;s&&l||("top"in a&&"bottom"in a&&(l=Math.abs(a.top-a.bottom)),"right"in a&&"left"in a&&(s=Math.abs(a.right-a.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,i||(r=this.restorePointerVpt(r));var c=this.getRetinaScaling();return 1!==c&&(r.x/=c,r.y/=c),n=0===s||0===l?{width:1,height:1}:{width:o.width/s,height:o.height/l},{x:r.x*n.width,y:r.y*n.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),t=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),C.util.addClass(i,"upper-canvas "+e),this.wrapperEl.appendChild(i),this._copyCanvasStyle(t,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=C.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),C.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),C.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.width||e.width,i=this.height||e.height;C.util.setStyle(e,{position:"absolute",width:t+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=t,e.height=i,C.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?"activeSelection"===e.type&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,t){var i=!1,n=this.getActiveObjects(),r=[],o=[];e.forEach((function(e){-1===n.indexOf(e)&&(i=!0,e.fire("deselected",{e:t,target:e}),o.push(e))})),n.forEach((function(n){-1===e.indexOf(n)&&(i=!0,n.fire("selected",{e:t,target:n}),r.push(n))})),e.length>0&&n.length>0?i&&this.fire("selection:updated",{e:t,selected:r,deselected:o}):n.length>0?this.fire("selection:created",{e:t,selected:r}):e.length>0&&this.fire("selection:cleared",{e:t,deselected:o})},setActiveObject:function(e,t){var i=this.getActiveObjects();return this._setActiveObject(e,t),this._fireSelectionEvents(i,t),this},_setActiveObject:function(e,t){return this._activeObject!==e&&!!this._discardActiveObject(t,e)&&!e.onSelect({e:t})&&(this._activeObject=e,!0)},_discardActiveObject:function(e,t){var i=this._activeObject;if(i){if(i.onDeselect({e:e,object:t}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var t=this.getActiveObjects(),i=this.getActiveObject();return t.length&&this.fire("before:selection:cleared",{target:i,e:e}),this._discardActiveObject(e),this._fireSelectionEvents(t,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){C.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,C.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var t=this._activeObject;t&&t._renderControls(e)},_toObject:function(e,t,i){var n=this._realizeGroupTransformOnObject(e),r=this.callSuper("_toObject",e,t,i);return this._unwindGroupTransformOnObject(e,n),r},_realizeGroupTransformOnObject:function(e){if(e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group){var t={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach((function(i){t[i]=e[i]})),C.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),t}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},_setSVGObject:function(e,t,i){var n=this._realizeGroupTransformOnObject(t);this.callSuper("_setSVGObject",e,t,i),this._unwindGroupTransformOnObject(t,n)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),C.StaticCanvas.prototype.setViewportTransform.call(this,e)}}),C.StaticCanvas)"prototype"!==n&&(C.Canvas[n]=C.StaticCanvas[n])}(),function(){var e=C.util.addListener,t=C.util.removeListener,i={passive:!1};function n(e,t){return e.button&&e.button===t-1}C.util.object.extend(C.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(e,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(e,t){var n=this.upperCanvasEl,r=this._getEventPrefix();e(C.window,"resize",this._onResize),e(n,r+"down",this._onMouseDown),e(n,r+"move",this._onMouseMove,i),e(n,r+"out",this._onMouseOut),e(n,r+"enter",this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,i),"undefined"!=typeof eventjs&&t in eventjs&&(eventjs[t](n,"gesture",this._onGesture),eventjs[t](n,"drag",this._onDrag),eventjs[t](n,"orientation",this._onOrientationChange),eventjs[t](n,"shake",this._onShake),eventjs[t](n,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(t,"remove");var e=this._getEventPrefix();t(C.document,e+"up",this._onMouseUp),t(C.document,"touchend",this._onTouchEnd,i),t(C.document,e+"move",this._onMouseMove,i),t(C.document,"touchmove",this._onMouseMove,i)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var t=this._hoveredTarget;this.fire("mouse:out",{target:t,e:e}),this._hoveredTarget=null,t&&t.fire("mouseout",{e:e});var i=this;this._hoveredTargets.forEach((function(n){i.fire("mouse:out",{target:t,e:e}),n&&t.fire("mouseout",{e:e})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(e){e.isEditing&&e.hiddenTextarea.focus()}))},_onMouseEnter:function(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",{target:null,e:e}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onLongPress:function(e,t){this.__onLongPress&&this.__onLongPress(e,t)},_onDragOver:function(e){e.preventDefault();var t=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(t,e)},_onDrop:function(e){return this._simpleEventHandler("drop:before",e),this._simpleEventHandler("drop",e)},_onContextMenu:function(e){return this.stopContextMenu&&(e.stopPropagation(),e.preventDefault()),!1},_onDoubleClick:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData(e)},getPointerId:function(e){var t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1},_isMainEvent:function(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(n){n.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(n)),this.__onMouseDown(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();e(C.document,"touchend",this._onTouchEnd,i),e(C.document,"touchmove",this._onMouseMove,i),t(r,o+"down",this._onMouseDown)},_onMouseDown:function(n){this.__onMouseDown(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();t(r,o+"move",this._onMouseMove,i),e(C.document,o+"up",this._onMouseUp),e(C.document,o+"move",this._onMouseMove,i)},_onTouchEnd:function(n){if(!(n.touches.length>0)){this.__onMouseUp(n),this._resetTransformEventData(),this.mainTouchId=null;var r=this._getEventPrefix();t(C.document,"touchend",this._onTouchEnd,i),t(C.document,"touchmove",this._onMouseMove,i);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){e(o.upperCanvasEl,r+"down",o._onMouseDown),o._willAddMouseDown=0}),400)}},_onMouseUp:function(n){this.__onMouseUp(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(n)&&(t(C.document,o+"up",this._onMouseUp),t(C.document,o+"move",this._onMouseMove,i),e(r,o+"move",this._onMouseMove,i))},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var t=this._activeObject;return!!(!!t!=!!e||t&&e&&t!==e)||(t&&t.isEditing,!1)},__onMouseUp:function(e){var t,i=this._currentTransform,r=this._groupSelector,o=!1,a=!r||0===r.left&&0===r.top;if(this._cacheTransformEventData(e),t=this._target,this._handleEvent(e,"up:before"),n(e,3))this.fireRightClick&&this._handleEvent(e,"up",3,a);else{if(n(e,2))return this.fireMiddleClick&&this._handleEvent(e,"up",2,a),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(e);else if(this._isMainEvent(e)){if(i&&(this._finalizeCurrentTransform(e),o=i.actionPerformed),!a){var s=t===this._activeObject;this._maybeGroupObjects(e),o||(o=this._shouldRender(t)||!s&&t===this._activeObject)}var l,c;if(t){if(l=t._findTargetCorner(this.getPointer(e,!0),C.util.isTouchEvent(e)),t.selectable&&t!==this._activeObject&&"up"===t.activeOn)this.setActiveObject(t,e),o=!0;else{var h=t.controls[l],u=h&&h.getMouseUpHandler(e,t,h);u&&u(e,i,(c=this.getPointer(e)).x,c.y)}t.isMoving=!1}if(i&&(i.target!==t||i.corner!==l)){var d=i.target&&i.target.controls[i.corner],f=d&&d.getMouseUpHandler(e,t,h);c=c||this.getPointer(e),f&&f(e,i,c.x,c.y)}this._setCursorFromEvent(e,t),this._handleEvent(e,"up",1,a),this._groupSelector=null,this._currentTransform=null,t&&(t.__corner=0),o?this.requestRenderAll():a||this.renderTop()}}},_simpleEventHandler:function(e,t){var i=this.findTarget(t),n=this.targets,r={e:t,target:i,subTargets:n};if(this.fire(e,r),i&&i.fire(e,r),!n)return i;for(var o=0;o<n.length;o++)n[o].fire(e,r);return i},_handleEvent:function(e,t,i,n){var r=this._target,o=this.targets||[],a={e:e,target:r,subTargets:o,button:i||1,isClick:n||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===t&&(a.currentTarget=this.findTarget(e),a.currentSubTargets=this.targets),this.fire("mouse:"+t,a),r&&r.fire("mouse"+t,a);for(var s=0;s<o.length;s++)o[s].fire("mouse"+t,a)},_finalizeCurrentTransform:function(e){var t=this._currentTransform,i=t.target,n={e:e,target:i,transform:t,action:t.action};i._scaling&&(i._scaling=!1),i.setCoords(),(t.actionPerformed||this.stateful&&i.hasStateChanged())&&this._fire("modified",n)},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll();var t=this.getPointer(e);this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){if(this._isCurrentlyDrawing){var t=this.getPointer(e);this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){var t=this.getPointer(e);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:e,pointer:t}),this._handleEvent(e,"up")},__onMouseDown:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"down:before");var t=this._target;if(n(e,3))this.fireRightClick&&this._handleEvent(e,"down",3);else if(n(e,2))this.fireMiddleClick&&this._handleEvent(e,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(e);else if(this._isMainEvent(e)&&!this._currentTransform){var i=this._pointer;this._previousPointer=i;var r=this._shouldRender(t),o=this._shouldGroup(e,t);if(this._shouldClearSelection(e,t)?this.discardActiveObject(e):o&&(this._handleGrouping(e,t),t=this._activeObject),!this.selection||t&&(t.selectable||t.isEditing||t===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),t){var a=t===this._activeObject;t.selectable&&"down"===t.activeOn&&this.setActiveObject(t,e);var s=t._findTargetCorner(this.getPointer(e,!0),C.util.isTouchEvent(e));if(t.__corner=s,t===this._activeObject&&(s||!o)){this._setupCurrentTransform(e,t,a);var l=t.controls[s],c=(i=this.getPointer(e),l&&l.getMouseDownHandler(e,t,l));c&&c(e,this._currentTransform,i.x,i.y)}}this._handleEvent(e,"down"),(r||o)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var t=this._currentTransform;this.stateful&&t.target.saveState(),this.fire("before:transform",{e:e,transform:t})},__onMouseMove:function(e){var t,i;if(this._handleEvent(e,"move:before"),this._cacheTransformEventData(e),this.isDrawingMode)this._onMouseMoveInDrawingMode(e);else if(this._isMainEvent(e)){var n=this._groupSelector;n?(i=this._absolutePointer,n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(e):(t=this.findTarget(e)||null,this._setCursorFromEvent(e,t),this._fireOverOutEvents(t,e)),this._handleEvent(e,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(e,t){var i=this._hoveredTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var a=0;a<o;a++)this.fireSyntheticInOutEvents(r[a],t,{oldTarget:n[a],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(e,t){var i=this._draggedoverTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var a=0;a<o;a++)this.fireSyntheticInOutEvents(r[a],t,{oldTarget:n[a],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=e},fireSyntheticInOutEvents:function(e,t,i){var n,r,o,a=i.oldTarget,s=a!==e,l=i.canvasEvtIn,c=i.canvasEvtOut;s&&(n={e:t,target:e,previousTarget:a},r={e:t,target:a,nextTarget:e}),o=e&&s,a&&s&&(c&&this.fire(c,r),a.fire(i.evtOut,r)),o&&(l&&this.fire(l,n),e.fire(i.evtIn,n))},__onMouseWheel:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()},_transformObject:function(e){var t=this.getPointer(e),i=this._currentTransform;i.reset=!1,i.shiftKey=e.shiftKey,i.altKey=e[this.centeredKey],this._performTransformAction(e,i,t),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,t,i){var n=i.x,r=i.y,o=t.action,a=!1,s=t.actionHandler;s&&(a=s(e,t,n,r)),"drag"===o&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a},_fire:C.controlsUtils.fireEvent,_setCursorFromEvent:function(e,t){if(!t)return this.setCursor(this.defaultCursor),!1;var i=t.hoverCursor||this.hoverCursor,n=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!n||!n.contains(t))&&t._findTargetCorner(this.getPointer(e,!0));r?this.setCursor(this.getCornerCursor(r,t,e)):(t.subTargetCheck&&this.targets.concat().reverse().map((function(e){i=e.hoverCursor||i})),this.setCursor(i))},getCornerCursor:function(e,t,i){var n=t.controls[e];return n.cursorStyleHandler(i,n,t)}})}(),_=Math.min,b=Math.max,C.util.object.extend(C.Canvas.prototype,{_shouldGroup:function(e,t){var i=this._activeObject;return i&&this._isSelectionKeyPressed(e)&&t&&t.selectable&&this.selection&&(i!==t||"activeSelection"===i.type)&&!t.onSelect({e:e})},_handleGrouping:function(e,t){var i=this._activeObject;i.__corner||(t!==i||(t=this.findTarget(e,!0))&&t.selectable)&&(i&&"activeSelection"===i.type?this._updateActiveSelection(t,e):this._createActiveSelection(t,e))},_updateActiveSelection:function(e,t){var i=this._activeObject,n=i._objects.slice(0);i.contains(e)?(i.removeWithUpdate(e),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat(),1===i.size()&&this._setActiveObject(i.item(0),t)):(i.addWithUpdate(e),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(n,t)},_createActiveSelection:function(e,t){var i=this.getActiveObjects(),n=this._createGroup(e);this._hoveredTarget=n,this._setActiveObject(n,t),this._fireSelectionEvents(i,t)},_createGroup:function(e){var t=this._objects,i=t.indexOf(this._activeObject)<t.indexOf(e)?[this._activeObject,e]:[e,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new C.ActiveSelection(i,{canvas:this})},_groupSelectedObjects:function(e){var t,i=this._collectObjects(e);1===i.length?this.setActiveObject(i[0],e):i.length>1&&(t=new C.ActiveSelection(i.reverse(),{canvas:this}),this.setActiveObject(t,e))},_collectObjects:function(e){for(var t,i=[],n=this._groupSelector.ex,r=this._groupSelector.ey,o=n+this._groupSelector.left,a=r+this._groupSelector.top,s=new C.Point(_(n,o),_(r,a)),l=new C.Point(b(n,o),b(r,a)),c=!this.selectionFullyContained,h=n===o&&r===a,u=this._objects.length;u--&&!((t=this._objects[u])&&t.selectable&&t.visible&&(c&&t.intersectsWithRect(s,l,!0)||t.isContainedWithinRect(s,l,!0)||c&&t.containsPoint(s,null,!0)||c&&t.containsPoint(l,null,!0))&&(i.push(t),h)););return i.length>1&&(i=i.filter((function(t){return!t.onSelect({e:e})}))),i},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e),this.setCursor(this.defaultCursor),this._groupSelector=null}}),C.util.object.extend(C.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var t=e.format||"png",i=e.quality||1,n=(e.multiplier||1)*(e.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(n,e);return C.util.toDataURL(r,t,i)},toCanvasElement:function(e,t){e=e||1;var i=((t=t||{}).width||this.width)*e,n=(t.height||this.height)*e,r=this.getZoom(),o=this.width,a=this.height,s=r*e,l=this.viewportTransform,c=(l[4]-(t.left||0))*e,h=(l[5]-(t.top||0))*e,u=this.interactive,d=[s,0,0,s,c,h],f=this.enableRetinaScaling,p=C.util.createCanvasElement(),g=this.contextTop;return p.width=i,p.height=n,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=i,this.height=n,this.calcViewportBoundaries(),this.renderCanvas(p.getContext("2d"),this._objects),this.viewportTransform=l,this.width=o,this.height=a,this.calcViewportBoundaries(),this.interactive=u,this.enableRetinaScaling=f,this.contextTop=g,p}}),C.util.object.extend(C.StaticCanvas.prototype,{loadFromJSON:function(e,t,i){if(e){var n="string"==typeof e?JSON.parse(e):C.util.object.clone(e),r=this,o=n.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete n.clipPath,this._enlivenObjects(n.objects,(function(e){r.clear(),r._setBgOverlay(n,(function(){o?r._enlivenObjects([o],(function(i){r.clipPath=i[0],r.__setupCanvas.call(r,n,e,a,t)})):r.__setupCanvas.call(r,n,e,a,t)}))}),i),this}},__setupCanvas:function(e,t,i,n){var r=this;t.forEach((function(e,t){r.insertAt(e,t)})),this.renderOnAddRemove=i,delete e.objects,delete e.backgroundImage,delete e.overlayImage,delete e.background,delete e.overlay,this._setOptions(e),this.renderAll(),n&&n()},_setBgOverlay:function(e,t){var i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(e.backgroundImage||e.overlayImage||e.background||e.overlay){var n=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&t&&t()};this.__setBgOverlay("backgroundImage",e.backgroundImage,i,n),this.__setBgOverlay("overlayImage",e.overlayImage,i,n),this.__setBgOverlay("backgroundColor",e.background,i,n),this.__setBgOverlay("overlayColor",e.overlay,i,n)}else t&&t()},__setBgOverlay:function(e,t,i,n){var r=this;if(!t)return i[e]=!0,void(n&&n());"backgroundImage"===e||"overlayImage"===e?C.util.enlivenObjects([t],(function(t){r[e]=t[0],i[e]=!0,n&&n()})):this["set"+C.util.string.capitalize(e,!0)](t,(function(){i[e]=!0,n&&n()}))},_enlivenObjects:function(e,t,i){e&&0!==e.length?C.util.enlivenObjects(e,(function(e){t&&t(e)}),null,i):t&&t([])},_toDataURL:function(e,t){this.clone((function(i){t(i.toDataURL(e))}))},_toDataURLWithMultiplier:function(e,t,i){this.clone((function(n){i(n.toDataURLWithMultiplier(e,t))}))},clone:function(e,t){var i=JSON.stringify(this.toJSON(t));this.cloneWithoutData((function(t){t.loadFromJSON(i,(function(){e&&e(t)}))}))},cloneWithoutData:function(e){var t=C.util.createCanvasElement();t.width=this.width,t.height=this.height;var i=new C.Canvas(t);this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,(function(){i.renderAll(),e&&e(i)})),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):e&&e(i)}}),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.util.object.clone,r=t.util.toFixed,o=t.util.string.capitalize,a=t.util.degreesToRadians,s=!t.isLikelyNode;t.Object||(t.Object=t.util.createClass(t.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=t.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(e){var i=t.perfLimitSizeTotal,n=e.width,r=e.height,o=t.maxCacheSideLimit,a=t.minCacheSideLimit;if(n<=o&&r<=o&&n*r<=i)return n<a&&(e.width=a),r<a&&(e.height=a),e;var s=n/r,l=t.util.limitDimsByArea(s,i),c=t.util.capValue,h=c(a,l.x,o),u=c(a,l.y,o);return n>h&&(e.zoomX/=n/h,e.width=h,e.capped=!0),r>u&&(e.zoomY/=r/u,e.height=u,e.capped=!0),e},_getCacheCanvasDimensions:function(){var e=this.getTotalObjectScaling(),t=this._getTransformedDimensions(0,0),i=t.x*e.scaleX/this.scaleX,n=t.y*e.scaleY/this.scaleY;return{width:i+2,height:n+2,zoomX:e.scaleX,zoomY:e.scaleY,x:i,y:n}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var i=e._currentTransform.target,n=e._currentTransform.action;if(this===i&&n.slice&&"scale"===n.slice(0,5))return!1}var r,o,a=this._cacheCanvas,s=this._limitCacheSize(this._getCacheCanvasDimensions()),l=t.minCacheSideLimit,c=s.width,h=s.height,u=s.zoomX,d=s.zoomY,f=c!==this.cacheWidth||h!==this.cacheHeight,p=this.zoomX!==u||this.zoomY!==d,g=f||p,m=0,v=0,_=!1;if(f){var b=this._cacheCanvas.width,y=this._cacheCanvas.height,w=c>b||h>y;_=w||(c<.9*b||h<.9*y)&&b>l&&y>l,w&&!s.capped&&(c>l||h>l)&&(m=.1*c,v=.1*h)}return this instanceof t.Text&&this.path&&(g=!0,_=!0,m+=this.getHeightOfLine(0)*this.zoomX,v+=this.getHeightOfLine(0)*this.zoomY),!!g&&(_?(a.width=Math.ceil(c+m),a.height=Math.ceil(h+v)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,a.width,a.height)),r=s.x/2,o=s.y/2,this.cacheTranslationX=Math.round(a.width/2-r)+r,this.cacheTranslationY=Math.round(a.height/2-o)+o,this.cacheWidth=c,this.cacheHeight=h,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(u,d),this.zoomX=u,this.zoomY=d,!0)},setOptions:function(e){this._setOptions(e),this._initGradient(e.fill,"fill"),this._initGradient(e.stroke,"stroke"),this._initPattern(e.fill,"fill"),this._initPattern(e.stroke,"stroke")},transform:function(e){var t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,i=this.calcTransformMatrix(!t);e.transform(i[0],i[1],i[2],i[3],i[4],i[5])},toObject:function(e){var i=t.Object.NUM_FRACTION_DIGITS,n={type:this.type,version:t.version,originX:this.originX,originY:this.originY,left:r(this.left,i),top:r(this.top,i),width:r(this.width,i),height:r(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,i),scaleX:r(this.scaleX,i),scaleY:r(this.scaleY,i),angle:r(this.angle,i),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,i),skewY:r(this.skewY,i)};return this.clipPath&&!this.clipPath.excludeFromExport&&(n.clipPath=this.clipPath.toObject(e),n.clipPath.inverted=this.clipPath.inverted,n.clipPath.absolutePositioned=this.clipPath.absolutePositioned),t.util.populateWithProperties(this,n,e),this.includeDefaultValues||(n=this._removeDefaultValues(n)),n},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var i=t.util.getKlass(e.type).prototype;return i.stateProperties.forEach((function(t){"left"!==t&&"top"!==t&&(e[t]===i[t]&&delete e[t],Array.isArray(e[t])&&Array.isArray(i[t])&&0===e[t].length&&0===i[t].length&&delete e[t])})),e},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var e=t.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(e.scaleX),scaleY:Math.abs(e.scaleY)}},getTotalObjectScaling:function(){var e=this.getObjectScaling(),t=e.scaleX,i=e.scaleY;if(this.canvas){var n=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();t*=n*r,i*=n*r}return{scaleX:t,scaleY:i}},getObjectOpacity:function(){var e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e},_set:function(e,i){var n="scaleX"===e||"scaleY"===e,r=this[e]!==i,o=!1;return n&&(i=this._constrainScale(i)),"scaleX"===e&&i<0?(this.flipX=!this.flipX,i*=-1):"scaleY"===e&&i<0?(this.flipY=!this.flipY,i*=-1):"shadow"!==e||!i||i instanceof t.Shadow?"dirty"===e&&this.group&&this.group.set("dirty",i):i=new t.Shadow(i),this[e]=i,r&&(o=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(e)>-1?(this.dirty=!0,o&&this.group.set("dirty",!0)):o&&this.stateProperties.indexOf(e)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:t.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(e),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),e.restore())},renderCache:function(e){e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(e,i){if(e.save(),i.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",i.absolutePositioned){var n=t.util.invertTransform(this.calcTransformMatrix());e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}i.transform(e),e.scale(1/i.zoomX,1/i.zoomY),e.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),e.restore()},drawObject:function(e,t){var i=this.fill,n=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath),this.fill=i,this.stroke=n},_drawClipPath:function(e,t){t&&(t.canvas=this.canvas,t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e,t))},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!e&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!e){var t=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-i/2,t,i)}return!0}return!1},_renderBackground:function(e){if(this.backgroundColor){var t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,t){var i=t.stroke;i&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(e,i):(e.strokeStyle=i.toLive(e,this),this._applyPatternGradientTransform(e,i)):e.strokeStyle=t.stroke)},_setFillStyles:function(e,t){var i=t.fill;i&&(i.toLive?(e.fillStyle=i.toLive(e,this),this._applyPatternGradientTransform(e,t.fill)):e.fillStyle=i)},_setClippingProperties:function(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"},_setLineDash:function(e,t){t&&0!==t.length&&(1&t.length&&t.push.apply(t,t),e.setLineDash(t))},_renderControls:function(e,i){var n,r,o,s=this.getViewportTransform(),l=this.calcTransformMatrix();r=void 0!==(i=i||{}).hasBorders?i.hasBorders:this.hasBorders,o=void 0!==i.hasControls?i.hasControls:this.hasControls,l=t.util.multiplyTransformMatrices(s,l),n=t.util.qrDecompose(l),e.save(),e.translate(n.translateX,n.translateY),e.lineWidth=1*this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(n.angle-=180),e.rotate(a(this.group?n.angle:this.angle)),i.forActiveSelection||this.group?r&&this.drawBordersInGroup(e,n,i):r&&this.drawBorders(e,i),o&&this.drawControls(e,i),e.restore()},_setShadow:function(e){if(this.shadow){var i,n=this.shadow,r=this.canvas,o=r&&r.viewportTransform[0]||1,a=r&&r.viewportTransform[3]||1;i=n.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(o*=t.devicePixelRatio,a*=t.devicePixelRatio),e.shadowColor=n.color,e.shadowBlur=n.blur*t.browserShadowBlurConstant*(o+a)*(i.scaleX+i.scaleY)/4,e.shadowOffsetX=n.offsetX*o*i.scaleX,e.shadowOffsetY=n.offsetY*a*i.scaleY}},_removeShadow:function(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var i=t.gradientTransform||t.patternTransform,n=-this.width/2+t.offsetX||0,r=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,n,r):e.transform(1,0,0,1,n,r),i&&e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:n,offsetY:r}},_renderPaintInOrder:function(e){"stroke"===this.paintFirst?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))},_render:function(){},_renderFill:function(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())},_renderStroke:function(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform&&this.group){var t=this.getObjectScaling();e.scale(1/t.scaleX,1/t.scaleY)}else this.strokeUniform&&e.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}},_applyPatternForTransformedGradient:function(e,i){var n,r=this._limitCacheSize(this._getCacheCanvasDimensions()),o=t.util.createCanvasElement(),a=this.canvas.getRetinaScaling(),s=r.x/this.scaleX/a,l=r.y/this.scaleY/a;o.width=s,o.height=l,(n=o.getContext("2d")).beginPath(),n.moveTo(0,0),n.lineTo(s,0),n.lineTo(s,l),n.lineTo(0,l),n.closePath(),n.translate(s/2,l/2),n.scale(r.zoomX/this.scaleX/a,r.zoomY/this.scaleY/a),this._applyPatternGradientTransform(n,i),n.fillStyle=i.toLive(e),n.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/r.zoomX,a*this.scaleY/r.zoomY),e.strokeStyle=n.createPattern(o,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var e=t.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",e.scaleX),this.set("scaleY",e.scaleY),this.angle=e.angle,this.skewX=e.skewX,this.skewY=0}},_removeTransformMatrix:function(e){var i=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),i=t.util.transformPoint(i,this.transformMatrix)),this.transformMatrix=null,e&&(this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this.cropX=e.cropX,this.cropY=e.cropY,i.x+=e.offsetLeft,i.y+=e.offsetTop,this.width=e.width,this.height=e.height),this.setPositionByOrigin(i,"center","center")},clone:function(e,i){var n=this.toObject(i);this.constructor.fromObject?this.constructor.fromObject(n,e):t.Object._fromObject("Object",n,e)},cloneAsImage:function(e,i){var n=this.toCanvasElement(i);return e&&e(new t.Image(n)),this},toCanvasElement:function(e){e||(e={});var i=t.util,n=i.saveObjectTransform(this),r=this.group,o=this.shadow,a=Math.abs,s=(e.multiplier||1)*(e.enableRetinaScaling?t.devicePixelRatio:1);delete this.group,e.withoutTransform&&i.resetObjectTransform(this),e.withoutShadow&&(this.shadow=null);var l,c,h,u,d=t.util.createCanvasElement(),f=this.getBoundingRect(!0,!0),p=this.shadow,g={x:0,y:0};p&&(c=p.blur,l=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(a(p.offsetX)+c)*a(l.scaleX),g.y=2*Math.round(a(p.offsetY)+c)*a(l.scaleY)),h=f.width+g.x,u=f.height+g.y,d.width=Math.ceil(h),d.height=Math.ceil(u);var m=new t.StaticCanvas(d,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===e.format&&(m.backgroundColor="#fff"),this.setPositionByOrigin(new t.Point(m.width/2,m.height/2),"center","center");var v=this.canvas;m.add(this);var _=m.toCanvasElement(s||1,e);return this.shadow=o,this.set("canvas",v),r&&(this.group=r),this.set(n).setCoords(),m._objects=[],m.dispose(),m=null,_},toDataURL:function(e){return e||(e={}),t.util.toDataURL(this.toCanvasElement(e),e.format||"png",e.quality||1)},isType:function(e){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},rotate:function(e){var t=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(e,i){i=i||this.canvas.getPointer(e);var n=new t.Point(i.x,i.y),r=this._getLeftTopCoords();return this.angle&&(n=t.util.rotatePoint(n,r,a(-this.angle))),{x:n.x-r.x,y:n.y-r.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){t.runningAnimations&&t.runningAnimations.cancelByTarget(this)}}),t.util.createAccessors&&t.util.createAccessors(t.Object),i(t.Object.prototype,t.Observable),t.Object.NUM_FRACTION_DIGITS=2,t.Object.ENLIVEN_PROPS=["clipPath"],t.Object._fromObject=function(e,i,r,o){var a=t[e];i=n(i,!0),t.util.enlivenPatterns([i.fill,i.stroke],(function(e){void 0!==e[0]&&(i.fill=e[0]),void 0!==e[1]&&(i.stroke=e[1]),t.util.enlivenObjectEnlivables(i,i,(function(){var e=o?new a(i[o],i):new a(i);r&&r(e)}))}))},t.Object.__uid=0)}(t),y=C.util.degreesToRadians,w={left:-.5,center:0,right:.5},x={top:-.5,center:0,bottom:.5},C.util.object.extend(C.Object.prototype,{translateToGivenOrigin:function(e,t,i,n,r){var o,a,s,l=e.x,c=e.y;return"string"==typeof t?t=w[t]:t-=.5,"string"==typeof n?n=w[n]:n-=.5,"string"==typeof i?i=x[i]:i-=.5,"string"==typeof r?r=x[r]:r-=.5,a=r-i,((o=n-t)||a)&&(s=this._getTransformedDimensions(),l=e.x+o*s.x,c=e.y+a*s.y),new C.Point(l,c)},translateToCenterPoint:function(e,t,i){var n=this.translateToGivenOrigin(e,t,i,"center","center");return this.angle?C.util.rotatePoint(n,e,y(this.angle)):n},translateToOriginPoint:function(e,t,i){var n=this.translateToGivenOrigin(e,"center","center",t,i);return this.angle?C.util.rotatePoint(n,e,y(this.angle)):n},getCenterPoint:function(){var e=new C.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var i=this.getCenterPoint();return this.translateToOriginPoint(i,e,t)},toLocalPoint:function(e,t,i){var n,r,o=this.getCenterPoint();return n=void 0!==t&&void 0!==i?this.translateToGivenOrigin(o,"center","center",t,i):new C.Point(this.left,this.top),r=new C.Point(e.x,e.y),this.angle&&(r=C.util.rotatePoint(r,o,-y(this.angle))),r.subtractEquals(n)},setPositionByOrigin:function(e,t,i){var n=this.translateToCenterPoint(e,t,i),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(e){var t,i,n=y(this.angle),r=this.getScaledWidth(),o=C.util.cos(n)*r,a=C.util.sin(n)*r;t="string"==typeof this.originX?w[this.originX]:this.originX-.5,i="string"==typeof e?w[e]:e-.5,this.left+=o*(i-t),this.top+=a*(i-t),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),function(){var e=C.util,t=e.degreesToRadians,i=e.multiplyTransformMatrices,n=e.transformPoint;e.object.extend(C.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(e,t){return t?e?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),e?this.aCoords:this.lineCoords)},getCoords:function(e,t){return i=this._getCoords(e,t),[new C.Point(i.tl.x,i.tl.y),new C.Point(i.tr.x,i.tr.y),new C.Point(i.br.x,i.br.y),new C.Point(i.bl.x,i.bl.y)];var i},intersectsWithRect:function(e,t,i,n){var r=this.getCoords(i,n);return"Intersection"===C.Intersection.intersectPolygonRectangle(r,e,t).status},intersectsWithObject:function(e,t,i){return"Intersection"===C.Intersection.intersectPolygonPolygon(this.getCoords(t,i),e.getCoords(t,i)).status||e.isContainedWithinObject(this,t,i)||this.isContainedWithinObject(e,t,i)},isContainedWithinObject:function(e,t,i){for(var n=this.getCoords(t,i),r=t?e.aCoords:e.lineCoords,o=0,a=e._getImageLines(r);o<4;o++)if(!e.containsPoint(n[o],a))return!1;return!0},isContainedWithinRect:function(e,t,i,n){var r=this.getBoundingRect(i,n);return r.left>=e.x&&r.left+r.width<=t.x&&r.top>=e.y&&r.top+r.height<=t.y},containsPoint:function(e,t,i,n){var r=this._getCoords(i,n),o=(t=t||this._getImageLines(r),this._findCrossPoints(e,t));return 0!==o&&o%2==1},isOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.getCoords(!0,e).some((function(e){return e.x<=i.x&&e.x>=t.x&&e.y<=i.y&&e.y>=t.y}))||!!this.intersectsWithRect(t,i,!0,e)||this._containsCenterOfCanvas(t,i,e)},_containsCenterOfCanvas:function(e,t,i){var n={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return!!this.containsPoint(n,null,!0,i)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(t,i,!0,e)||this.getCoords(!0,e).every((function(e){return(e.x>=i.x||e.x<=t.x)&&(e.y>=i.y||e.y<=t.y)}))&&this._containsCenterOfCanvas(t,i,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var i,n,r,o=0;for(var a in t)if(!((r=t[a]).o.y<e.y&&r.d.y<e.y||r.o.y>=e.y&&r.d.y>=e.y||(r.o.x===r.d.x&&r.o.x>=e.x?n=r.o.x:(i=(r.d.y-r.o.y)/(r.d.x-r.o.x),n=-(e.y-0*e.x-(r.o.y-i*r.o.x))/(0-i)),n>=e.x&&(o+=1),2!==o)))break;return o},getBoundingRect:function(t,i){var n=this.getCoords(t,i);return e.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,t){var i=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(e/this.width/i)},scaleToHeight:function(e,t){var i=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(e/this.height/i)},calcLineCoords:function(){var i=this.getViewportTransform(),r=this.padding,o=t(this.angle),a=e.cos(o)*r,s=e.sin(o)*r,l=a+s,c=a-s,h=this.calcACoords(),u={tl:n(h.tl,i),tr:n(h.tr,i),bl:n(h.bl,i),br:n(h.br,i)};return r&&(u.tl.x-=c,u.tl.y-=l,u.tr.x+=l,u.tr.y-=c,u.bl.x-=l,u.bl.y+=c,u.br.x+=c,u.br.y+=l),u},calcOCoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),n=this.getViewportTransform(),r=i(n,t),o=i(r,e),a=(o=i(o,[1/n[0],0,0,1/n[3],0,0]),this._calculateCurrentDimensions()),s={};return this.forEachControl((function(e,t,i){s[t]=e.positionHandler(a,o,i)})),s},calcACoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),r=i(t,e),o=this._getTransformedDimensions(),a=o.x/2,s=o.y/2;return{tl:n({x:-a,y:-s},r),tr:n({x:a,y:-s},r),bl:n({x:-a,y:s},r),br:n({x:a,y:s},r)}},setCoords:function(e){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),e||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var t="_",i="";return!e&&this.group&&(i=this.group.transformMatrixKey(e)+t),i+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){var t=this.calcOwnMatrix();if(e||!this.group)return t;var n=this.transformMatrixKey(e),r=this.matrixCache||(this.matrixCache={});return r.key===n?r.value:(this.group&&(t=i(this.group.calcTransformMatrix(!1),t)),r.key=n,r.value=t,t)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===t)return i.value;var n=this._calcTranslateMatrix(),r={angle:this.angle,translateX:n[4],translateY:n[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=t,i.value=e.composeMatrix(r),i.value},_getNonTransformedDimensions:function(){var e=this.strokeWidth;return{x:this.width+e,y:this.height+e}},_getTransformedDimensions:function(t,i){void 0===t&&(t=this.skewX),void 0===i&&(i=this.skewY);var n,r,o,a=0===t&&0===i;if(this.strokeUniform?(r=this.width,o=this.height):(r=(n=this._getNonTransformedDimensions()).x,o=n.y),a)return this._finalizeDimensions(r*this.scaleX,o*this.scaleY);var s=e.sizeAfterTransform(r,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:i});return this._finalizeDimensions(s.x,s.y)},_finalizeDimensions:function(e,t){return this.strokeUniform?{x:e+this.strokeWidth,y:t+this.strokeWidth}:{x:e,y:t}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),t=this._getTransformedDimensions();return n(t,e,!0).scalarAdd(2*this.padding)}})}(),C.util.object.extend(C.Object.prototype,{sendToBack:function(){return this.group?C.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?C.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?C.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas&&this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?C.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas&&this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group&&"activeSelection"!==this.group.type?C.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas&&this.canvas.moveTo(this,e),this}}),function(){function e(e,t){if(t){if(t.toLive)return e+": url(#SVGID_"+t.id+"); ";var i=new C.Color(t),n=e+": "+i.toRgb()+"; ",r=i.getAlpha();return 1!==r&&(n+=e+"-opacity: "+r.toString()+"; "),n}return e+": none; "}var t=C.util.toFixed;C.util.object.extend(C.Object.prototype,{getSvgStyles:function(t){var i=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=void 0!==this.opacity?this.opacity:"1",h=this.visible?"":" visibility: hidden;",u=t?"":this.getSvgFilter(),d=e("fill",this.fill);return[e("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",i,"; ","opacity: ",c,";",u,h].join("")},getSvgSpanStyles:function(t,i){var n="; ",r=t.fontFamily?"font-family: "+(-1===t.fontFamily.indexOf("'")&&-1===t.fontFamily.indexOf('"')?"'"+t.fontFamily+"'":t.fontFamily)+n:"",o=t.strokeWidth?"stroke-width: "+t.strokeWidth+n:"",a=t.fontSize?"font-size: "+t.fontSize+"px"+n:"",s=t.fontStyle?"font-style: "+t.fontStyle+n:"",l=t.fontWeight?"font-weight: "+t.fontWeight+n:"",c=t.fill?e("fill",t.fill):"",h=t.stroke?e("stroke",t.stroke):"",u=this.getSvgTextDecoration(t);return u&&(u="text-decoration: "+u+n),[h,o,r,a,s,l,u,c,t.deltaY?"baseline-shift: "+-t.deltaY+"; ":"",i?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){return["overline","underline","line-through"].filter((function(t){return e[t.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(e,t){var i=e?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+C.util.matrixToSVG(i)+(t||"")+'" '},_setSVGBg:function(e){if(this.backgroundColor){var i=C.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',t(-this.width/2,i),'" y="',t(-this.height/2,i),'" width="',t(this.width,i),'" height="',t(this.height,i),'"></rect>\n')}},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})},toClipPathSVG:function(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})},_createBaseClipPathSVGMarkup:function(e,t){var i=(t=t||{}).reviver,n=t.additionalTransform||"",r=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=e.indexOf("COMMON_PARTS");return e[o]=r,i?i(e.join("")):e.join("")},_createBaseSVGMarkup:function(e,t){var i,n,r=(t=t||{}).noStyle,o=t.reviver,a=r?"":'style="'+this.getSvgStyles()+'" ',s=t.withShadow?'style="'+this.getSvgFilter()+'" ':"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=l&&l.absolutePositioned,u=this.stroke,d=this.fill,f=this.shadow,p=[],g=e.indexOf("COMMON_PARTS"),m=t.additionalTransform;return l&&(l.clipPathId="CLIPPATH_"+C.Object.__uid++,n='<clipPath id="'+l.clipPathId+'" >\n'+l.toClipPathSVG(o)+"</clipPath>\n"),h&&p.push("<g ",s,this.getSvgCommons()," >\n"),p.push("<g ",this.getSvgTransform(!1),h?"":s+this.getSvgCommons()," >\n"),i=[a,c,r?"":this.addPaintOrder()," ",m?'transform="'+m+'" ':""].join(""),e[g]=i,d&&d.toLive&&p.push(d.toSVG(this)),u&&u.toLive&&p.push(u.toSVG(this)),f&&p.push(f.toSVG(this)),l&&p.push(n),p.push(e.join("")),p.push("</g>\n"),h&&p.push("</g>\n"),o?o(p.join("")):p.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var e=C.util.object.extend,t="stateProperties";function i(t,i,n){var r={};n.forEach((function(e){r[e]=t[e]})),e(t[i],r,!0)}function n(e,t,i){if(e===t)return!0;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0,o=e.length;r<o;r++)if(!n(e[r],t[r]))return!1;return!0}if(e&&"object"==typeof e){var a,s=Object.keys(e);if(!t||"object"!=typeof t||!i&&s.length!==Object.keys(t).length)return!1;for(r=0,o=s.length;r<o;r++)if("canvas"!==(a=s[r])&&"group"!==a&&!n(e[a],t[a]))return!1;return!0}}C.util.object.extend(C.Object.prototype,{hasStateChanged:function(e){var i="_"+(e=e||t);return Object.keys(this[i]).length<this[e].length||!n(this[i],this,!0)},saveState:function(e){var n=e&&e.propertySet||t,r="_"+n;return this[r]?(i(this,r,this[n]),e&&e.stateProperties&&i(this,r,e.stateProperties),this):this.setupState(e)},setupState:function(e){var i=(e=e||{}).propertySet||t;return e.propertySet=i,this["_"+i]={},this.saveState(e),this}})}(),function(){var e=C.util.degreesToRadians;C.util.object.extend(C.Object.prototype,{_findTargetCorner:function(e,t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var i,n,r,o=e.x,a=e.y,s=Object.keys(this.oCoords),l=s.length-1;for(this.__corner=0;l>=0;l--)if(r=s[l],this.isControlVisible(r)&&(n=this._getImageLines(t?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(i=this._findCrossPoints({x:o,y:a},n))&&i%2==1))return this.__corner=r,r;return!1},forEachControl:function(e){for(var t in this.controls)e(this.controls[t],t,this)},_setCornerCoords:function(){var e=this.oCoords;for(var t in e){var i=this.controls[t];e[t].corner=i.calcCornerCoords(this.angle,this.cornerSize,e[t].x,e[t].y,!1),e[t].touchCorner=i.calcCornerCoords(this.angle,this.touchCornerSize,e[t].x,e[t].y,!0)}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();var i=this.getCenterPoint(),n=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return t.translate(i.x,i.y),t.scale(1/r[0],1/r[3]),t.rotate(e(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),t.restore(),this},drawBorders:function(e,t){t=t||{};var i=this._calculateCurrentDimensions(),n=this.borderScaleFactor,r=i.x+n,o=i.y+n,a=void 0!==t.hasControls?t.hasControls:this.hasControls,s=!1;return e.save(),e.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(e,t.borderDashArray||this.borderDashArray),e.strokeRect(-r/2,-o/2,r,o),a&&(e.beginPath(),this.forEachControl((function(t,i,n){t.withConnection&&t.getVisibility(n,i)&&(s=!0,e.moveTo(t.x*r,t.y*o),e.lineTo(t.x*r+t.offsetX,t.y*o+t.offsetY))})),s&&e.stroke()),e.restore(),this},drawBordersInGroup:function(e,t,i){i=i||{};var n=C.util.sizeAfterTransform(this.width,this.height,t),r=this.strokeWidth,o=this.strokeUniform,a=this.borderScaleFactor,s=n.x+r*(o?this.canvas.getZoom():t.scaleX)+a,l=n.y+r*(o?this.canvas.getZoom():t.scaleY)+a;return e.save(),this._setLineDash(e,i.borderDashArray||this.borderDashArray),e.strokeStyle=i.borderColor||this.borderColor,e.strokeRect(-s/2,-l/2,s,l),e.restore(),this},drawControls:function(e,t){t=t||{},e.save();var i,n,r=this.canvas.getRetinaScaling();return e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=t.cornerColor||this.cornerColor,this.transparentCorners||(e.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(e,t.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(i=this.group.calcTransformMatrix()),this.forEachControl((function(r,o,a){n=a.oCoords[o],r.getVisibility(a,o)&&(i&&(n=C.util.transformPoint(n,i)),r.render(e,n.x,n.y,t,a))})),e.restore(),this},isControlVisible:function(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)},setControlVisible:function(e,t){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t,this},setControlsVisibility:function(e){for(var t in e||(e={}),e)this.setControlVisible(t,e[t]);return this},onDeselect:function(){},onSelect:function(){}})}(),C.util.object.extend(C.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return C.util.animate({target:this,startValue:e.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),o.requestRenderAll(),r()},onComplete:function(){e.setCoords(),n()}})},fxCenterObjectV:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return C.util.animate({target:this,startValue:e.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),o.requestRenderAll(),r()},onComplete:function(){e.setCoords(),n()}})},fxRemove:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return C.util.animate({target:this,startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),o.requestRenderAll(),r()},onComplete:function(){o.remove(e),n()}})}}),C.util.object.extend(C.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var e,t,i=[],n=[];for(e in arguments[0])i.push(e);for(var r=0,o=i.length;r<o;r++)e=i[r],t=r!==o-1,n.push(this._animate(e,arguments[0][e],arguments[1],t));return n}return this._animate.apply(this,arguments)},_animate:function(e,t,i,n){var r,o=this;t=t.toString(),i=i?C.util.object.clone(i):{},~e.indexOf(".")&&(r=e.split("."));var a=o.colorProperties.indexOf(e)>-1||r&&o.colorProperties.indexOf(r[1])>-1,s=r?this.get(r[0])[r[1]]:this.get(e);"from"in i||(i.from=s),a||(t=~t.indexOf("=")?s+parseFloat(t.replace("=","")):parseFloat(t));var l={target:this,startValue:i.from,endValue:t,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(e,t,n){return i.abort.call(o,e,t,n)},onChange:function(t,a,s){r?o[r[0]][r[1]]=t:o.set(e,t),n||i.onChange&&i.onChange(t,a,s)},onComplete:function(e,t,r){n||(o.setCoords(),i.onComplete&&i.onComplete(e,t,r))}};return a?C.util.animateColor(l.startValue,l.endValue,l.duration,l):C.util.animate(l)}}),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};function o(e,t){var i=e.origin,n=e.axis1,r=e.axis2,o=e.dimension,a=t.nearest,s=t.center,l=t.farthest;return function(){switch(this.get(i)){case a:return Math.min(this.get(n),this.get(r));case s:return Math.min(this.get(n),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(n),this.get(r))}}}t.Line?t.warn("fabric.Line is already defined"):(t.Line=t.util.createClass(t.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:t.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,t){e||(e=[0,0,0,0]),this.callSuper("initialize",t),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(t)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,t){return this.callSuper("_set",e,t),void 0!==r[e]&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();var t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;var i=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=i},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return i(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,t=this.y1<=this.y2?-1:1,i=e*this.width*.5,n=t*this.height*.5;return{x1:i,x2:e*this.width*-.5,y1:n,y2:t*this.height*-.5}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}}),t.Line.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),t.Line.fromElement=function(e,n,r){r=r||{};var o=t.parseAttributes(e,t.Line.ATTRIBUTE_NAMES),a=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];n(new t.Line(a,i(o,r)))},t.Line.fromObject=function(e,i){var r=n(e,!0);r.points=[e.x1,e.y1,e.x2,e.y2],t.Object._fromObject("Line",r,(function(e){delete e.points,i&&i(e)}),"points")})}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.degreesToRadians;t.Circle?t.warn("fabric.Circle is already defined."):(t.Circle=t.util.createClass(t.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:t.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,t){return this.callSuper("_set",e,t),"radius"===e&&this.setRadius(t),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,n=(this.endAngle-this.startAngle)%360;if(0===n)e=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var r=i(this.startAngle),o=i(this.endAngle),a=this.radius;e=['<path d="M '+t.util.cos(r)*a+" "+t.util.sin(r)*a," A "+a+" "+a," 0 ",+(n>180?"1":"0")+" 1"," "+t.util.cos(o)*a+" "+t.util.sin(o)*a,'" ',"COMMON_PARTS"," />\n"]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,i(this.startAngle),i(this.endAngle),!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",2*e).set("height",2*e)}}),t.Circle.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),t.Circle.fromElement=function(e,i){var n,r=t.parseAttributes(e,t.Circle.ATTRIBUTE_NAMES);if(!("radius"in(n=r)&&n.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,i(new t.Circle(r))},t.Circle.fromObject=function(e,i){t.Object._fromObject("Circle",e,i)})}(t),function(e){var t=e.fabric||(e.fabric={});t.Triangle?t.warn("fabric.Triangle is already defined"):(t.Triangle=t.util.createClass(t.Object,{type:"triangle",width:100,height:100,_render:function(e){var t=this.width/2,i=this.height/2;e.beginPath(),e.moveTo(-t,i),e.lineTo(0,-i),e.lineTo(t,i),e.closePath(),this._renderPaintInOrder(e)},_toSVG:function(){var e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-e+" "+t,"0 "+-t,e+" "+t].join(","),'" />']}}),t.Triangle.fromObject=function(e,i){return t.Object._fromObject("Triangle",e,i)})}(t),function(e){var t=e.fabric||(e.fabric={}),i=2*Math.PI;t.Ellipse?t.warn("fabric.Ellipse is already defined."):(t.Ellipse=t.util.createClass(t.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this.set("rx",e&&e.rx||0),this.set("ry",e&&e.ry||0)},_set:function(e,t){switch(this.callSuper("_set",e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,i,!1),e.restore(),this._renderPaintInOrder(e)}}),t.Ellipse.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),t.Ellipse.fromElement=function(e,i){var n=t.parseAttributes(e,t.Ellipse.ATTRIBUTE_NAMES);n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,i(new t.Ellipse(n))},t.Ellipse.fromObject=function(e,i){t.Object._fromObject("Ellipse",e,i)})}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend;t.Rect?t.warn("fabric.Rect is already defined"):(t.Rect=t.util.createClass(t.Object,{stateProperties:t.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){var t=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,r=this.height,o=-this.width/2,a=-this.height/2,s=0!==t||0!==i,l=.4477152502;e.beginPath(),e.moveTo(o+t,a),e.lineTo(o+n-t,a),s&&e.bezierCurveTo(o+n-l*t,a,o+n,a+l*i,o+n,a+i),e.lineTo(o+n,a+r-i),s&&e.bezierCurveTo(o+n,a+r-l*i,o+n-l*t,a+r,o+n-t,a+r),e.lineTo(o+t,a+r),s&&e.bezierCurveTo(o+l*t,a+r,o,a+r-l*i,o,a+r-i),e.lineTo(o,a+i),s&&e.bezierCurveTo(o,a+l*i,o+l*t,a,o+t,a),e.closePath(),this._renderPaintInOrder(e)},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),t.Rect.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),t.Rect.fromElement=function(e,n,r){if(!e)return n(null);r=r||{};var o=t.parseAttributes(e,t.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var a=new t.Rect(i(r?t.util.object.clone(r):{},o));a.visible=a.visible&&a.width>0&&a.height>0,n(a)},t.Rect.fromObject=function(e,i){return t.Object._fromObject("Rect",e,i)})}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.util.array.min,r=t.util.array.max,o=t.util.toFixed,a=t.util.projectStrokeOnPoints;t.Polyline?t.warn("fabric.Polyline is already defined"):(t.Polyline=t.util.createClass(t.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:t.Object.prototype.cacheProperties.concat("points"),initialize:function(e,t){t=t||{},this.points=e||[],this.callSuper("initialize",t),this._setPositionDimensions(t)},_projectStrokeOnPoints:function(){return a(this.points,this,!0)},_setPositionDimensions:function(e){var t,i=this._calcDimensions(e),n=this.exactBoundingBox?this.strokeWidth:0;this.width=i.width-n,this.height=i.height-n,e.fromSVG||(t=this.translateToGivenOrigin({x:i.left-this.strokeWidth/2+n/2,y:i.top-this.strokeWidth/2+n/2},"left","top",this.originX,this.originY)),void 0===e.left&&(this.left=e.fromSVG?i.left:t.x),void 0===e.top&&(this.top=e.fromSVG?i.top:t.y),this.pathOffset={x:i.left+this.width/2+n/2,y:i.top+this.height/2+n/2}},_calcDimensions:function(){var e=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,t=n(e,"x")||0,i=n(e,"y")||0;return{left:t,top:i,width:(r(e,"x")||0)-t,height:(r(e,"y")||0)-i}},toObject:function(e){return i(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){for(var e=[],i=this.pathOffset.x,n=this.pathOffset.y,r=t.Object.NUM_FRACTION_DIGITS,a=0,s=this.points.length;a<s;a++)e.push(o(this.points[a].x-i,r),",",o(this.points[a].y-n,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),'" />\n']},commonRender:function(e){var t,i=this.points.length,n=this.pathOffset.x,r=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-r);for(var o=0;o<i;o++)t=this.points[o],e.lineTo(t.x-n,t.y-r);return!0},_render:function(e){this.commonRender(e)&&this._renderPaintInOrder(e)},complexity:function(){return this.get("points").length}}),t.Polyline.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polyline.fromElementGenerator=function(e){return function(n,r,o){if(!n)return r(null);o||(o={});var a=t.parsePointsAttribute(n.getAttribute("points")),s=t.parseAttributes(n,t[e].ATTRIBUTE_NAMES);s.fromSVG=!0,r(new t[e](a,i(s,o)))}},t.Polyline.fromElement=t.Polyline.fromElementGenerator("Polyline"),t.Polyline.fromObject=function(e,i){return t.Object._fromObject("Polyline",e,i,"points")})}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.projectStrokeOnPoints;t.Polygon?t.warn("fabric.Polygon is already defined"):(t.Polygon=t.util.createClass(t.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return i(this.points,this)},_render:function(e){this.commonRender(e)&&(e.closePath(),this._renderPaintInOrder(e))}}),t.Polygon.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polygon.fromElement=t.Polyline.fromElementGenerator("Polygon"),t.Polygon.fromObject=function(e,i){t.Object._fromObject("Polygon",e,i,"points")})}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.array.min,n=t.util.array.max,r=t.util.object.extend,o=t.util.object.clone,a=t.util.toFixed;t.Path?t.warn("fabric.Path is already defined"):(t.Path=t.util.createClass(t.Object,{type:"path",path:null,cacheProperties:t.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:t.Object.prototype.stateProperties.concat("path"),initialize:function(e,t){delete(t=o(t||{})).path,this.callSuper("initialize",t),this._setPath(e||[],t)},_setPath:function(e,i){this.path=t.util.makePathSimpler(Array.isArray(e)?e:t.util.parsePath(e)),t.Polyline.prototype._setPositionDimensions.call(this,i||{})},_renderPathCommands:function(e){var t,i=0,n=0,r=0,o=0,a=0,s=0,l=-this.pathOffset.x,c=-this.pathOffset.y;e.beginPath();for(var h=0,u=this.path.length;h<u;++h)switch((t=this.path[h])[0]){case"L":r=t[1],o=t[2],e.lineTo(r+l,o+c);break;case"M":i=r=t[1],n=o=t[2],e.moveTo(r+l,o+c);break;case"C":r=t[5],o=t[6],a=t[3],s=t[4],e.bezierCurveTo(t[1]+l,t[2]+c,a+l,s+c,r+l,o+c);break;case"Q":e.quadraticCurveTo(t[1]+l,t[2]+c,t[3]+l,t[4]+c),r=t[3],o=t[4],a=t[1],s=t[2];break;case"z":case"Z":r=i,o=n,e.closePath()}},_render:function(e){this._renderPathCommands(e),this._renderPaintInOrder(e)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){return r(this.callSuper("toObject",e),{path:this.path.map((function(e){return e.slice()}))})},toDatalessObject:function(e){var t=this.toObject(["sourcePath"].concat(e));return t.sourcePath&&delete t.path,t},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',t.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var e=t.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,e)+", "+a(-this.pathOffset.y,e)+")"},toClipPathSVG:function(e){var t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},toSVG:function(e){var t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var e,r,o=[],a=[],s=0,l=0,c=0,h=0,u=0,d=this.path.length;u<d;++u){switch((e=this.path[u])[0]){case"L":c=e[1],h=e[2],r=[];break;case"M":s=c=e[1],l=h=e[2],r=[];break;case"C":r=t.util.getBoundsOfCurve(c,h,e[1],e[2],e[3],e[4],e[5],e[6]),c=e[5],h=e[6];break;case"Q":r=t.util.getBoundsOfCurve(c,h,e[1],e[2],e[1],e[2],e[3],e[4]),c=e[3],h=e[4];break;case"z":case"Z":c=s,h=l}r.forEach((function(e){o.push(e.x),a.push(e.y)})),o.push(c),a.push(h)}var f=i(o)||0,p=i(a)||0;return{left:f,top:p,width:(n(o)||0)-f,height:(n(a)||0)-p}}}),t.Path.fromObject=function(e,i){if("string"==typeof e.sourcePath){var n=e.sourcePath;t.loadSVGFromURL(n,(function(t){var n=t[0];n.setOptions(e),i&&i(n)}))}else t.Object._fromObject("Path",e,i,"path")},t.Path.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(["d"]),t.Path.fromElement=function(e,i,n){var o=t.parseAttributes(e,t.Path.ATTRIBUTE_NAMES);o.fromSVG=!0,i(new t.Path(o.d,r(o,n)))})}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.array.min,n=t.util.array.max;t.Group||(t.Group=t.util.createClass(t.Object,t.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,t,i){t=t||{},this._objects=[],i&&this.callSuper("initialize",t),this._objects=e||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;if(i)this._updateObjectsACoords();else{var r=t&&t.centerPoint;void 0!==t.originX&&(this.originX=t.originX),void 0!==t.originY&&(this.originY=t.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete t.centerPoint,this.callSuper("initialize",t)}this.setCoords()},_updateObjectsACoords:function(){for(var e=this._objects.length;e--;)this._objects[e].setCoords(!0)},_updateObjectsCoords:function(e){e=e||this.getCenterPoint();for(var t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],e)},_updateObjectCoords:function(e,t){var i=e.left,n=e.top;e.set({left:i-t.x,top:n-t.y}),e.group=this,e.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var i=!!this.group;return this._restoreObjectsState(),t.util.resetObjectTransform(this),e&&(i&&t.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,i?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),t.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,i){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(e,i);if("canvas"===e)for(;n--;)this._objects[n]._set(e,i);t.Object.prototype._set.call(this,e,i)},toObject:function(e){var i=this.includeDefaultValues,n=this._objects.filter((function(e){return!e.excludeFromExport})).map((function(t){var n=t.includeDefaultValues;t.includeDefaultValues=i;var r=t.toObject(e);return t.includeDefaultValues=n,r})),r=t.Object.prototype.toObject.call(this,e);return r.objects=n,r},toDatalessObject:function(e){var i,n=this.sourcePath;if(n)i=n;else{var r=this.includeDefaultValues;i=this._objects.map((function(t){var i=t.includeDefaultValues;t.includeDefaultValues=r;var n=t.toDatalessObject(e);return t.includeDefaultValues=i,n}))}var o=t.Object.prototype.toDatalessObject.call(this,e);return o.objects=i,o},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=t.Object.prototype.shouldCache.call(this);if(e)for(var i=0,n=this._objects.length;i<n;i++)if(this._objects[i].willDrawShadow())return this.ownCaching=!1,!1;return e},willDrawShadow:function(){if(t.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var t=0,i=this._objects.length;t<i;t++)this._objects[t].render(e);this._drawClipPath(e,this.clipPath)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var t=0,i=this._objects.length;t<i;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var n=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-n/2,-r/2,n,r)}return!0}return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach((function(i){t.util.addTransformToObject(i,e),delete i.group,i.setCoords()})),this},destroy:function(){return this._objects.forEach((function(e){e.set("dirty",!0)})),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[]},toActiveSelection:function(){if(this.canvas){var e=this._objects,i=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var r=new t.ActiveSelection([]);return r.set(n),r.type="activeSelection",i.remove(this),e.forEach((function(e){e.group=r,e.dirty=!0,i.add(e)})),r.canvas=i,r._objects=e,i._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(e){e.setCoords(!0)})),this},_calcBounds:function(e){for(var t,i,n,r,o=[],a=[],s=["tr","br","bl","tl"],l=0,c=this._objects.length,h=s.length;l<c;++l){for(n=(t=this._objects[l]).calcACoords(),r=0;r<h;r++)i=s[r],o.push(n[i].x),a.push(n[i].y);t.aCoords=n}this._getBounds(o,a,e)},_getBounds:function(e,r,o){var a=new t.Point(i(e),i(r)),s=new t.Point(n(e),n(r)),l=a.y||0,c=a.x||0,h=s.x-a.x||0,u=s.y-a.y||0;this.width=h,this.height=u,o||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(e){for(var t=["<g ","COMMON_PARTS"," >\n"],i=0,n=this._objects.length;i<n;i++)t.push("\t\t",this._objects[i].toSVG(e));return t.push("</g>\n"),t},getSvgStyles:function(){var e=void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")},toClipPathSVG:function(e){for(var t=[],i=0,n=this._objects.length;i<n;i++)t.push("\t",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}}),t.Group.fromObject=function(e,i){var n=e.objects,r=t.util.object.clone(e,!0);delete r.objects,"string"!=typeof n?t.util.enlivenObjects(n,(function(n){var r=t.util.object.clone(e,!0);delete r.objects,t.util.enlivenObjectEnlivables(e,r,(function(){i&&i(new t.Group(n,r,!0))}))})):t.loadSVGFromURL(n,(function(o){var a=t.util.groupSVGElements(o,e,n);a.set(r),i&&i(a)}))})}(t),function(e){var t=e.fabric||(e.fabric={});t.ActiveSelection||(t.ActiveSelection=t.util.createClass(t.Group,{type:"activeSelection",initialize:function(e,i){i=i||{},this._objects=e||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;i.originX&&(this.originX=i.originX),i.originY&&(this.originY=i.originY),this._calcBounds(),this._updateObjectsCoords(),t.Object.prototype.initialize.call(this,i),this.setCoords()},toGroup:function(){var e=this._objects.concat();this._objects=[];var i=t.Object.prototype.toObject.call(this),n=new t.Group([]);if(delete i.type,n.set(i),e.forEach((function(e){e.canvas.remove(e),e.group=n})),n._objects=e,!this.canvas)return n;var r=this.canvas;return r.add(n),r._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(e,t,i){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",e,t),void 0===(i=i||{}).hasControls&&(i.hasControls=!1),i.forActiveSelection=!0;for(var n=0,r=this._objects.length;n<r;n++)this._objects[n]._renderControls(e,i);e.restore()}}),t.ActiveSelection.fromObject=function(e,i){t.util.enlivenObjects(e.objects,(function(n){delete e.objects,i&&i(new t.ActiveSelection(n,e,!0))}))})}(t),function(e){var t=C.util.object.extend;e.fabric||(e.fabric={}),e.fabric.Image?C.warn("fabric.Image is already defined."):(C.Image=C.util.createClass(C.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:C.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:C.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(e,t){t||(t={}),this.filters=[],this.cacheKey="texture"+C.Object.__uid++,this.callSuper("initialize",t),this._initElement(e,t)},getElement:function(){return this._element||{}},setElement:function(e,t){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=e,this._originalElement=e,this._initConfig(t),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(e){var t=C.filterBackend;t&&t.evictCachesForKey&&t.evictCachesForKey(e)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(e){C.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){if(this.stroke&&0!==this.strokeWidth){var t=this.width/2,i=this.height/2;e.beginPath(),e.moveTo(-t,-i),e.lineTo(t,-i),e.lineTo(t,i),e.lineTo(-t,i),e.lineTo(-t,-i),e.closePath()}},toObject:function(e){var i=[];this.filters.forEach((function(e){e&&i.push(e.toObject())}));var n=t(this.callSuper("toObject",["cropX","cropY"].concat(e)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:i});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var e,t=[],i=[],n=this._element,r=-this.width/2,o=-this.height/2,a="",s="";if(!n)return[];if(this.hasCrop()){var l=C.Object.__uid++;t.push('<clipPath id="imageCrop_'+l+'">\n','\t<rect x="'+r+'" y="'+o+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),a=' clip-path="url(#imageCrop_'+l+')" '}if(this.imageSmoothing||(s='" image-rendering="optimizeSpeed'),i.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',o-this.cropY,'" width="',n.width||n.naturalWidth,'" height="',n.height||n.height,s,'"',a,"></image>\n"),this.stroke||this.strokeDashArray){var c=this.fill;this.fill=null,e=["\t<rect ",'x="',r,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=c}return"fill"!==this.paintFirst?t.concat(e,i):t.concat(i,e)},getSrc:function(e){var t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src"):t.src:this.src||""},setSrc:function(e,t,i){return C.util.loadImage(e,(function(e,n){this.setElement(e,i),this._setWidthHeight(),t&&t(this,n)}),this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,t=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),n=i.scaleX,r=i.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||n>t&&r>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=r);C.filterBackend||(C.filterBackend=C.initFilterBackend());var a=C.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,l=o.width,c=o.height;a.width=l,a.height=c,this._element=a,this._lastScaleX=e.scaleX=n,this._lastScaleY=e.scaleY=r,C.filterBackend.applyFilters([e],o,l,c,this._element,s),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height},applyFilters:function(e){if(e=(e=e||this.filters||[]).filter((function(e){return e&&!e.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===e.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var t=this._originalElement,i=t.naturalWidth||t.width,n=t.naturalHeight||t.height;if(this._element===this._originalElement){var r=C.util.createCanvasElement();r.width=i,r.height=n,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,n),this._lastScaleX=1,this._lastScaleY=1;return C.filterBackend||(C.filterBackend=C.initFilterBackend()),C.filterBackend.applyFilters(e,this._originalElement,i,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(e){C.util.setImageSmoothing(e,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)},drawCacheOnCanvas:function(e){C.util.setImageSmoothing(e,this.imageSmoothing),C.Object.prototype.drawCacheOnCanvas.call(this,e)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(e){var t=this._element;if(t){var i=this._filterScalingX,n=this._filterScalingY,r=this.width,o=this.height,a=Math.min,s=Math.max,l=s(this.cropX,0),c=s(this.cropY,0),h=t.naturalWidth||t.width,u=t.naturalHeight||t.height,d=l*i,f=c*n,p=a(r*i,h-d),g=a(o*n,u-f),m=-r/2,v=-o/2,_=a(r,h/i-l),b=a(o,u/n-c);t&&e.drawImage(t,d,f,p,g,m,v,_,b)}},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,t){this.setElement(C.util.getById(e),t),C.util.addClass(this.getElement(),C.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e)},_initFilters:function(e,t){e&&e.length?C.util.enlivenObjects(e,(function(e){t&&t(e)}),"fabric.Image.filters"):t&&t()},_setWidthHeight:function(e){e||(e={});var t=this.getElement();this.width=e.width||t.naturalWidth||t.width||0,this.height=e.height||t.naturalHeight||t.height||0},parsePreserveAspectRatioAttribute:function(){var e,t=C.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),i=this._element.width,n=this._element.height,r=1,o=1,a=0,s=0,l=0,c=0,h=this.width,u=this.height,d={width:h,height:u};return!t||"none"===t.alignX&&"none"===t.alignY?(r=h/i,o=u/n):("meet"===t.meetOrSlice&&(e=(h-i*(r=o=C.util.findScaleToFit(this._element,d)))/2,"Min"===t.alignX&&(a=-e),"Max"===t.alignX&&(a=e),e=(u-n*o)/2,"Min"===t.alignY&&(s=-e),"Max"===t.alignY&&(s=e)),"slice"===t.meetOrSlice&&(e=i-h/(r=o=C.util.findScaleToCover(this._element,d)),"Mid"===t.alignX&&(l=e/2),"Max"===t.alignX&&(l=e),e=n-u/o,"Mid"===t.alignY&&(c=e/2),"Max"===t.alignY&&(c=e),i=h/r,n=u/o)),{width:i,height:n,scaleX:r,scaleY:o,offsetLeft:a,offsetTop:s,cropX:l,cropY:c}}}),C.Image.CSS_CANVAS="canvas-img",C.Image.prototype.getSvgSrc=C.Image.prototype.getSrc,C.Image.fromObject=function(e,t){var i=C.util.object.clone(e);C.util.loadImage(i.src,(function(e,n){n?t&&t(null,!0):C.Image.prototype._initFilters.call(i,i.filters,(function(n){i.filters=n||[],C.Image.prototype._initFilters.call(i,[i.resizeFilter],(function(n){i.resizeFilter=n[0],C.util.enlivenObjectEnlivables(i,i,(function(){var n=new C.Image(e,i);t(n,!1)}))}))}))}),null,i.crossOrigin)},C.Image.fromURL=function(e,t,i){C.util.loadImage(e,(function(e,n){t&&t(new C.Image(e,i),n)}),null,i&&i.crossOrigin)},C.Image.ATTRIBUTE_NAMES=C.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),C.Image.fromElement=function(e,i,n){var r=C.parseAttributes(e,C.Image.ATTRIBUTE_NAMES);C.Image.fromURL(r["xlink:href"],i,t(n?C.util.object.clone(n):{},r))})}(t),C.util.object.extend(C.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.angle%360;return e>0?90*Math.round((e-1)/90):90*Math.round(e/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(e){var t=function(){},i=(e=e||{}).onComplete||t,n=e.onChange||t,r=this;return C.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){r.rotate(e),n()},onComplete:function(){r.setCoords(),i()}})}}),C.util.object.extend(C.StaticCanvas.prototype,{straightenObject:function(e){return e.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(e){return e.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function e(e,t){var i="precision "+t+" float;\nvoid main(){}",n=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(n,i),e.compileShader(n),!!e.getShaderParameter(n,e.COMPILE_STATUS)}function t(e){e&&e.tileSize&&(this.tileSize=e.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}C.isWebglSupported=function(t){if(C.isLikelyNode)return!1;t=t||C.WebglFilterBackend.prototype.tileSize;var i=document.createElement("canvas"),n=i.getContext("webgl")||i.getContext("experimental-webgl"),r=!1;if(n){C.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),r=C.maxTextureSize>=t;for(var o=["highp","mediump","lowp"],a=0;a<3;a++)if(e(n,o[a])){C.webGlPrecision=o[a];break}}return this.isSupported=r,r},C.WebglFilterBackend=t,t.prototype={tileSize:2048,resources:{},setupGLContext:function(e,t){this.dispose(),this.createWebGLCanvas(e,t),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(e,t)},chooseFastestCopyGLTo2DMethod:function(e,t){var i,n=void 0!==window.performance;try{new ImageData(1,1),i=!0}catch(e){i=!1}var r="undefined"!=typeof ArrayBuffer,o="undefined"!=typeof Uint8ClampedArray;if(n&&i&&r&&o){var a=C.util.createCanvasElement(),s=new ArrayBuffer(e*t*4);if(C.forceGLPutImageData)return this.imageBuffer=s,void(this.copyGLTo2D=I);var l,c,h={imageBuffer:s,destinationWidth:e,destinationHeight:t,targetCanvas:a};a.width=e,a.height=t,l=window.performance.now(),E.call(h,this.gl,h),c=window.performance.now()-l,l=window.performance.now(),I.call(h,this.gl,h),c>window.performance.now()-l?(this.imageBuffer=s,this.copyGLTo2D=I):this.copyGLTo2D=E}},createWebGLCanvas:function(e,t){var i=C.util.createCanvasElement();i.width=e,i.height=t;var n={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=i.getContext("webgl",n);r||(r=i.getContext("experimental-webgl",n)),r&&(r.clearColor(0,0,0,0),this.canvas=i,this.gl=r)},applyFilters:function(e,t,i,n,r,o){var a,s=this.gl;o&&(a=this.getCachedTexture(o,t));var l={originalWidth:t.width||t.originalWidth,originalHeight:t.height||t.originalHeight,sourceWidth:i,sourceHeight:n,destinationWidth:i,destinationHeight:n,context:s,sourceTexture:this.createTexture(s,i,n,!a&&t),targetTexture:this.createTexture(s,i,n),originalTexture:a||this.createTexture(s,i,n,!a&&t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},c=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,c),e.forEach((function(e){e&&e.applyTo(l)})),function(e){var t=e.targetCanvas,i=t.width,n=t.height,r=e.destinationWidth,o=e.destinationHeight;i===r&&n===o||(t.width=r,t.height=o)}(l),this.copyGLTo2D(s,l),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(l.sourceTexture),s.deleteTexture(l.targetTexture),s.deleteFramebuffer(c),r.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(e,t,i,n){var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null),r},getCachedTexture:function(e,t){if(this.textureCache[e])return this.textureCache[e];var i=this.createTexture(this.gl,t.width,t.height,t);return this.textureCache[e]=i,i},evictCachesForKey:function(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])},copyGLTo2D:E,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl,t={renderer:"",vendor:""};if(!e)return t;var i=e.getExtension("WEBGL_debug_renderer_info");if(i){var n=e.getParameter(i.UNMASKED_RENDERER_WEBGL),r=e.getParameter(i.UNMASKED_VENDOR_WEBGL);n&&(t.renderer=n.toLowerCase()),r&&(t.vendor=r.toLowerCase())}return this.gpuInfo=t,t}}}(),function(){var e=function(){};function t(){}C.Canvas2dFilterBackend=t,t.prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(e,t,i,n,r){var o=r.getContext("2d");o.drawImage(t,0,0,i,n);var a={sourceWidth:i,sourceHeight:n,imageData:o.getImageData(0,0,i,n),originalEl:t,originalImageData:o.getImageData(0,0,i,n),canvasEl:r,ctx:o,filterBackend:this};return e.forEach((function(e){e.applyTo(a)})),a.imageData.width===i&&a.imageData.height===n||(r.width=a.imageData.width,r.height=a.imageData.height),o.putImageData(a.imageData,0,0),a}}}(),C.Image=C.Image||{},C.Image.filters=C.Image.filters||{},C.Image.filters.BaseFilter=C.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},createProgram:function(e,t,i){t=t||this.fragmentSource,i=i||this.vertexSource,"highp"!==C.webGlPrecision&&(t=t.replace(/precision highp float/g,"precision "+C.webGlPrecision+" float"));var n=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(n));var r=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+e.getShaderInfoLog(r));var o=e.createProgram();if(e.attachShader(o,n),e.attachShader(o,r),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(o));var a=this.getAttributeLocations(e,o),s=this.getUniformLocations(e,o)||{};return s.uStepW=e.getUniformLocation(o,"uStepW"),s.uStepH=e.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:a,uniformLocations:s}},getAttributeLocations:function(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,t,i){var n=t.aPosition,r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var t,i,n=e.context;e.passes>1?(t=e.destinationWidth,i=e.destinationHeight,e.sourceWidth===t&&e.sourceHeight===i||(n.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(n,t,i)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(e){e.passes--,e.pass++;var t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t},isNeutralState:function(){var e=this.mainParameter,t=C.Image.filters[this.type].prototype;if(e){if(Array.isArray(t[e])){for(var i=t[e].length;i--;)if(this[e][i]!==t[e][i])return!1;return!0}return t[e]===this[e]}return!1},applyTo:function(e){e.webgl?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},retrieveShader:function(e){return e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context)),e.programCache[this.type]},applyToWebGL:function(e){var t=e.context,i=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(i.program),this.sendAttributeData(t,i.attributeLocations,e.aPosition),t.uniform1f(i.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(i.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,i.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,t,i){e.activeTexture(i),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){if(!e.helpLayer){var t=document.createElement("canvas");t.width=e.sourceWidth,t.height=e.sourceHeight,e.helpLayer=t}},toObject:function(){var e={type:this.type},t=this.mainParameter;return t&&(e[t]=this[t]),e},toJSON:function(){return this.toObject()}}),C.Image.filters.BaseFilter.fromObject=function(e,t){var i=new C.Image.filters[e.type](e);return t&&t(i),i},function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.ColorMatrix=n(i.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var t,i,n,r,o,a=e.imageData.data,s=a.length,l=this.matrix,c=this.colorsOnly;for(o=0;o<s;o+=4)t=a[o],i=a[o+1],n=a[o+2],c?(a[o]=t*l[0]+i*l[1]+n*l[2]+255*l[4],a[o+1]=t*l[5]+i*l[6]+n*l[7]+255*l[9],a[o+2]=t*l[10]+i*l[11]+n*l[12]+255*l[14]):(r=a[o+3],a[o]=t*l[0]+i*l[1]+n*l[2]+r*l[3]+255*l[4],a[o+1]=t*l[5]+i*l[6]+n*l[7]+r*l[8]+255*l[9],a[o+2]=t*l[10]+i*l[11]+n*l[12]+r*l[13]+255*l[14],a[o+3]=t*l[15]+i*l[16]+n*l[17]+r*l[18]+255*l[19])},getUniformLocations:function(e,t){return{uColorMatrix:e.getUniformLocation(t,"uColorMatrix"),uConstants:e.getUniformLocation(t,"uConstants")}},sendUniformData:function(e,t){var i=this.matrix,n=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],r=[i[4],i[9],i[14],i[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,n),e.uniform4fv(t.uConstants,r)}}),t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Brightness=n(i.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(0!==this.brightness){var t,i=e.imageData.data,n=i.length,r=Math.round(255*this.brightness);for(t=0;t<n;t+=4)i[t]=i[t]+r,i[t+1]=i[t+1]+r,i[t+2]=i[t+2]+r}},getUniformLocations:function(e,t){return{uBrightness:e.getUniformLocation(t,"uBrightness")}},sendUniformData:function(e,t){e.uniform1f(t.uBrightness,this.brightness)}}),t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.Image.filters,r=t.util.createClass;n.Convolute=r(n.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var t=Math.sqrt(this.matrix.length),i=this.type+"_"+t+"_"+(this.opaque?1:0),n=this.fragmentSource[i];return e.programCache.hasOwnProperty(i)||(e.programCache[i]=this.createProgram(e.context,n)),e.programCache[i]},applyTo2d:function(e){var t,i,n,r,o,a,s,l,c,h,u,d,f,p=e.imageData,g=p.data,m=this.matrix,v=Math.round(Math.sqrt(m.length)),_=Math.floor(v/2),b=p.width,y=p.height,w=e.ctx.createImageData(b,y),x=w.data,S=this.opaque?1:0;for(u=0;u<y;u++)for(h=0;h<b;h++){for(o=4*(u*b+h),t=0,i=0,n=0,r=0,f=0;f<v;f++)for(d=0;d<v;d++)a=h+d-_,(s=u+f-_)<0||s>=y||a<0||a>=b||(l=4*(s*b+a),c=m[f*v+d],t+=g[l]*c,i+=g[l+1]*c,n+=g[l+2]*c,S||(r+=g[l+3]*c));x[o]=t,x[o+1]=i,x[o+2]=n,x[o+3]=S?g[o+3]:r}e.imageData=w},getUniformLocations:function(e,t){return{uMatrix:e.getUniformLocation(t,"uMatrix"),uOpaque:e.getUniformLocation(t,"uOpaque"),uHalfSize:e.getUniformLocation(t,"uHalfSize"),uSize:e.getUniformLocation(t,"uSize")}},sendUniformData:function(e,t){e.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Grayscale=n(i.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(e){var t,i,n=e.imageData.data,r=n.length,o=this.mode;for(t=0;t<r;t+=4)"average"===o?i=(n[t]+n[t+1]+n[t+2])/3:"lightness"===o?i=(Math.min(n[t],n[t+1],n[t+2])+Math.max(n[t],n[t+1],n[t+2]))/2:"luminosity"===o&&(i=.21*n[t]+.72*n[t+1]+.07*n[t+2]),n[t]=i,n[t+1]=i,n[t+2]=i},retrieveShader:function(e){var t=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(t)){var i=this.fragmentSource[this.mode];e.programCache[t]=this.createProgram(e.context,i)}return e.programCache[t]},getUniformLocations:function(e,t){return{uMode:e.getUniformLocation(t,"uMode")}},sendUniformData:function(e,t){e.uniform1i(t.uMode,1)},isNeutralState:function(){return!1}}),t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Invert=n(i.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(e){var t,i=e.imageData.data,n=i.length;for(t=0;t<n;t+=4)i[t]=255-i[t],i[t+1]=255-i[t+1],i[t+2]=255-i[t+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,t){return{uInvert:e.getUniformLocation(t,"uInvert")}},sendUniformData:function(e,t){e.uniform1i(t.uInvert,this.invert)}}),t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.Image.filters,r=t.util.createClass;n.Noise=r(n.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var t,i,n=e.imageData.data,r=n.length,o=this.noise;for(t=0,r=n.length;t<r;t+=4)i=(.5-Math.random())*o,n[t]+=i,n[t+1]+=i,n[t+2]+=i}},getUniformLocations:function(e,t){return{uNoise:e.getUniformLocation(t,"uNoise"),uSeed:e.getUniformLocation(t,"uSeed")}},sendUniformData:function(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Pixelate=n(i.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(e){var t,i,n,r,o,a,s,l,c,h,u,d=e.imageData,f=d.data,p=d.height,g=d.width;for(i=0;i<p;i+=this.blocksize)for(n=0;n<g;n+=this.blocksize)for(r=f[t=4*i*g+4*n],o=f[t+1],a=f[t+2],s=f[t+3],h=Math.min(i+this.blocksize,p),u=Math.min(n+this.blocksize,g),l=i;l<h;l++)for(c=n;c<u;c++)f[t=4*l*g+4*c]=r,f[t+1]=o,f[t+2]=a,f[t+3]=s},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(e,t){return{uBlocksize:e.getUniformLocation(t,"uBlocksize"),uStepW:e.getUniformLocation(t,"uStepW"),uStepH:e.getUniformLocation(t,"uStepH")}},sendUniformData:function(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}),t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.Image.filters,r=t.util.createClass;n.RemoveColor=r(n.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var i,n,r,o,a=e.imageData.data,s=255*this.distance,l=new t.Color(this.color).getSource(),c=[l[0]-s,l[1]-s,l[2]-s],h=[l[0]+s,l[1]+s,l[2]+s];for(i=0;i<a.length;i+=4)n=a[i],r=a[i+1],o=a[i+2],n>c[0]&&r>c[1]&&o>c[2]&&n<h[0]&&r<h[1]&&o<h[2]&&(a[i+3]=0)},getUniformLocations:function(e,t){return{uLow:e.getUniformLocation(t,"uLow"),uHigh:e.getUniformLocation(t,"uHigh")}},sendUniformData:function(e,i){var n=new t.Color(this.color).getSource(),r=parseFloat(this.distance),o=[0+n[0]/255-r,0+n[1]/255-r,0+n[2]/255-r,1],a=[n[0]/255+r,n[1]/255+r,n[2]/255+r,1];e.uniform4fv(i.uLow,o),e.uniform4fv(i.uHigh,a)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),t.Image.filters.RemoveColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in r)i[o]=n(i.ColorMatrix,{type:o,matrix:r[o],mainParameter:!1,colorsOnly:!0}),t.Image.filters[o].fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric,i=t.Image.filters,n=t.util.createClass;i.BlendColor=n(i.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(e){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[e]+"}\n}"},retrieveShader:function(e){var t,i=this.type+"_"+this.mode;return e.programCache.hasOwnProperty(i)||(t=this.buildSource(this.mode),e.programCache[i]=this.createProgram(e.context,t)),e.programCache[i]},applyTo2d:function(e){var i,n,r,o,a,s,l,c=e.imageData.data,h=c.length,u=1-this.alpha;i=(l=new t.Color(this.color).getSource())[0]*this.alpha,n=l[1]*this.alpha,r=l[2]*this.alpha;for(var d=0;d<h;d+=4)switch(o=c[d],a=c[d+1],s=c[d+2],this.mode){case"multiply":c[d]=o*i/255,c[d+1]=a*n/255,c[d+2]=s*r/255;break;case"screen":c[d]=255-(255-o)*(255-i)/255,c[d+1]=255-(255-a)*(255-n)/255,c[d+2]=255-(255-s)*(255-r)/255;break;case"add":c[d]=o+i,c[d+1]=a+n,c[d+2]=s+r;break;case"diff":case"difference":c[d]=Math.abs(o-i),c[d+1]=Math.abs(a-n),c[d+2]=Math.abs(s-r);break;case"subtract":c[d]=o-i,c[d+1]=a-n,c[d+2]=s-r;break;case"darken":c[d]=Math.min(o,i),c[d+1]=Math.min(a,n),c[d+2]=Math.min(s,r);break;case"lighten":c[d]=Math.max(o,i),c[d+1]=Math.max(a,n),c[d+2]=Math.max(s,r);break;case"overlay":c[d]=i<128?2*o*i/255:255-2*(255-o)*(255-i)/255,c[d+1]=n<128?2*a*n/255:255-2*(255-a)*(255-n)/255,c[d+2]=r<128?2*s*r/255:255-2*(255-s)*(255-r)/255;break;case"exclusion":c[d]=i+o-2*i*o/255,c[d+1]=n+a-2*n*a/255,c[d+2]=r+s-2*r*s/255;break;case"tint":c[d]=i+o*u,c[d+1]=n+a*u,c[d+2]=r+s*u}},getUniformLocations:function(e,t){return{uColor:e.getUniformLocation(t,"uColor")}},sendUniformData:function(e,i){var n=new t.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(i.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric,i=t.Image.filters,n=t.util.createClass;i.BlendImage=n(i.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(e){var t=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(t)||(e.programCache[t]=this.createProgram(e.context,i)),e.programCache[t]},applyToWebGL:function(e){var t=e.context,i=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,i,t.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(t,t.TEXTURE1)},createTexture:function(e,t){return e.getCachedTexture(t.cacheKey,t._element)},calculateMatrix:function(){var e=this.image,t=e._element.width,i=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/i,1]},applyTo2d:function(e){var i,n,r,o,a,s,l,c,h,u,d,f=e.imageData,p=e.filterBackend.resources,g=f.data,m=g.length,v=f.width,_=f.height,b=this.image;p.blendImage||(p.blendImage=t.util.createCanvasElement()),u=(h=p.blendImage).getContext("2d"),h.width!==v||h.height!==_?(h.width=v,h.height=_):u.clearRect(0,0,v,_),u.setTransform(b.scaleX,0,0,b.scaleY,b.left,b.top),u.drawImage(b._element,0,0,v,_),d=u.getImageData(0,0,v,_).data;for(var y=0;y<m;y+=4)switch(a=g[y],s=g[y+1],l=g[y+2],c=g[y+3],i=d[y],n=d[y+1],r=d[y+2],o=d[y+3],this.mode){case"multiply":g[y]=a*i/255,g[y+1]=s*n/255,g[y+2]=l*r/255,g[y+3]=c*o/255;break;case"mask":g[y+3]=o}},getUniformLocations:function(e,t){return{uTransformMatrix:e.getUniformLocation(t,"uTransformMatrix"),uImage:e.getUniformLocation(t,"uImage")}},sendUniformData:function(e,t){var i=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendImage.fromObject=function(e,i){t.Image.fromObject(e.image,(function(n){var r=t.util.object.clone(e);r.image=n,i(new t.Image.filters.BlendImage(r))}))}}(t),function(e){var t=e.fabric||(e.fabric={}),i=Math.pow,n=Math.floor,r=Math.sqrt,o=Math.abs,a=Math.round,s=Math.sin,l=Math.ceil,c=t.Image.filters,h=t.util.createClass;c.Resize=h(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(e,t){return{uDelta:e.getUniformLocation(t,"uDelta"),uTaps:e.getUniformLocation(t,"uTaps")}},sendUniformData:function(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)},retrieveShader:function(e){var t=this.getFilterWindow(),i=this.type+"_"+t;if(!e.programCache.hasOwnProperty(i)){var n=this.generateShader(t);e.programCache[i]=this.createProgram(e.context,n)}return e.programCache[i]},getFilterWindow:function(){var e=this.tempScale;return Math.ceil(this.lanczosLobes/e)},getTaps:function(){for(var e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,i=this.getFilterWindow(),n=new Array(i),r=1;r<=i;r++)n[r-1]=e(r*t);return n},generateShader:function(e){for(var t=new Array(e),i=this.fragmentSourceTOP,n=1;n<=e;n++)t[n-1]=n+".0 * uDelta";return i+="uniform float uTaps["+e+"];\n",i+="void main() {\n",i+="  vec4 color = texture2D(uTexture, vTexCoord);\n",i+="  float sum = 1.0;\n",t.forEach((function(e,t){i+="  color += texture2D(uTexture, vTexCoord + "+e+") * uTaps["+t+"];\n",i+="  color += texture2D(uTexture, vTexCoord - "+e+") * uTaps["+t+"];\n",i+="  sum += 2.0 * uTaps["+t+"];\n"})),i+="  gl_FragColor = color / sum;\n",i+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(e){e.webgl?(e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceHeight=e.destinationHeight):this.applyTo2d(e)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(e){return function(t){if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;var i=(t*=Math.PI)/e;return s(t)/t*s(i)/i}},applyTo2d:function(e){var t=e.imageData,i=this.scaleX,n=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/n;var r,o=t.width,s=t.height,l=a(o*i),c=a(s*n);"sliceHack"===this.resizeType?r=this.sliceByTwo(e,o,s,l,c):"hermite"===this.resizeType?r=this.hermiteFastResize(e,o,s,l,c):"bilinear"===this.resizeType?r=this.bilinearFiltering(e,o,s,l,c):"lanczos"===this.resizeType&&(r=this.lanczosResize(e,o,s,l,c)),e.imageData=r},sliceByTwo:function(e,i,r,o,a){var s,l,c=e.imageData,h=.5,u=!1,d=!1,f=i*h,p=r*h,g=t.filterBackend.resources,m=0,v=0,_=i,b=0;for(g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),((s=g.sliceByTwo).width<1.5*i||s.height<r)&&(s.width=1.5*i,s.height=r),(l=s.getContext("2d")).clearRect(0,0,1.5*i,r),l.putImageData(c,0,0),o=n(o),a=n(a);!u||!d;)i=f,r=p,o<n(f*h)?f=n(f*h):(f=o,u=!0),a<n(p*h)?p=n(p*h):(p=a,d=!0),l.drawImage(s,m,v,i,r,_,b,f,p),m=_,v=b,b+=p;return l.getImageData(m,v,o,a)},lanczosResize:function(e,t,a,s,c){var h=e.imageData.data,u=e.ctx.createImageData(s,c),d=u.data,f=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,g=this.rcpScaleY,m=2/this.rcpScaleX,v=2/this.rcpScaleY,_=l(p*this.lanczosLobes/2),b=l(g*this.lanczosLobes/2),y={},w={},x={};return function e(l){var S,C,T,E,I,k,O,R,A,D,L;for(w.x=(l+.5)*p,x.x=n(w.x),S=0;S<c;S++){for(w.y=(S+.5)*g,x.y=n(w.y),I=0,k=0,O=0,R=0,A=0,C=x.x-_;C<=x.x+_;C++)if(!(C<0||C>=t)){D=n(1e3*o(C-w.x)),y[D]||(y[D]={});for(var M=x.y-b;M<=x.y+b;M++)M<0||M>=a||(L=n(1e3*o(M-w.y)),y[D][L]||(y[D][L]=f(r(i(D*m,2)+i(L*v,2))/1e3)),(T=y[D][L])>0&&(I+=T,k+=T*h[E=4*(M*t+C)],O+=T*h[E+1],R+=T*h[E+2],A+=T*h[E+3]))}d[E=4*(S*s+l)]=k/I,d[E+1]=O/I,d[E+2]=R/I,d[E+3]=A/I}return++l<s?e(l):u}(0)},bilinearFiltering:function(e,t,i,r,o){var a,s,l,c,h,u,d,f,p,g=0,m=this.rcpScaleX,v=this.rcpScaleY,_=4*(t-1),b=e.imageData.data,y=e.ctx.createImageData(r,o),w=y.data;for(l=0;l<o;l++)for(c=0;c<r;c++)for(h=m*c-(a=n(m*c)),u=v*l-(s=n(v*l)),p=4*(s*t+a),d=0;d<4;d++)f=b[p+d]*(1-h)*(1-u)+b[p+4+d]*h*(1-u)+b[p+_+d]*u*(1-h)+b[p+_+4+d]*h*u,w[g++]=f;return y},hermiteFastResize:function(e,t,i,a,s){for(var c=this.rcpScaleX,h=this.rcpScaleY,u=l(c/2),d=l(h/2),f=e.imageData.data,p=e.ctx.createImageData(a,s),g=p.data,m=0;m<s;m++)for(var v=0;v<a;v++){for(var _=4*(v+m*a),b=0,y=0,w=0,x=0,S=0,C=0,T=0,E=(m+.5)*h,I=n(m*h);I<(m+1)*h;I++)for(var k=o(E-(I+.5))/d,O=(v+.5)*c,R=k*k,A=n(v*c);A<(v+1)*c;A++){var D=o(O-(A+.5))/u,L=r(R+D*D);L>1&&L<-1||(b=2*L*L*L-3*L*L+1)>0&&(T+=b*f[3+(D=4*(A+I*t))],w+=b,f[D+3]<255&&(b=b*f[D+3]/250),x+=b*f[D],S+=b*f[D+1],C+=b*f[D+2],y+=b)}g[_]=x/y,g[_+1]=S/y,g[_+2]=C/y,g[_+3]=T/w}return p},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),t.Image.filters.Resize.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Contrast=n(i.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(0!==this.contrast){var t,i=e.imageData.data,n=i.length,r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(t=0;t<n;t+=4)i[t]=o*(i[t]-128)+128,i[t+1]=o*(i[t+1]-128)+128,i[t+2]=o*(i[t+2]-128)+128}},getUniformLocations:function(e,t){return{uContrast:e.getUniformLocation(t,"uContrast")}},sendUniformData:function(e,t){e.uniform1f(t.uContrast,this.contrast)}}),t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Saturation=n(i.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(0!==this.saturation){var t,i,n=e.imageData.data,r=n.length,o=-this.saturation;for(t=0;t<r;t+=4)i=Math.max(n[t],n[t+1],n[t+2]),n[t]+=i!==n[t]?(i-n[t])*o:0,n[t+1]+=i!==n[t+1]?(i-n[t+1])*o:0,n[t+2]+=i!==n[t+2]?(i-n[t+2])*o:0}},getUniformLocations:function(e,t){return{uSaturation:e.getUniformLocation(t,"uSaturation")}},sendUniformData:function(e,t){e.uniform1f(t.uSaturation,-this.saturation)}}),t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Vibrance=n(i.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(0!==this.vibrance){var t,i,n,r,o=e.imageData.data,a=o.length,s=-this.vibrance;for(t=0;t<a;t+=4)i=Math.max(o[t],o[t+1],o[t+2]),n=(o[t]+o[t+1]+o[t+2])/3,r=2*Math.abs(i-n)/255*s,o[t]+=i!==o[t]?(i-o[t])*r:0,o[t+1]+=i!==o[t+1]?(i-o[t+1])*r:0,o[t+2]+=i!==o[t+2]?(i-o[t+2])*r:0}},getUniformLocations:function(e,t){return{uVibrance:e.getUniformLocation(t,"uVibrance")}},sendUniformData:function(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}}),t.Image.filters.Vibrance.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Blur=n(i.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var i,n,r=e.filterBackend.resources,o=e.imageData.width,a=e.imageData.height;r.blurLayer1||(r.blurLayer1=t.util.createCanvasElement(),r.blurLayer2=t.util.createCanvasElement()),i=r.blurLayer1,n=r.blurLayer2,i.width===o&&i.height===a||(n.width=i.width=o,n.height=i.height=a);var s,l,c,h,u=i.getContext("2d"),d=n.getContext("2d"),f=.06*this.blur*.5;for(u.putImageData(e.imageData,0,0),d.clearRect(0,0,o,a),h=-15;h<=15;h++)c=f*(l=h/15)*o+(s=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(i,c,s),u.drawImage(n,0,0),d.globalAlpha=1,d.clearRect(0,0,n.width,n.height);for(h=-15;h<=15;h++)c=f*(l=h/15)*a+(s=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(i,s,c),u.drawImage(n,0,0),d.globalAlpha=1,d.clearRect(0,0,n.width,n.height);e.ctx.drawImage(i,0,0);var p=e.ctx.getImageData(0,0,i.width,i.height);return u.globalAlpha=1,u.clearRect(0,0,i.width,i.height),p},getUniformLocations:function(e,t){return{delta:e.getUniformLocation(t,"uDelta")}},sendUniformData:function(e,t){var i=this.chooseRightDelta();e.uniform2fv(t.delta,i)},chooseRightDelta:function(){var e,t=1,i=[0,0];return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),e=t*this.blur*.12,this.horizontal?i[0]=e:i[1]=e,i}}),i.Blur.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Gamma=n(i.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],i.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var t,i=e.imageData.data,n=this.gamma,r=i.length,o=1/n[0],a=1/n[1],s=1/n[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),t=0,r=256;t<r;t++)this.rVals[t]=255*Math.pow(t/255,o),this.gVals[t]=255*Math.pow(t/255,a),this.bVals[t]=255*Math.pow(t/255,s);for(t=0,r=i.length;t<r;t+=4)i[t]=this.rVals[i[t]],i[t+1]=this.gVals[i[t+1]],i[t+2]=this.bVals[i[t+2]]},getUniformLocations:function(e,t){return{uGamma:e.getUniformLocation(t,"uGamma")}},sendUniformData:function(e,t){e.uniform3fv(t.uGamma,this.gamma)}}),t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Composed=n(i.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach((function(t){t.applyTo(e)}))},toObject:function(){return t.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(e){return e.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(e){return!e.isNeutralState()}))}}),t.Image.filters.Composed.fromObject=function(e,i){var n=(e.subFilters||[]).map((function(e){return new t.Image.filters[e.type](e)})),r=new t.Image.filters.Composed({subFilters:n});return i&&i(r),r}}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.HueRotation=n(i.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,i=t.util.cos(e),n=t.util.sin(e),r=1/3,o=Math.sqrt(r)*n,a=1-i;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=i+a/3,this.matrix[1]=r*a-o,this.matrix[2]=r*a+o,this.matrix[5]=r*a+o,this.matrix[6]=i+r*a,this.matrix[7]=r*a-o,this.matrix[10]=r*a-o,this.matrix[11]=r*a+o,this.matrix[12]=i+r*a},isNeutralState:function(e){return this.calculateMatrix(),i.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),i.BaseFilter.prototype.applyTo.call(this,e)}}),t.Image.filters.HueRotation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.clone;if(t.Text)t.warn("fabric.Text is already defined");else{var n="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");t.Text=t.util.createClass(t.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:t.Object.prototype.stateProperties.concat(n),cacheProperties:t.Object.prototype.cacheProperties.concat(n),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,t){this.styles=t&&t.styles||{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",t),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=t.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return t._measuringContext||(t._measuringContext=this.canvas&&this.canvas.contextCache||t.util.createCanvasElement().getContext("2d")),t._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,t,i,n,r,o,a,s=0,l=this._textLines.length;s<l;s++)if(("justify"===this.textAlign||s!==l-1&&!this.isEndOfWrapping(s))&&(n=0,r=this._textLines[s],(t=this.getLineWidth(s))<this.width&&(a=this.textLines[s].match(this._reSpacesAndTabs)))){i=a.length,e=(this.width-t)/i;for(var c=0,h=r.length;c<=h;c++)o=this.__charBounds[s][c],this._reSpaceAndTab.test(r[c])?(o.width+=e,o.kernedWidth+=e,o.left+=n,n+=e):o.left+=n}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e},_render:function(e){var t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){"stroke"===this.paintFirst?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,t,i){if(e.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":e.textBaseline="middle";break;case"ascender":e.textBaseline="top";break;case"descender":e.textBaseline="bottom"}e.font=this._getFontDeclaration(t,i)},calcTextWidth:function(){for(var e=this.getLineWidth(0),t=1,i=this._textLines.length;t<i;t++){var n=this.getLineWidth(t);n>e&&(e=n)}return e},_renderTextLine:function(e,t,i,n,r,o){this._renderChars(e,t,i,n,r,o)},_renderTextLinesBackground:function(e){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var t,i,n,r,o,a,s,l=e.fillStyle,c=this._getLeftOffset(),h=this._getTopOffset(),u=0,d=0,f=this.path,p=0,g=this._textLines.length;p<g;p++)if(t=this.getHeightOfLine(p),this.textBackgroundColor||this.styleHas("textBackgroundColor",p)){n=this._textLines[p],i=this._getLineLeftOffset(p),d=0,u=0,r=this.getValueOfPropertyAt(p,0,"textBackgroundColor");for(var m=0,v=n.length;m<v;m++)o=this.__charBounds[p][m],a=this.getValueOfPropertyAt(p,m,"textBackgroundColor"),f?(e.save(),e.translate(o.renderLeft,o.renderTop),e.rotate(o.angle),e.fillStyle=a,a&&e.fillRect(-o.width/2,-t/this.lineHeight*(1-this._fontSizeFraction),o.width,t/this.lineHeight),e.restore()):a!==r?(s=c+i+u,"rtl"===this.direction&&(s=this.width-s-d),e.fillStyle=r,r&&e.fillRect(s,h,d,t/this.lineHeight),u=o.left,d=o.width,r=a):d+=o.kernedWidth;a&&!f&&(s=c+i+u,"rtl"===this.direction&&(s=this.width-s-d),e.fillStyle=a,e.fillRect(s,h,d,t/this.lineHeight)),h+=t}else h+=t;e.fillStyle=l,this._removeShadow(e)}},getFontCache:function(e){var i=e.fontFamily.toLowerCase();t.charWidthsCache[i]||(t.charWidthsCache[i]={});var n=t.charWidthsCache[i],r=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return n[r]||(n[r]={}),n[r]},_measureChar:function(e,t,i,n){var r,o,a,s,l=this.getFontCache(t),c=i+e,h=this._getFontDeclaration(t)===this._getFontDeclaration(n),u=t.fontSize/this.CACHE_FONT_SIZE;if(i&&void 0!==l[i]&&(a=l[i]),void 0!==l[e]&&(s=r=l[e]),h&&void 0!==l[c]&&(s=(o=l[c])-a),void 0===r||void 0===a||void 0===o){var d=this.getMeasuringContext();this._setTextStyles(d,t,!0)}return void 0===r&&(s=r=d.measureText(e).width,l[e]=r),void 0===a&&h&&i&&(a=d.measureText(i).width,l[i]=a),h&&void 0===o&&(o=d.measureText(c).width,l[c]=o,s=o-a),{width:r*u,kernedWidth:s*u}},getHeightOfChar:function(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")},measureLine:function(e){var t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t},_measureLine:function(e){var i,n,r,o,a,s,l=0,c=this._textLines[e],h=new Array(c.length),u=0,d=this.path,f="right"===this.pathSide;for(this.__charBounds[e]=h,i=0;i<c.length;i++)n=c[i],o=this._getGraphemeBox(n,e,i,r),h[i]=o,l+=o.kernedWidth,r=n;if(h[i]={left:o?o.left+o.width:0,width:0,kernedWidth:0,height:this.fontSize},d){switch(s=d.segmentsInfo[d.segmentsInfo.length-1].length,(a=t.util.getPointOnPath(d.path,0,d.segmentsInfo)).x+=d.pathOffset.x,a.y+=d.pathOffset.y,this.textAlign){case"left":u=f?s-l:0;break;case"center":u=(s-l)/2;break;case"right":u=f?0:s-l}for(u+=this.pathStartOffset*(f?-1:1),i=f?c.length-1:0;f?i>=0:i<c.length;f?i--:i++)o=h[i],u>s?u%=s:u<0&&(u+=s),this._setGraphemeOnPath(u,o,a),u+=o.kernedWidth}return{width:l,numOfSpaces:0}},_setGraphemeOnPath:function(e,i,n){var r=e+i.kernedWidth/2,o=this.path,a=t.util.getPointOnPath(o.path,r,o.segmentsInfo);i.renderLeft=a.x-n.x,i.renderTop=a.y-n.y,i.angle=a.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(e,t,i,n,r){var o,a=this.getCompleteStyleDeclaration(t,i),s=n?this.getCompleteStyleDeclaration(t,i-1):{},l=this._measureChar(e,a,n,s),c=l.kernedWidth,h=l.width;0!==this.charSpacing&&(h+=o=this._getWidthOfCharSpacing(),c+=o);var u={width:h,left:0,height:a.fontSize,kernedWidth:c,deltaY:a.deltaY};if(i>0&&!r){var d=this.__charBounds[t][i-1];u.left=d.left+d.width+l.kernedWidth-l.width}return u},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var t=this._textLines[e],i=this.getHeightOfChar(e,0),n=1,r=t.length;n<r;n++)i=Math.max(this.getHeightOfChar(e,n),i);return this.__lineHeights[e]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,t=0,i=0,n=this._textLines.length;i<n;i++)e=this.getHeightOfLine(i),t+=i===n-1?e/this.lineHeight:e;return t},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,t){e.save();for(var i=0,n=this._getLeftOffset(),r=this._getTopOffset(),o=0,a=this._textLines.length;o<a;o++){var s=this.getHeightOfLine(o),l=s/this.lineHeight,c=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],n+c,r+i+l,o),i+=s}e.restore()},_renderTextFill:function(e){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,t,i,n,r,o){var a,s,l,c,h,u=this.getHeightOfLine(o),d=-1!==this.textAlign.indexOf("justify"),f="",p=0,g=this.path,m=!d&&0===this.charSpacing&&this.isEmptyStyles(o)&&!g,v="ltr"===this.direction,_="ltr"===this.direction?1:-1,b=t.canvas.getAttribute("dir");if(t.save(),b!==this.direction&&(t.canvas.setAttribute("dir",v?"ltr":"rtl"),t.direction=v?"ltr":"rtl",t.textAlign=v?"left":"right"),r-=u*this._fontSizeFraction/this.lineHeight,m)return this._renderChar(e,t,o,0,i.join(""),n,r,u),void t.restore();for(var y=0,w=i.length-1;y<=w;y++)c=y===w||this.charSpacing||g,f+=i[y],l=this.__charBounds[o][y],0===p?(n+=_*(l.kernedWidth-l.width),p+=l.width):p+=l.kernedWidth,d&&!c&&this._reSpaceAndTab.test(i[y])&&(c=!0),c||(a=a||this.getCompleteStyleDeclaration(o,y),s=this.getCompleteStyleDeclaration(o,y+1),c=this._hasStyleChanged(a,s)),c&&(g?(t.save(),t.translate(l.renderLeft,l.renderTop),t.rotate(l.angle),this._renderChar(e,t,o,y,f,-p/2,0,u),t.restore()):(h=n,this._renderChar(e,t,o,y,f,h,r,u)),f="",a=s,n+=_*p,p=0);t.restore()},_applyPatternGradientTransformText:function(e){var i,n=t.util.createCanvasElement(),r=this.width+this.strokeWidth,o=this.height+this.strokeWidth;return n.width=r,n.height=o,(i=n.getContext("2d")).beginPath(),i.moveTo(0,0),i.lineTo(r,0),i.lineTo(r,o),i.lineTo(0,o),i.closePath(),i.translate(r/2,o/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(n,"no-repeat")},handleFiller:function(e,t,i){var n,r;return i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?(n=-this.width/2,r=-this.height/2,e.translate(n,r),e[t]=this._applyPatternGradientTransformText(i),{offsetX:n,offsetY:r}):(e[t]=i.toLive(e,this),this._applyPatternGradientTransform(e,i)):(e[t]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,t){return e.lineWidth=t.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",t.stroke)},_setFillStyles:function(e,t){return this.handleFiller(e,"fillStyle",t.fill)},_renderChar:function(e,t,i,n,r,o,a){var s,l,c=this._getStyleDeclaration(i,n),h=this.getCompleteStyleDeclaration(i,n),u="fillText"===e&&h.fill,d="strokeText"===e&&h.stroke&&h.strokeWidth;(d||u)&&(t.save(),u&&(s=this._setFillStyles(t,h)),d&&(l=this._setStrokeStyles(t,h)),t.font=this._getFontDeclaration(h),c&&c.textBackgroundColor&&this._removeShadow(t),c&&c.deltaY&&(a+=c.deltaY),u&&t.fillText(r,o-s.offsetX,a-s.offsetY),d&&t.strokeText(r,o-l.offsetX,a-l.offsetY),t.restore())},setSuperscript:function(e,t){return this._setScript(e,t,this.superscript)},setSubscript:function(e,t){return this._setScript(e,t,this.subscript)},_setScript:function(e,t,i){var n=this.get2DCursorLocation(e,!0),r=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),o=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),a={fontSize:r*i.size,deltaY:o+r*i.baseline};return this.setSelectionStyles(a,e,t),this},_hasStyleChanged:function(e,t){return e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.deltaY!==t.deltaY},_hasStyleChangedForSvg:function(e,t){return this._hasStyleChanged(e,t)||e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough},_getLineLeftOffset:function(e){var t=this.getLineWidth(e),i=this.width-t,n=this.textAlign,r=this.direction,o=0,a=this.isEndOfWrapping(e);return"justify"===n||"justify-center"===n&&!a||"justify-right"===n&&!a||"justify-left"===n&&!a?0:("center"===n&&(o=i/2),"right"===n&&(o=i),"justify-center"===n&&(o=i/2),"justify-right"===n&&(o=i),"rtl"===r&&(o-=i),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){if(void 0!==this.__lineWidths[e])return this.__lineWidths[e];var t=this.measureLine(e).width;return this.__lineWidths[e]=t,t},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,t,i){var n=this._getStyleDeclaration(e,t);return n&&void 0!==n[i]?n[i]:this[i]},_renderTextDecoration:function(e,t){if(this[t]||this.styleHas(t)){for(var i,n,r,o,a,s,l,c,h,u,d,f,p,g,m,v,_=this._getLeftOffset(),b=this._getTopOffset(),y=this.path,w=this._getWidthOfCharSpacing(),x=this.offsets[t],S=0,C=this._textLines.length;S<C;S++)if(i=this.getHeightOfLine(S),this[t]||this.styleHas(t,S)){l=this._textLines[S],g=i/this.lineHeight,o=this._getLineLeftOffset(S),u=0,d=0,c=this.getValueOfPropertyAt(S,0,t),v=this.getValueOfPropertyAt(S,0,"fill"),h=b+g*(1-this._fontSizeFraction),n=this.getHeightOfChar(S,0),a=this.getValueOfPropertyAt(S,0,"deltaY");for(var T=0,E=l.length;T<E;T++)if(f=this.__charBounds[S][T],p=this.getValueOfPropertyAt(S,T,t),m=this.getValueOfPropertyAt(S,T,"fill"),r=this.getHeightOfChar(S,T),s=this.getValueOfPropertyAt(S,T,"deltaY"),y&&p&&m)e.save(),e.fillStyle=v,e.translate(f.renderLeft,f.renderTop),e.rotate(f.angle),e.fillRect(-f.kernedWidth/2,x*r+s,f.kernedWidth,this.fontSize/15),e.restore();else if((p!==c||m!==v||r!==n||s!==a)&&d>0){var I=_+o+u;"rtl"===this.direction&&(I=this.width-I-d),c&&v&&(e.fillStyle=v,e.fillRect(I,h+x*n+a,d,this.fontSize/15)),u=f.left,d=f.width,c=p,v=m,n=r,a=s}else d+=f.kernedWidth;I=_+o+u,"rtl"===this.direction&&(I=this.width-I-d),e.fillStyle=m,p&&m&&e.fillRect(I,h+x*n+a,d-w,this.fontSize/15),b+=i}else b+=i;this._removeShadow(e)}},_getFontDeclaration:function(e,i){var n=e||this,r=this.fontFamily,o=t.Text.genericFonts.indexOf(r.toLowerCase())>-1,a=void 0===r||r.indexOf("'")>-1||r.indexOf(",")>-1||r.indexOf('"')>-1||o?n.fontFamily:'"'+n.fontFamily+'"';return[t.isLikelyNode?n.fontWeight:n.fontStyle,t.isLikelyNode?n.fontStyle:n.fontWeight,i?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",a].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var i=e.split(this._reNewline),n=new Array(i.length),r=["\n"],o=[],a=0;a<i.length;a++)n[a]=t.util.string.graphemeSplit(i[a]),o=o.concat(n[a],r);return o.pop(),{_unwrappedLines:n,lines:i,graphemeText:o,graphemeLines:n}},toObject:function(e){var t=n.concat(e),r=this.callSuper("toObject",t);return r.styles=i(this.styles,!0),r.path&&(r.path=this.path.toObject()),r},set:function(e,t){this.callSuper("set",e,t);var i=!1,n=!1;if("object"==typeof e)for(var r in e)"path"===r&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(r),n=n||"path"===r;else i=-1!==this._dimensionAffectingProps.indexOf(e),n="path"===e;return n&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),t.Text.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),t.Text.DEFAULT_SVG_FONT_SIZE=16,t.Text.fromElement=function(e,n,r){if(!e)return n(null);var o=t.parseAttributes(e,t.Text.ATTRIBUTE_NAMES),a=o.textAnchor||"left";if((r=t.util.object.extend(r?i(r):{},o)).top=r.top||0,r.left=r.left||0,o.textDecoration){var s=o.textDecoration;-1!==s.indexOf("underline")&&(r.underline=!0),-1!==s.indexOf("overline")&&(r.overline=!0),-1!==s.indexOf("line-through")&&(r.linethrough=!0),delete r.textDecoration}"dx"in o&&(r.left+=o.dx),"dy"in o&&(r.top+=o.dy),"fontSize"in r||(r.fontSize=t.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in e?l=e.textContent:"firstChild"in e&&null!==e.firstChild&&"data"in e.firstChild&&null!==e.firstChild.data&&(l=e.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=r.strokeWidth;r.strokeWidth=0;var h=new t.Text(l,r),u=h.getScaledHeight()/h.height,d=((h.height+h.strokeWidth)*h.lineHeight-h.height)*u,f=h.getScaledHeight()+d,p=0;"center"===a&&(p=h.getScaledWidth()/2),"right"===a&&(p=h.getScaledWidth()),h.set({left:h.left-p,top:h.top-(f-h.fontSize*(.07+h._fontSizeFraction))/h.lineHeight,strokeWidth:void 0!==c?c:1}),n(h)},t.Text.fromObject=function(e,n){var r=i(e),o=e.path;return delete r.path,t.Object._fromObject("Text",r,(function(e){o?t.Object._fromObject("Path",o,(function(t){e.set("path",t),n(e)}),"path"):n(e)}),"text")},t.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],t.util.createAccessors&&t.util.createAccessors(t.Text)}}(t),C.util.object.extend(C.Text.prototype,{isEmptyStyles:function(e){if(!this.styles)return!0;if(void 0!==e&&!this.styles[e])return!0;var t=void 0===e?this.styles:{line:this.styles[e]};for(var i in t)for(var n in t[i])for(var r in t[i][n])return!1;return!0},styleHas:function(e,t){if(!this.styles||!e||""===e)return!1;if(void 0!==t&&!this.styles[t])return!1;var i=void 0===t?this.styles:{0:this.styles[t]};for(var n in i)for(var r in i[n])if(void 0!==i[n][r][e])return!0;return!1},cleanStyle:function(e){if(!this.styles||!e||""===e)return!1;var t,i,n=this.styles,r=0,o=!0,a=0;for(var s in n){for(var l in t=0,n[s]){var c;r++,(c=n[s][l]).hasOwnProperty(e)?(i?c[e]!==i&&(o=!1):i=c[e],c[e]===this[e]&&delete c[e]):o=!1,0!==Object.keys(c).length?t++:delete n[s][l]}0===t&&delete n[s]}for(var h=0;h<this._textLines.length;h++)a+=this._textLines[h].length;o&&r===a&&(this[e]=i,this.removeStyle(e))},removeStyle:function(e){if(this.styles&&e&&""!==e){var t,i,n,r=this.styles;for(i in r){for(n in t=r[i])delete t[n][e],0===Object.keys(t[n]).length&&delete t[n];0===Object.keys(t).length&&delete r[i]}}},_extendStyles:function(e,t){var i=this.get2DCursorLocation(e);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),C.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),t)},get2DCursorLocation:function(e,t){void 0===e&&(e=this.selectionStart);for(var i=t?this._unwrappedTextLines:this._textLines,n=i.length,r=0;r<n;r++){if(e<=i[r].length)return{lineIndex:r,charIndex:e};e-=i[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:i[r-1].length<e?i[r-1].length:e}},getSelectionStyles:function(e,t,i){void 0===e&&(e=this.selectionStart||0),void 0===t&&(t=this.selectionEnd||e);for(var n=[],r=e;r<t;r++)n.push(this.getStyleAtPosition(r,i));return n},getStyleAtPosition:function(e,t){var i=this.get2DCursorLocation(e);return(t?this.getCompleteStyleDeclaration(i.lineIndex,i.charIndex):this._getStyleDeclaration(i.lineIndex,i.charIndex))||{}},setSelectionStyles:function(e,t,i){void 0===t&&(t=this.selectionStart||0),void 0===i&&(i=this.selectionEnd||t);for(var n=t;n<i;n++)this._extendStyles(n,e);return this._forceClearCache=!0,this},_getStyleDeclaration:function(e,t){var i=this.styles&&this.styles[e];return i?i[t]:null},getCompleteStyleDeclaration:function(e,t){for(var i,n=this._getStyleDeclaration(e,t)||{},r={},o=0;o<this._styleProperties.length;o++)r[i=this._styleProperties[o]]=void 0===n[i]?this[i]:n[i];return r},_setStyleDeclaration:function(e,t,i){this.styles[e][t]=i},_deleteStyleDeclaration:function(e,t){delete this.styles[e][t]},_getLineStyle:function(e){return!!this.styles[e]},_setLineStyle:function(e){this.styles[e]={}},_deleteLineStyle:function(e){delete this.styles[e]}}),function(){function e(e){e.textDecoration&&(e.textDecoration.indexOf("underline")>-1&&(e.underline=!0),e.textDecoration.indexOf("line-through")>-1&&(e.linethrough=!0),e.textDecoration.indexOf("overline")>-1&&(e.overline=!0),delete e.textDecoration)}C.IText=C.util.createClass(C.Text,C.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(e,t){this.callSuper("initialize",e,t),this.initBehavior()},setSelectionStart:function(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)},setSelectionEnd:function(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)},_updateAndFire:function(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(e){this.clearContextTop(),this.callSuper("render",e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(e){this.callSuper("_render",e)},clearContextTop:function(e){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop,i=this.canvas.viewportTransform;t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(t),this._clearTextArea(t),e||t.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this._getCursorBoundaries(),t=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),t.restore()}},_clearTextArea:function(e){var t=this.width+4,i=this.height+4;e.clearRect(-t/2,-i/2,t,i)},_getCursorBoundaries:function(e){void 0===e&&(e=this.selectionStart);var t=this._getLeftOffset(),i=this._getTopOffset(),n=this._getCursorBoundariesOffsets(e);return{left:t,top:i,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var t,i,n,r,o=0,a=0,s=this.get2DCursorLocation(e);n=s.charIndex,i=s.lineIndex;for(var l=0;l<i;l++)o+=this.getHeightOfLine(l);t=this._getLineLeftOffset(i);var c=this.__charBounds[i][n];return c&&(a=c.left),0!==this.charSpacing&&n===this._textLines[i].length&&(a-=this._getWidthOfCharSpacing()),r={top:o,left:t+(a>0?a:0)},"rtl"===this.direction&&(r.left*=-1),this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(e,t){var i=this.get2DCursorLocation(),n=i.lineIndex,r=i.charIndex>0?i.charIndex-1:0,o=this.getValueOfPropertyAt(n,r,"fontSize"),a=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/a,l=e.topOffset,c=this.getValueOfPropertyAt(n,r,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(e,t),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,r,"fill"),t.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-s/2,l+e.top+c,s,o)},renderSelection:function(e,t){for(var i=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf("justify"),o=this.get2DCursorLocation(i),a=this.get2DCursorLocation(n),s=o.lineIndex,l=a.lineIndex,c=o.charIndex<0?0:o.charIndex,h=a.charIndex<0?0:a.charIndex,u=s;u<=l;u++){var d,f=this._getLineLeftOffset(u)||0,p=this.getHeightOfLine(u),g=0,m=0;if(u===s&&(g=this.__charBounds[s][c].left),u>=s&&u<l)m=r&&!this.isEndOfWrapping(u)?this.width:this.getLineWidth(u)||5;else if(u===l)if(0===h)m=this.__charBounds[l][h].left;else{var v=this._getWidthOfCharSpacing();m=this.__charBounds[l][h-1].left+this.__charBounds[l][h-1].width-v}d=p,(this.lineHeight<1||u===l&&this.lineHeight>1)&&(p/=this.lineHeight);var _=e.left+f+g,b=m-g,y=p,w=0;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",y=1,w=p):t.fillStyle=this.selectionColor,"rtl"===this.direction&&(_=this.width-_-b),t.fillRect(_,e.top+e.topOffset+w,b,y),e.topOffset+=d}},getCurrentCharFontSize:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")},getCurrentCharColor:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")},_getCurrentCharIndex:function(){var e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}}),C.IText.fromObject=function(t,i){if(e(t),t.styles)for(var n in t.styles)for(var r in t.styles[n])e(t.styles[n][r]);C.Object._fromObject("IText",t,i,"text")}}(),S=C.util.object.clone,C.util.object.extend(C.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",(function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))}))},initRemovedHandler:function(){var e=this;this.on("removed",(function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],C.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))}))},_initCanvasHandlers:function(e){e._mouseUpITextHandler=function(){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.__isMousedown=!1}))},e.on("mouse:up",e._mouseUpITextHandler)},_removeCanvasHandlers:function(e){e.off("mouse:up",e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(e,t,i,n){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},e.animate("_currentCursorOpacity",t,{duration:i,onComplete:function(){r.isAborted||e[n]()},onChange:function(){e.canvas&&e.selectionStart===e.selectionEnd&&e.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){e._currentTickCompleteState=e._animateCursor(e,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(e){var t=this,i=e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){t._tick()}),i)},abortCursorAnimation:function(){var e=this._currentTickState||this._currentTickCompleteState,t=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,e&&t&&t.clearContext(t.contextTop||t.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(e){var t=0,i=e-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)t++,i--;for(;/\S/.test(this._text[i])&&i>-1;)t++,i--;return e-t},findWordBoundaryRight:function(e){var t=0,i=e;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)t++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)t++,i++;return e+t},findLineBoundaryLeft:function(e){for(var t=0,i=e-1;!/\n/.test(this._text[i])&&i>-1;)t++,i--;return e-t},findLineBoundaryRight:function(e){for(var t=0,i=e;!/\n/.test(this._text[i])&&i<this._text.length;)t++,i++;return e+t},searchWordBoundary:function(e,t){for(var i=this._text,n=this._reSpace.test(i[e])?e-1:e,r=i[n],o=C.reNonWord;!o.test(r)&&n>0&&n<i.length;)r=i[n+=t];return o.test(r)&&(n+=1===t?0:1),n},selectWord:function(e){e=e||this.selectionStart;var t=this.searchWordBoundary(e,-1),i=this.searchWordBoundary(e,1);this.selectionStart=t,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(e){e=e||this.selectionStart;var t=this.findLineBoundaryLeft(e),i=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(e){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(e){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.selected=!1,e.isEditing&&e.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(e){if(this.__isMousedown&&this.isEditing){var t=this.getSelectionStartFromPointer(e.e),i=this.selectionStart,n=this.selectionEnd;(t===this.__selectionStartOnMouseDown&&i!==n||i!==t&&n!==t)&&(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===n||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(e,t,i){var n=i.slice(0,e),r=C.util.string.graphemeSplit(n).length;if(e===t)return{selectionStart:r,selectionEnd:r};var o=i.slice(e,t);return{selectionStart:r,selectionEnd:r+C.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(e,t,i){var n=i.slice(0,e).join("").length;return e===t?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+i.slice(e,t).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),i=this.get2DCursorLocation(e),n=i.lineIndex,r=i.charIndex,o=this.getValueOfPropertyAt(n,r,"fontSize")*this.lineHeight,a=t.leftOffset,s=this.calcTransformMatrix(),l={x:t.left+a,y:t.top+t.topOffset+o},c=this.canvas.getRetinaScaling(),h=this.canvas.upperCanvasEl,u=h.width/c,d=h.height/c,f=u-o,p=d-o,g=h.clientWidth/u,m=h.clientHeight/d;return l=C.util.transformPoint(l,s),(l=C.util.transformPoint(l,this.canvas.viewportTransform)).x*=g,l.y*=m,l.x<0&&(l.x=0),l.x>f&&(l.x=f),l.y<0&&(l.y=0),l.y>p&&(l.y=p),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var e=this._textBeforeEdit!==this.text,t=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var e in this.styles)this._textLines[e]||delete this.styles[e]},removeStyleFromTo:function(e,t){var i,n,r=this.get2DCursorLocation(e,!0),o=this.get2DCursorLocation(t,!0),a=r.lineIndex,s=r.charIndex,l=o.lineIndex,c=o.charIndex;if(a!==l){if(this.styles[a])for(i=s;i<this._unwrappedTextLines[a].length;i++)delete this.styles[a][i];if(this.styles[l])for(i=c;i<this._unwrappedTextLines[l].length;i++)(n=this.styles[l][i])&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+i-c]=n);for(i=a+1;i<=l;i++)delete this.styles[i];this.shiftLineStyles(l,a-l)}else if(this.styles[a]){n=this.styles[a];var h,u,d=c-s;for(i=s;i<c;i++)delete n[i];for(u in this.styles[a])(h=parseInt(u,10))>=c&&(n[h-d]=n[u],delete n[u])}},shiftLineStyles:function(e,t){var i=S(this.styles);for(var n in this.styles){var r=parseInt(n,10);r>e&&(this.styles[r+t]=i[r],i[r-t]||delete this.styles[r])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,t,i,n){var r,o={},a=!1,s=this._unwrappedTextLines[e].length===t;for(var l in i||(i=1),this.shiftLineStyles(e,i),this.styles[e]&&(r=this.styles[e][0===t?t:t-1]),this.styles[e]){var c=parseInt(l,10);c>=t&&(a=!0,o[c-t]=this.styles[e][l],s&&0===t||delete this.styles[e][l])}var h=!1;for(a&&!s&&(this.styles[e+i]=o,h=!0),h&&i--;i>0;)n&&n[i-1]?this.styles[e+i]={0:S(n[i-1])}:r?this.styles[e+i]={0:S(r)}:delete this.styles[e+i],i--;this._forceClearCache=!0},insertCharStyleObject:function(e,t,i,n){this.styles||(this.styles={});var r=this.styles[e],o=r?S(r):{};for(var a in i||(i=1),o){var s=parseInt(a,10);s>=t&&(r[s+i]=o[s],o[s-i]||delete r[s])}if(this._forceClearCache=!0,n)for(;i--;)Object.keys(n[i]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+i]=S(n[i]));else if(r)for(var l=r[t?t-1:1];l&&i--;)this.styles[e][t+i]=S(l)},insertNewStyleBlock:function(e,t,i){for(var n=this.get2DCursorLocation(t,!0),r=[0],o=0,a=0;a<e.length;a++)"\n"===e[a]?r[++o]=0:r[o]++;for(r[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,r[0],i),i=i&&i.slice(r[0]+1)),o&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+r[0],o),a=1;a<o;a++)r[a]>0?this.insertCharStyleObject(n.lineIndex+a,0,r[a],i):i&&this.styles[n.lineIndex+a]&&i[0]&&(this.styles[n.lineIndex+a][0]=i[0]),i=i&&i.slice(r[a]+1);r[a]>0&&this.insertCharStyleObject(n.lineIndex+a,0,r[a],i)},setSelectionStartEndWithShift:function(e,t,i){i<=e?(t===e?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=e),this.selectionStart=i):i>e&&i<t?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(t===e?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=t),this.selectionEnd=i)},setSelectionInBoundaries:function(){var e=this.text.length;this.selectionStart>e?this.selectionStart=e:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>e?this.selectionEnd=e:this.selectionEnd<0&&(this.selectionEnd=0)}}),C.util.object.extend(C.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(e){if(this.canvas){this.__newClickTime=+new Date;var t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),this._stopEvent(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))},tripleClickHandler:function(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(e){if(this.__isMousedown=!1,!(!this.editable||this.group||e.transform&&e.transform.actionPerformed||e.e.button&&1!==e.e.button)){if(this.canvas){var t=this.canvas._activeObject;if(t&&t!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(e){var t=this.getSelectionStartFromPointer(e),i=this.selectionStart,n=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(i,n,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(e){for(var t,i=this.getLocalPointer(e),n=0,r=0,o=0,a=0,s=0,l=0,c=this._textLines.length;l<c&&o<=i.y;l++)o+=this.getHeightOfLine(l)*this.scaleY,s=l,l>0&&(a+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));r=this._getLineLeftOffset(s)*this.scaleX,t=this._textLines[s],"rtl"===this.direction&&(i.x=this.width*this.scaleX-i.x+r);for(var h=0,u=t.length;h<u&&(n=r,(r+=this.__charBounds[s][h].kernedWidth*this.scaleX)<=i.x);h++)a++;return this._getNewSelectionStartFromOffset(i,n,r,a,u)},_getNewSelectionStartFromOffset:function(e,t,i,n,r){var o=e.x-t,a=i-e.x,s=n+(a>o||a<0?0:1);return this.flipX&&(s=r-s),s>this._text.length&&(s=this._text.length),s}}),C.util.object.extend(C.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=C.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var e=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+e.top+"; left: "+e.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: "+e.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):C.document.body.appendChild(this.hiddenTextarea),C.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),C.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),C.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),C.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),C.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),C.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(C.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing){var t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(e){var t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),this.isEditing){var i,n,r,o,a,s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,l=this._text.length,c=s.length,h=c-l,u=this.selectionStart,d=this.selectionEnd,f=u!==d;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var p=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),g=u>p.selectionStart;f?(i=this._text.slice(u,d),h+=d-u):c<l&&(i=g?this._text.slice(d+h,d):this._text.slice(u,u-h)),n=s.slice(p.selectionEnd-h,p.selectionEnd),i&&i.length&&(n.length&&(r=this.getSelectionStyles(u,u+1,!1),r=n.map((function(){return r[0]}))),f?(o=u,a=d):g?(o=d-i.length,a=d):(o=d,a=d+i.length),this.removeStyleFromTo(o,a)),n.length&&(t&&n.join("")===C.copiedText&&!C.disableStyleCopyPaste&&(r=C.copiedTextStyle),this.insertNewStyleBlock(n,u,r)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(e){this.compositionStart=e.target.selectionStart,this.compositionEnd=e.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(C.copiedText=this.getSelectedText(),C.disableStyleCopyPaste?C.copiedTextStyle=null:C.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(e){return e&&e.clipboardData||C.window.clipboardData},_getWidthBeforeCursor:function(e,t){var i,n=this._getLineLeftOffset(e);return t>0&&(n+=(i=this.__charBounds[e][t-1]).left+i.width),n},getDownCursorOffset:function(e,t){var i=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(i),r=n.lineIndex;if(r===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-i;var o=n.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r+1,a);return this._textLines[r].slice(o).length+s+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(e,t){var i=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(i),r=n.lineIndex;if(0===r||e.metaKey||33===e.keyCode)return-i;var o=n.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r-1,a),l=this._textLines[r].slice(0,o),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+s-l.length+(1-c)},_getIndexOnLine:function(e,t){for(var i,n,r=this._textLines[e],o=this._getLineLeftOffset(e),a=0,s=0,l=r.length;s<l;s++)if((o+=i=this.__charBounds[e][s].width)>t){n=!0;var c=o-i,h=o,u=Math.abs(c-t);a=Math.abs(h-t)<u?s:s-1;break}return n||(a=r.length-1),a},moveCursorDown:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)},moveCursorUp:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)},_moveCursorUpOrDown:function(e,t){var i=this["get"+e+"CursorOffset"](t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(e){var t="left"===this._selectionDirection?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e},moveCursorWithoutShift:function(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)},_move:function(e,t,i){var n;if(e.altKey)n=this["findWordBoundary"+i](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===i?-1:1,!0;n=this["findLineBoundary"+i](this[t])}if(void 0!==typeof n&&this[t]!==n)return this[t]=n,!0},_moveLeft:function(e,t){return this._move(e,t,"Left")},_moveRight:function(e,t){return this._move(e,t,"Right")},moveCursorLeftWithoutShift:function(e){var t=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t},moveCursorLeftWithShift:function(e){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(e,"selectionStart")):void 0},moveCursorRight:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)},_moveCursorLeftOrRight:function(e,t){var i="moveCursor"+e+"With";this._currentCursorOpacity=1,t.shiftKey?i+="Shift":i+="outShift",this[i](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(e){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(e,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(e){var t=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t},removeChars:function(e,t){void 0===t&&(t=e+1),this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(e,t,i,n){void 0===n&&(n=i),n>i&&this.removeStyleFromTo(i,n);var r=C.util.string.graphemeSplit(e);this.insertNewStyleBlock(r,i,t),this._text=[].concat(this._text.slice(0,i),r,this._text.slice(n)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var e=C.util.toFixed,t=/  +/g;C.util.object.extend(C.Text.prototype,{_toSVG:function(){var e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(e){var t=this.getSvgTextDecoration(this);return[e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(e,t){var i,n=[],r=[],o=e;this._setSVGBg(r);for(var a=0,s=this._textLines.length;a<s;a++)i=this._getLineLeftOffset(a),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(r,a,t+i,o),this._setSVGTextLineText(n,a,t+i,o),o+=this.getHeightOfLine(a);return{textSpans:n,textBgRects:r}},_createTextCharSpan:function(i,n,r,o){var a=i!==i.trim()||i.match(t),s=this.getSvgSpanStyles(n,a),l=s?'style="'+s+'"':"",c=n.deltaY,h="",u=C.Object.NUM_FRACTION_DIGITS;return c&&(h=' dy="'+e(c,u)+'" '),['<tspan x="',e(r,u),'" y="',e(o,u),'" ',h,l,">",C.util.string.escapeXml(i),"</tspan>"].join("")},_setSVGTextLineText:function(e,t,i,n){var r,o,a,s,l,c=this.getHeightOfLine(t),h=-1!==this.textAlign.indexOf("justify"),u="",d=0,f=this._textLines[t];n+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,g=f.length-1;p<=g;p++)l=p===g||this.charSpacing,u+=f[p],a=this.__charBounds[t][p],0===d?(i+=a.kernedWidth-a.width,d+=a.width):d+=a.kernedWidth,h&&!l&&this._reSpaceAndTab.test(f[p])&&(l=!0),l||(r=r||this.getCompleteStyleDeclaration(t,p),o=this.getCompleteStyleDeclaration(t,p+1),l=this._hasStyleChangedForSvg(r,o)),l&&(s=this._getStyleDeclaration(t,p)||{},e.push(this._createTextCharSpan(u,s,i,n)),u="",r=o,i+=d,d=0)},_pushTextBgRect:function(t,i,n,r,o,a){var s=C.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(i),' x="',e(n,s),'" y="',e(r,s),'" width="',e(o,s),'" height="',e(a,s),'"></rect>\n')},_setSVGTextLineBg:function(e,t,i,n){for(var r,o,a=this._textLines[t],s=this.getHeightOfLine(t)/this.lineHeight,l=0,c=0,h=this.getValueOfPropertyAt(t,0,"textBackgroundColor"),u=0,d=a.length;u<d;u++)r=this.__charBounds[t][u],(o=this.getValueOfPropertyAt(t,u,"textBackgroundColor"))!==h?(h&&this._pushTextBgRect(e,h,i+c,n,l,s),c=r.left,l=r.width,h=o):l+=r.kernedWidth;o&&this._pushTextBgRect(e,o,i+c,n,l,s)},_getFillAttributes:function(e){var t=e&&"string"==typeof e?new C.Color(e):"";return t&&t.getSource()&&1!==t.getAlpha()?'opacity="'+t.getAlpha()+'" fill="'+t.setAlpha(1).toRgb()+'"':'fill="'+e+'"'},_getSVGLineTopOffset:function(e){for(var t,i=0,n=0;n<e;n++)i+=this.getHeightOfLine(n);return t=this.getHeightOfLine(n),{lineTop:i,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(e){return C.Object.prototype.getSvgStyles.call(this,e)+" white-space: pre;"}})}(),function(e){var t=e.fabric||(e.fabric={});t.Textbox=t.util.createClass(t.IText,t.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:t.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(e){for(var t=0,i=0,n=0,r={},o=0;o<e.graphemeLines.length;o++)"\n"===e.graphemeText[n]&&o>0?(i=0,n++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[n])&&o>0&&(i++,n++),r[o]={line:t,offset:i},n+=e.graphemeLines[o].length,i+=e.graphemeLines[o].length;return r},styleHas:function(e,i){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[i];n&&(i=n.line)}return t.Text.prototype.styleHas.call(this,e,i)},isEmptyStyles:function(e){if(!this.styles)return!0;var t,i,n=0,r=!1,o=this._styleMap[e],a=this._styleMap[e+1];for(var s in o&&(e=o.line,n=o.offset),a&&(r=a.line===e,t=a.offset),i=void 0===e?this.styles:{line:this.styles[e]})for(var l in i[s])if(l>=n&&(!r||l<t))for(var c in i[s][l])return!1;return!0},_getStyleDeclaration:function(e,t){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[e];if(!i)return null;e=i.line,t=i.offset+t}return this.callSuper("_getStyleDeclaration",e,t)},_setStyleDeclaration:function(e,t,i){var n=this._styleMap[e];e=n.line,t=n.offset+t,this.styles[e][t]=i},_deleteStyleDeclaration:function(e,t){var i=this._styleMap[e];e=i.line,t=i.offset+t,delete this.styles[e][t]},_getLineStyle:function(e){var t=this._styleMap[e];return!!this.styles[t.line]},_setLineStyle:function(e){var t=this._styleMap[e];this.styles[t.line]={}},_wrapText:function(e,t){var i,n=[];for(this.isWrapping=!0,i=0;i<e.length;i++)n=n.concat(this._wrapLine(e[i],i,t));return this.isWrapping=!1,n},_measureWord:function(e,t,i){var n,r=0;i=i||0;for(var o=0,a=e.length;o<a;o++)r+=this._getGraphemeBox(e[o],t,o+i,n,!0).kernedWidth,n=e[o];return r},_wrapLine:function(e,i,n,r){var o=0,a=this.splitByGrapheme,s=[],l=[],c=a?t.util.string.graphemeSplit(e):e.split(this._wordJoiners),h="",u=0,d=a?"":" ",f=0,p=0,g=0,m=!0,v=this._getWidthOfCharSpacing();r=r||0,0===c.length&&c.push([]),n-=r;for(var _=0;_<c.length;_++)h=a?c[_]:t.util.string.graphemeSplit(c[_]),f=this._measureWord(h,i,u),u+=h.length,(o+=p+f-v)>n&&!m?(s.push(l),l=[],o=f,m=!0):o+=v,m||a||l.push(d),l=l.concat(h),p=a?0:this._measureWord([d],i,u),u++,m=!1,f>g&&(g=f);return _&&s.push(l),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-v+r),s},isEndOfWrapping:function(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line},missingNewlineOffset:function(e){return this.splitByGrapheme?this.isEndOfWrapping(e)?1:0:1},_splitTextIntoLines:function(e){for(var i=t.Text.prototype._splitTextIntoLines.call(this,e),n=this._wrapText(i.lines,this.width),r=new Array(n.length),o=0;o<n.length;o++)r[o]=n[o].join("");return i.lines=r,i.graphemeLines=n,i},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var e={};for(var t in this._styleMap)this._textLines[t]&&(e[this._styleMap[t].line]=1);for(var t in this.styles)e[t]||delete this.styles[t]},toObject:function(e){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(e))}}),t.Textbox.fromObject=function(e,i){return t.Object._fromObject("Textbox",e,i,"text")}}(t),function(){var e=C.controlsUtils,t=e.scaleSkewCursorStyleHandler,i=e.scaleCursorStyleHandler,n=e.scalingEqually,r=e.scalingYOrSkewingX,o=e.scalingXOrSkewingY,a=e.scaleOrSkewActionName,s=C.Object.prototype.controls;if(s.ml=new C.Control({x:-.5,y:0,cursorStyleHandler:t,actionHandler:o,getActionName:a}),s.mr=new C.Control({x:.5,y:0,cursorStyleHandler:t,actionHandler:o,getActionName:a}),s.mb=new C.Control({x:0,y:.5,cursorStyleHandler:t,actionHandler:r,getActionName:a}),s.mt=new C.Control({x:0,y:-.5,cursorStyleHandler:t,actionHandler:r,getActionName:a}),s.tl=new C.Control({x:-.5,y:-.5,cursorStyleHandler:i,actionHandler:n}),s.tr=new C.Control({x:.5,y:-.5,cursorStyleHandler:i,actionHandler:n}),s.bl=new C.Control({x:-.5,y:.5,cursorStyleHandler:i,actionHandler:n}),s.br=new C.Control({x:.5,y:.5,cursorStyleHandler:i,actionHandler:n}),s.mtr=new C.Control({x:0,y:-.5,actionHandler:e.rotationWithSnapping,cursorStyleHandler:e.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),C.Textbox){var l=C.Textbox.prototype.controls={};l.mtr=s.mtr,l.tr=s.tr,l.br=s.br,l.tl=s.tl,l.bl=s.bl,l.mt=s.mt,l.mb=s.mb,l.mr=new C.Control({x:.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"}),l.ml=new C.Control({x:-.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"})}}()},192:()=>{},898:()=>{},245:()=>{}},My={};function Py(e){var t=My[e];if(void 0!==t)return t.exports;var i=My[e]={exports:{}};return Ly[e](i,i.exports,Py),i.exports}Py.d=(e,t)=>{for(var i in t)Py.o(t,i)&&!Py.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},Py.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Fy={};(()=>{let e;Py.d(Fy,{R:()=>e}),e="undefined"!=typeof document&&"undefined"!=typeof window?Py(653).fabric:{version:"5.2.1"}})();var By=Fy.R;
/*!
             * Dynamsoft JavaScript Library
             * @product Dynamsoft Camera Enhancer JS Edition
             * @website https://www.dynamsoft.com
             * @copyright Copyright 2023, Dynamsoft Corporation
             * @author Dynamsoft
             * @version 3.3.4 (js 20230414)
             * @fileoverview Dynamsoft JavaScript Library for Camera Enhancer
             * More info on DCE JS: https://www.dynamsoft.com/camera-enhancer/docs/programming/javascript/?ver=latest
             */const Ny="undefined"==typeof self;let jy,Vy,$y,Uy,Wy;if("undefined"!=typeof navigator&&(jy=navigator,Vy=jy.userAgent,$y=jy.platform,Uy=jy.mediaDevices),!Ny){const e={Edge:{search:"Edg",verSearch:"Edg"},OPR:null,Chrome:null,Safari:{str:jy.vendor,search:"Apple",verSearch:["Version","iPhone OS","CPU OS"]},Firefox:null,Explorer:{search:"MSIE",verSearch:"MSIE"}},t={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:$y,search:"Win"},Mac:{str:$y},Linux:{str:$y}};let i="unknownBrowser",n=0,r="unknownOS";for(let o in e){const t=e[o]||{};let r=t.str||Vy,a=t.search||o,s=t.verStr||Vy,l=t.verSearch||o;if(l instanceof Array||(l=[l]),-1!=r.indexOf(a)){i=o;for(let e of l){let t=s.indexOf(e);if(-1!=t){n=parseFloat(s.substring(t+e.length+1));break}}break}}for(let o in t){const e=t[o]||{};let i=e.str||Vy,n=e.search||o;if(-1!=i.indexOf(n)){r=o;break}}"Linux"==r&&-1!=Vy.indexOf("Windows NT")&&(r="HarmonyOS"),Wy={browser:i,version:n,OS:r}}Ny&&(Wy={browser:"ssr",version:0,OS:"ssr"});const zy="undefined"!=typeof WebAssembly&&Vy&&!(/Safari/.test(Vy)&&!/Chrome/.test(Vy)&&/\(.+\s11_2_([2-6]).*\)/.test(Vy)),Hy=!("undefined"==typeof Worker),Gy=!(!Uy||!Uy.getUserMedia),Yy=async()=>{let e=!1;if(Gy)try{(await Uy.getUserMedia({video:!0})).getTracks().forEach((e=>{e.stop()})),e=!0}catch(e){}return e};"Chrome"===Wy.browser&&Wy.version>66||"Safari"===Wy.browser&&Wy.version>13||"OPR"===Wy.browser&&Wy.version>43||"Edge"===Wy.browser&&Wy.version;const Xy=(()=>{if(!Ny&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"})();class qy{constructor(e,t){this._zIndex=null,this._drawingLayer=null,this._drawingLayerId=null,this._mapStyle=new Map,this.mapEvent_Callbacks=new Map([["selected",new Map],["deselected",new Map],["mousedown",new Map],["mouseup",new Map],["dblclick",new Map],["mouseover",new Map],["mouseout",new Map]]),this.mapNoteName_Content=new Map([]),this.isDrawingItem=!0,this._setFabricObject(e),this._mediaType=e.type,this.styleSelector="default",this.styleId=t}get mediaType(){return this._mediaType}get drawingLayerId(){return this._drawingLayerId}_setFabricObject(e){this._fabricObject=e,this._fabricObject.on("selected",(()=>{this.styleSelector="selected"})),this._fabricObject.on("deselected",(()=>{this._fabricObject.canvas&&this._fabricObject.canvas.getActiveObjects().includes(this._fabricObject)?this.styleSelector="selected":this.styleSelector="default","textbox"===this._fabricObject.type&&(this._fabricObject.isEditing&&this._fabricObject.exitEditing(),this._fabricObject.selected=!1)})),e.getDrawingItem=()=>this}_getFabricObject(){return this._fabricObject}_on(e,t){if(!t)return;const i=e.toLowerCase(),n=this.mapEvent_Callbacks.get(i);if(!n)throw new Error(`Event '${e}' does not exist.`);let r=n.get(t);r||(r=e=>{const i=e.e;if(!i)return void(t&&t.apply(this,[{targetItem:this,itemClientX:null,itemClientY:null,itemPageX:null,itemPageY:null}]));const n={targetItem:this,itemClientX:null,itemClientY:null,itemPageX:null,itemPageY:null};if(this._drawingLayer){let e,t,r,o;const a=i.target.getBoundingClientRect();e=a.left,t=a.top,r=e+window.scrollX,o=t+window.scrollY;const s=this._drawingLayer.fabricCanvas.lowerCanvasEl.width,l=this._drawingLayer.fabricCanvas.lowerCanvasEl.height,c=parseFloat(window.getComputedStyle(this._drawingLayer.fabricCanvas.lowerCanvasEl).width),h=parseFloat(window.getComputedStyle(this._drawingLayer.fabricCanvas.lowerCanvasEl).height),u=c/h,d=s/l,f=this._drawingLayer._getObjectFit();let p,g,m,v,_=1;if("contain"===f)u<d?(_=c/s,p=e+this.get("x")*_,g=t+this.get("y")*_+(h-l*_)/2,m=r+this.get("x")*_,v=o+this.get("y")*_+(h-l*_)/2):(_=h/l,p=e+this.get("x")*_+(c-s*_)/2,g=t+this.get("y")*_,m=r+this.get("x")*_+(c-s*_)/2,v=o+this.get("y")*_);else if("cover"===f)if(u<d){_=h/l;let i=this.get("x")*_-(s*_-c)/2;i=Math.max(i,0),i=Math.min(i,c),p=e+i,g=t+this.get("y")*_,m=r+i,v=o+this.get("y")*_}else{_=c/s;let i=this.get("y")*_-(l*_-h)/2;i=Math.max(i,0),i=Math.min(i,h),p=e+this.get("x")*_,g=t+i,m=r+this.get("x")*_,v=o+i}n.itemClientX=Math.round(p),n.itemClientY=Math.round(g),n.itemPageX=Math.round(m),n.itemPageY=Math.round(v)}for(let t of Object.getOwnPropertyNames(n))Object.defineProperty(i,t,{value:n[t],writable:!0});t&&t.apply(this,[i])},n.set(t,r),this._fabricObject.on("dblclick"===i?"mousedblclick":i,r))}on(e,t){this._on(e,t)}_off(e,t){const i=e.toLowerCase(),n=this.mapEvent_Callbacks.get(i);if(!n)throw new Error(`Event '${e}' does not exist.`);let r=n.get(t);r&&(n.delete(t),this._fabricObject.off("dblclick"===i?"mousedblclick":i,r))}off(e,t){this._off(e,t)}_setEditable(e){const t=this._fabricObject;e?(t.selectable=!0,t.hasControls=!0,t.hoverCursor=null):(t.selectable=!1,t.hasControls=!1,t.hoverCursor="default")}hasNote(e){return this.mapNoteName_Content.has(e)}addNote(e,t){if(this.hasNote(e.name)&&!t)throw new Error("A note with the same name already exists, please use a different name.");const i=e.content?JSON.parse(JSON.stringify(e.content)):e.content;this.mapNoteName_Content.set(e.name,[i])}getNote(e){const t=this.mapNoteName_Content.get(e);return t?1===t.length?{name:e,content:t[0]?JSON.parse(JSON.stringify(t[0])):t[0]}:{name:e,content:JSON.parse(JSON.stringify(t))}:null}getNotes(){const e=[];for(let t of this.mapNoteName_Content){let i=1===t[1].length?t[1][0]:t[1];i=i?JSON.parse(JSON.stringify(i)):i,e.push({name:t[0],content:i})}return e}updateNote(e,t,i){const n=this.mapNoteName_Content.get(e);if(!n)throw new Error("The note name does not exist.");i||(n.length=0),t=t?JSON.parse(JSON.stringify(t)):t,n.push(t)}deleteNote(e){this.mapNoteName_Content.delete(e)}clearNotes(){this.mapNoteName_Content.clear()}_extendSet(e,t){return!1}_extendGet(e){}set(e,t){if(!this._extendSet(e,t))if("x"===e){const e=this._fabricObject.group;e?(this._fabricObject.set("left",t-e.left-e.width/2),e.addWithUpdate()):this._fabricObject.set("left",t)}else if("y"===e){const e=this._fabricObject.group;e?(this._fabricObject.set("top",t-e.top-e.height/2),e.addWithUpdate()):this._fabricObject.set("top",t)}else"styleId"===e?this.styleId=t:this._fabricObject.set(e,t);["vertices","startPoint","endPoint","x","y","left","top","width","height","scaleX","scaleY","skewX","skewY","padding","angle","strokeWidth"].includes(e)&&this._fabricObject.setCoords()}get(e){let t=this._extendGet(e);if(void 0===t)if("x"===e){const e=this._fabricObject.group;t=e?this._fabricObject.get("left")+e.left+e.width/2:this._fabricObject.get("left")}else if("y"===e){const e=this._fabricObject.group;t=e?this._fabricObject.get("top")+e.top+e.height/2:this._fabricObject.get("top")}else t=["type","mediaType"].includes(e)?this.mediaType:"styleSelector"===e?this.styleSelector:"styleId"===e?this.styleId:"drawingLayerId"===e?this.drawingLayerId:this._fabricObject.get(e);return t}setAttribute(e,t){this.set(e,t)}getAttribute(e){return this.get(e)}}function Ky(e,t,i){let n=i.points[this.pointIndex].x-i.pathOffset.x,r=i.points[this.pointIndex].y-i.pathOffset.y;return By.util.transformPoint({x:n,y:r},i.calcTransformMatrix())}function Zy(e){let t=new By.Point(e.strokeUniform?1/e.scaleX:1,e.strokeUniform?1/e.scaleY:1).multiply(e.strokeWidth);return new By.Point(e.width+t.x,e.height+t.y)}function Jy(e,t,i,n){let r=t.target,o=r.controls[r.__corner],a=r.toLocalPoint(new By.Point(i,n),"center","center"),s=Zy(r),l=r._getTransformedDimensions(0,0),c={x:a.x*s.x/l.x+r.pathOffset.x,y:a.y*s.y/l.y+r.pathOffset.y};return r.points[o.pointIndex]=c,!0}function Qy(e,t){return function(i,n,r,o){let a=n.target,s=By.util.transformPoint({x:a.points[e].x-a.pathOffset.x,y:a.points[e].y-a.pathOffset.y},a.calcTransformMatrix()),l=t(i,n,r,o);a._setPositionDimensions({});let c=Zy(a),h=(a.points[e].x-a.pathOffset.x)/c.x,u=(a.points[e].y-a.pathOffset.y)/c.y;return a.setPositionByOrigin(s,h+.5,u+.5),l}}qy.arrMediaTypes=["rect","arc","polygon","image","text","line","path"],qy.arrStyleSelectors=["default","selected"];class ew extends qy{constructor(e,t){super(new By.Polygon(e,{objectCaching:!1}),t);const i=this._fabricObject;let n=i.points.length-1;i.controls=i.points.reduce((function(e,t,i){return e["p"+i]=new By.Control({positionHandler:Ky,actionHandler:Qy(i>0?i-1:n,Jy),actionName:"modifyPolygon",pointIndex:i}),e}),{})}_extendSet(e,t){if("vertices"===e){const e=this._fabricObject;if(e.group){const i=e.group;e.points=t.map((e=>({x:e.x-i.left-i.width/2,y:e.y-i.top-i.height/2}))),i.addWithUpdate()}else e.points=t;const i=e.points.length-1;return e.controls=e.points.reduce((function(e,t,n){return e["p"+n]=new By.Control({positionHandler:Ky,actionHandler:Qy(n>0?n-1:i,Jy),actionName:"modifyPolygon",pointIndex:n}),e}),{}),e._setPositionDimensions({}),!0}}_extendGet(e){if("vertices"===e){const e=[],t=this._fabricObject;if(t.selectable&&!t.group)for(let i in t.oCoords)e.push({x:t.oCoords[i].x,y:t.oCoords[i].y});else for(let i of t.points){let n=i.x-t.pathOffset.x,r=i.y-t.pathOffset.y;const o=By.util.transformPoint({x:n,y:r},t.calcTransformMatrix());e.push({x:o.x,y:o.y})}return e}}}const tw=e=>{let t=(e=>e.split("\n").map((e=>e.split("\t"))))(e);return(e=>{for(let t=0;;t++){let i=-1;for(let n=0;n<e.length;n++){let r=e[n][t];void 0!==r&&r.length>i&&(i=r.length)}if(-1===i)break;for(let n=0;n<e.length;n++){if(t>=e[n].length-1)continue;let r=" ".repeat(i+2-e[n][t].length);e[n][t]=e[n][t].concat(r)}}})(t),(e=>{let t="";for(let i=0;i<e.length;i++)t=t.concat(...e[i],i===e.length-1?"":"\n");return t})(t)};class iw extends qy{constructor(e,t,i,n,r){if("number"!=typeof n||n<=0)throw new RangeError("Invalid width.");super(new By.Textbox(tw(e),{left:t,top:i,width:n}),r),this._mediaType="text",this._text=e}_extendSet(e,t){if("text"===e)return this._text=t,this._fabricObject.set("text",tw(t)),!0}_extendGet(e){if("text"===e)return this._text}}"undefined"!=typeof document&&"undefined"!=typeof window&&(By.StaticCanvas.prototype.dispose=function(){return this.isRendering&&(By.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),By.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},By.Object.prototype.transparentCorners=!1,By.Object.prototype.cornerSize=20,By.Object.prototype.touchCornerSize=100,By.Object.prototype.cornerColor="rgb(254,142,20)",By.Object.prototype.cornerStyle="circle",By.Object.prototype.strokeUniform=!0,By.Object.prototype.hasBorders=!1,By.Canvas.prototype.containerClass="",By.Canvas.prototype.getPointer=function(e,t){if(this._absolutePointer&&!t)return this._absolutePointer;if(this._pointer&&t)return this._pointer;var i,n=this.upperCanvasEl,r=By.util.getPointer(e,n),o=n.getBoundingClientRect(),a=o.width||0,s=o.height||0;a&&s||("top"in o&&"bottom"in o&&(s=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(a=Math.abs(o.right-o.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,t||(r=this.restorePointerVpt(r));var l=this.getRetinaScaling();if(1!==l&&(r.x/=l,r.y/=l),0!==a&&0!==s){var c=window.getComputedStyle(n).objectFit,h=n.width,u=n.height,d=a,f=s;i={width:h/d,height:u/f};var p,g,m=h/u,v=d/f;return"contain"===c?m>v?(p=d,g=d/m,{x:r.x*i.width,y:(r.y-(f-g)/2)*i.width}):(p=f*m,g=f,{x:(r.x-(d-p)/2)*i.height,y:r.y*i.height}):"cover"===c?m>v?{x:(h-i.height*d)/2+r.x*i.height,y:r.y*i.height}:{x:r.x*i.width,y:(u-i.width*f)/2+r.y*i.width}:{x:r.x*i.width,y:r.y*i.height}}return i={width:1,height:1},{x:r.x*i.width,y:r.y*i.height}},By.Canvas.prototype._onTouchStart=function(e){var t=this.findTarget(e);!this.allowTouchScrolling&&e.cancelable&&e.preventDefault&&e.preventDefault(),t&&e.cancelable&&e.preventDefault&&e.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),this._resetTransformEventData();var i=this.upperCanvasEl,n=this._getEventPrefix();By.util.addListener(By.document,"touchend",this._onTouchEnd,{passive:!1}),By.util.addListener(By.document,"touchmove",this._onMouseMove,{passive:!1}),By.util.removeListener(i,n+"down",this._onMouseDown)},By.Textbox.prototype._wrapLine=function(e,t,i,n){const r=e.match(/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/g),o=!(!r||!r.length);var a=0,s=this.splitByGrapheme||o,l=[],c=[],h=s?By.util.string.graphemeSplit(e):e.split(this._wordJoiners),u="",d=0,f=s?"":" ",p=0,g=0,m=0,v=!0,_=this._getWidthOfCharSpacing();n=n||0,0===h.length&&h.push([]),i-=n;for(var b=0;b<h.length;b++)u=s?h[b]:By.util.string.graphemeSplit(h[b]),p=this._measureWord(u,t,d),d+=u.length,(a+=g+p-_)>i&&!v?(l.push(c),c=[],a=p,v=!0):a+=_,v||s||c.push(f),c=c.concat(u),g=s?0:this._measureWord([f],t,d),d++,v=!1,p>m&&(m=p);return b&&l.push(c),m+n>this.dynamicMinWidth&&(this.dynamicMinWidth=m-_+n),l});class nw{constructor(e,t,i,n){let r,o;switch(this.mapMediaType_Style=new Map,this.mode="viewer",this.onSelectionChange=null,this._arrDrwaingItem=[],this._arrFabricObject=[],this._visible=!0,e.hasOwnProperty("getFabricCanvas")?this.fabricCanvas=e.getFabricCanvas():(this.fabricCanvas=new By.Canvas(e,Object.assign(n,{allowTouchScrolling:!0})),this.fabricCanvas.setDimensions({width:"100%",height:"100%"},{cssOnly:!0}),this.fabricCanvas.lowerCanvasEl.className="",this.fabricCanvas.upperCanvasEl.className="",this.fabricCanvas.on("selection:created",(function(e){const t=e.selected,i=[];for(let n of t){const e=n.getDrawingItem()._drawingLayer;e&&!i.includes(e)&&i.push(e)}for(let n of i){const e=[];for(let i of t){const t=i.getDrawingItem();t._drawingLayer===n&&e.push(t)}setTimeout((()=>{n.onSelectionChange&&n.onSelectionChange(e,[])}),0)}})),this.fabricCanvas.on("before:selection:cleared",(function(e){const t=this.getActiveObjects(),i=[];for(let n of t){const e=n.getDrawingItem()._drawingLayer;e&&!i.includes(e)&&i.push(e)}for(let n of i){const e=[];for(let i of t){const t=i.getDrawingItem();t._drawingLayer===n&&e.push(t)}setTimeout((()=>{const t=[];for(let i of e)n.hasDrawingItem(i)&&t.push(i);t.length>0&&n.onSelectionChange&&n.onSelectionChange([],t)}),0)}})),this.fabricCanvas.on("selection:updated",(function(e){const t=e.selected,i=e.deselected,n=[];for(let r of t){const e=r.getDrawingItem()._drawingLayer;e&&!n.includes(e)&&n.push(e)}for(let r of i){const e=r.getDrawingItem()._drawingLayer;e&&!n.includes(e)&&n.push(e)}for(let r of n){const e=[],n=[];for(let i of t){const t=i.getDrawingItem();t._drawingLayer===r&&e.push(t)}for(let t of i){const e=t.getDrawingItem();e._drawingLayer===r&&n.push(e)}setTimeout((()=>{r.onSelectionChange&&r.onSelectionChange(e,n)}),0)}})),this.fabricCanvas.wrapperEl.style.position="absolute",e.getFabricCanvas=()=>this.fabricCanvas),this.id=t,this._mapDrawingStyles=i,t){case 1:r=i.get(1),o=i.get(5);break;case 2:r=i.get(2),o=i.get(6);break;case 3:r=i.get(3),o=i.get(7);break;default:r=i.get(4),o=i.get(8)}for(let a of qy.arrMediaTypes)this.mapMediaType_Style.set(a,{default:r,selected:o})}getId(){return this.id}_getDrawingStyle(e,t){if("number"!=typeof e)throw new Error("Invalid style id.");const i=this._mapDrawingStyles.get(e);return i?t?JSON.parse(JSON.stringify(i)):i:null}setVisible(e){if(e){for(let e of this._arrFabricObject)e.visible=!0;this._visible=!0}else{for(let e of this._arrFabricObject)e.visible=!1;this._visible=!1}this.fabricCanvas.renderAll()}isVisible(){return this._visible}_getItemCurrentStyleId(e){return e.styleId?e.styleId:this.mapMediaType_Style.get(e._mediaType)[e.styleSelector].styleId}_getItemCurrentStyle(e){return e.styleId?this._getDrawingStyle(e.styleId):e._mapStyle.get(e.styleSelector)||null}_changeMediaTypeCurStyleInStyleSelector(e,t,i,n){let r;switch(e){case"rect":r=this.fabricCanvas.getObjects("rect");break;case"arc":r=this.fabricCanvas.getObjects("circle");break;case"polygon":r=this.fabricCanvas.getObjects("polygon");break;case"image":r=this.fabricCanvas.getObjects("image");break;case"text":r=this.fabricCanvas.getObjects("textbox");break;case"line":r=this.fabricCanvas.getObjects("line");break;case"path":r=this.fabricCanvas.getObjects("path")}for(let o of r){if(!this._arrFabricObject.includes(o))continue;const e=o.getDrawingItem();e.styleSelector===t&&this._changeItemStyle(e,i,!0)}n||this.fabricCanvas.renderAll()}_changeItemStyle(e,t,i){if(!e||!t)return;const n=e._getFabricObject();"number"==typeof e.styleId&&(t=this._getDrawingStyle(e.styleId)),n.strokeWidth=t.lineWidth,"fill"===t.paintMode?(n.fill=t.fillStyle,n.stroke=t.fillStyle):"stroke"===t.paintMode?(n.fill="transparent",n.stroke=t.strokeStyle):"strokeAndFill"===t.paintMode&&(n.fill=t.fillStyle,n.stroke=t.strokeStyle),n.fontFamily&&(n.fontFamily=t.fontFamily),n.fontSize&&(n.fontSize=t.fontSize),n.group||(n.dirty=!0),i||this.fabricCanvas.renderAll()}_updateGroupItem(e,t,i){if(!e||!t)return;const n=e.getChildItems();if("add"===i){if(n.includes(t))return;const i=t._getFabricObject();if(this.fabricCanvas.getObjects().includes(i)){if(!this._arrFabricObject.includes(i))throw new Error("Existed in other drawing layers.");t._zIndex=null}else{let i;if(t.styleId)i=this._getDrawingStyle(t.styleId);else{i=this.mapMediaType_Style.get(t._mediaType)[e.styleSelector];const n=()=>{this._changeItemStyle(t,this.mapMediaType_Style.get(t._mediaType).selected,!0)},r=()=>{this._changeItemStyle(t,this.mapMediaType_Style.get(t._mediaType).default,!0)};t._on("selected",n),t._on("deselected",r),t._funcChangeStyleToSelected=n,t._funcChangeStyleToDefault=r}t._drawingLayer=this,t._drawingLayerId=this.id,this._changeItemStyle(t,i,!0)}e._fabricObject.addWithUpdate(t._getFabricObject())}else{if("remove"!==i)return;if(!n.includes(t))return;t._zIndex=null,t._drawingLayer=null,t._drawingLayerId=null,t._off("selected",t._funcChangeStyleToSelected),t._off("deselected",t._funcChangeStyleToDefault),t._funcChangeStyleToSelected=null,t._funcChangeStyleToDefault=null,e._fabricObject.removeWithUpdate(t._getFabricObject())}this.fabricCanvas.renderAll()}_addDrawingItem(e,t){let i=e._getFabricObject();const n=this.fabricCanvas.getObjects();let r,o;if(n.includes(i)){if(this._arrFabricObject.includes(i))return;throw new Error("Existed in other drawing layers.")}if("group"===e._mediaType){r=e.getChildItems();for(let e of r)if(e._drawingLayer&&e._drawingLayer!==this)throw new Error("The childItems of DT_Group have existed in other drawing layers.")}if(t&&"object"==typeof t&&!Array.isArray(t))for(let l in t)i.set(l,t[l]);if(r){for(let e of r){const t=this.mapMediaType_Style.get(e._mediaType);for(let i of qy.arrStyleSelectors)e._mapStyle.set(i,t[i]);if(e.styleId)o=this._getDrawingStyle(e.styleId);else{o=t.default;const i=()=>{this._changeItemStyle(e,this.mapMediaType_Style.get(e._mediaType).selected,!0)},n=()=>{this._changeItemStyle(e,this.mapMediaType_Style.get(e._mediaType).default,!0)};e._on("selected",i),e._on("deselected",n),e._funcChangeStyleToSelected=i,e._funcChangeStyleToDefault=n}e._drawingLayer=this,e._drawingLayerId=this.id,this._changeItemStyle(e,o,!0)}i.dirty=!0,this.fabricCanvas.renderAll()}else{const t=this.mapMediaType_Style.get(e._mediaType);for(let i of qy.arrStyleSelectors)e._mapStyle.set(i,t[i]);if(e.styleId)o=this._getDrawingStyle(e.styleId);else{o=t.default;const i=()=>{this._changeItemStyle(e,this.mapMediaType_Style.get(e._mediaType).selected)},n=()=>{this._changeItemStyle(e,this.mapMediaType_Style.get(e._mediaType).default)};e._on("selected",i),e._on("deselected",n),e._funcChangeStyleToSelected=i,e._funcChangeStyleToDefault=n}this._changeItemStyle(e,o)}e._zIndex=this.id,e._drawingLayer=this,e._drawingLayerId=this.id;const a=this._arrFabricObject.length;let s=n.length;if(a)s=n.indexOf(this._arrFabricObject[a-1])+1;else for(let l=0;l<n.length;l++)if(e._zIndex<n[l].getDrawingItem()._zIndex){s=l;break}this._arrDrwaingItem.push(e),this._arrFabricObject.push(i),this._visible?i.visible=!0:i.visible=!1,this.fabricCanvas.insertAt(i,s,!1)}addDrawingItem(e){if(!e||!e.isDrawingItem)throw TypeError("Illegal drawing item.");if("viewer"===this.mode)e._setEditable(!1);else{if("editor"!==this.mode)throw new Error("Illegal 'mode'.");e._setEditable(!0)}this._addDrawingItem(e)}addDrawingItems(e){for(let t of e)this.addDrawingItem(t)}removeDrawingItem(e){if(!e||!e.isDrawingItem)throw TypeError("Illegal drawing item.");if(!this.hasDrawingItem(e))return;if(e._zIndex=null,e._drawingLayer=null,e._drawingLayerId=null,"group"===e._mediaType){const t=e.getChildItems();for(let e of t)e._zIndex=null,e._drawingLayer=null,e._drawingLayerId=null,e._off("selected",e._funcChangeStyleToSelected),e._off("deselected",e._funcChangeStyleToDefault),e._funcChangeStyleToSelected=null,e._funcChangeStyleToDefault=null,e._mapStyle.clear()}else e._off("selected",e._funcChangeStyleToSelected),e._off("deselected",e._funcChangeStyleToDefault),e._funcChangeStyleToSelected=null,e._funcChangeStyleToDefault=null,e._mapStyle.clear();const t=e._getFabricObject();"selected"===e.styleSelector&&(t.group?t.group.removeWithUpdate(t):this.fabricCanvas._activeObject=null,e.styleSelector="default"),this.fabricCanvas.remove(t),this._arrDrwaingItem.splice(this._arrDrwaingItem.indexOf(e),1),this._arrFabricObject.splice(this._arrFabricObject.indexOf(t),1)}removeDrawingItems(e){for(let t of e)this.removeDrawingItem(t)}setDrawingItems(e){this.clearDrawingItems(),this.addDrawingItems(e)}getDrawingItems(e){return e&&"function"==typeof e?this._arrDrwaingItem.filter(e):Array.from(this._arrDrwaingItem)}getSelectedDrawingItems(){const e=this.fabricCanvas.getActiveObjects(),t=[];for(let i of e)this._arrFabricObject.includes(i)&&t.push(i.getDrawingItem());return t}hasDrawingItem(e){if(!e||!e.isDrawingItem)throw TypeError("Illegal drawing item.");return this._arrDrwaingItem.includes(e)}clearDrawingItems(){this.removeDrawingItems(Array.from(this._arrDrwaingItem))}setDrawingStyle(e,t,i){t=t?t.toLocaleLowerCase():"all",i=i?i.toLocaleLowerCase():"all";let n,r=this._getDrawingStyle(e);if("all"===t){const e=this.mapMediaType_Style.keys();for(let t of e)if(n=this.mapMediaType_Style.get(t),"all"===i)for(let e of qy.arrStyleSelectors){this._changeMediaTypeCurStyleInStyleSelector(t,e,r,!0),n[e]=r;for(let t of this._arrDrwaingItem)t._mapStyle.set(e,r)}else{this._changeMediaTypeCurStyleInStyleSelector(t,i,r,!0),n[i]=r;for(let e of this._arrDrwaingItem)e._mapStyle.set(i,r)}this.fabricCanvas.renderAll()}else if(n=this.mapMediaType_Style.get(t),"all"===i)for(let o of qy.arrStyleSelectors){this._changeMediaTypeCurStyleInStyleSelector(t,o,r,!0),n[o]=r;for(let e of this._arrDrwaingItem)e._mediaType===t&&e._mapStyle.set(o,r)}else{this._changeMediaTypeCurStyleInStyleSelector(t,i,r,!0),n[i]=r;for(let e of this._arrDrwaingItem)e._mediaType===t&&e._mapStyle.set(i,r)}}setMode(e){if("viewer"===(e=e.toLocaleLowerCase())){for(let e of this._arrDrwaingItem)e._setEditable(!1);this.fabricCanvas.discardActiveObject(),this.fabricCanvas.renderAll(),this.mode="viewer"}else{if("editor"!==e)throw new RangeError("Invalid value.");for(let e of this._arrDrwaingItem)e._setEditable(!0);this.mode="editor"}this._manager._switchPointerEvent()}getMode(){return this.mode}_setDimensions(e,t){this.fabricCanvas.setDimensions(e,t)}_setObjectFit(e){if(e=e.toLowerCase(),!["contain","cover"].includes(e))throw new Error(`Unsupported value '${e}'.`);this.fabricCanvas.lowerCanvasEl.style.objectFit=e,this.fabricCanvas.upperCanvasEl.style.objectFit=e}_getObjectFit(){return this.fabricCanvas.lowerCanvasEl.style.objectFit}renderAll(){for(let e of this._arrDrwaingItem){const t=this._getItemCurrentStyle(e);this._changeItemStyle(e,t,!0)}this.fabricCanvas.renderAll()}dispose(){this.clearDrawingItems(),1===this._manager._arrDrawingLayer.length&&(this.fabricCanvas.wrapperEl.style.pointerEvents="none",this.fabricCanvas.dispose(),this._arrDrwaingItem.length=0,this._arrFabricObject.length=0)}}class rw{constructor(){this._arrDrawingLayer=[],this._mapDrawingStyles=new Map([[1,{id:1,lineWidth:4,fillStyle:"rgba(73, 173, 245, 0.3)",strokeStyle:"rgba(73, 173, 245, 1)",paintMode:"stroke",fontFamily:"consolas",fontSize:40}],[2,{id:2,lineWidth:2,fillStyle:"rgba(73, 245, 73, 0.3)",strokeStyle:"rgba(73, 245, 73, 0.9)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}],[3,{id:3,lineWidth:2,fillStyle:"rgba(254, 180, 32, 0.3)",strokeStyle:"rgba(254, 180, 32, 0.9)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}],[4,{id:4,lineWidth:2,fillStyle:"rgba(245, 236, 73, 0.3)",strokeStyle:"rgba(245, 236, 73, 1)",paintMode:"stroke",fontFamily:"consolas",fontSize:40}],[5,{id:5,lineWidth:4,fillStyle:"rgba(73, 173, 245, 0.3)",strokeStyle:"rgba(73, 173, 245, 1)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}],[6,{id:6,lineWidth:2,fillStyle:"rgba(73, 245, 73, 0.3)",strokeStyle:"rgba(73, 245, 73, 0.9)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}],[7,{id:7,lineWidth:2,fillStyle:"rgba(254, 180, 32, 0.3)",strokeStyle:"rgba(254, 180, 32, 1)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}],[8,{id:8,lineWidth:2,fillStyle:"rgba(245, 236, 73, 0.3)",strokeStyle:"rgba(245, 236, 73, 1)",paintMode:"strokeAndFill",fontFamily:"consolas",fontSize:40}]]),this._defaultStyleTemplate={lineWidth:2,fillStyle:"rgba(245, 236, 73, 0.3)",strokeStyle:"rgba(245, 236, 73, 1)",paintMode:"stroke",fontFamily:"consolas",fontSize:40}}createDrawingStyle(e){if(!e)throw new Error("Invalid style definition.");let t;if(e.hasOwnProperty("id")){if(this._mapDrawingStyles.has(e.id))throw new Error("Existing drawing style id.");t=e.id}else{let e=100;for(;this._mapDrawingStyles.has(e);)e++;t=e}const i=JSON.parse(JSON.stringify(e));i.id=t;for(let n in this._defaultStyleTemplate)i.hasOwnProperty(n)||(i[n]=this._defaultStyleTemplate[n]);return this._mapDrawingStyles.set(t,i),i.id}_getDrawingStyle(e,t){if("number"!=typeof e)throw new Error("Invalid style id.");const i=this._mapDrawingStyles.get(e);return i?t?JSON.parse(JSON.stringify(i)):i:null}getDrawingStyle(e){return this._getDrawingStyle(e,!0)}getDrawingStyles(){return JSON.parse(JSON.stringify(Array.from(this._mapDrawingStyles.values())))}_updateDrawingStyle(e,t){const i=this._mapDrawingStyles.get(e);if(i)for(let n in t)i.hasOwnProperty(n)&&(i[n]=t[n])}updateDrawingStyle(e,t){this._updateDrawingStyle(e,t);for(let i of this._arrDrawingLayer)i.renderAll()}createDrawingLayer(e,t){const i=e=>{for(let t of this._arrDrawingLayer)if(t.getId()===e)return!0;return!1};if(void 0===t){for(let r=100;;r++)if(!i(r)){t=r;break}}else if(i(t))throw new Error("Existed drawing layer id.");const n=new nw(e,t,this._mapDrawingStyles,{enableRetinaScaling:!1});return n._manager=this,this._arrDrawingLayer.push(n),this._switchPointerEvent(),n}deleteDrawingLayer(e){const t=this.getDrawingLayer(e);if(!t)return;const i=this._arrDrawingLayer;t.dispose(),i.splice(i.indexOf(t),1),this._switchPointerEvent()}clearDrawingLayers(){for(let e of this._arrDrawingLayer)e.dispose();this._arrDrawingLayer.length=0}getDrawingLayer(e){for(let t of this._arrDrawingLayer)if(t.getId()===e)return t;return null}getDrawingLayers(){return Array.from(this._arrDrawingLayer)}getSelectedDrawingItems(){if(!this._arrDrawingLayer.length)return;const e=this._arrDrawingLayer[0].fabricCanvas.getActiveObjects(),t=[];for(let i of e)t.push(i.getDrawingItem());return t}setDimensions(e,t){this._arrDrawingLayer.length&&this._arrDrawingLayer[0]._setDimensions(e,t)}setObjectFit(e){for(let t of this._arrDrawingLayer)t&&t._setObjectFit(e)}getObjectFit(){return this._arrDrawingLayer.length?this._arrDrawingLayer[0]._getObjectFit():null}setVisible(e){this._arrDrawingLayer.length&&(this._arrDrawingLayer[0].fabricCanvas.wrapperEl.style.display=e?"block":"none")}_switchPointerEvent(){if(this._arrDrawingLayer.length)for(let e of this._arrDrawingLayer)e.getMode()}}class ow{constructor(e){this._controlTarget=null,this._arrUsers=[],this._mapAction_UserArgs=new Map,this._mapProperty_UserValue=new Map,this._mapAction_Callbacks=new Map,this._controlTarget=e}setControlTarget(e){this._controlTarget=e}getControlTarget(){return this._controlTarget}register(e){this._arrUsers.includes(e)||this._arrUsers.push(e)}logout(e){const t=this._arrUsers.indexOf(e);-1!==t&&(this.clearUserDisiredAction({user:e}),this.clearUserDisiredValue({user:e}),this._arrUsers.splice(t,1))}getRegisteredUsers(){return this._arrUsers}ifUserExisted(e){return this._arrUsers.includes(e)}setDisiredValue(e,t,i,n){if(!this._arrUsers.includes(e))throw new Error("Unregistered user.");n&&(this._controlTarget[t]=i),this._mapProperty_UserValue.get(t)?this._mapProperty_UserValue.get(t).set(e,i):this._mapProperty_UserValue.set(t,new Map([[e,i]]))}clearUserDisiredValue(e){if(e&&(e.user||e.property)){if(e.property&&e.user){const t=this._mapProperty_UserValue.get(e.property);if(!t)return;t.delete(e.user)}else if(e.property)this._mapProperty_UserValue.delete(e.property);else if(e.user)for(let t of this._mapProperty_UserValue.values())t.delete(e.user)}else this._mapProperty_UserValue=new Map}getValue(e){if(!this._controlTarget)throw new Error("Control target is not set.");return this._controlTarget[e]}getPropertyDisiredValue(e){if(this._mapProperty_UserValue.get(e)){const t=[],i=this._mapProperty_UserValue.get(e);for(let e of i.values())t.push(e);return t}return null}setDisiredAction(e,t,i,n){if(!this._arrUsers.includes(e))throw new Error("Unregistered user.");return i||(i=[]),n?this._controlTarget[t](...i):(this._mapAction_UserArgs.get(t)?this._mapAction_UserArgs.get(t).set(e,i):this._mapAction_UserArgs.set(t,new Map([[e,i]])),this._render(t))}clearUserDisiredAction(e){if(e&&(e.user||e.actionName)){if(e.actionName&&e.user){const t=this._mapAction_UserArgs.get(e.actionName);if(!t)return;t.delete(e.user)}else if(e.actionName)this._mapAction_UserArgs.delete(e.actionName);else if(e.user)for(let t of this._mapAction_UserArgs.values())t.delete(e.user);this.render()}else this._mapAction_UserArgs=new Map}addCallback(e,t){const i=this._mapAction_Callbacks.get(e);i?i.push(t):this._mapAction_Callbacks.set(e,[t])}removeCallback(e,t){const i=this._mapAction_Callbacks.get(e);if(!i)return;const n=i.indexOf(t);-1!==n&&i.splice(n,1)}clearCallback(e){e?this._mapAction_Callbacks.delete(e):this._mapAction_Callbacks.clear()}_fireCallback(e){const t=this._mapAction_Callbacks.get(e);if(t)for(let i of t){if(!i)return;setTimeout(i.bind(this._controlTarget),0)}}_render(e){const t=this._mapAction_UserArgs.get(e);if(!t)throw new Error("Unrecorded action.");if(t.size===this._arrUsers.length){let i=[];for(let e of t.values())e.length>0&&(i=e);if(this._controlTarget[e]){const t=this._controlTarget[e](...i);return this._mapAction_UserArgs.delete(e),this._fireCallback(e),t}}}render(e){if(e)return this._render(e);for(let t of this._mapAction_UserArgs.keys())this._render(t)}}class aw{static multiply(e,t){const i=[];for(let n=0;n<3;n++){const r=t.slice(3*n,3*n+3);for(let t=0;t<3;t++){const n=[e[t],e[t+3],e[t+6]].reduce(((e,t,i)=>e+t*r[i]),0);i.push(n)}}return i}static identity(){return[1,0,0,0,1,0,0,0,1]}static translate(e,t,i){return aw.multiply(e,[1,0,0,0,1,0,t,i,1])}static rotate(e,t){var i=Math.cos(t),n=Math.sin(t);return aw.multiply(e,[i,-n,0,n,i,0,0,0,1])}static scale(e,t,i){return aw.multiply(e,[t,0,0,0,i,0,0,0,1])}}var sw;!function(e){e.GREY="grey",e.GREY32="grey32",e.RGBA="rgba",e.RBGA="rbga",e.GRBA="grba",e.GBRA="gbra",e.BRGA="brga",e.BGRA="bgra"}(sw||(sw={}));const lw=(e,t,i,n)=>{let r=t+Math.round((e-t)/i)*i;return n&&(r=Math.min(r,n)),r};class cw{constructor(){this._maxCvsSideLength=void 0,this._defaultMaxCvsSideLength=null,this._predefinedResolutions=[{width:160,height:120},{width:320,height:240},{width:480,height:360},{width:640,height:480},{width:800,height:600},{width:960,height:720},{width:1280,height:720},{width:1920,height:1080},{width:2560,height:1440},{width:3840,height:2160}],this._mapCameraResolutions=new Map,this._bWebGLSupported=!0,this.extraBindings=[],this._singleFrameMode=!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),this._cvsSingleFrameMode=null,this._cvsOriginalImage=null,this._imgWidth=0,this._imgHeight=0,this._singleFrameModeIpt=null,this._clickIptSingleFrameMode=()=>{if(this.singleFrameMode&&!this.getDrawingLayers().some((e=>"editor"==e.getMode()))){if(!this._singleFrameModeIpt){const e=document.createElement("input");this._singleFrameModeIpt=e,e.setAttribute("type","file"),e.setAttribute("accept",".jpg,.jpeg,.icon,.gif,.svg,.webp,.png,.bmp"),e.setAttribute("capture",""),e.addEventListener("change",(async()=>{const t=e.files[0];e.value="";const i=await(async e=>{let t=null,i=null;if("undefined"!=typeof createImageBitmap)try{if(t=await createImageBitmap(e),t)return t}catch(e){}var n;return t||(i=await(n=e,new Promise(((e,t)=>{let i=URL.createObjectURL(n),r=new Image;r.dbrObjUrl=i,r.src=i,r.onload=()=>{e(r)},r.onerror=e=>{t(new Error("Can't convert blob to image : "+(e instanceof Event?e.type:e)))}})))),i})(t),n=i instanceof HTMLImageElement?i.naturalWidth:i.width,r=i instanceof HTMLImageElement?i.naturalHeight:i.height;this._imgWidth=n,this._imgHeight=r;const o=e=>{const t=Date.now();if(0===n||0===r)return null;if(e instanceof HTMLImageElement&&!e.complete)throw new Error("The source is not loaded.");const i=this._scanRegion,o=this.getFrameSize(n,r,i,this.maxCvsSideLength);if(!o)return null;let a=!0;n===o.sWidth&&r===o.sHeight&&(a=!1);const s=this.mapPixelFormatString_Enum.get(this.framePixelFormat.toLowerCase()),l={data:null,region:i?JSON.parse(JSON.stringify(i)):null,sx:o.sx,sy:o.sy,width:o.dWidth,height:o.dHeight,colorMode:null,pixelFormat:null,timeSpent:null,timeStamp:null,isCropped:a,toCanvas:this._toCanvas,_sWidth:o.sWidth,_sHeight:o.sHeight,_bUseWebGL:null},c=this._getImageData(e,n,r,o,null,{pixelFormat:s});if(!c)return null;const h=Date.now();return l.data=c.data,l.pixelFormat=l.colorMode=c.pixelFormat,l._bUseWebGL=c._bUseWebGL,l.timeSpent=h-t,l.timeStamp=h,c.pixelFormat===sw.GREY?l.stride=l.width:l.stride=4*l.width,l};(e=>{let t=this._cvsSingleFrameMode;if(!t){if(t=document.createElement("canvas"),!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(t),t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.left="0",t.style.top="0",t.style.objectFit="contain",t.style.pointerEvents="none",this._cvsSingleFrameMode=t}t.width==n&&t.height==r||(t.width=n,t.height=r);const i=t.getContext("2d");i.clearRect(0,0,t.width,t.height),i.drawImage(e,0,0)})(i),this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let e of this._arrScanRegionOverlays)e&&this._updateScanRegionOverlay(e);let a;this._updateDrawingLayersSize();try{a=o(i)}catch(e){throw e}const s=this.mapCameraEvents.get("singleframeacquired");for(let l of s)if(l)try{const e={data:new Uint8Array(a.data),region:JSON.parse(JSON.stringify(a.region)),sx:a.sx,sy:a.sy,width:a.width,height:a.height,stride:a.stride,colorMode:a.colorMode,pixelFormat:a.pixelFormat,timeSpent:a.timeSpent,timeStamp:a.timeStamp,isCropped:a.isCropped,toCanvas:a.toCanvas,_sWidth:a._sWidth,_sHeight:a._sHeight,_bUseWebGL:a._bUseWebGL};await l.apply(this,[e])}catch(e){console.error(e)}})),e.style.position="fixed",e.style.left="-1px",e.style.top="-1px",e.style.width="1px",e.style.height="1px",e.style.backgroundColor="transparent",e.style.color="transparent",document.body.appendChild(e)}this._singleFrameModeIpt.click()}},this.styleEls=[],this._framePixelFormat=void 0,this._defaultFramePixelFormat="rgba",this.mapPixelFormatString_Enum=new Map([["grey",sw.GREY],["grey32",sw.GREY32],["rgba",sw.RGBA],["rbga",sw.RBGA],["grba",sw.GRBA],["gbra",sw.GBRA],["brga",sw.BRGA],["bgra",sw.BGRA]]),this.shaderPixelFormat=sw.RGBA,this.maxVideoCvsLength=3,this._reusedCvs=null,this._reusedWebGLCvs=null,this._tempDataContainer=null,this._webGLTexture=null,this._webGLProgramInfo=null,this._webGLBuffers=null,this._softwareScale=1,this._scaleCenter={x:0,y:0},this._focusParameters={maxTimeout:400,minTimeout:300,kTimeout:void 0,oldDistance:null,fds:null,isDoingFocus:0,taskBackToContinous:null,curFocusTaskId:0,focusCancelableTime:1500,defaultFocusAreaSizeRatio:6,focusBackToContinousTime:5e3,tapFocusMinDistance:null,tapFocusMaxDistance:null,_focusArea:null},this._tapFocusEnabled=!0,this._focusSupported=!0,this._tapDoFocus=async e=>{if(this._touchMoved)return void(this._touchMoved=!1);if(!this._tapFocusEnabled)return;if(!this._bOpen)return;if(this.singleFrameMode)return;if(!this._video||this._video.paused)return;if(!this._videoTrack)return;if(!this._focusSupported)return;if(this.getDrawingLayers().some((e=>"editor"==e.getMode())))return;if(!this._focusParameters.fds&&(this._focusParameters.fds=(await this.getCapabilities()).focusDistance,!this._focusParameters.fds))return void(this._focusSupported=!1);if(null==this._focusParameters.kTimeout&&(this._focusParameters.kTimeout=(this._focusParameters.maxTimeout-this._focusParameters.minTimeout)/(1/this._focusParameters.fds.min-1/this._focusParameters.fds.max)),1==this._focusParameters.isDoingFocus)return;let t,i,n,r;if(this._focusParameters.taskBackToContinous&&(clearTimeout(this._focusParameters.taskBackToContinous),this._focusParameters.taskBackToContinous=null),e instanceof MouseEvent)t=e.clientX,i=e.clientY;else{if(!(e instanceof TouchEvent))throw new Error("Unknown event type.");if(!e.changedTouches.length)return;t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY}const o=this.getVideoFit(),a=this._video.videoWidth,s=this._video.videoHeight,l=this._elContainer.getBoundingClientRect(),c=l.left,h=l.top,u=window.getComputedStyle(this._elContainer),d=parseFloat(u.width),f=parseFloat(u.height),p=d/f,g=a/s;let m=1;if("contain"===o)g>p?(m=d/a,n=(t-c)/m,r=(i-h-(f-d/g)/2)/m):(m=f/s,r=(i-h)/m,n=(t-c-(d-f*g)/2)/m);else{if("cover"!==o)throw new Error("Unsupported object-fit.");g>p?(m=f/s,r=(i-h)/m,n=(t-c+(f*g-d)/2)/m):(m=d/a,n=(t-c)/m,r=(i-h+(d/g-f)/2)/m)}const v={x:n+"px",y:r+"px"},_=2*Math.round(Math.min(a,s)/this._focusParameters.defaultFocusAreaSizeRatio/2)+"px",b=_;await this._setLocalFocus(v,_,b,this._focusParameters.tapFocusMinDistance,this._focusParameters.tapFocusMaxDistance),this._focusParameters.taskBackToContinous=setTimeout((()=>{this._videoTrack&&this._videoTrack.applyConstraints({advanced:[{focusMode:"continuous"}]}).catch((()=>{}))}),this._focusParameters.focusBackToContinousTime)},this._touchMoved=!1,this._touchMoveEvent=()=>{this._touchMoved=!0},this._recordedStates={},this.playCallbackInfo=null,this._toCanvas=function(){const e=document.createElement("canvas");let t;if(e.width=this.width,e.height=this.height,"grey"===(this.pixelFormat||this.colorMode)){t=new Uint8ClampedArray(this.width*this.height*4);for(let e=0;e<t.length;e+=4)t[e]=this.data[e/4],t[e+1]=this.data[e/4],t[e+2]=this.data[e/4],t[e+3]=255}else t=new Uint8ClampedArray(this.data.buffer);const i=new ImageData(t,this.width,this.height);return e.getContext("2d").putImageData(i,0,0),e},this._onCameraSelChange=async()=>{await this.selectCamera(this._selCam.value),this._bOpen||this.stop()},this._onResolutionSelChange=async()=>{let e,t;if(this._selRsl&&-1!=this._selRsl.selectedIndex){let i=this._selRsl.options[this._selRsl.selectedIndex];e=i.getAttribute("data-width"),t=i.getAttribute("data-height")}await this.setResolution(e,t),this._bOpen||this.stop()},this._onCloseBtnClick=()=>{this.close(!0)},this._bOpen=!1,this.isCameraEnhancer=!0,this.isDisposed=!1,this.disposed=!1,this.videoSrc=null,this.videoSettings={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}},this.iPlayRound=0,this.promisePlay=null,this._ifSaveLastUsedCamera=!1,this.ifSkipCameraInspection=!1,this._allCameras=[],this._currentCamera=null,this._videoTrack=null,this._lastDeviceId=void 0,this._vc_bPlayingVideoBeforeHide=!1,this._ev_documentHideEvent=()=>{if(!this.singleFrameMode)if("visible"===document.visibilityState){if(this._bOpen&&this._vc_bPlayingVideoBeforeHide)if(this.videoSrc)this._video.play();else if(this._video.srcObject){const e=this._video.srcObject.getTracks()[0];this._video.srcObject.active&&e&&!e.muted?this._video.play():this.play()}}else"hidden"===document.visibilityState&&(["iPhone","iPad"].includes(Wy.OS)?(this._vc_bPlayingVideoBeforeHide=!0,this._video&&this._video.pause()):this._video&&!this._video.paused?(this._vc_bPlayingVideoBeforeHide=!0,this._video.pause()):this._vc_bPlayingVideoBeforeHide=!1)},this.containerClassName="dce-video-container",this._elContainer=null,this._videoContainer=null,this._video=null,this.videoFit="contain",this._cvsScanRegion=null,this._divScanArea=null,this._divScanLight=null,this._bgLoading=null,this._selCam=null,this._bgCamera=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._selMinLtr=null,this._optGotMinLtr=null,this.regionMaskFillStyle="rgba(0,0,0,0.5)",this.regionMaskStrokeStyle="rgb(254,142,20)",this.regionMaskLineWidth=2,this._bShowScanRegionMask=!0,this._bShowScanRegionLaser=void 0,this._defaultBShowScanRegionLaser=!1,this._scanRegion=null,this._arrScanRegionOverlays=[],this._layerBaseCvs=null,this._drawingLayerOfTip=null,this._tipArgs={x:void 0,y:void 0,width:void 0,duration:void 0,autoShowSuggestedTip:void 0},this._hideTipTimeoutId=null,this.onTipSuggested=null,this._cvsViewDecorator=null,this._decoratorType=[],this._decoratorArea=null,this._viewDecoratorInfo={rectangle:{lineWidth:4,strokeStyle:"rgb(254,142,20)",fillStyle:"transparent",maskFillStyle:"transparent"},focus:{lineWidth:4,strokeStyle:"rgb(254,142,20)",fillStyle:"transparent",maskFillStyle:"transparent"},crossline:{lineWidth:2,strokeStyle:"rgb(254,142,20)"},crosshair:{lineWidth:4,strokeStyle:"rgb(254,142,20)"}},this._croppingRegions=void 0,this._defaultCroppingRegions=[null],this.bIncreaseRegionIndexAuto=!0,this._croppingRegionIndex=0,this._loopInterval=void 0,this._defaultLoopInterval=0,this._maxNumberOfFramesInBuffer=void 0,this._defaultMaxNumberOfFramesInBuffer=1,this._frameQueue=[],this._bFetchingLoopStarted=!1,this._refreshInterval=void 0,this._defaultRefreshInterval=-1,this._updateLayersTimeout=500,this._updateLayers=()=>{this._cvsScanRegion&&(this._cvsScanRegion.style.display="none"),this._divScanLight&&(this._divScanLight.style.display="none"),this._cvsViewDecorator&&(this._cvsViewDecorator.style.display="none");for(let e of this._arrScanRegionOverlays)e&&(e.style.display="none");this._resizeTimeoutId&&clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout((()=>{if(!this.isDisposed||!this.disposed){this.ifShowScanRegionMask&&this.showScanRegionMask(),this.ifShowScanRegionLaser&&this.showScanRegionLaser(),this._cvsViewDecorator&&this.showViewDecorator(),this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let e of this._arrScanRegionOverlays)e&&(e.style.display="",this._updateScanRegionOverlay(e));this._updateDrawingLayersSize(),this._updateVideoContainerStyle()}}),this._updateLayersTimeout)},this._windowResizeListener=()=>{this._windowWidth!==document.documentElement.clientWidth&&(this._windowWidth=document.documentElement.clientWidth,this._updateLayers())},this.mapCameraEvents=new Map([["cameraopen",[]],["cameraclose",[]],["camerachange",[]],["resolutionchange",[]],["played",[]],["singleframeacquired",[]],["frameaddedtobuffer",[]]]),this._controler=null}static getVersion(){return this._version}static async detectEnvironment(){return await(async()=>({wasm:zy,worker:Hy,getUserMedia:Gy,camera:await Yy(),browser:Wy.browser,version:Wy.version,OS:Wy.OS}))()}static set engineResourcePath(e){if(this._hasEngineResourceLoaded)throw new Error("`engineResourcePath` is not allowed to change after `createInstance` is called.");cw._engineResourcePath=(e=>{if(null==e&&(e="./"),!Ny){let t=document.createElement("a");t.href=e,e=t.href}return e.endsWith("/")||(e+="/"),e})(e)}static get engineResourcePath(){return this._engineResourcePath}static isStorageAvailable(e){let t;try{t=window[e];const i="__storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}static isDCEFrame(e){return!(!e||"object"!=typeof e||Array.isArray(e))&&"data"in e&&"region"in e&&"sx"in e&&"sy"in e&&"width"in e&&"height"in e&&("colorMode"in e||"pixelFormat"in e)&&"timeSpent"in e&&"timeStamp"in e&&"isCropped"in e&&"toCanvas"in e&&"_sWidth"in e&&"_sHeight"in e&&"_bUseWebGL"in e}static async testCameraAccess(){try{if(!navigator||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return{ok:!1,message:"Insecure context."};(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach((e=>{e.stop()}))}catch(Md){if("OverconstrainedError"===Md.name||"NotFoundError"===Md.name)return{ok:!1,message:"No camera detected."};if("NotAllowedError"===Md.name)return{ok:!1,message:"No permission to access camera."};if("AbortError"===Md.name)return{ok:!1,message:"Some problem occurred which prevented the device from being used."};if("NotReadableError"===Md.name)return{ok:!1,message:"A hardware error occurred."};if("SecurityError"===Md.name)return{ok:!1,message:"User media support is disabled."};throw Md}return{ok:!0,message:"Successfully accessed the camera."}}set maxCvsSideLength(e){if(e<=0)throw new Error("Invalid value.");this._maxCvsSideLength=e}get maxCvsSideLength(){if(void 0!==this._maxCvsSideLength)return this._maxCvsSideLength;if(this._controler){const e=this._controler.getPropertyDisiredValue("maxCvsSideLength");if(e&&1===e.length)return e[0]}return this._defaultMaxCvsSideLength}static set defaultUIElementURL(e){cw._defaultUIElementURL=e}static get defaultUIElementURL(){var e;return null===(e=cw._defaultUIElementURL)||void 0===e?void 0:e.replace("@engineResourcePath/",cw.engineResourcePath)}getUIElement(){return this.UIElement}async setUIElement(e){if(this._bOpen)throw new Error("It is not allowed to change the UIElement when the camera is open.");if("string"==typeof e||e instanceof String){if(!e.trim().startsWith("<")){let t=await fetch(e);if(!t.ok)throw Error("setUIElement(elementOrUrl): Network Error: "+t.statusText);e=await t.text()}if(!e.trim().startsWith("<"))throw Error("setUIElement(elementOrUrl): Can't get valid HTMLElement.");let t=document.createElement("div");t.innerHTML=e;for(let e=0;e<t.childElementCount;++e){let i=t.children[e];i instanceof HTMLStyleElement&&(this.styleEls.push(i),document.head.append(i))}(e=1==t.childElementCount?t.children[0]:t).remove()}this.UIElement=e,this._uiOriginalState={display:e&&e.style.display,inDom:document.body.contains(e)}}appendAndShowUI(){this.UIElement&&(this.UIElement.parentNode||(this.UIElement.style.position="fixed",this.UIElement.style.left="0",this.UIElement.style.top="0",document.body.append(this.UIElement)),"none"==this.UIElement.style.display&&(this.UIElement.style.display=""))}hideUI(){this.UIElement&&(this.UIElement.style.display="none")}get singleFrameMode(){return this._singleFrameMode}set singleFrameMode(e){if(this._bOpen)throw new Error("It is not allowed to change `singleFrameMode` when the camera is open.");this._singleFrameMode=e}set frameColorMode(e){this._framePixelFormat=e}get frameColorMode(){if(void 0!==this._framePixelFormat)return this._framePixelFormat;if(this._controler){const e=this._controler.getPropertyDisiredValue("framePixelFormat")||this._controler.getPropertyDisiredValue("frameColorMode");if(e&&1===e.length)return e[0]}return this._defaultFramePixelFormat}set framePixelFormat(e){this._framePixelFormat=e}get framePixelFormat(){if(void 0!==this._framePixelFormat)return this._framePixelFormat;if(this._controler){const e=this._controler.getPropertyDisiredValue("framePixelFormat")||this._controler.getPropertyDisiredValue("frameColorMode");if(e&&1===e.length)return e[0]}return this._defaultFramePixelFormat}set bOpen(e){if(this._bOpen=e,e){this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let e of this._arrScanRegionOverlays)e&&this._updateScanRegionOverlay(e);this._updateDrawingLayersSize(),this.ifShowScanRegionMask?this.showScanRegionMask():this.hideScanRegionMask(),this.ifShowScanRegionLaser?this.showScanRegionLaser():this.hideScanRegionLaser(),this.showViewDecorator(),this.showScanRegionOverlays(),this._drawingLayersManager.setVisible(!0)}else this._softwareScale=1}set ifSaveLastUsedCamera(e){e?cw.isStorageAvailable("localStorage")?this._ifSaveLastUsedCamera=!0:(this._ifSaveLastUsedCamera=!1,console.warn("Local storage is unavailable")):this._ifSaveLastUsedCamera=!1}get ifSaveLastUsedCamera(){return this._ifSaveLastUsedCamera}get video(){return this._video}setVideoFit(e){if(e=e.toLowerCase(),!["contain","cover"].includes(e))throw new Error(`Unsupported value '${e}'.`);if(this.videoFit=e,this._video&&(this._video.style.objectFit=e,!this.singleFrameMode)){this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let e of this._arrScanRegionOverlays)e&&this._updateScanRegionOverlay(e);this._updateVideoContainerStyle(),this._drawingLayersManager.setObjectFit(e)}}getVideoFit(){return this.videoFit}_showElClassName(){this._cvsScanRegion&&this._cvsScanRegion.classList.add("cvs-scan-region-mask"),this._cvsViewDecorator&&this._cvsViewDecorator.classList.add("cvs-view-decorator"),this._scanRegionOverlayContainer&&this._scanRegionOverlayContainer.classList.add("div-scan-region-overlay-container"),this._layerBaseCvs&&this._layerBaseCvs.classList.add("cvs-drawing-layer-base"),this._layerBaseCvs&&this._layerBaseCvs.parentElement.classList.add("div-drawing-layer-container"),this._cvsOriginalImage&&this._cvsOriginalImage.classList.add("cvs-original-image"),this._cvsSingleFrameMode&&this._cvsSingleFrameMode.classList.add("cvs-single-frame")}_hideElClassName(){this._cvsScanRegion&&this._cvsScanRegion.classList.remove("cvs-scan-region-mask"),this._cvsViewDecorator&&this._cvsViewDecorator.classList.remove("cvs-view-decorator"),this._scanRegionOverlayContainer&&this._scanRegionOverlayContainer.classList.remove("div-scan-region-overlay-container"),this._layerBaseCvs&&this._layerBaseCvs.classList.remove("cvs-drawing-layer-base"),this._layerBaseCvs&&this._layerBaseCvs.parentElement.classList.remove("div-drawing-layer-container"),this._cvsOriginalImage&&this._cvsOriginalImage.classList.remove("cvs-original-image"),this._cvsSingleFrameMode&&this._cvsSingleFrameMode.classList.remove("cvs-single-frame")}set ifShowScanRegionMask(e){this._bShowScanRegionMask=e,e?this.showScanRegionMask():this.hideScanRegionMask()}get ifShowScanRegionMask(){return this._bShowScanRegionMask}showScanRegionMask(){this._cvsScanRegion&&("none"==this._cvsScanRegion.style.display&&(this._cvsScanRegion.style.display=""),this._recordedStates.maskShow=!0)}hideScanRegionMask(){this._cvsScanRegion&&(this._cvsScanRegion.style.display="none",this._recordedStates.maskShow=!1)}set ifShowScanRegionLaser(e){this._bShowScanRegionLaser=e,e?this.showScanRegionLaser():this.hideScanRegionLaser()}get ifShowScanRegionLaser(){if(void 0!==this._bShowScanRegionLaser)return this._bShowScanRegionLaser;if(this._controler){const e=this._controler.getPropertyDisiredValue("ifShowScanRegionLaser");if(e&&e.length){let t=0;for(let i of e)i||t++;return t!==this._controler.getRegisteredUsers().length}}return this._defaultBShowScanRegionLaser}showScanRegionLaser(){this._divScanLight&&("none"==this._divScanLight.style.display&&(this._divScanLight.style.display="block"),this._recordedStates.laserShow=!0)}hideScanRegionLaser(){this._divScanLight&&(this._divScanLight.style.display="none",this._recordedStates.laserShow=!1)}_checkValidRegion(e){return!(null!==e&&(!e||!(e.hasOwnProperty("regionLeft")&&e.hasOwnProperty("regionTop")&&e.hasOwnProperty("regionRight")&&e.hasOwnProperty("regionBottom")&&e.hasOwnProperty("regionMeasuredByPercentage"))||e.regionLeft<0||e.regionTop<0||e.regionRight<0||e.regionBottom<0||e.regionMeasuredByPercentage&&(e.regionLeft>100||e.regionTop>100||e.regionRight>100||e.regionBottom>100)))}set scanRegion(e){if(!this._checkValidRegion(e))throw new Error("Invalid region.");this._scanRegion=JSON.parse(JSON.stringify(e)),this._updateScanRegionCanvas(),this._updateScanAreaDiv();for(let t of this._arrScanRegionOverlays)t&&this._updateScanRegionOverlay(t)}setScanRegion(e){this.scanRegion=e}getScanRegion(){return JSON.parse(JSON.stringify(this._scanRegion))}_calculateCvsSize(){if(!this._bOpen)return null;let e,t,i;if(this.singleFrameMode)e=this._imgWidth,t=this._imgHeight,i="contain";else{if(!this._video)return null;e=this._video.videoWidth,t=this._video.videoHeight,i=this.getVideoFit()}return e<=0||t<=0?null:{width:e,height:t,objectFit:i}}addScanRegionOverlayCanvas(){this._assertOpen();const e=document.createElement("canvas");if(this._updateScanRegionOverlay(e),!this._scanRegionOverlayContainer){const e=document.createElement("div");if(this._scanRegionOverlayContainer=e,e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="100%",e.style.height="100%",e.style.overflow="hidden",e.style.pointerEvents="none",this._layerBaseCvs)this._layerBaseCvs.parentElement.after(e);else if(this._cvsScanRegion)this._cvsScanRegion.after(e);else if(this._cvsOriginalImage)this._cvsOriginalImage.after(e);else if(this._cvsSingleFrameMode)this._cvsSingleFrameMode.after(e);else{if(!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(e)}this._recordedStates.overlayShow=!0}return this._scanRegionOverlayContainer.append(e),this._arrScanRegionOverlays.push(e),e}removeScanRegionOverlayCanvas(e){const t=this._arrScanRegionOverlays.indexOf(e);-1!==t&&(e.remove(),this._arrScanRegionOverlays.splice(t,1))}_updateScanRegionOverlay(e){if(!e)return;const t=this._calculateCvsSize();if(!t)return;const{width:i,height:n,objectFit:r}=t;if(i<=0||n<=0)return e.width=0,void(e.height=0);const o=this._getRegionInPixels(i,n,this._scanRegion),a=this.getFrameSize(i,n,this._scanRegion,this.maxCvsSideLength),s=a.dWidth,l=a.dHeight;e.width==s&&e.height==l||(e.width=s,e.height=l);const c=window.getComputedStyle(this._elContainer),h=parseFloat(c.width),u=parseFloat(c.height),d=h/u,f=i/n;let p,g,m,v,_=1;"contain"===r?(f>d?(_=h/i,p=0,g=(u-n*_)/2):(_=u/n,p=(h-i*_)/2,g=0),p+=o.regionLeft*_,g+=o.regionTop*_,m=(o.regionRight-o.regionLeft)*_,v=(o.regionBottom-o.regionTop)*_):"cover"===r?(f>d?(_=u/n,p=o.regionLeft*_-(i*_-h)/2,g=o.regionTop*_):(_=h/i,p=o.regionLeft*_,g=o.regionTop*_-(n*_-u)/2),m=(o.regionRight-o.regionLeft)*_,v=(o.regionBottom-o.regionTop)*_):(p=0,g=0,m=0,v=0),e.style.position="absolute",e.style.left=p+"px",e.style.top=g+"px",e.style.width=m+"px",e.style.height=v+"px"}showScanRegionOverlays(){this._scanRegionOverlayContainer&&("none"==this._scanRegionOverlayContainer.style.display&&(this._scanRegionOverlayContainer.style.display=""),this._recordedStates.overlayShow=!0)}hideScanRegionOverlays(){this._scanRegionOverlayContainer&&(this._scanRegionOverlayContainer.style.display="none",this._recordedStates.overlayShow=!1)}setViewDecorator(e,t){if(!e)return void(this._cvsViewDecorator&&(this._cvsViewDecorator.remove(),this._cvsViewDecorator=null));if(!t)throw new Error("Invalid area.");this._assertOpen();let i=[];if("string"==typeof e?i.push(e):Array.isArray(e)&&(i=JSON.parse(JSON.stringify(e))),!this._cvsViewDecorator){if(this._cvsViewDecorator=document.createElement("canvas"),this._scanRegionOverlayContainer)this._scanRegionOverlayContainer.after(this._cvsViewDecorator);else if(this._layerBaseCvs)this._layerBaseCvs.parentElement.after(this._cvsViewDecorator);else if(this._cvsScanRegion)this._cvsScanRegion.after(this._cvsViewDecorator);else if(this._cvsOriginalImage)this._cvsOriginalImage.after(this._cvsViewDecorator);else if(this._cvsSingleFrameMode)this._cvsSingleFrameMode.after(this._cvsViewDecorator);else{if(!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(this._cvsViewDecorator)}this._recordedStates.decoratorShow=!0}this._decoratorArea=JSON.parse(JSON.stringify(t)),this._decoratorType.length=0;const n=["rectangle","focus"],r=["crossline","crosshair"];let o=!1,a=!1;for(let s of i)s=s.toLowerCase(),n.includes(s)&&!o&&(o=!0,this._decoratorType.push(s)),r.includes(s)&&!a&&(a=!0,!this._decoratorType.includes(s)&&this._decoratorType.push(s));this._updateViewDecorator()}getViewDecorator(){return{type:JSON.parse(JSON.stringify(this._decoratorType)),area:JSON.parse(JSON.stringify(this._decoratorArea)),canvas:this._cvsViewDecorator}}showViewDecorator(){this._cvsViewDecorator&&("none"==this._cvsViewDecorator.style.display&&(this._cvsViewDecorator.style.display=""),this._recordedStates.decoratorShow=!0)}hideViewDecorator(){this._cvsViewDecorator&&(this._cvsViewDecorator.style.display="none",this._recordedStates.decoratorShow=!1)}setViewDecoratorLineWidth(e,t){if("string"!=typeof e)throw new Error("The 'type' should be a string.");if(e=e.toLowerCase(),!this._viewDecoratorInfo.hasOwnProperty(e))throw new Error(`The type of '${e}' doesn't exist.`);if(!this._viewDecoratorInfo[e].hasOwnProperty("lineWidth"))throw new Error(`It is not allowed to change the property 'lineWidth' when the decorator type is '${e}'.`);this._viewDecoratorInfo[e].lineWidth=t,this._updateViewDecorator()}setViewDecoratorStrokeStyle(e,t){if("string"!=typeof e)throw new Error("The 'type' should be a string.");if(e=e.toLowerCase(),!this._viewDecoratorInfo.hasOwnProperty(e))throw new Error(`The type of '${e}' doesn't exist.`);if(!this._viewDecoratorInfo[e].hasOwnProperty("strokeStyle"))throw new Error(`It is not allowed to change the property 'strokeStyle' when the decorator type is '${e}'.`);this._viewDecoratorInfo[e].strokeStyle=t,this._updateViewDecorator()}setViewDecoratorFillStyle(e,t){if("string"!=typeof e)throw new Error("The 'type' should be a string.");if(e=e.toLowerCase(),!this._viewDecoratorInfo.hasOwnProperty(e))throw new Error(`The type of '${e}' doesn't exist.`);if(!this._viewDecoratorInfo[e].hasOwnProperty("fillStyle"))throw new Error(`It is not allowed to change the property 'fillStyle' when the decorator type is '${e}'.`);this._viewDecoratorInfo[e].fillStyle=t,this._updateViewDecorator()}setViewDecoratorMaskFillStyle(e,t){if("string"!=typeof e)throw new Error("The 'type' should be a string.");if(e=e.toLowerCase(),!this._viewDecoratorInfo.hasOwnProperty(e))throw new Error(`The type of '${e}' doesn't exist.`);if(!this._viewDecoratorInfo[e].hasOwnProperty("maskFillStyle"))throw new Error(`It is not allowed to change the property 'maskFillStyle' when the decorator type is '${e}'.`);this._viewDecoratorInfo[e].maskFillStyle=t,this._updateViewDecorator()}_updateViewDecorator(){if(!this._bOpen)return;if(!this._cvsViewDecorator||!this._decoratorArea)return;let e;if(this.singleFrameMode)e="contain";else{if(!this._video)return;e=this.getVideoFit()}const t=this._cvsViewDecorator;t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.left="0",t.style.top="0",t.style.objectFit=e,t.style.pointerEvents="none";const i=this.getVisibleRegion(!0),n=i.regionRight-i.regionLeft,r=i.regionBottom-i.regionTop;if(t.width==n&&t.height==r||(t.width=n,t.height=r),n<=0||r<=0)return;const o=t.getContext("2d");o.clearRect(0,0,t.width,t.height);const a=this._decoratorArea.x/100*n,s=this._decoratorArea.y/100*r,l=this._decoratorArea.width/100*n,c=this._decoratorArea.height/100*r;for(let h of this._decoratorType){if("rectangle"===h){o.fillStyle=this._viewDecoratorInfo.rectangle.maskFillStyle,o.fillRect(0,0,t.width,t.height),o.clearRect(Math.round(a),Math.round(s),Math.round(l),Math.round(c)),o.fillStyle=this._viewDecoratorInfo.rectangle.fillStyle,o.fillRect(Math.round(a),Math.round(s),Math.round(l),Math.round(c)),o.lineWidth=this._viewDecoratorInfo.rectangle.lineWidth,o.strokeStyle=this._viewDecoratorInfo.rectangle.strokeStyle;const e=o.lineWidth/2;o.strokeRect(Math.round(a-e),Math.round(s-e),Math.round(l+o.lineWidth),Math.round(c+o.lineWidth))}if("focus"===h){o.fillStyle=this._viewDecoratorInfo.focus.maskFillStyle,o.fillRect(0,0,t.width,t.height),o.clearRect(Math.round(a),Math.round(s),Math.round(l),Math.round(c)),o.fillStyle=this._viewDecoratorInfo.focus.fillStyle,o.fillRect(Math.round(a),Math.round(s),Math.round(l),Math.round(c)),o.lineWidth=this._viewDecoratorInfo.focus.lineWidth,o.strokeStyle=this._viewDecoratorInfo.focus.strokeStyle;const e=o.lineWidth/2,i=[0,.25,.75,1],n=[0,.25,.75,1];o.beginPath();for(let t=0;t<i.length;t++)if(0==t||3==t)for(let e=0;e<n.length;e+=2)o.moveTo(Math.round(a+i[t]*l),Math.round(s+n[e]*c)),o.lineTo(Math.round(a+i[t]*l),Math.round(s+n[e+1]*c));for(let t=0;t<n.length;t++)if(0==t||3==t)for(let r=0;r<i.length;r+=2)o.moveTo(Math.round(a+i[r]*l-e),Math.round(s+n[t]*c)),o.lineTo(Math.round(a+i[r+1]*l+e),Math.round(s+n[t]*c));o.stroke()}if("crossline"===h&&(o.beginPath(),o.lineWidth=this._viewDecoratorInfo.crossline.lineWidth,o.strokeStyle=this._viewDecoratorInfo.crossline.strokeStyle,o.moveTo(Math.round(a),Math.round(s+c/2)),o.lineTo(Math.round(a+l),Math.round(s+c/2)),o.moveTo(Math.round(a+l/2),Math.round(s)),o.lineTo(Math.round(a+l/2),Math.round(s+c)),o.stroke()),"crosshair"===h){o.beginPath();const e=.05*Math.min(l,c);o.lineWidth=this._viewDecoratorInfo.crosshair.lineWidth,o.strokeStyle=this._viewDecoratorInfo.crosshair.strokeStyle,o.moveTo(Math.round(a+(l-e)/2),Math.round(s+c/2)),o.lineTo(Math.round(a+(l+e)/2),Math.round(s+c/2)),o.moveTo(Math.round(a+l/2),Math.round(s+(c-e)/2)),o.lineTo(Math.round(a+l/2),Math.round(s+(c+e)/2)),o.stroke()}}}getVisibleRegion(e){this._assertOpen();const t=this._calculateCvsSize();if(!t)return null;const{width:i,height:n,objectFit:r}=t;let o=(()=>{const e=parseFloat(window.getComputedStyle(this._elContainer).width),t=parseFloat(window.getComputedStyle(this._elContainer).height);let o,a={regionBottom:n,regionRight:i,regionLeft:0,regionTop:0,regionMeasuredByPercentage:!1};return"cover"===r?e/t<i/n?(o=t/n,a.regionLeft=Math.floor((i-e/o)/2),a.regionRight=Math.ceil(i-a.regionLeft),a.regionTop=0,a.regionBottom=n):(o=e/i,a.regionTop=Math.floor((n-t/o)/2),a.regionBottom=Math.ceil(n-a.regionTop),a.regionLeft=0,a.regionRight=i):"none"===r&&(e<i&&t<n?(a.regionLeft=Math.floor((i-e)/2),a.regionRight=Math.ceil(i-a.regionLeft),a.regionTop=Math.floor((n-t)/2),a.regionBottom=Math.ceil(n-a.regionTop)):e<i?(a.regionLeft=Math.floor((i-e)/2),a.regionRight=Math.ceil(i-a.regionLeft),a.regionTop=0,a.regionBottom=n):t<n&&(a.regionTop=Math.floor((n-t)/2),a.regionBottom=Math.ceil(n-a.regionTop),a.regionLeft=0,a.regionRight=i)),a})();return e?o.regionMeasuredByPercentage=!1:(o.regionBottom=Math.ceil(o.regionBottom/n*100),o.regionRight=Math.ceil(o.regionRight/i*100),o.regionLeft=Math.floor(o.regionLeft/i*100),o.regionTop=Math.floor(o.regionTop/n*100),o.regionMeasuredByPercentage=!0),o}setScanRegionMaskStyle(e){e&&(e.fillStyle&&(this.regionMaskFillStyle=e.fillStyle),e.strokeStyle&&(this.regionMaskStrokeStyle=e.strokeStyle),e.lineWidth&&(this.regionMaskLineWidth=e.lineWidth),this._updateScanRegionCanvas())}_getRegionInPixels(e,t,i){if(!(e<=0||t<=0))return i?i.regionMeasuredByPercentage?{regionLeft:Math.round(i.regionLeft/100*e),regionTop:Math.round(i.regionTop/100*t),regionRight:Math.round(i.regionRight/100*e),regionBottom:Math.round(i.regionBottom/100*t),regionMeasuredByPercentage:!1}:JSON.parse(JSON.stringify(i)):{regionLeft:0,regionTop:0,regionRight:e,regionBottom:t,regionMeasuredByPercentage:!1}}_updateScanRegionCanvas(){if(!this._bOpen)return;const e=this._calculateCvsSize();if(!e)return;const{width:t,height:i,objectFit:n}=e;if(t<=0||i<=0)return void(this._cvsScanRegion&&(this._cvsScanRegion.width=0,this._cvsScanRegion.height=0));const r=this._getRegionInPixels(t,i,this._scanRegion);if(!this._cvsScanRegion){if(this._cvsScanRegion=document.createElement("canvas"),this._cvsOriginalImage)this._cvsOriginalImage.after(this._cvsScanRegion);else if(this._cvsSingleFrameMode)this._cvsSingleFrameMode.after(this._cvsScanRegion);else{if(!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(this._cvsScanRegion)}this._recordedStates.maskShow=!0}const o=this._cvsScanRegion;o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.style.left="0",o.style.top="0",o.style.objectFit=n,o.style.pointerEvents="none",o.width==t&&o.height==i||(o.width=t,o.height=i);const a=o.getContext("2d");if(a.clearRect(0,0,o.width,o.height),0!=r.regionLeft||r.regionRight!=t||0!=r.regionTop||r.regionBottom!=i){const e=r.regionLeft,t=r.regionTop,i=r.regionRight-r.regionLeft,n=r.regionBottom-r.regionTop;a.fillStyle=this.regionMaskFillStyle,a.fillRect(0,0,o.width,o.height),a.clearRect(Math.round(e),Math.round(t),Math.round(i),Math.round(n)),a.strokeStyle=this.regionMaskStrokeStyle,a.lineWidth=this.regionMaskLineWidth;const s=a.lineWidth/2;a.strokeRect(Math.round(e-s),Math.round(t-s),Math.round(i+a.lineWidth),Math.round(n+a.lineWidth))}}_updateScanAreaDiv(){if(!this._bOpen)return;const e=this._calculateCvsSize();if(!e)return;const{width:t,height:i,objectFit:n}=e;if(!this._divScanArea)return;if(t<=0||i<=0)return this._divScanArea.style.width="0",void(this._divScanArea.style.height="0");const r=this._getRegionInPixels(t,i,this._scanRegion),o=window.getComputedStyle(this._elContainer),a=parseFloat(o.width),s=parseFloat(o.height),l=a/s,c=t/i;let h,u,d,f,p=1;if("contain"===n)l<c?(p=a/t,h=0,u=(s-i*p)/2):(p=s/i,h=(a-t*p)/2,u=0),h+=r.regionLeft*p,u+=r.regionTop*p,d=(r.regionRight-r.regionLeft)*p,f=(r.regionBottom-r.regionTop)*p;else if("cover"===n)if(l<c){p=s/i,h=r.regionLeft*p-(t*p-a)/2,h=Math.max(h,0),h=Math.min(h,parseFloat(o.width)),u=r.regionTop*p;let e=r.regionRight*p-(t*p-a)/2;e=Math.max(e,0),e=Math.min(e,parseFloat(o.width)),d=e-h,f=(r.regionBottom-r.regionTop)*p}else{p=a/t,h=r.regionLeft*p,u=r.regionTop*p-(i*p-s)/2,u=Math.max(u,0),u=Math.min(u,parseFloat(o.height));let e=r.regionBottom*p-(i*p-s)/2;e=Math.max(e,0),e=Math.min(e,parseFloat(o.height)),d=(r.regionRight-r.regionLeft)*p,f=e-u}else h=0,u=0,d=0,f=0;this._divScanArea.style.left=h+"px",this._divScanArea.style.top=u+"px",this._divScanArea.style.width=d+"px",this._divScanArea.style.height=f+"px"}set croppingRegions(e){this._croppingRegions=e,this._bFetchingLoopStarted&&(this.bIncreaseRegionIndexAuto&&(this._croppingRegionIndex=0),this._fetchingLoop(!1))}get croppingRegions(){if(void 0!==this._croppingRegions)return this._croppingRegions;if(this._controler){const e=this._controler.getPropertyDisiredValue("croppingRegions");if(e&&1===e.length)return e[0]}return this._defaultCroppingRegions}set croppingRegionIndex(e){e<0?(this.bIncreaseRegionIndexAuto=!0,this._croppingRegionIndex=0):(this.bIncreaseRegionIndexAuto=!1,this._croppingRegionIndex=e)}get croppingRegionIndex(){return this._croppingRegionIndex}set loopInterval(e){if(e<0)throw new Error("'Invalid value.");this._loopInterval=e,this._bFetchingLoopStarted&&this._fetchingLoop(!1)}get loopInterval(){if(void 0!==this._loopInterval)return this._loopInterval;if(this._controler){const e=this._controler.getPropertyDisiredValue("loopInterval");if(e&&1===e.length)return e[0]}return this._defaultLoopInterval}set maxNumberOfFramesInBuffer(e){if(e<=0)throw new Error("Invalid value.");for(this._maxNumberOfFramesInBuffer=e;this._frameQueue&&this._frameQueue.length>this.maxNumberOfFramesInBuffer;)this._frameQueue.shift()}get maxNumberOfFramesInBuffer(){if(void 0!==this._maxNumberOfFramesInBuffer)return this._maxNumberOfFramesInBuffer;if(this._controler){const e=this._controler.getPropertyDisiredValue("maxNumberOfFramesInBuffer");if(e&&1===e.length)return e[0]}return this._defaultMaxNumberOfFramesInBuffer}get numberOfFramesInBuffer(){return this._frameQueue.length}set refreshInterval(e){this._refreshInterval=e}get refreshInterval(){if(void 0!==this._refreshInterval)return this._refreshInterval;if(this._controler){const e=this._controler.getPropertyDisiredValue("refreshInterval");if(e&&1===e.length)return e[0]}return this._defaultRefreshInterval}static async createInstance(e){let t=new cw;("string"==typeof e||e instanceof String)&&(e=JSON.parse(e));for(let i in e)t[i]=e[i];return this._hasEngineResourceLoaded=!0,t._drawingLayersManager=new rw,t}static async playVideo(e,t,i){return new Promise(((n,r)=>{e||r(new Error("Invalid video element.")),t||r(new Error("Invalid source.")),e.onloadedmetadata=async()=>{e.onloadedmetadata=null,await e.play(),n(e)},"string"==typeof t||t instanceof String?e.src=t:e.srcObject=t,void 0!==i&&setTimeout((()=>r(new Error("Failed to play video. Timeout."))),i)}))}static findBestRearCamera(e){if(!e||!e.length)return null;const t=["rear","back","rück","arrière","trasera","trás","traseira","posteriore","后面","後面","背面","后置","後置","背置","задней","الخلفية","후","arka","achterzijde","หลัง","baksidan","bagside","sau","bak","tylny","takakamera","belakang","אחורית","πίσω","spate","hátsó","zadní","darrere","zadná","задня","stražnja","belakang","बैक"];for(let i of e){const e=i.label.toLowerCase();if(e&&t.some((t=>e.includes(t)))){if(["iPhone","iPad"].includes(Wy.OS))return i.deviceId;if(/\b0(\b)?/.test(e))return i.deviceId}}return["Android","HarmonyOS"].includes(Wy.OS)?e[e.length-1].deviceId:null}async play(e,t,i,n){if(this._video&&this.videoSrc){const e=await cw.playVideo(this._video,this.videoSrc,4e3);if(!this._video)return e.pause(),this.playCallbackInfo={width:0,height:0,deviceId:null},{width:0,height:0,deviceId:null};const t={width:this._video.videoWidth,height:this._video.videoHeight,deviceId:this._currentCamera&&this._currentCamera.deviceId};this.playCallbackInfo=JSON.parse(JSON.stringify(t));const i=this.mapCameraEvents.get("played");for(let n of i){if(!n)continue;const e=JSON.parse(JSON.stringify(t));setTimeout((()=>{this.isDisposed&&this.disposed||n.apply(this,[e])}),0)}return this._recordedStates.videoPlaying=!0,t}if(this.singleFrameMode)return n&&n.notTriggerSingleFrameClick||this._clickIptSingleFrameMode(),this.playCallbackInfo={width:0,height:0,deviceId:null},{width:0,height:0,deviceId:null};if(!this._video)throw new Error("'video' is null or undefined.");const r=++this.iPlayRound;if(this.promisePlay&&(await this.promisePlay,r<this.iPlayRound))return this.playCallbackInfo={width:this._video.videoWidth,height:this._video.videoHeight,deviceId:this._currentCamera&&this._currentCamera.deviceId},{width:this._video.videoWidth,height:this._video.videoHeight,deviceId:this._currentCamera&&this._currentCamera.deviceId};this.promisePlay=(async()=>{var r;try{this._video&&this._video.srcObject&&this.stop(),cw._onLog&&cw._onLog("DCE: ======before video========");const o=()=>{if(!this._video)throw l&&l.getTracks().forEach((e=>{e.stop()})),this._videoTrack=null,this._currentCamera=null,new Error("'video' is null or undefined.")},a=this.getVideoSettings();let s,l;if("boolean"==typeof a.video&&(a.video={}),e)delete a.video.facingMode,a.video.deviceId={exact:e};else if(a.video.deviceId);else if(this._lastDeviceId)delete a.video.facingMode,a.video.deviceId={exact:this._lastDeviceId};else if(this.ifSaveLastUsedCamera&&cw.isStorageAvailable&&window.localStorage.getItem("dce_last_camera_id")){delete a.video.facingMode,a.video.deviceId={ideal:window.localStorage.getItem("dce_last_camera_id")};const e=JSON.parse(window.localStorage.getItem("dce_last_apply_width")),t=JSON.parse(window.localStorage.getItem("dce_last_apply_height"));e&&t&&(a.video.width=e,a.video.height=t)}else if(this.ifSkipCameraInspection);else if(a.video.facingMode){if(await this.getAllCameras(!1),!this._video)throw new Error("'video' is null or undefined.");let e=a.video.facingMode;if(e instanceof Array&&e.length&&(e=e[0]),e=e.exact||e.ideal||e,"environment"===e){s=!0;const e=cw.findBestRearCamera(this._allCameras);e&&(delete a.video.facingMode,a.video.deviceId={exact:e})}}t&&(a.video.width={ideal:t}),i&&(a.video.height={ideal:i}),cw._onLog&&cw._onLog("DCE: ======try getUserMedia========");let c=[0,500],h=null;const u=async e=>{for(let t of c){t&&await new Promise((e=>setTimeout(e,t))),o();try{cw._onLog&&cw._onLog("DCE: ask "+JSON.stringify(e)),l=await navigator.mediaDevices.getUserMedia(e);break}catch(e){if(o(),"NotFoundError"===e.name||"NotAllowedError"===e.name)throw e;h=e,cw._onLog&&cw._onLog("DCE: "+e.message||e)}}o()};let d;if(await u(a),l||(cw._onLog&&cw._onLog("DCE: ======try getUserMedia again========"),d=JSON.parse(JSON.stringify(a)),"object"==typeof d.video&&(["iPhone","iPad"].includes(Wy.OS)?(t>=1280||i>=1280?d.video.width=1280:t>=640||i>=640?d.video.width=640:(t<640||i<640)&&(d.video.width=320),delete d.video.height):s&&!a.video.deviceId?(delete d.video.facingMode,this._allCameras.length&&(d.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})):d.video=!0),cw._onLog&&cw._onLog("DCE: "+d),await u(d)),l||(c=[1e3,2e3],await u(a)),l||await u(d),!l)throw h;const f=()=>{const e=l.getVideoTracks();let t,i;if(e.length&&(t=this._videoTrack=e[0]),this._video&&t){const e=t.getSettings();if(e)for(let n of this._allCameras)if(e.deviceId===n.deviceId){n._checked=!0,n.label=t.label,i=n;break}}this._currentCamera=i};if(await this.getAllCameras(!1),o(),s&&!this.ifSkipCameraInspection){f();const e=cw.findBestRearCamera(this._allCameras),t=null===(r=this._currentCamera)||void 0===r?void 0:r.deviceId;e&&e!=t&&(l.getTracks().forEach((e=>{e.stop()})),c=[0,500,1e3,2e3],a.video.deviceId={exact:e},await u(a))}cw._onLog&&cw._onLog("DCE: ======play video========"),o(),await cw.playVideo(this._video,l,4e3),o(),cw._onLog&&cw._onLog("DCE: ======played video========"),this._bgLoading&&(this._bgLoading.style.animationPlayState="paused");const p=this._video.videoWidth+"x"+this._video.videoHeight;this._optGotRsl&&(this._optGotRsl.setAttribute("data-width",this._video.videoWidth),this._optGotRsl.setAttribute("data-height",this._video.videoHeight),this._optGotRsl.innerText=p,this._selRsl&&this._optGotRsl.parentNode==this._selRsl&&(this._selRsl.value="got")),cw._onLog&&cw._onLog("DCE: got "+p),f(),this._renderSelCameraInfo();const g={width:this._video.videoWidth,height:this._video.videoHeight,deviceId:this._currentCamera&&this._currentCamera.deviceId};if(g.deviceId&&(this._lastDeviceId=g.deviceId,this.ifSaveLastUsedCamera&&cw.isStorageAvailable&&(window.localStorage.setItem("dce_last_camera_id",this._lastDeviceId),a.video.width&&a.video.height&&(window.localStorage.setItem("dce_last_apply_width",JSON.stringify(a.video.width)),window.localStorage.setItem("dce_last_apply_height",JSON.stringify(a.video.height))))),!n||!n.notTriggerPlayedEvent){const e=this.mapCameraEvents.get("played");for(let t of e){if(!t)continue;const e=JSON.parse(JSON.stringify(g));setTimeout((()=>{this.isDisposed&&this.disposed||t.apply(this,[e])}),0)}}return this.promisePlay=null,g}catch(e){throw this.promisePlay=null,this._bgLoading&&(this._bgLoading.style.display="none"),"NotFoundError"===e.name&&(DOMException?e=new DOMException("No camera available, please use a device with an accessible camera.",e.name):(e=new Error("No camera available, please use a device with an accessible camera.")).name="NotFoundError"),e}})();const o=await this.promisePlay;return this.playCallbackInfo=JSON.parse(JSON.stringify(o)),this._recordedStates.videoPlaying=!0,o}async resume(){this._assertOpen(),this._video&&(await this._video.play(),this._recordedStates.videoPlaying=!0),this.ifShowScanRegionLaser&&this.showScanRegionLaser()}pause(){this._assertOpen(),this._video&&(this._video.pause(),this._recordedStates.videoPlaying=!1),this.ifShowScanRegionLaser&&this.hideScanRegionLaser()}_bindUI(){if(!this.UIElement)throw new Error("Need to define `UIElement` before opening.");const e=[this.UIElement];for(let t=0;t<e.length;++t)for(let i of e[t].children)e.push(i);for(let t of e){if(!this._video&&t.classList.contains(this.containerClassName)){this._elContainer=t;const e=document.createElement("video");e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="100%",e.style.height="100%",e.style.objectFit=this.getVideoFit(),e.setAttribute("playsinline","true"),e.setAttribute("muted","true"),this._video=e;const i=document.createElement("div");i.append(e),i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.width="100%",i.style.height="100%",i.style.overflow="hidden",this._videoContainer=i,t.prepend(i)}else!this._divScanArea&&t.classList.contains("dce-scanarea")?this._divScanArea=t:!this._divScanLight&&t.classList.contains("dce-scanlight")?this._divScanLight=t:!this._bgLoading&&t.classList.contains("dce-bg-loading")?this._bgLoading=t:!this._bgCamera&&t.classList.contains("dce-bg-camera")?this._bgCamera=t:!this._selCam&&t.classList.contains("dce-sel-camera")?this._selCam=t:!this._selRsl&&t.classList.contains("dce-sel-resolution")?(this._selRsl=t,this.videoSrc||this.singleFrameMode||this._selRsl.options.length||(this._selRsl.innerHTML=[this._optGotRsl?"":'<option class="dce-opt-gotResolution" value="got"></option>','<option data-width="1920" data-height="1080">1920x1080</option>','<option data-width="1280" data-height="720">1280x720</option>','<option data-width="640" data-height="480">640x480</option>'].join(""),this._optGotRsl=this._optGotRsl||this._selRsl.options[0])):!this._optGotRsl&&t.classList.contains("dce-opt-gotResolution")?this._optGotRsl=t:!this._btnClose&&t.classList.contains("dce-btn-close")?this._btnClose=t:!this._selMinLtr&&t.classList.contains("dlr-sel-minletter")?(this._selMinLtr=t,this._selMinLtr.options.length||(this._selMinLtr.innerHTML=[this._optGotMinLtr?"":'<option class="dlr-opt-gotMinLtr" value="got"></option>','<option value="0" selected>any letter</option>','<option value="3">3+ letters</option>','<option value="5">5+ letters</option>','<option value="8">8+ letters</option>','<option value="12">12+ letters</option>','<option value="17">17+ letters</option>','<option value="30">30+ letters</option>','<option value="50">50+ letters</option>','<option value="80">80+ letters</option>','<option value="120">120+ letters</option>'].join(""),this._optGotMinLtr=this._optGotMinLtr||this._selMinLtr.options[0])):!this._optGotMinLtr&&t.classList.contains("dlr-opt-gotMinLtr")&&(this._optGotMinLtr=t);if(this.extraBindings&&this.extraBindings.length)for(let i of this.extraBindings)try{i(t)}catch(e){}}if(!this._video)throw this._unbindUI(),Error(`Can not find the video container element with class '${this.containerClassName}'`);this.singleFrameMode||this.videoSrc?(this.singleFrameMode&&(this._elContainer&&(this._elContainer.addEventListener("click",this._clickIptSingleFrameMode),this._elContainer.setAttribute("title","Take a photo")),this._bgCamera&&(this._bgCamera.style.display="block")),this._selCam&&(this._selCam.style.display="none"),this._selRsl&&(this._selRsl.style.display="none"),this._selMinLtr&&(this._selMinLtr.style.display="none")):(this._elContainer&&(["Android","HarmonyOS"].includes(Wy.OS)?(this._elContainer.addEventListener("touchend",this._tapDoFocus),this._elContainer.addEventListener("touchmove",this._touchMoveEvent)):this._elContainer.addEventListener("click",this._tapDoFocus)),this._selCam&&(this._selCam.style.display="block",this._selCam.addEventListener("change",this._onCameraSelChange)),this._selRsl&&(this._selRsl.style.display="block",this._selRsl.addEventListener("change",this._onResolutionSelChange)),this._selMinLtr&&(this._selMinLtr.style.display="block"),this._bgLoading&&(this._bgLoading.style.display="block")),this._btnClose&&this._btnClose.addEventListener("click",this._onCloseBtnClick),document.addEventListener("visibilitychange",this._ev_documentHideEvent),window.ResizeObserver&&(this._resizeObserver||(this._resizeObserver=new ResizeObserver((e=>{for(let t of e)t.target===this._elContainer&&this._updateLayers()}))),this._elContainer&&this._resizeObserver.observe(this._elContainer)),this._windowWidth=document.documentElement.clientWidth,window.addEventListener("resize",this._windowResizeListener)}_unbindUI(){this.singleFrameMode?(this._elContainer&&(this._elContainer.removeEventListener("click",this._clickIptSingleFrameMode),this._elContainer.removeAttribute("title")),this._bgCamera&&(this._bgCamera.style.display="none")):this._bgLoading&&(this._bgLoading.style.display="none"),this._elContainer&&(this._elContainer.removeEventListener("click",this._tapDoFocus),this._elContainer.removeEventListener("touchend",this._tapDoFocus),this._elContainer.removeEventListener("touchmove",this._touchMoveEvent)),this._selCam&&this._selCam.removeEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.removeEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.removeEventListener("click",this._onCloseBtnClick),this.hideScanRegionLaser(),this.hideViewDecorator(),this.hideScanRegionOverlays(),this._drawingLayersManager.setVisible(!1),this._hideOriginalImageCvs(),this._videoContainer&&this._videoContainer.remove(),this._video=null,this._videoContainer=null,this._elContainer=null,this._selCam=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._selMinLtr=null,this._optGotMinLtr=null,this._divScanArea=null,this._divScanLight=null,this._cvsScanRegion&&(this._cvsScanRegion.remove(),this._cvsScanRegion=null),this._singleFrameModeIpt&&(this._singleFrameModeIpt.remove(),this._singleFrameModeIpt=null),this._cvsSingleFrameMode&&(this._cvsSingleFrameMode.remove(),this._cvsSingleFrameMode=null),document.removeEventListener("visibilitychange",this._ev_documentHideEvent),window.ResizeObserver&&this._resizeObserver&&this._resizeObserver.disconnect(),window.removeEventListener("resize",this._windowResizeListener)}_assertOpen(){if(!this._bOpen)throw Error("The camera is not open.")}async open(e){this.UIElement||await this.setUIElement(cw.defaultUIElementURL),this._bindUI(),e&&this.appendAndShowUI();let t=await this.play();this.bOpen=!0,this._focusParameters.fds=null,this._focusParameters.kTimeout=void 0,this._focusSupported=!0,this._tapFocusEnabled&&!this.singleFrameMode&&(this._focusParameters.fds=(await this.getCapabilities()).focusDistance,this._focusParameters.fds||(this._focusSupported=!1,this._tapFocusEnabled=!1));const i=this.mapCameraEvents.get("cameraopen");for(let n of i){if(!n)continue;const e=JSON.parse(JSON.stringify(t));setTimeout((()=>{this.isDisposed&&this.disposed||n.apply(this,[e])}),0)}return t}close(e){if(!this._video)return;this.stop(),this._hideOriginalImage(!1),this.hideTip(),this._unbindUI(),e&&this.hideUI(),this.stopFetchingLoop(),this.bOpen=!1;const t=this.mapCameraEvents.get("cameraclose");for(let i of t){if(!i)continue;const e={width:0,height:0,deviceId:null};setTimeout((()=>{this.isDisposed&&this.disposed||i.apply(this,[e])}),0)}}stop(){this._video&&this._video.srcObject&&(this._video.srcObject.getTracks().forEach((e=>{e.stop()})),this._video.srcObject=null,this._videoTrack=null,this._currentCamera=null),this._video&&this.videoSrc&&(this._video.pause(),this._video.currentTime=0),this._bgLoading&&(this._bgLoading.style.animationPlayState=""),this._frameQueue.length=0,this._reusedCvs&&this._reusedCvs.ctx2d&&this._reusedCvs.ctx2d.clearRect(0,0,this._reusedCvs.width,this._reusedCvs.height),this.forceLoseContext()}async getAllCameras(e=!0){let t=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind));if(e&&t&&t.length&&!t[0].deviceId){let e=await navigator.mediaDevices.getUserMedia({video:!0});t=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind)),e.getTracks().forEach((e=>{e.stop()}))}const i=[],n=[];if(this._allCameras)for(let r of this._allCameras)r._checked&&n.push(r);for(let r=0;r<t.length;r++){let e,o=t[r];for(let t of n)if(o.deviceId==t.deviceId){e=t;break}e||(e={deviceId:o.deviceId,label:o.label?o.label:"camera "+r,_checked:!1}),e.deviceId&&i.push(e)}return this._allCameras=i,i}_renderSelCameraInfo(){if(!this._selCam)return;let e;this._selCam.textContent="";for(let t of this._allCameras){const i=document.createElement("option");i.value=t.deviceId,i.innerText=t.label,this._selCam.append(i),t.deviceId&&this._currentCamera&&this._currentCamera.deviceId==t.deviceId&&(e=i)}this._selCam.value=e?e.value:""}getSelectedCamera(){if(!this._bOpen){let e="";const t=this.videoSettings.video.deviceId;t&&(e=t.exact||t.ideal||t);for(let i of this._allCameras)if(i.deviceId===e)return JSON.parse(JSON.stringify(i));return{deviceId:e,label:"",_checked:!1}}return this._currentCamera}async selectCamera(e){let t="";if(e&&(t=e.deviceId||e),this.videoSettings.video.deviceId={exact:t},!this._bOpen||this._video.paused)return null;let i=null;this._currentCamera&&(i=this._currentCamera.deviceId);const n=this._video.videoWidth,r=this._video.videoHeight,o=await this.play(e.deviceId||e);if(this._focusParameters.fds=null,this._focusParameters.kTimeout=void 0,this._focusSupported=!0,this._tapFocusEnabled&&!this.singleFrameMode&&(this._focusParameters.fds=(await this.getCapabilities()).focusDistance,this._focusParameters.fds||(this._focusSupported=!1,this._tapFocusEnabled=!1)),i!==o.deviceId){const e=this.mapCameraEvents.get("camerachange");for(let t of e){if(!t)continue;const e=JSON.parse(JSON.stringify(o));setTimeout((()=>{this.isDisposed&&this.disposed||t.apply(this,[e])}),0)}}if(n!==o.width||r!==o.height){this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let t of this._arrScanRegionOverlays)t&&this._updateScanRegionOverlay(t);this._updateDrawingLayersSize(),this._updateVideoContainerStyle();const e=this.mapCameraEvents.get("resolutionchange");for(let t of e){if(!t)continue;const e=JSON.parse(JSON.stringify(o));setTimeout((()=>{this.isDisposed&&this.disposed||t.apply(this,[e])}),0)}}return o}getResolution(){if(this._bOpen)return[this._video.videoWidth,this._video.videoHeight];{let e=0,t=0;const i=this.videoSettings.video.width,n=this.videoSettings.video.height;return i&&(e=i.exact||i.ideal||i),n&&(t=n.exact||n.ideal||n),[e,t]}}async setResolution(e,t){let i,n;if(e instanceof Array?(i=e[0],n=e[1]):(i=e,n=t),this.videoSettings.video.width={ideal:i},this.videoSettings.video.height={ideal:n},!this._bOpen||this._video.paused)return null;const r=this._video.videoWidth,o=this._video.videoHeight,a=await this.play(null,i,n);if(r!==a.width||o!==a.height){this._updateScanRegionCanvas(),this._updateScanAreaDiv(),this._updateViewDecorator();for(let t of this._arrScanRegionOverlays)t&&this._updateScanRegionOverlay(t);this._updateDrawingLayersSize(),this._updateVideoContainerStyle();const e=this.mapCameraEvents.get("resolutionchange");for(let t of e){if(!t)continue;const e=JSON.parse(JSON.stringify(a));setTimeout((()=>{this.isDisposed&&this.disposed||t.apply(this,[e])}),0)}}return a}async getResolutions(e){let t="";const i=(e,t)=>{const i=this._mapCameraResolutions.get(e);if(!i||!i.length)return!1;for(let n of i)if(n[0]===t.width&&n[1]===t.height)return!0;return!1},n=async(e,t,i)=>{const n={video:{deviceId:{exact:e},width:{ideal:t},height:{ideal:i}}};let r=null;try{r=await navigator.mediaDevices.getUserMedia(n)}catch(e){return null}if(!r)return null;const o=r.getVideoTracks();let a=null;try{const e=o[0].getSettings();a={width:e.width,height:e.height}}catch(e){const t=document.createElement("video");t.srcObject=r,a={width:t.videoWidth,height:t.videoHeight},t.srcObject=null}return o.forEach((e=>{e.stop()})),a};if(!this._bOpen){const r=this.videoSettings.video.deviceId;if(!r)return null;if(t=r.hasOwnProperty("exact")?this.videoSettings.video.deviceId.exact:r.hasOwnProperty("ideal")?this.videoSettings.video.deviceId.ideal:this.videoSettings.video.deviceId,!t)return null;let o=this._mapCameraResolutions.get(t);if(o&&!e)return this._mapCameraResolutions.get(t);this._mapCameraResolutions.set(t,[]),o=this._mapCameraResolutions.get(t);for(let e of this._predefinedResolutions){const r=await n(t,e.width,e.height);r&&!i(t,r)&&o.push([r.width,r.height])}return o}if(this._currentCamera){t=this._currentCamera.deviceId;let n=this._mapCameraResolutions.get(t);if(n&&!e)return this._mapCameraResolutions.get(t);this._mapCameraResolutions.set(t,[]),n=this._mapCameraResolutions.get(t);let r=this._videoTrack;for(let e of this._predefinedResolutions){await r.applyConstraints({width:{ideal:e.width},height:{ideal:e.height}});const o=r.getSettings(),a={width:o.width,height:o.height};i(t,a)||n.push([a.width,a.height])}return this._video.srcObject.getTracks().forEach((e=>{e.stop()})),await this.play(t,null,null,{notTriggerPlayedEvent:!0}),n}return null}on(e,t){if(!t)return;const i=this.mapCameraEvents.get(e.toLowerCase());if(!i)throw new Error(`Event '${e}' does not exist.`);i.includes(t)||i.push(t)}off(e,t){const i=this.mapCameraEvents.get(e.toLowerCase());if(!i)throw new Error(`Event '${e}' does not exist.`);const n=i.indexOf(t);-1!==n&&i.splice(n,1)}offAll(e){if(e){if("string"==typeof e){const t=this.mapCameraEvents.get(e);t&&(t.length=0)}}else for(let t of this.mapCameraEvents.values())t&&(t.length=0)}getVideoSettings(){return JSON.parse(JSON.stringify(this.videoSettings))}updateVideoSettings(e){if(this.videoSettings=JSON.parse(JSON.stringify(e)),this._lastDeviceId=null,this._bOpen)return this.play()}isOpen(){return this._bOpen}getCapabilities(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getCapabilities()' is unavailable in singleFrameMode.");return this._videoTrack&&this._videoTrack.getCapabilities?this._videoTrack.getCapabilities():{}}getCameraSettings(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getCameraSettings()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getSettings():null}getConstraints(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getConstraints()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getConstraints():null}async applyConstraints(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'applyConstraints()' is unavailable in singleFrameMode.");if(!this._videoTrack)throw new Error('"_videoTrack" is null.');if(!this._videoTrack.applyConstraints)throw Error("Not supported.");return await this._videoTrack.applyConstraints(e)}async turnOnTorch(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'turnOnTorch()' is unavailable in singleFrameMode.");if(this.getCapabilities().torch)return await this._videoTrack.applyConstraints({advanced:[{torch:!0}]});throw Error("Not supported.")}async turnOffTorch(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'turnOffTorch()' is unavailable in singleFrameMode.");if(this.getCapabilities().torch)return await this._videoTrack.applyConstraints({advanced:[{torch:!1}]});throw Error("Not supported.")}async setColorTemperature(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'setColorTemperature()' is unavailable in singleFrameMode.");let t=this.getCapabilities().colorTemperature;if(!t)throw Error("Not supported.");return e<t.min?e=t.min:e>t.max&&(e=t.max),await this._videoTrack.applyConstraints({advanced:[{colorTemperature:e,whiteBalanceMode:"manual"}]})}getColorTemperature(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getColorTemperature()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getSettings().colorTemperature||0:null}async setExposureCompensation(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'setExposureCompensation()' is unavailable in singleFrameMode.");let t=this.getCapabilities().exposureCompensation;if(!t)throw Error("Not supported.");return e<t.min?e=t.min:e>t.max&&(e=t.max),await this._videoTrack.applyConstraints({advanced:[{exposureCompensation:e}]})}getExposureCompensation(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getExposureCompensation()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getSettings().exposureCompensation||0:null}async _setHardwareScale(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_setHardwareScale()' is unavailable in singleFrameMode.");if(e<1)throw new RangeError("Invalid value.");if(!this._videoTrack)return;const t=this.getCapabilities().zoom;if(!t)throw new Error("Not supported.");return e<t.min?e=t.min:e>t.max&&(e=t.max),e=lw(e,t.min,t.step,t.max),await this._videoTrack.applyConstraints({advanced:[{zoom:e}]}),e}_getHardwareScale(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_getHardwareScale()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getSettings().zoom||1:null}_setSoftwareScale(e,t){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_setSoftwareScale()' is unavailable in singleFrameMode.");if(e<1)throw new RangeError("Invalid value.");t&&this._setScaleCenter(t),this._softwareScale=e,this._scaleVideo(e,t)}_getSoftwareScale(){return this._softwareScale}_setScaleCenter(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_setScaleCenter()' is unavailable in singleFrameMode.");if(!e||"string"!=typeof e.x||"string"!=typeof e.y)throw new Error("Invalid center.");const t=this._video.videoWidth,i=this._video.videoHeight;let n=0,r=0;if(e.x.endsWith("px"))n=parseFloat(e.x);else{if(!e.x.endsWith("%"))throw new Error("Invalid scale center.");n=parseFloat(e.x)/100*t}if(e.y.endsWith("px"))r=parseFloat(e.y);else{if(!e.y.endsWith("%"))throw new Error("Invalid scale center.");r=parseFloat(e.y)/100*i}if(NaN==n||NaN==r)throw new Error("Invalid scale center.");this._scaleCenter={x:n,y:r}}_resetScaleCenter(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_resetScaleCenter()' is unavailable in singleFrameMode.");const e=this._video.videoWidth,t=this._video.videoHeight;this._scaleCenter={x:e/2,y:t/2}}_isVideoCenter(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_isVideoCenter()' is unavailable in singleFrameMode.");return e&&e.x==this._video.videoWidth/2&&e.y==this._video.videoHeight/2}async _setZoom(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'setZoom()' is unavailable in singleFrameMode.");if(e<1)throw new RangeError("Invalid value.");this._resetScaleCenter();try{if(this._isVideoCenter(this._scaleCenter)){const t=await this._setHardwareScale(e);let i=this._getHardwareScale();1==i&&1!=t&&(i=t),e>i?this._setSoftwareScale(e/i):this._setSoftwareScale(1)}else await this._setHardwareScale(1),this._setSoftwareScale(e)}catch(cy){if("Not supported."!==(cy.message||cy))throw cy;this._setSoftwareScale(e)}}async setZoom(e){if("number"!=typeof e&&"object"!=typeof e)throw new TypeError("Illegal type of argument.");if("number"==typeof e)return this._setZoom(e);if(this._assertOpen(),this.singleFrameMode)throw new Error("'setZoom()' is unavailable in singleFrameMode.");if(e){if("number"!=typeof e.factor)throw new TypeError("Illegal type of 'factor'.");if(e.factor<1)throw new RangeError("Invalid value.");e.centerPoint?this._setScaleCenter(e.centerPoint):this._resetScaleCenter();try{if(this._isVideoCenter(this._scaleCenter)){const t=await this._setHardwareScale(e.factor);let i=this._getHardwareScale();1==i&&1!=t&&(i=t),e.factor>i?this._setSoftwareScale(e.factor/i):this._setSoftwareScale(1)}else await this._setHardwareScale(1),this._setSoftwareScale(e.factor)}catch(cy){if("Not supported."!==(cy.message||cy))throw cy;this._setSoftwareScale(e.factor)}}}getZoom(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getZoom()' is unavailable in singleFrameMode.");return this._videoTrack?this._getHardwareScale()*this._softwareScale:null}getZoomSettings(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getZoom()' is unavailable in singleFrameMode.");return this._videoTrack?{factor:this._getHardwareScale()*this._softwareScale}:null}async resetZoom(){await this.setZoom({factor:1})}async setFrameRate(e){if(this._assertOpen(),this.singleFrameMode)throw new Error("'setFrameRate()' is unavailable in singleFrameMode.");let t=this.getCapabilities().frameRate;if(!t)throw Error("Not supported.");return e<t.min?e=t.min:e>t.max&&(e=t.max),await this._videoTrack.applyConstraints({width:{ideal:Math.max(this._video.videoWidth,this._video.videoHeight)},frameRate:e})}getFrameRate(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getFrameRate()' is unavailable in singleFrameMode.");return this._videoTrack?this._videoTrack.getSettings().frameRate:null}async _setFocus(e,t){if(this._assertOpen(),this.singleFrameMode)throw new Error("'setFocus()' is unavailable in singleFrameMode.");if("string"!=typeof e)throw Error("Invalid focus mode.");e=e.toLowerCase();const i=this.getCapabilities().focusMode,n=this.getCapabilities().focusDistance;if(!i)throw Error("Not supported.");if(!i.includes(e))throw Error("Unsupported mode.");if(t>=0){if(!n)throw Error("Manual focus unsupported.");return t<n.min?t=n.min:t>n.max&&(t=n.max),t=lw(t,n.min,n.step,n.max),await this._videoTrack.applyConstraints({advanced:[{focusMode:e,focusDistance:t}]})}return await this._videoTrack.applyConstraints({advanced:[{focusMode:e}]})}async setFocus(e,t){if("string"==typeof e)return this._setFocus(e,t);if(this._assertOpen(),this.singleFrameMode)throw new Error("'setFocus()' is unavailable in singleFrameMode.");if(!e)return;const i=this.getCapabilities(),n=i.focusMode,r=i.focusDistance;if(!n)throw Error("Not supported.");if("string"!=typeof e.mode)throw Error("Invalid focus mode.");const o=e.mode.toLowerCase();if(!n.includes(o))throw Error("Unsupported focus mode.");if("manual"!==o)return this._focusParameters._focusArea=null,await this._videoTrack.applyConstraints({advanced:[{focusMode:o}]});if(!r)throw Error("Manual focus unsupported.");if(e.hasOwnProperty("distance")){let t=e.distance;return t<r.min?t=r.min:t>r.max&&(t=r.max),t=lw(t,r.min,r.step,r.max),this._focusParameters._focusArea=null,await this._videoTrack.applyConstraints({advanced:[{focusMode:o,focusDistance:t}]})}if(!e.area)throw new Error("'distance' or 'area' should be specified in 'manual' mode.");{const t=e.area.centerPoint;let i=e.area.width,n=e.area.height;if(!i||!n){const e=this._video.videoWidth,t=this._video.videoHeight;i||(i=2*Math.round(Math.min(e,t)/this._focusParameters.defaultFocusAreaSizeRatio/2)+"px"),n||(n=2*Math.round(Math.min(e,t)/this._focusParameters.defaultFocusAreaSizeRatio/2)+"px")}this._focusParameters._focusArea={centerPoint:{x:t.x,y:t.y},width:i,height:n},await this._setLocalFocus(t,i,n)}}getFocus(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_getHardwareScale()' is unavailable in singleFrameMode.");if(!this._videoTrack)return null;const e=this._videoTrack.getSettings().focusMode;return e?"continuous"===e?{mode:e}:{mode:e,distance:this._videoTrack.getSettings().focusDistance}:null}getFocusSettings(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'_getHardwareScale()' is unavailable in singleFrameMode.");if(!this._videoTrack)return null;const e=this._videoTrack.getSettings(),t=e.focusMode;return t?"manual"===t?this._focusParameters._focusArea?{mode:"manual",area:JSON.parse(JSON.stringify(this._focusParameters._focusArea))}:{mode:"manual",distance:e.focusDistance}:{mode:t}:null}async _setFocusAndGetContract(e,t){const i=e=>{if(!this._bOpen||!this._videoTrack||this.video.paused||e.focusTaskId!=this._focusParameters.curFocusTaskId){this._bOpen&&this._videoTrack&&!this.video.paused||(this._focusParameters.isDoingFocus=0);const t=new Error(`Focus task ${e.focusTaskId} canceled.`);throw t.name="DeprecatedTaskError",t}1===this._focusParameters.isDoingFocus&&Date.now()-e.timeStart>this._focusParameters.focusCancelableTime&&(this._focusParameters.isDoingFocus=-1)};let n;t=lw(t,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),await this._videoTrack.applyConstraints({advanced:[{focusMode:"manual",focusDistance:t}]}),i(e),n=null==this._focusParameters.oldDistance?this._focusParameters.kTimeout*Math.max(Math.abs(1/this._focusParameters.fds.min-1/t),Math.abs(1/this._focusParameters.fds.max-1/t))+this._focusParameters.minTimeout:this._focusParameters.kTimeout*Math.abs(1/this._focusParameters.oldDistance-1/t)+this._focusParameters.minTimeout,this._focusParameters.oldDistance=t,await new Promise((e=>{setTimeout(e,n)})),i(e);let r=e.focusL-e.focusW/2,o=e.focusT-e.focusH/2,a=e.focusW,s=e.focusH;if(r>=this.video.videoWidth||o>=this.video.videoHeight)throw new Error("Invalid area.");r+a>this.video.videoWidth&&(a=this.video.videoWidth-r),o+s>this.video.videoHeight&&(s=this.video.videoHeight-o);const l=this._getImageData(this.video,this.video.videoWidth,this.video.videoHeight,{sx:r,sy:o,sWidth:a,sHeight:s,dWidth:a,dHeight:s},null,{pixelFormat:sw.RGBA});if(!l)return this._setFocusAndGetContract(e,t);const c=l.data;let h=0;for(let u=0,d=c.length-8;u<d;++u){let e=c[u]-c[u+8];++u;let t=c[u]-c[u+8];++u;let i=c[u]-c[u+8];++u,h+=e*e+t*t+i*i}return-h}async _doFocusDetail(e,t,i,n,r,o,a){let s;if(t=lw(t,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),n=lw(n,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),o?o=lw(o,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max):(o=lw(Math.sqrt((t||this._focusParameters.fds.step)*(n||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),a=await this._setFocusAndGetContract(e,o)),a<=i&&a<=r?s=3:i<r&&i<a?s=1:r<i&&r<a&&(s=2),(n-t)/2<=this._focusParameters.fds.step)return 3===s||(1===s?await this._videoTrack.applyConstraints({advanced:[{focusMode:"manual",focusDistance:t}]}):2===s&&await this._videoTrack.applyConstraints({advanced:[{focusMode:"manual",focusDistance:n}]})),!0;if(1===s)return await this._doFocusDetail(e,t,i,o,a);if(2===s)return await this._doFocusDetail(e,o,a,n,r);if(3!==s)return i=await this._setFocusAndGetContract(e,t),r=await this._setFocusAndGetContract(e,n),await this._doFocusDetail(e,t,i,n,r);let l=lw(Math.sqrt((t||this._focusParameters.fds.step)*(o||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),c=lw(Math.sqrt((n||this._focusParameters.fds.step)*(o||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max);if(Math.abs(1/this._focusParameters.oldDistance-1/l)<=Math.abs(1/this._focusParameters.oldDistance-1/c)){let s=await this._setFocusAndGetContract(e,l);if(s<a)return await this._doFocusDetail(e,t,i,o,a,l,s);if(s==a)return await this._doFocusDetail(e,l,s,o,a);let h=await this._setFocusAndGetContract(e,c);if(s>a&&a<h)return await this._doFocusDetail(e,l,s,c,h,o,a);if(a==h)return await this._doFocusDetail(e,o,a,c,h);if(a>h)return await this._doFocusDetail(e,o,a,n,r,c,h)}else{let s=await this._setFocusAndGetContract(e,c);if(a>s)return await this._doFocusDetail(e,o,a,n,r,c,s);if(a==s)return await this._doFocusDetail(e,o,a,c,s);let h=await this._setFocusAndGetContract(e,l);if(h>a&&a<s)return await this._doFocusDetail(e,l,h,c,s,o,a);if(h==a)return await this._doFocusDetail(e,l,h,o,a);if(h<a)return await this._doFocusDetail(e,t,i,o,a,l,h)}return!1}async _setLocalFocus(e,t,i,n,r){if(1==this._focusParameters.isDoingFocus)return!1;if(!e||"string"!=typeof e.x||"string"!=typeof e.y)throw new Error("Invalid centerPoint.");if(!t||"string"!=typeof t)throw new Error("Invalid width.");if(!i||"string"!=typeof i)throw new Error("Invalid height.");const o=this._video.videoWidth,a=this._video.videoHeight;let s=0,l=0;if(e.x.endsWith("px"))s=parseFloat(e.x);else{if(!e.x.endsWith("%"))throw new Error("Invalid centerPoint.");s=parseFloat(e.x)/100*o}if(e.y.endsWith("px"))l=parseFloat(e.y);else{if(!e.y.endsWith("%"))throw new Error("Invalid centerPoint.");l=parseFloat(e.y)/100*a}if(NaN==s||NaN==l)throw new Error("Invalid centerPoint.");let c=0;if(t.endsWith("px"))c=parseFloat(t);else{if(!t.endsWith("%"))throw new Error("Invalid width.");c=parseFloat(t)/100*o}if(NaN==c)throw new Error("Invalid width.");let h=0;if(i.endsWith("px"))h=parseFloat(i);else{if(!i.endsWith("%"))throw new Error("Invalid height.");h=parseFloat(i)/100*a}if(NaN==h)throw new Error("Invalid height.");if(1!==this._softwareScale){const e=this._softwareScale,t=this._scaleCenter;c/=e,h/=e,s=(1-1/e)*t.x+s/e,l=(1-1/e)*t.y+l/e}if(!this._focusSupported)throw new Error("Manual focus unsupported.");if(!this._focusParameters.fds&&(this._focusParameters.fds=(await this.getCapabilities()).focusDistance,!this._focusParameters.fds))throw this._focusSupported=!1,new Error("Manual focus unsupported.");null==this._focusParameters.kTimeout&&(this._focusParameters.kTimeout=(this._focusParameters.maxTimeout-this._focusParameters.minTimeout)/(1/this._focusParameters.fds.min-1/this._focusParameters.fds.max)),this._focusParameters.isDoingFocus=1;const u={focusL:s,focusT:l,focusW:c,focusH:h,focusTaskId:++this._focusParameters.curFocusTaskId,timeStart:Date.now()},d=async(e,t,i)=>{try{(null==t||t<this._focusParameters.fds.min)&&(t=this._focusParameters.fds.min),(null==i||i>this._focusParameters.fds.max)&&(i=this._focusParameters.fds.max),this._focusParameters.oldDistance=null;let n=lw(Math.sqrt(i*(t||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),r=lw(Math.sqrt((t||this._focusParameters.fds.step)*n),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),o=lw(Math.sqrt(n*i),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),a=await this._setFocusAndGetContract(e,o),s=await this._setFocusAndGetContract(e,r),l=await this._setFocusAndGetContract(e,n);if(s>l&&l<a){const t=await this._doFocusDetail(e,r,s,o,a,n,l);return this._focusParameters.isDoingFocus=0,t}if(s<l&&s<a){let i=await this._setFocusAndGetContract(e,t);const o=await this._doFocusDetail(e,t,i,n,l,r,s);return this._focusParameters.isDoingFocus=0,o}if(l>a&&s>a){let t=await this._setFocusAndGetContract(e,i);const r=await this._doFocusDetail(e,n,l,i,t,o,a);return this._focusParameters.isDoingFocus=0,r}if(s==l&&l<a){const t=await this._doFocusDetail(e,r,s,n,l);return this._focusParameters.isDoingFocus=0,t}if(l==a&&s>l){const t=await this._doFocusDetail(e,n,l,o,a);return this._focusParameters.isDoingFocus=0,t}return d(e,t,i)}catch(e){if("DeprecatedTaskError"!==e.name)throw e}};return d(u,n,r)}async enableTapToFocus(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'enableTapToFocus()' is unavailable in singleFrameMode.");if(!this._videoTrack)throw new Error("Video is not playing.");if(!this._focusSupported)throw new Error("Tapping to focus unsupported.");if(!this._focusParameters.fds&&(this._focusParameters.fds=(await this.getCapabilities()).focusDistance,!this._focusParameters.fds))throw this._focusSupported=!1,this._tapFocusEnabled=!1,new Error("Tapping to focus unsupported.");this._tapFocusEnabled=!0}disableTapToFocus(){this._tapFocusEnabled=!1}isTapToFocusEnabled(){return this._tapFocusEnabled}_updateVideoContainerStyle(){if(!this._video)return;if(this.singleFrameMode)return;const e=this._getSoftwareScale(),t=this._videoContainer;if("contain"===this.videoFit&&e>1){const e=this._video.videoWidth,i=this._video.videoHeight,n=window.getComputedStyle(this._elContainer),r=parseFloat(n.width),o=parseFloat(n.height),a=e/i;if(r/o<a){let e=r/a;t.style.left="0",t.style.top=(o-e)/2/o*100+"%",t.style.width="100%",t.style.height=e/o*100+"%"}else{let e=o*a;t.style.left=(r-e)/2/r*100+"%",t.style.top="0",t.style.width=e/r*100+"%",t.style.height="100%"}}else t.style.left="0",t.style.top="0",t.style.width="100%",t.style.height="100%"}_scaleVideo(e,t){if(this._video&&!this.singleFrameMode){if(e<1)throw new RangeError("Invalid scale value.");if(t&&this._setScaleCenter(t),1===e)this._video.style.transform="";else{const t=this.getVideoFit(),i=this._video.videoWidth,n=this._video.videoHeight,r=window.getComputedStyle(this._elContainer),o=parseFloat(r.width),a=parseFloat(r.height),s=o/a,l=i/n;let c=1;"contain"===t?c=s<l?o/(i/e):a/(n/e):"cover"===t&&(c=l>s?a/(i/e):o/(n/e));const h=c*(1-1/e)*(i/2-this._scaleCenter.x),u=c*(1-1/e)*(n/2-this._scaleCenter.y);this._video.style.transform=`translate(${h}px, ${u}px) scale(${e})`}this._updateVideoContainerStyle()}}getFrameSize(e,t,i,n){if(!e||!t)return null;let r,o,a,s,l=e,c=t;const h={regionLeft:0,regionTop:0,regionRight:l,regionBottom:c,regionMeasuredByPercentage:!1};i?(i.regionMeasuredByPercentage?(h.regionLeft=i.regionLeft*l/100,h.regionTop=i.regionTop*c/100,h.regionRight=i.regionRight*l/100,h.regionBottom=i.regionBottom*c/100):(h.regionLeft=i.regionLeft,h.regionTop=i.regionTop,h.regionRight=i.regionRight,h.regionBottom=i.regionBottom),r=Math.round(h.regionLeft),o=Math.round(h.regionTop),l=Math.round(h.regionRight-h.regionLeft),c=Math.round(h.regionBottom-h.regionTop)):(r=0,o=0,l=Math.round(l),c=Math.round(c));const u=Math.max(l,c);if(n&&n>0&&u>n){const e=n/u;l>c?(a=n,s=Math.round(c*e)):(a=Math.round(l*e),s=n)}else a=l,s=c;return a<=0||s<=0?null:{sx:r,sy:o,sWidth:l,sHeight:c,dWidth:a,dHeight:s}}getFrame(){if(this._assertOpen(),this.singleFrameMode)throw new Error("'getFrame()' is unavailable in singleFrameMode.");return this._getVideoData()}getImage(){return this.getFrame()}_drawImage(e,t,i,n,r,o,a){if(this.isDisposed&&this.disposed)throw Error("The 'CameraEnhancer' instance has been disposed.");if(!i||!n)return null;if(t instanceof HTMLVideoElement&&4!==t.readyState||t instanceof HTMLImageElement&&!t.complete)throw new Error("The source is not loaded.");let s=0,l=0,c=i,h=n,u=0,d=0,f=i,p=n;r&&(r.sx&&(s=Math.round(r.sx)),r.sy&&(l=Math.round(r.sy)),r.sWidth&&(c=Math.round(r.sWidth)),r.sHeight&&(h=Math.round(r.sHeight)),r.dx&&(u=Math.round(r.dx)),r.dy&&(d=Math.round(r.dy)),r.dWidth&&(f=Math.round(r.dWidth)),r.dHeight&&(p=Math.round(r.dHeight)));let g=sw.RGBA;a&&a.pixelFormat&&(g=a.pixelFormat);const m=e;if(a&&a.bUseWebGL){(m.width<u+f||m.height<d+p)&&(m.width=u+f,m.height=d+p,m.ctxWebGL&&m.ctxWebGL.viewport(0,0,u+f,d+p));const e=m.ctxWebGL||m.getContext("webgl",{antialias:!1})||m.getContext("experimental-webgl",{antialias:!1});if(!e){const e=new Error("WebGL error: unable to initialize WebGL. Your browser or machine may not support it.");throw e.name="WebGLError",e}if(!m.ctxWebGL||g!==this.shaderPixelFormat){m.ctxWebGL=e;const t=e=>{const t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),e.STATIC_DRAW);const i=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),e.STATIC_DRAW),{positions:t,texCoords:i}},i=e=>{const t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t},n=(e,t)=>{const i=e.createProgram();if(t.forEach((t=>e.attachShader(i,t))),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){const t=new Error(`An error occured linking the program: ${e.getProgramInfoLog(i)}.`);throw t.name="WebGLError",t}return e.useProgram(i),i},r=(e,t,i)=>{const n=e.createShader(t);if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){const t=new Error(`An error occured compiling the shader: ${e.getShaderInfoLog(n)}.`);throw t.name="WebGLError",t}return n},o="\n                    attribute vec2 a_position;\n                    attribute vec2 a_texCoord;\n\n                    uniform mat3 u_matrix;\n                    uniform mat3 u_textureMatrix;\n\n                    varying vec2 v_texCoord;\n                    void main(void) {\n                    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1.0);\n                    v_texCoord = vec4((u_textureMatrix * vec3(a_texCoord, 1)).xy, 0, 1.0).xy;\n                    }\n                ";let a="rgb";["rgba","rbga","grba","gbra","brga","bgra"].includes(g)&&(a=g.slice(0,3));const s=`\n                    precision mediump float;\n                    varying vec2 v_texCoord;\n                    uniform sampler2D u_image;\n                    uniform float uColorFactor;\n\n                    void main() {\n                        vec4 sample = texture2D(u_image, v_texCoord);\n                        float grey = 0.21 * sample.r + 0.71 * sample.g + 0.07 * sample.b;\n                        gl_FragColor = vec4(sample.${a} * (1.0 - uColorFactor) + (grey * uColorFactor), sample.a);\n                    }\n                `,l=n(e,[r(e,e.VERTEX_SHADER,o),r(e,e.FRAGMENT_SHADER,s)]);this._webGLProgramInfo={program:l,attribLocations:{vertexPosition:e.getAttribLocation(l,"a_position"),texPosition:e.getAttribLocation(l,"a_texCoord")},uniformLocations:{uSampler:e.getUniformLocation(l,"u_image"),uColorFactor:e.getUniformLocation(l,"uColorFactor"),uMatrix:e.getUniformLocation(l,"u_matrix"),uTextureMatrix:e.getUniformLocation(l,"u_textureMatrix")}},this._webGLBuffers=t(e),this._webGLTexture=i(e),this.shaderPixelFormat=g}const r=(e,t,i)=>{e.bindBuffer(e.ARRAY_BUFFER,t),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0)},a=(e,t,i)=>{const n=e.RGBA,r=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,n,r,o,i)},v=(e,t,o,a)=>{e.clearColor(0,0,0,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),r(e,o.positions,t.attribLocations.vertexPosition),r(e,o.texCoords,t.attribLocations.texPosition),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a),e.uniform1i(t.uniformLocations.uSampler,0),e.uniform1f(t.uniformLocations.uColorFactor,[sw.GREY,sw.GREY32].includes(g)?1:0);let m,v,_=aw.translate(aw.identity(),-1,-1);_=aw.scale(_,2,2),_=aw.scale(_,1/e.canvas.width,1/e.canvas.height),m=aw.translate(_,u,d),m=aw.scale(m,f,p),e.uniformMatrix3fv(t.uniformLocations.uMatrix,!1,m),v=aw.translate(aw.identity(),s/i,l/n),v=aw.scale(v,c/i,h/n),e.uniformMatrix3fv(t.uniformLocations.uTextureMatrix,!1,v),e.drawArrays(e.TRIANGLES,0,6)};let _;if(a(e,this._webGLTexture,t),v(e,this._webGLProgramInfo,this._webGLBuffers,this._webGLTexture),o){if(o.length<f*p*4)throw new Error("Unexpected size of the 'bufferContainer'.");_=o}else _=new Uint8Array(f*p*4);if(e.readPixels(u,d,f,p,e.RGBA,e.UNSIGNED_BYTE,_),255!==_[3]){this._bWebGLSupported=!1;const e=new Error("WebGL error: incorrect WebGL drawing.");throw e.name="WebGLError",e}return{context:e,pixelFormat:g===sw.GREY?sw.GREY32:g,_bUseWebGL:!0}}{m.ctx2d||(m.ctx2d=m.getContext("2d",{willReadFrequently:!0}));const e=m.ctx2d;if(!e)throw new Error("Unable to get 'CanvasRenderingContext2D' from canvas.");return(m.width<u+f||m.height<d+p)&&(m.width=u+f,m.height=d+p),e.drawImage(t,s,l,c,h,u,d,f,p),{context:e,pixelFormat:sw.RGBA,_bUseWebGL:!1}}}_readCvsData(e,t,i){let n,r=0,o=0,a=e.canvas.width,s=e.canvas.height;if(t&&(t.x&&(r=t.x),t.y&&(o=t.y),t.width&&(a=t.width),t.height&&(s=t.height)),e instanceof WebGLRenderingContext){const t=e;if(i){if(i.length<a*s*4)throw new Error("Unexpected size of the 'bufferContainer'.");t.readPixels(r,o,a,s,t.RGBA,t.UNSIGNED_BYTE,i),n=new Uint8Array(i.buffer,0,a*s*4)}else n=new Uint8Array(a*s*4),t.readPixels(r,o,a,s,t.RGBA,t.UNSIGNED_BYTE,n)}else if(e instanceof CanvasRenderingContext2D){let t;if(t=e.getImageData(r,o,a,s),n=new Uint8Array(t.data.buffer),i){if(i.length<n.length)throw new Error("Unexpected size of the 'bufferContainer'.");i.set(n)}}return n}_transformPixelFormat(e,t,i,n){let r;if(t===i)return n?new Uint8Array(e):e;const o=[sw.RGBA,sw.RBGA,sw.GRBA,sw.GBRA,sw.BRGA,sw.BGRA];if(o.includes(t))if(i===sw.GREY){r=new Uint8Array(e.length/4);for(let t=0;t<e.length;t+=4){const i=.21*e[t]+.71*e[t+1]+.07*e[t+2];r[t/4]=i}}else if(i===sw.GREY32){r=n?new Uint8Array(e):e;for(let t=0;t<e.length;t+=4){const i=.21*e[t]+.71*e[t+1]+.07*e[t+2];r[t]=i,r[t+1]=i,r[t+2]=i}}else{if(!o.includes(i))throw new Error("Unable to transform.");if(n){r=new Uint8Array(e);const n=t.indexOf("r"),o=t.indexOf("g"),a=t.indexOf("b"),s=i.indexOf("r"),l=i.indexOf("g"),c=i.indexOf("b");for(let t=0;t<e.length;t+=4)r[t+s]=e[t+n],r[t+l]=e[t+o],r[t+c]=e[t+a]}else{r=e;const n=t.indexOf("r"),o=t.indexOf("g"),a=t.indexOf("b"),s=i.indexOf("r"),l=i.indexOf("g"),c=i.indexOf("b");for(let t=0;t<e.length;t+=4){let i=[e[t],e[t+1],e[t+2]];r[t+s]=i[n],r[t+l]=i[o],r[t+c]=i[a]}}}else if(t===sw.GREY){if(i!==sw.GREY32)throw new Error("Unable to transform.");r=new Uint8Array(4*e.length);for(let t=0;t<e.length;t++)r[4*t]=e[t],r[4*t+1]=e[t],r[4*t+2]=e[t],r[4*t+3]=255}else{if(t!==sw.GREY32)throw new Error("Unable to transform.");if(i!==sw.GREY)throw new Error("Unable to transform.");r=new Uint8Array(new Uint32Array(e.buffer))}return r}_getImageData(e,t,i,n,r,o){if(this.isDisposed&&this.disposed)throw Error("The 'CameraEnhancer' instance has been disposed.");if(!t||!i)return null;if(n.sx>t||n.sy>i||n.sx+n.sWidth>t||n.sy+n.sHeight>i)throw new Error("Invalid position.");if(e instanceof HTMLVideoElement&&4!==e.readyState||e instanceof HTMLImageElement&&!e.complete)throw new Error("The source is not loaded.");const a=Math.round(n.sx),s=Math.round(n.sy),l=Math.round(n.sWidth),c=Math.round(n.sHeight),h=Math.round(n.dWidth),u=Math.round(n.dHeight);let d=sw.RGBA;o&&o.pixelFormat&&(d=o.pixelFormat);let f,p,g,m=this._bWebGLSupported;o&&0==o.bUseWebGL&&(m=!1),m?(this._reusedWebGLCvs||(this._reusedWebGLCvs=document.createElement("canvas")),f=this._reusedWebGLCvs):(this._reusedCvs||(this._reusedCvs=document.createElement("canvas")),f=this._reusedCvs);try{if(m)if(cw._onLog&&cw._onLog("DCE: _getImageData() in WebGL."),r)if(d===sw.GREY){if(g=new Uint8Array(h*u*4),p=this._drawImage(f,e,t,i,{sx:a,sy:s,sWidth:l,sHeight:c,dWidth:h,dHeight:u},g,{pixelFormat:d,bUseWebGL:m}),g=this._transformPixelFormat(g,p.pixelFormat,d),r){if(r.length<g.length)throw new Error("Unexpected size of the 'bufferContainer'.");r.set(g)}}else p=this._drawImage(f,e,t,i,{sx:a,sy:s,sWidth:l,sHeight:c,dWidth:h,dHeight:u},r,{pixelFormat:d,bUseWebGL:m}),g=new Uint8Array(r.buffer,0,h*u*4),g=this._transformPixelFormat(g,p.pixelFormat,d);else d===sw.GREY?((!this._tempDataContainer||this._tempDataContainer.length<h*u*4)&&(this._tempDataContainer=new Uint8Array(h*u*4)),g=new Uint8Array(this._tempDataContainer.buffer,0,h*u*4)):g=new Uint8Array(h*u*4),p=this._drawImage(f,e,t,i,{sx:a,sy:s,sWidth:l,sHeight:c,dWidth:h,dHeight:u},g,{pixelFormat:d,bUseWebGL:m}),g=this._transformPixelFormat(g,p.pixelFormat,d);else if(cw._onLog&&cw._onLog("DCE: _getImageData() in context2d."),p=this._drawImage(f,e,t,i,{sx:a,sy:s,sWidth:l,sHeight:c,dWidth:h,dHeight:u},null,{pixelFormat:sw.RGBA,bUseWebGL:m}),g=this._readCvsData(p.context,null,null),g=this._transformPixelFormat(g,p.pixelFormat,d),r){if(r.length<g.length)throw new Error("Unexpected size of the 'bufferContainer'.");r.set(g)}}catch(n){if("WebGLError"===n.name)return this.forceLoseContext(),this._bWebGLSupported=!1,this._getImageData(e,t,i,{sx:a,sy:s,sWidth:l,sHeight:c,dWidth:h,dHeight:u},r,o);throw n}return{data:g,pixelFormat:d,_bUseWebGL:p._bUseWebGL}}forceLoseContext(){if(!this._reusedWebGLCvs)return;const e=this._reusedWebGLCvs.ctxWebGL;e&&!e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),this._webGLTexture=null,this._webGLProgramInfo=null,this._webGLBuffers=null,this._reusedWebGLCvs=null}_getVideoData(e,t){if(this.isDisposed&&this.disposed)throw Error("The 'CameraEnhancer' instance has been disposed.");if(this._assertOpen(),this.singleFrameMode)throw new Error("'_getVideoData()' is unavailable in singleFrameMode.");if(!this._video||4!==this._video.readyState)return null;const i=Date.now();let n=this._scanRegion;t&&t.hasOwnProperty("region")&&(n=t.region);let r=this.mapPixelFormatString_Enum.get(this.framePixelFormat.toLowerCase());t&&t.pixelFormat&&(r=this.mapPixelFormatString_Enum.get(t.pixelFormat.toLowerCase()));let o=this._softwareScale;t&&t.scale&&(o=t.scale);const a=this._video.videoWidth,s=this._video.videoHeight;let l=this._scaleCenter;if(t&&t.scaleCenter){if("string"!=typeof t.scaleCenter.x||"string"!=typeof t.scaleCenter.y)throw new Error("Invalid scale center.");let e=0,i=0;if(t.scaleCenter.x.endsWith("px"))e=parseFloat(t.scaleCenter.x);else{if(!t.scaleCenter.x.endsWith("%"))throw new Error("Invalid scale center.");e=parseFloat(t.scaleCenter.x)/100*a}if(t.scaleCenter.y.endsWith("px"))i=parseFloat(t.scaleCenter.y);else{if(!t.scaleCenter.y.endsWith("%"))throw new Error("Invalid scale center.");i=parseFloat(t.scaleCenter.y)/100*s}if(NaN==e||NaN==i)throw new Error("Invalid scale center.");l.x=Math.round(e),l.y=Math.round(i)}if(0===a||0===s)return null;const c=this.getFrameSize(a,s,n,this.maxCvsSideLength);if(!c)return null;let h=!0;a===c.sWidth&&s===c.sHeight&&(h=!1);const u={data:null,region:n?JSON.parse(JSON.stringify(n)):null,sx:c.sx,sy:c.sy,width:c.dWidth,height:c.dHeight,colorMode:null,pixelFormat:null,timeSpent:null,timeStamp:null,isCropped:h,toCanvas:this._toCanvas,_sWidth:c.sWidth,_sHeight:c.sHeight,_bUseWebGL:null};1!==o&&(c.sWidth=Math.round(c.sWidth/o),c.sHeight=Math.round(c.sHeight/o),c.sx=Math.round((1-1/o)*l.x+c.sx/o),c.sy=Math.round((1-1/o)*l.y+c.sy/o));const d=this._getImageData(this._video,a,s,c,e,{pixelFormat:r});if(!d)return null;const f=Date.now();return u.data=d.data,u.pixelFormat=u.colorMode=d.pixelFormat,u._bUseWebGL=d._bUseWebGL,u.timeSpent=f-i,u.timeStamp=f,d.pixelFormat===sw.GREY?u.stride=u.width:u.stride=4*u.width,u}getCurrentRegion(){let e=null;if(this._scanRegion)e=this._scanRegion;else if(this.croppingRegions){if(this._croppingRegionIndex>=this.croppingRegions.length||this._croppingRegionIndex<0)throw new Error("The 'croppingRegionIndex' is out of bounds.");e=this.croppingRegions[this._croppingRegionIndex],this.bIncreaseRegionIndexAuto&&++this._croppingRegionIndex>=this.croppingRegions.length&&(this._croppingRegionIndex=0)}return e}_fetchingLoop(e){if(this.isDisposed&&this.disposed)return;if(!this._bOpen||!this.isFetchingLoopStarted())return void this.stopFetchingLoop();const t=()=>{const e=this.getCurrentRegion();let t=this._getVideoData(null,{region:e});if(!t)return void cw._onLog;for(;this._frameQueue&&this._frameQueue.length>=this.maxNumberOfFramesInBuffer;)this._frameQueue.shift();this._frameQueue.push(t);const i=this.mapCameraEvents.get("frameaddedtobuffer");for(let n of i)n&&setTimeout((()=>{this.isDisposed&&this.disposed||n.apply(this)}),0)},i=()=>{this.isDisposed&&this.disposed||(this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this.refreshInterval<=0||(this._frameLoopTimeoutId2=setTimeout((()=>{this.isDisposed&&this.disposed||(this._bOpen&&this.isFetchingLoopStarted()?(t(),i()):this.stopFetchingLoop())}),this.refreshInterval)))};e&&(this._frameQueue.length<this.maxNumberOfFramesInBuffer?(t(),this.refreshInterval>0&&i()):this.refreshInterval>0?(t(),i()):0===this.refreshInterval?t():this.refreshInterval),this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId),this._frameLoopTimeoutId=setTimeout((()=>{this.isDisposed&&this.disposed||this._fetchingLoop(!0)}),this.loopInterval)}startFetchingLoop(){if(this.isDisposed&&this.disposed)throw Error("The 'CameraEnhancer' instance has been disposed.");if(this._assertOpen(),this.singleFrameMode)throw Error("'startFetchingLoop()' is unavailable in singleFrameMode.");this.isFetchingLoopStarted()||(this._bFetchingLoopStarted=!0,this._recordedStates.fetchingLoopStart=!0,this._fetchingLoop(!0))}isFetchingLoopStarted(){return this._bFetchingLoopStarted}stopFetchingLoop(){this._bFetchingLoopStarted&&(this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId),this._frameQueue.length=0,this._bFetchingLoopStarted=!1,this._recordedStates.fetchingLoopStart=!1)}getFrameFromBuffer(e){return this._frameQueue&&this._frameQueue.length?e?e<this._frameQueue.length?(this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this._frameQueue.splice(e,1)[0]):void 0:(this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this._frameQueue.pop()):null}clearFrameBuffer(){this._frameQueue&&(this._frameQueue.length=0)}_createDrawingLayerBaseCvs(){this._assertOpen();const e=this._calculateCvsSize();if(!e)throw new Error("Camera is not open.");const{width:t,height:i,objectFit:n}=e;if(t<=0||i<=0)throw new Error("Invalid dimension of video or image.");const r=document.createElement("canvas");if(r.width==t&&r.height==i||(r.width=t,r.height=i),r.style.objectFit=n,this._cvsScanRegion)this._cvsScanRegion.after(r);else if(this._cvsOriginalImage)this._cvsOriginalImage.after(r);else if(this._cvsSingleFrameMode)this._cvsSingleFrameMode.after(r);else{if(!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(r)}return r}_updateDrawingLayersSize(e){let t;if(t=e&&e.width&&e.height&&e.objectFit?{width:e.width,height:e.height,objectFit:e.objectFit}:this._calculateCvsSize(),!t)return;const{width:i,height:n,objectFit:r}=t;this._drawingLayersManager.setDimensions({width:i,height:n},{backstoreOnly:!0}),this._drawingLayersManager.setObjectFit(r)}_createDrawingLayer(e){this._layerBaseCvs||(this._layerBaseCvs=this._createDrawingLayerBaseCvs());const t=this._layerBaseCvs;return this._drawingLayersManager.createDrawingLayer(t,e)}deleteDrawingLayer(e){this._drawingLayersManager.deleteDrawingLayer(e),this._drawingLayersManager.getDrawingLayers().length||this._layerBaseCvs&&(this._layerBaseCvs.remove(),this._layerBaseCvs=null)}createDrawingLayer(){return this._createDrawingLayer()}getDrawingLayer(e){return this._drawingLayersManager.getDrawingLayer(e)||([1,2,3].includes(e)?this._createDrawingLayer(e):null)}getDrawingLayers(){return this._drawingLayersManager.getDrawingLayers().filter((e=>e.getId()>=0))}getSelectedDrawingItems(){return this._drawingLayersManager.getSelectedDrawingItems()}createDrawingStyle(e){return this._drawingLayersManager.createDrawingStyle(e)}getDrawingStyle(e){return this._drawingLayersManager.getDrawingStyle(e)}getDrawingStyles(){return this._drawingLayersManager.getDrawingStyles()}updateDrawingStyle(e,t){return this._drawingLayersManager.updateDrawingStyle(e,t)}clearDrawingLayers(){const e=this.getDrawingLayers();for(let t of e)this.deleteDrawingLayer(t.getId())}showTip(e,t,i,n,r=3e3,o=!0){this._assertOpen(),this._tipArgs.x=e,this._tipArgs.y=t,this._tipArgs.width=i,this._tipArgs.autoShowSuggestedTip=!!o,this._drawingLayerOfTip||(this._drawingLayerOfTip=this._createDrawingLayer(-1)),this._tipStyleId||(this._tipStyleId=this.createDrawingStyle({fillStyle:"#FFFFFF",paintMode:"fill",fontFamily:"Open Sans",fontSize:40})),this._drawingLayerOfTip.clearDrawingItems();const a=new iw(n||"",e,t,i,this._tipStyleId);a._fabricObject.paddingTop=15,a._fabricObject.calcTextHeight=function(){for(var e=0,t=0,i=this._textLines.length;t<i;t++)e+=this.getHeightOfLine(t);return e+2*this.paddingTop},a._fabricObject._getTopOffset=function(){return-this.height/2+this.getHeightOfLine(0)*(1-1/this.lineHeight)/2+this.paddingTop},a.setAttribute("backgroundColor","rgba(50, 50, 52, .8)"),a.setAttribute("lineHeight",1.3),a.setAttribute("textAlign","center"),this._drawingLayerOfTip.addDrawingItem(a),this._hideTipTimeoutId&&clearTimeout(this._hideTipTimeoutId),this._tipArgs.duration=void 0===r?3e3:r,this._tipArgs.duration>0&&(this._hideTipTimeoutId=setTimeout((()=>{this.isDisposed&&this.disposed||this._hideTip()}),this._tipArgs.duration))}_hideTip(){this._drawingLayerOfTip&&(this.deleteDrawingLayer(this._drawingLayerOfTip.getId()),this._drawingLayerOfTip=null,this._hideTipTimeoutId&&clearTimeout(this._hideTipTimeoutId))}hideTip(){this._hideTip(),this._tipArgs.x=null,this._tipArgs.y=null,this._tipArgs.width=null,this._tipArgs.autoShowSuggestedTip=null}updateTipMessage(e){if(!this._drawingLayerOfTip)throw new Error("The Tip is not showing.");this._drawingLayerOfTip.getDrawingItems()[0].setAttribute("text",e),this._drawingLayerOfTip.renderAll(),this._tipArgs.duration>0&&(this._hideTipTimeoutId&&clearTimeout(this._hideTipTimeoutId),this._hideTipTimeoutId=setTimeout((()=>{this.isDisposed&&this.disposed||this._hideTip()}),this._tipArgs.duration))}suggestTip(e,t){this._tipArgs.autoShowSuggestedTip&&(this._drawingLayerOfTip?this.updateTipMessage(t):void 0!==this._tipArgs.x&&this.showTip(this._tipArgs.x,this._tipArgs.y,this._tipArgs.width,t,this._tipArgs.duration)),this.onTipSuggested&&setTimeout((()=>{this.isDisposed&&this.disposed||this.onTipSuggested.apply(this,[e,t])}),0)}_createControler(){if(this._controler||(this._controler=new ow(this)),this._controler)return this._controler}_destroyControler(){this._controler=null}setOriginalImage(e,t,i){if(!e||!t||!i)throw new Error("Invalid arguments");this._originalImageData={imageData:e,width:t,height:i};let n=this._cvsOriginalImage;n||(n=document.createElement("canvas"),n.style.position="absolute",n.style.width="100%",n.style.height="100%",n.style.left="0",n.style.top="0",n.style.backgroundColor="white",n.style.objectFit="contain",this._cvsOriginalImage=n),n.width===t&&n.height===i||(n.width=t,n.height=i);const r=n.getContext("2d");r.clearRect(0,0,n.width,n.height),e instanceof Uint8Array||e instanceof Uint8ClampedArray?(e instanceof Uint8Array&&(e=new Uint8ClampedArray(e.buffer)),r.putImageData(new ImageData(e,t,i),0,0)):e instanceof HTMLCanvasElement&&r.drawImage(e,0,0),document.body.contains(n)&&""===n.style.display&&this._updateDrawingLayersSize({width:t,height:i,objectFit:"contain"})}getOriginalImage(){return this._originalImageData?Object.assign({},this._originalImageData):null}async deleteOriginalImage(){await this.hideOriginalImage(),this._cvsOriginalImage&&(this._cvsOriginalImage.remove(),this._cvsOriginalImage=null),this._originalImageData=null}_showOriginalImageCvs(){this._cvsOriginalImage&&"none"==this._cvsOriginalImage.style.display&&(this._cvsOriginalImage.style.display="")}_hideOriginalImageCvs(){this._cvsOriginalImage&&(this._cvsOriginalImage.style.display="none")}showOriginalImage(){if(!this._originalImageData)throw new Error("No original image is set.");const e=this._cvsOriginalImage;if(""===e.style.display&&document.body.contains(e))return;const{width:t,height:i}=this._originalImageData;if(this._updateDrawingLayersSize({width:t,height:i,objectFit:"contain"}),this._bOpen&&(this._video&&!this._video.paused&&this._video.pause(),this._bFetchingLoopStarted&&(this.stopFetchingLoop(),this._recordedStates.fetchingLoopStart=!0),this.ifShowScanRegionMask&&this._cvsScanRegion&&(this._cvsScanRegion.style.display="none"),this.ifShowScanRegionLaser&&this._divScanLight&&(this._divScanLight.style.display="none"),this._cvsViewDecorator&&(this._cvsViewDecorator.style.display="none"),this._scanRegionOverlayContainer&&(this._scanRegionOverlayContainer.style.display="none"),this._selCam&&(this._selCam.parentElement.style.display="none")),!document.body.contains(e))if(this._cvsSingleFrameMode)this._cvsSingleFrameMode.after(e);else{if(!this._videoContainer)throw new Error("Unable to find video element");this._videoContainer.after(e)}this._showOriginalImageCvs()}async _hideOriginalImage(e){this._originalImageData&&this._cvsOriginalImage&&"none"!==this._cvsOriginalImage.style.display&&(this._updateDrawingLayersSize(),this._bOpen&&e&&(this._video&&this._recordedStates.videoPlaying&&await this.play(null,null,null,{notTriggerSingleFrameClick:!0}),this._recordedStates.fetchingLoopStart&&!this.singleFrameMode&&this.startFetchingLoop(),this.ifShowScanRegionMask&&this._cvsScanRegion&&this._recordedStates.maskShow&&this.showScanRegionMask(),this.ifShowScanRegionLaser&&this._divScanLight&&this._recordedStates.laserShow&&this.showScanRegionLaser(),this._cvsViewDecorator&&this._recordedStates.decoratorShow&&this.showViewDecorator(),this._scanRegionOverlayContainer&&this._recordedStates.overlayShow&&this.showScanRegionOverlays()),this._selCam&&(this._selCam.parentElement.style.display=""),this._hideOriginalImageCvs())}async hideOriginalImage(){return this._hideOriginalImage(!0)}transformCoord(e){if(!this.isOpen())throw new Error("Unavailable when the camera is not open.");if(this.singleFrameMode&&!this._cvsSingleFrameMode)throw new Error("No image is selected. ");const t=this._elContainer.getBoundingClientRect();let i,n,r,o,a,s=t.left,l=t.top,c=s+window.scrollX,h=l+window.scrollY;this.singleFrameMode?(i=this._cvsSingleFrameMode.width,n=this._cvsSingleFrameMode.height,r=parseFloat(window.getComputedStyle(this._cvsSingleFrameMode).width),o=parseFloat(window.getComputedStyle(this._cvsSingleFrameMode).height),a="contain"):(i=this.video.videoWidth,n=this.video.videoHeight,r=parseFloat(window.getComputedStyle(this._elContainer).width),o=parseFloat(window.getComputedStyle(this._elContainer).height),a=this.videoFit);const u=r/o,d=i/n;let f,p,g,m,v=1;if("contain"===a)u<d?(v=r/i,f=s+e.x*v,p=l+e.y*v+(o-n*v)/2,g=c+e.x*v,m=h+e.y*v+(o-n*v)/2):(v=o/n,f=s+e.x*v+(r-i*v)/2,p=l+e.y*v,g=c+e.x*v+(r-i*v)/2,m=h+e.y*v);else if("cover"===a)if(u<d){v=o/n;let t=e.x*v-(i*v-r)/2;t=Math.max(t,0),t=Math.min(t,r),f=s+t,p=l+e.y*v,g=c+t,m=h+e.y*v}else{v=r/i;let t=e.y*v-(n*v-o)/2;t=Math.max(t,0),t=Math.min(t,o),f=s+e.x*v,p=l+t,g=c+e.x*v,m=h+t}return{clientX:Math.round(f),clientY:Math.round(p),pageX:Math.round(g),pageY:Math.round(m)}}convertToPageCoordinates(e){const t=this.transformCoord(e);return{x:t.pageX,y:t.pageY}}convertToClientCoordinates(e){const t=this.transformCoord(e);return{x:t.clientX,y:t.clientY}}dispose(e){this.UIElement&&(this._uiOriginalState&&this._uiOriginalState.inDom?this.UIElement.style.display=this._uiOriginalState.display:this.UIElement.style.display="none"),this.clearDrawingLayers(),this.close(),this.forceLoseContext(),this.setViewDecorator(null,null),this._scanRegionOverlayContainer&&this._scanRegionOverlayContainer.remove(),this._arrScanRegionOverlays.length=0,e&&this.UIElement&&this.UIElement.remove(),this.__proto__=null;for(let t in this)delete this[t];Object.defineProperty(this,"isCameraEnhancer",{value:!0}),Object.defineProperty(this,"isDisposed",{value:!0}),Object.defineProperty(this,"disposed",{value:!0})}}cw._jsVersion="3.3.4",cw._jsEditVersion="20230414",cw._version="JS "+cw._jsVersion+"."+cw._jsEditVersion,cw.browserInfo=Wy,cw._hasEngineResourceLoaded=!1,cw._engineResourcePath=Xy,cw._defaultUIElementURL="@engineResourcePath/dce.ui.html";const hw={DT_Arc:class extends qy{constructor(e,t,i,n,r,o){super(new By.Circle({left:e,top:t,radius:i,startAngle:n,endAngle:r}),o),this._mediaType="arc"}},DT_Polygon:ew,DT_Rect:class extends qy{constructor(e,t,i,n,r){super(new By.Rect({left:e,top:t,width:i,height:n}),r)}},DT_Image:class extends qy{constructor(e,t,i,n){super(new By.Image(e,{left:t,top:i}),n),this.image=e}_extendSet(e,t){if("image"===e){if(t instanceof HTMLImageElement)return this._fabricObject.setElement(t),this.image=t,!0;if(t instanceof HTMLCanvasElement){const e=new Image;return e.src=t.toDataURL(),this._fabricObject.setElement(e),this.image=t,!0}throw new Error("Unsupported value.")}}_extendGet(e){if("image"===e)return this.image}},DT_Text:iw,DT_Line:class extends ew{constructor(e,t,i){super([e,t],i),this._mediaType="line"}_extendSet(e,t){if("startPoint"===e||"endPoint"===e){t="startPoint"===e?[t,this.get("endPoint")]:[this.get("startPoint"),t];const i=this._fabricObject;if(i.group){const e=i.group;i.points=t.map((t=>({x:t.x-e.left-e.width/2,y:t.y-e.top-e.height/2}))),e.addWithUpdate()}else i.points=t;const n=i.points.length-1;return i.controls=i.points.reduce((function(e,t,i){return e["p"+i]=new By.Control({positionHandler:Ky,actionHandler:Qy(i>0?i-1:n,Jy),actionName:"modifyPolygon",pointIndex:i}),e}),{}),i._setPositionDimensions({}),!0}}_extendGet(e){if("startPoint"===e||"endPoint"===e){const t=[],i=this._fabricObject;if(i.selectable&&!i.group)for(let e in i.oCoords)t.push({x:i.oCoords[e].x,y:i.oCoords[e].y});else for(let e of i.points){let n=e.x-i.pathOffset.x,r=e.y-i.pathOffset.y;const o=By.util.transformPoint({x:n,y:r},i.calcTransformMatrix());t.push({x:o.x,y:o.y})}return"startPoint"===e?t[0]:t[1]}}},DT_Group:class extends qy{constructor(e){super(new By.Group(e.map((e=>e._getFabricObject())))),this._fabricObject.on("selected",(()=>{this.styleSelector="selected";const e=this._fabricObject._objects;for(let t of e)setTimeout((()=>{t&&t.fire("selected")}),0);setTimeout((()=>{this._fabricObject&&this._fabricObject.canvas&&(this._fabricObject.dirty=!0,this._fabricObject.canvas.renderAll())}),0)})),this._fabricObject.on("deselected",(()=>{this.styleSelector="default";const e=this._fabricObject._objects;for(let t of e)setTimeout((()=>{t&&t.fire("deselected")}),0);setTimeout((()=>{this._fabricObject&&this._fabricObject.canvas&&(this._fabricObject.dirty=!0,this._fabricObject.canvas.renderAll())}),0)}))}getChildItems(){return this._fabricObject._objects.map((e=>e.getDrawingItem()))}addChildItem(e){if(!e||!e.isDrawingItem)throw TypeError("Illegal drawing item.");this._drawingLayer?this._drawingLayer._updateGroupItem(this,e,"add"):this._fabricObject.addWithUpdate(e._getFabricObject())}removeChildItem(e){e&&e.isDrawingItem&&(this._drawingLayer?this._drawingLayer._updateGroupItem(this,e,"remove"):this._fabricObject.removeWithUpdate(e._getFabricObject()))}}};function uw(e,t,i){return(i.x-e.x)*(t.y-e.y)==(t.x-e.x)*(i.y-e.y)&&Math.min(e.x,t.x)<=i.x&&i.x<=Math.max(e.x,t.x)&&Math.min(e.y,t.y)<=i.y&&i.y<=Math.max(e.y,t.y)}function dw(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function fw(e,t,i,n){let r=e[0]*(i[1]-t[1])+t[0]*(e[1]-i[1])+i[0]*(t[1]-e[1]),o=e[0]*(n[1]-t[1])+t[0]*(e[1]-n[1])+n[0]*(t[1]-e[1]);return!((r^o)>=0&&0!==r&&0!==o||(r=i[0]*(e[1]-n[1])+n[0]*(i[1]-e[1])+e[0]*(n[1]-i[1]),o=i[0]*(t[1]-n[1])+n[0]*(i[1]-t[1])+t[0]*(n[1]-i[1]),(r^o)>=0&&0!==r&&0!==o))}class pw extends Dy{constructor(){super(),this._barcodeFillStyle="rgba(254,180,32,0.3)",this._barcodeStrokeStyle="rgba(254,180,32,0.9)",this._barcodeLineWidth=1,this._barcodeFillStyleBeforeVerification="rgba(248,252,0,0.2)",this._barcodeStrokeStyleBeforeVerification="transparent",this._barcodeLineWidthBeforeVerification=2,this.bFilterRegionInJs=!0,this._onCameraSelChange=()=>{},this._onResolutionSelChange=()=>{},this._onCloseBtnClick=()=>{},this._onPlayed=null}static get version(){return this._version+`(DCE ${cw.getVersion()})`}static _fireHTTPSWarnning(){pw.onWarning&&location&&"https:"!==location.protocol&&setTimeout((()=>{pw.onWarning&&pw.onWarning({id:2,message:"Not connected via SSL (HTTPS), the SDK may not work correctly."})}),0)}static async testCameraAccess(){return cw.testCameraAccess()}_fireResolutionWarning(){if(!this.singleFrameMode&&this.onWarning&&this.dce.isOpen()){const e=this.dce.getConstraints();e&&e.width<1280&&e.height<720&&setTimeout((()=>{this.onWarning&&this.onWarning({id:3,message:"Camera resolution too low, please use a higher resolution (720P or better)."})}),0)}}getUIElement(){return this.dce.getUIElement()}async setUIElement(e){await this.dce.setUIElement(e)}get singleFrameMode(){return this.dce.singleFrameMode}set singleFrameMode(e){this.dce.singleFrameMode=e,e&&(this.dce.ifShowScanRegionLaser=!1,(async()=>{let e=await this.getScanSettings();e.oneDTrustFrameCount=1,await this.updateScanSettings(e)})())}get onUnduplicatedRead(){return this.onUniqueRead}set onUnduplicatedRead(e){this.onUniqueRead=e}get video(){return this.dce&&this.dce.video}set videoSrc(e){this.dce&&(this.dce.videoSrc=e)}get videoSrc(){return this.dce&&this.dce.videoSrc}set onTipSuggested(e){this.dce&&(this.dce.onTipSuggested=e)}get onTipSuggested(){return this.dce&&this.dce.onTipSuggested}_assertOpen(){if(!this.dce.isOpen())throw Error("The scanner is not open.")}set barcodeFillStyle(e){this._barcodeFillStyle=e,this.dce&&this.dce.updateDrawingStyle(3,{fillStyle:e})}get barcodeFillStyle(){return this._barcodeFillStyle}set barcodeStrokeStyle(e){this._barcodeStrokeStyle=e,this.dce&&this.dce.updateDrawingStyle(3,{strokeStyle:e})}get barcodeStrokeStyle(){return this._barcodeStrokeStyle}set barcodeLineWidth(e){this._barcodeLineWidth=e,this.dce&&this.dce.updateDrawingStyle(3,{lineWidth:e})}get barcodeLineWidth(){return this._barcodeLineWidth}set barcodeFillStyleBeforeVerification(e){this._barcodeFillStyleBeforeVerification=e,this._styleIdBeforeVerification&&this.dce.updateDrawingStyle(this._styleIdBeforeVerification,{fillStyle:e})}get barcodeFillStyleBeforeVerification(){return this._barcodeFillStyleBeforeVerification}set barcodeStrokeStyleBeforeVerification(e){this._barcodeStrokeStyleBeforeVerification=e,this._styleIdBeforeVerification&&this.dce.updateDrawingStyle(this._styleIdBeforeVerification,{strokeStyle:e})}get barcodeStrokeStyleBeforeVerification(){return this._barcodeStrokeStyleBeforeVerification}set barcodeLineWidthBeforeVerification(e){this._barcodeLineWidthBeforeVerification=e,this._styleIdBeforeVerification&&this.dce.updateDrawingStyle(this._styleIdBeforeVerification,{lineWidth:e})}get barcodeLineWidthBeforeVerification(){return this._barcodeLineWidthBeforeVerification}set regionMaskFillStyle(e){this.dce.setScanRegionMaskStyle({fillStyle:e})}get regionMaskFillStyle(){return this.dce.regionMaskFillStyle}set regionMaskStrokeStyle(e){this.dce.setScanRegionMaskStyle({strokeStyle:e})}get regionMaskStrokeStyle(){return this.dce.regionMaskStrokeStyle}set regionMaskLineWidth(e){this.dce.setScanRegionMaskStyle({lineWidth:e})}get regionMaskLineWidth(){return this.dce.regionMaskLineWidth}set region(e){this._region=e,this.dce&&(e?e instanceof Array||this.dce.setScanRegion(e):this.dce.setScanRegion(null)),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}get region(){return this._region}set ifSaveOriginalImageInACanvas(e){this._ifSaveOriginalImageInACanvas=e,this.dce.framePixelFormat=e?"rgba":"grey"}get ifSaveOriginalImageInACanvas(){return this._ifSaveOriginalImageInACanvas}async createDCEInstance(){this.dce||(Dy._onLog&&Dy._onLog("createDCEInstance()"),cw.defaultUIElementURL=null,this.dce=await cw.createInstance(),this.dce.refreshInterval=200,this.dce.framePixelFormat="grey",this.dce.maxCvsSideLength=this.maxCvsSideLength,this._drawingItemNamespace=hw,["iPhone","iPad","Android","HarmonyOS"].includes(Dy.browserInfo.OS)||this.dce.setResolution(1920,1080),this._styleIdBeforeVerification=this.dce.createDrawingStyle({fillStyle:"rgba(248,252,0,0.2)",strokeStyle:"transparent",paintMode:"strokeAndFill"}),this.barcodeLineWidth=this._barcodeLineWidth,this.dce.on("cameraChange",(()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0})),this.dce.on("resolutionChange",(()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0})),this.dce.on("cameraClose",(()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0,this._bPauseScan=!1})),this.dce.on("singleFrameAcquired",(async e=>{if(!e)return;if(!e.data)return;let t;this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=null,this.oriCanvasData={width:e.width,height:e.height,pixelFormat:e.pixelFormat,data:new Uint8Array(e.data),toCanvas:e.toCanvas});const{data:i,sx:n,sy:r,width:o,height:a,stride:s,pixelFormat:l,timeStamp:c,_sWidth:h,_sHeight:u}=e,d={timeStamp:c};if("grey"===l)t=await this._decodeBuffer_Uint8Array(i,o,a,s,Cy.IPF_GrayScaled,0,d);else if("rgba"===l)t=await this._decodeBuffer_Uint8Array(i,o,a,s,Cy.IPF_ABGR_8888,0,d);else{if("bgra"!==l)throw new Error(`Pixel format '${l}' is not supported.`);t=await this._decodeBuffer_Uint8Array(i,o,a,s,Cy.IPF_ARGB_8888,0,d)}if(await this.clearMapDecodeRecord(),Dy.recalculateResultLocation(t,n,r,h,u,o,a),this._drawResults(t),this.onFrameRead&&this.isOpen()&&!this._bPauseScan){let e=this._cloneDecodeResults(t);this.onFrameRead(e)}if(this.onUniqueRead&&this.isOpen()&&!this._bPauseScan)for(let f of t)this.onUniqueRead(f.barcodeText,this._cloneDecodeResults(f))})))}set maxCvsSideLength(e){this._maxCvsSideLength=e,this.dce.maxCvsSideLength=e}get maxCvsSideLength(){return this._maxCvsSideLength}static async createInstance(e){const t=new pw;t._instanceID=await pw.createInstanceInWorker(!0),await t.createDCEInstance(),"string"==typeof e&&(e=JSON.parse(e));for(let i in e)t[i]=e[i];return await t.dce.setUIElement(pw.defaultUIElementURL),t.singleFrameMode&&console.warn("The `navigator.mediaDevices.getUserMedia` is unavailable. automatically change to `singleFrameMode`."),pw._fireHTTPSWarnning(),t.singleFrameMode||await t.updateRuntimeSettings("single"),t}async decodeCurrentFrame(e){this._assertOpen();let t=null;e&&e.region&&(t=e.region);const i=this.dce._getVideoData(null,{region:t});return this._decode_DCEFrame(i)}async updateRuntimeSettings(e){let t;if("string"==typeof e)if("speed"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,e.region&&(t.region=e.region),t.expectedBarcodesCount=0,t.localizationModes=[2,0,0,0,0,0,0,0],t.barcodeZoneMinDistanceToImageBorders=9}else if("balance"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,e.region&&(t.region=e.region),t.expectedBarcodesCount=512,t.deblurLevel=3,t.localizationModes=[2,16,0,0,0,0,0,0],t.barcodeZoneMinDistanceToImageBorders=9,t.timeout=1e5}else if("coverage"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,e.region&&(t.region=e.region),t.expectedBarcodesCount=512,t.deblurLevel=5,t.scaleDownThreshold=1e5,t.localizationModes=[2,16,4,8,0,0,0,0],t.barcodeZoneMinDistanceToImageBorders=9,t.timeout=1e5}else if("single"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,e.region&&(t.region=e.region)}else if("dense"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),this.maxCvsSideLength=4096,t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,e.region&&(t.region=e.region),t.expectedBarcodesCount=0,t.deblurLevel=7,t.scaleDownThreshold=1e5,t.localizationModes=[2,8,0,0,0,0,0,0],t.minResultConfidence=0,t.barcodeZoneMinDistanceToImageBorders=9,t.timeout=1e5}else if("distance"==e){let e=await this.getRuntimeSettings();await this.resetRuntimeSettings(),this.maxCvsSideLength=4096,t=await this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,e.region&&(t.region=e.region),t.expectedBarcodesCount=0,t.scaleDownThreshold=1e5,t.localizationModes=[2,8,0,0,0,0,0,0],t.barcodeZoneMinDistanceToImageBorders=9,t.timeout=1e5}else t=JSON.parse(e);else{if("object"!=typeof e)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");if(t=JSON.parse(JSON.stringify(e)),t.region instanceof Array){let i=e.region;[i.regionLeft,i.regionTop,i.regionLeft,i.regionBottom,i.regionMeasuredByPercentage].some((e=>void 0!==e))&&(t.region={regionLeft:i.regionLeft||0,regionTop:i.regionTop||0,regionRight:i.regionRight||0,regionBottom:i.regionBottom||0,regionMeasuredByPercentage:i.regionMeasuredByPercentage||0})}}if(!Dy._bUseFullFeature){if(0!=(t.barcodeFormatIds&~(Iy.BF_ONED|Iy.BF_QR_CODE|Iy.BF_PDF417|Iy.BF_DATAMATRIX))||0!=t.barcodeFormatIds_2)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(0!=t.intermediateResultTypes)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}{let e=t.region;if(this.bFilterRegionInJs?this.userDefinedRegion=JSON.parse(JSON.stringify(e)):this.userDefinedRegion=null,e instanceof Array)if(e.length){for(let t=0;t<e.length;++t){let i=e[t];i&&((i.regionLeft||i.regionTop||i.regionRight||i.regionBottom||i.regionMeasuredByPercentage)&&(i.regionLeft||i.regionTop||100!=i.regionRight||100!=i.regionBottom||!i.regionMeasuredByPercentage)||(e[t]=null))}this.region=e}else this.region=null;else e&&(e.regionLeft||e.regionTop||e.regionRight||e.regionBottom||e.regionMeasuredByPercentage)&&(e.regionLeft||e.regionTop||100!=e.regionRight||100!=e.regionBottom||!e.regionMeasuredByPercentage)?this.region=e:this.region=null;this.bFilterRegionInJs&&(t.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0})}(this.autoZoom||this.autoFocus)&&(t.intermediateResultTypes|=ky.IRT_TYPED_BARCODE_ZONE),await new Promise(((e,i)=>{let n=Dy._nextTaskID++;Dy._taskCallbackMap.set(n,(t=>{if(t.success){try{this._handleRetJsonString(t.updateReturn)}catch(e){i(e)}return e()}{let e=new Error(t.message);return e.stack=t.stack+"\n"+e.stack,i(e)}})),Dy._dbrWorker.postMessage({type:"updateRuntimeSettings",id:n,instanceID:this._instanceID,body:{settings:JSON.stringify(t)}})})),"string"==typeof e&&["speed","balance","coverage","dense","distance"].includes(e)&&(await this.setModeArgument("BinarizationModes",0,"EnableFillBinaryVacancy","1"),await this.setModeArgument("BinarizationModes",0,"BlockSizeX","0"),await this.setModeArgument("BinarizationModes",0,"BlockSizeY","0"))}_bindUI(){if(!this.getUIElement())throw new Error("Need to define `UIElement` before opening.");if(this.dce._bindUI(),!this.dce.video)throw this._unbindUI(),Error("Can not find the video container element with class 'dce-video-container'")}_unbindUI(){this.dce._unbindUI()}set onPlayed(e){this.dce.off("played",this._onPlayed),this._onPlayed=e,this.dce.on("played",this._onPlayed)}get onPlayed(){return this._onPlayed}async getAllCameras(){return this.dce.getAllCameras()}async getCurrentCamera(){return this.dce.getSelectedCamera()}async setCurrentCamera(e){const t=await this.dce.selectCamera(e);return this._fireResolutionWarning(),t}getResolution(){return this.dce.getResolution()}async setResolution(e,t){const i=await this.dce.setResolution(e,t);return this._fireResolutionWarning(),i}getVideoSettings(){return this.dce.getVideoSettings()}updateVideoSettings(e){return this.dce.updateVideoSettings(e)}isOpen(){return this.dce&&this.dce.isOpen()}setVideoFit(e){return this.dce&&this.dce.setVideoFit(e)}getVideoFit(){return this.dce&&this.dce.getVideoFit()}set ifShowScanRegionMask(e){this.dce&&(this.dce.ifShowScanRegionMask=e)}get ifShowScanRegionMask(){return this.dce&&this.dce.ifShowScanRegionMask}set ifSaveLastUsedCamera(e){this.dce&&(this.dce.ifSaveLastUsedCamera=e)}get ifSaveLastUsedCamera(){return this.dce&&this.dce.ifSaveLastUsedCamera}set ifSkipCameraInspection(e){this.dce&&(this.dce.ifSkipCameraInspection=e)}get ifSkipCameraInspection(){return this.dce&&this.dce.ifSkipCameraInspection}stop(){this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.dce.stop(),this.dce.ifShowScanRegionLaser=!1,this.dce.hideViewDecorator(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}pause(){this.dce.pause()}async play(e,t,i){this.dce.ifShowScanRegionLaser=!0;const n=await this.dce.play(e,t,i);return this._fireResolutionWarning(),n}pauseScan(e){this._assertOpen(),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),e&&e.keepResultsHighlighted||this._drawResults(null),this._bPauseScan=!0,this.dce.ifShowScanRegionLaser=!1,this.dce.stopFetchingLoop()}resumeScan(){this._assertOpen(),this._bPauseScan=!1,this.dce.ifShowScanRegionLaser=!0}getCapabilities(){return this.dce.getCapabilities()}getCameraSettings(){return this.dce.getCameraSettings()}getConstraints(){return this.dce.getConstraints()}async applyConstraints(e){return this.dce.applyConstraints(e)}async turnOnTorch(){return this.dce.turnOnTorch()}async turnOffTorch(){return this.dce.turnOffTorch()}async setColorTemperature(e){return this.dce.setColorTemperature(e)}getColorTemperature(){return this.dce.getColorTemperature()}async setExposureCompensation(e){return this.dce.setExposureCompensation(e)}getExposureCompensation(){return this.dce.getExposureCompensation()}async setZoom(e){return this.dce.setZoom(e)}getZoomSettings(){return this.dce.getZoomSettings()}resetZoom(){return this.dce.resetZoom()}async setFrameRate(e){return this.dce.setFrameRate(e)}getFrameRate(){return this.dce.getFrameRate()}async setFocus(e,t){return this.dce.setFocus(e,t)}getFocus(){return this.dce.getFocus()}getFocusSettings(){return this.dce.getFocusSettings()}async _loopReadVideo(){if(this.bDestroyed)return this.dce&&this.dce.stopFetchingLoop(),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),void this._drawResults(null);if(!this.isOpen())return this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),void(await this.clearMapDecodeRecord());if(!this.dce.video||this.dce.video.paused||this._bPauseScan)return Dy._onLog&&Dy._onLog("Video or scan is paused. Ask in 1s."),await this.clearMapDecodeRecord(),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),this._intervalDetectVideoPause));Dy._onLog&&Dy._onLog("======= once read ======="),Dy._onLog&&(this._timeStartDecode=Date.now());const e=this._getVideoFrame();if(!e)return Dy._onLog&&Dy._onLog("Get invalid frame."),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),0));(async()=>{e._bUseWebGL||"grey"!==e.pixelFormat||(this.dce.framePixelFormat="rgba");let t=[];this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=null,this.oriCanvasData={width:e.width,height:e.height,pixelFormat:e.pixelFormat,data:new Uint8Array(e.data),toCanvas:e.toCanvas});const{data:i,sx:n,sy:r,width:o,height:a,stride:s,pixelFormat:l,timeStamp:c,_sWidth:h,_sHeight:u}=e,d={timeStamp:c};if("grey"===l)t=await this._decodeBuffer_Uint8Array(i,o,a,s,Cy.IPF_GrayScaled,0,d);else if("rgba"===l)t=await this._decodeBuffer_Uint8Array(i,o,a,s,Cy.IPF_ABGR_8888,0,d);else{if("bgra"!==l)throw new Error(`Pixel format '${l}' is not supported.`);t=await this._decodeBuffer_Uint8Array(i,o,a,s,Cy.IPF_ARGB_8888,0,d)}if(Dy.recalculateResultLocation(t,n,r,h,u,o,a),0==this._resultHighlightingDuration?this._drawResults(null):this._drawResults(t),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._resultHighlightingDuration>0&&(this._clearResultsCanvasTimeoutId=setTimeout((()=>{this.bDestroyed||this._drawResults(null)}),this._resultHighlightingDuration)),this.isOpen()&&this.dce.video&&!this.dce.video.paused&&!this._bPauseScan&&(this.autoZoom||this.autoFocus||this.autoSuggestTip))if(t.length)this.autoZoomInFrameArray.length=0,this.autoZoomOutFrameCount=0,this.frameArrayInIdealZoom.length=0,this.suggestTipFrameArray.length=0,this.autoZoom&&this.autoFocus&&(this.nextActionInIdealZoom="focus"),this.autoFocusFrameArray.length=0,this.noIntermediateResultsCount=0;else{const t=await this.getIntermediateResults(),i=(e,t,i,n,r,o,a)=>{let s=o/n,l=a/r;e.x1=e.x1/s+t,e.x2=e.x2/s+t,e.x3=e.x3/s+t,e.x4=e.x4/s+t,e.y1=e.y1/l+i,e.y2=e.y2/l+i,e.y3=e.y3/l+i,e.y4=e.y4/l+i},s=e=>{if(!e)return null;const t={};let s,l,c,d,f;{const e=this.video.videoWidth*(1-this.autoZoomDetectionArea)/2,t=this.video.videoWidth*(1+this.autoZoomDetectionArea)/2,i=t,n=e,r=this.video.videoHeight*(1-this.autoZoomDetectionArea)/2,o=r,a=this.video.videoHeight*(1+this.autoZoomDetectionArea)/2;f={x1:e,x2:t,x3:i,x4:n,y1:r,y2:o,y3:a,y4:a}}const p=(e,t)=>{const i=(e,t)=>{if(!e&&!t)throw new Error("Invalid arguments.");return function(e,t,i){let n=!1;const r=e.length;if(r<=2)return!1;for(let o=0;o<r;o++){const a=e[o],s=e[(o+1)%r];if(uw(a,s,{x:t,y:i}))return!0;dw(a.y-i)>0!=dw(s.y-i)>0&&dw(t-(i-a.y)*(a.x-s.x)/(a.y-s.y)-a.x)<0&&(n=!n)}return n}([{x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:t.x3,y:t.y3},{x:t.x4,y:t.y4}],e.x,e.y)},n=(e,t)=>!!(fw([e[0],e[1]],[e[2],e[3]],[t.x1,t.y1],[t.x2,t.y2])||fw([e[0],e[1]],[e[2],e[3]],[t.x2,t.y2],[t.x3,t.y3])||fw([e[0],e[1]],[e[2],e[3]],[t.x3,t.y3],[t.x4,t.y4])||fw([e[0],e[1]],[e[2],e[3]],[t.x4,t.y4],[t.x1,t.y1]));return!!(i({x:e.x1,y:e.y1},t)||i({x:e.x2,y:e.y2},t)||i({x:e.x3,y:e.y3},t)||i({x:e.x4,y:e.y4},t))||!!(i({x:t.x1,y:t.y1},e)||i({x:t.x2,y:t.y2},e)||i({x:t.x3,y:t.y3},e)||i({x:t.x4,y:t.y4},e))||!!(n([t.x1,t.y1,t.x2,t.y2],e)||n([t.x2,t.y2,t.x3,t.y3],e)||n([t.x3,t.y3,t.x4,t.y4],e)||n([t.x4,t.y4,t.x1,t.y1],e))},g=[];for(let T of e){if(T.resultType!==ky.IRT_TYPED_BARCODE_ZONE)continue;const e=T.scaleDownRatio;for(let t of T.results){if(!t)continue;const s={x1:t.x1=t.x1*e,x2:t.x2=t.x2*e,x3:t.x3=t.x3*e,x4:t.x4=t.x4*e,y1:t.y1=t.y1*e,y2:t.y2=t.y2*e,y3:t.y4=t.y3*e,y4:t.y4=t.y4*e};i(s,n,r,h,u,o,a),p(f,s)&&g.push(t)}}const m=(e=>{if(!e||!e.length)return null;const t=e=>{const t=(e.x1+e.x2+e.x3+e.x4)/4,i=(e.y1+e.y2+e.y3+e.y4)/4;return(t-o/2)*(t-o/2)+(i-a/2)*(i-a/2)};let i,n=e.filter((e=>e.barcodeFormat==Iy.BF_QR_CODE||e.barcodeFormat==Iy.BF_DATAMATRIX));if(n.length||(n=e.filter((e=>e.barcodeFormat==Iy.BF_ONED)),n.length||(n=e)),!n.length)return null;i=n[0];let r=t(i);if(1!=n.length)for(let o=1;o<n.length;o++){const e=t(n[o]);(n[o].confidence>1.1*i.confidence||n[o].confidence>.9*i.confidence&&e<r)&&(i=n[o],r=e)}return i})(g);if(!m)return null;const v=m.x1,_=m.x2,b=m.x3,y=m.x4,w=m.y1,x=m.y2,S=m.y3,C=m.y4;return s=Math.min(v,_,b,y),l=Math.max(v,_,b,y),c=Math.min(w,x,S,C),d=Math.max(w,x,S,C),t.x1=t.x4=s,t.x2=t.x3=l,t.y1=t.y2=c,t.y3=t.y4=d,t.result=m,t},l=s(t);if(l&&l.x1){if(this.autoZoomOutFrameCount=0,this.noIntermediateResultsCount=0,this.suggestTipFrameArray.push(!0),this.suggestTipFrameArray.splice(0,this.suggestTipFrameArray.length-this.suggestTipFrameLimit[0]),this.autoSuggestTip&&this.suggestTipFrameArray.filter((e=>!0===e)).length>=this.suggestTipFrameLimit[1]){this.suggestTipFrameArray.length=0;const e=l.x3-l.x1,t=l.y3-l.y1;l.result.moduleSize<this.tinyBarcodeTipModuleSizeLimit?this.dce&&this.dce.suggestTip("tiny-barcode","Please zoom in or move closer."):e>t?e>o*this.hugeBarcodeTipLimit?this.dce&&this.dce.suggestTip("huge-barcode","Please zoom out or move farther."):e>.6*o&&Math.max(this.video.videoWidth,this.video.videoHeight)<=1280&&Math.min(this.video.videoWidth,this.video.videoHeight)<=720&&this.dce&&this.dce.suggestTip("low-resolution","Please use a higher resolution."):e<=t&&(t>a*this.hugeBarcodeTipLimit?this.dce&&this.dce.suggestTip("huge-barcode","Please zoom out or move farther."):t>.6*a&&Math.max(this.video.videoWidth,this.video.videoHeight)<=1280&&Math.min(this.video.videoWidth,this.video.videoHeight)<=720&&this.dce&&this.dce.suggestTip("low-resolution","Please use a higher resolution."))}if(this.autoZoom){const t=this.autoZoomIdealArea[1];let s=(1-this.autoZoomTargetBorder)/2;const c=l.x1/h,d=(h-l.x3)/h,f=l.y1/u,p=(u-l.y3)/u;if(c>t&&d>t&&f>t&&p>t&&l.result.moduleSize<this.autoZoomInIdealModuleSize){if(this.autoZoomInFrameArray.push(!0),this.autoZoomInFrameArray.splice(0,this.autoZoomInFrameArray.length-this.autoZoomInFrameLimit[0]),this.frameArrayInIdealZoom.length=0,this.autoFocus&&(this.nextActionInIdealZoom="focus",this.setFocus({mode:"continuous"}).catch((()=>{}))),this.autoZoomInFrameArray.filter((e=>!0===e)).length>=this.autoZoomInFrameLimit[1]){this.autoZoomInFrameArray.length=0;const e=[(.5-s)/(.5-c),(.5-s)/(.5-d),(.5-s)/(.5-f),(.5-s)/(.5-p)].filter((e=>e>0)),t=Math.min(...e,this.autoZoomInIdealModuleSize/l.result.moduleSize),i=this.dce.getZoomSettings().factor;let n=Math.max(Math.pow(i*t,1/this.autoZoomInMaxTimes),this.autoZoomInMinStep);n=Math.min(n,t);const r=i*n;await this.setZoom({factor:r}),this.dce.clearFrameBuffer()}}else if(this.autoZoomInFrameArray.length=0,this.frameArrayInIdealZoom.push(!0),this.frameArrayInIdealZoom.splice(0,this.frameArrayInIdealZoom.length-this.frameLimitInIdealZoom[0]),this.frameArrayInIdealZoom.filter((e=>!0===e)).length>=this.frameLimitInIdealZoom[1])if(this.frameArrayInIdealZoom.length=0,"focus"===this.nextActionInIdealZoom&&this.autoFocus){i(l,n,r,h,u,o,a);try{await this.setFocus({mode:"manual",area:{centerPoint:{x:(l.x1+l.x3)/2+"px",y:(l.y1+l.y3)/2+"px"},width:l.x3-l.x1+"px",height:l.y3-l.y1+"px"}})}catch(e){}this.dce.clearFrameBuffer(),this.nextActionInIdealZoom="zoomOut"}else{if("zoomOut"!==this.nextActionInIdealZoom&&this.autoFocus)throw new Error("Invalid action.");if(this.enableZoomOutInIdealZoom){s=this.autoZoomIdealArea[1]+this.autoZoomOutStepRate_2;const e=[(.5-s)/(.5-c),(.5-s)/(.5-d),(.5-s)/(.5-f),(.5-s)/(.5-p)].filter((e=>e>0));let t=Math.min(...e)*this.dce.getZoomSettings().factor;await this.setZoom({factor:t}),this.dce.clearFrameBuffer(),this.autoFocus&&(this.nextActionInIdealZoom="focus",this.setFocus({mode:"continuous"}).catch((e=>{})))}}}else if(this.autoFocus&&(this.autoFocusFrameArray.push(!0),this.autoFocusFrameArray.splice(0,this.autoFocusFrameArray.length-this.autoFocusFrameLimit[0]),this.autoFocusFrameArray.filter((e=>!0===e)).length>=this.autoFocusFrameLimit[1])){this.autoFocusFrameArray.length=0;try{i(l,n,r,h,u,o,a),await this.setFocus({mode:"manual",area:{centerPoint:{x:(l.x1+l.x3)/2+"px",y:(l.y1+l.y3)/2+"px"},width:l.x3-l.x1+"px",height:l.y3-l.y1+"px"}})}catch(e){}this.dce.clearFrameBuffer()}}else if(this.noIntermediateResultsCount++,this.suggestTipFrameArray.push(!1),this.autoZoom){if(this.autoZoomInFrameArray.push(!1),this.autoZoomInFrameArray.splice(0,this.autoZoomInFrameArray.length-this.autoZoomInFrameLimit[0]),this.autoZoomOutFrameCount++,this.frameArrayInIdealZoom.push(!1),this.frameArrayInIdealZoom.splice(0,this.frameArrayInIdealZoom.length-this.frameLimitInIdealZoom[0]),this.autoZoomOutFrameCount>=this.autoZoomOutFrameLimit){this.autoZoomOutFrameCount=0;const e=this.getZoomSettings().factor;if(e>this.autoZoomOutMinValue){const t=Math.max((e-1)*this.autoZoomOutStepRate,this.autoZoomOutMinStep),i=Math.max(e-t,this.autoZoomOutMinValue);await this.setZoom({factor:i}),this.dce.clearFrameBuffer()}}this.autoFocus&&(this.nextActionInIdealZoom="focus",this.setFocus({mode:"continuous"}).catch((e=>{})))}else this.autoFocus&&(this.autoFocusFrameArray.length=0,this.setFocus({mode:"continuous"}).catch((e=>{})))}return t})().then((e=>{if(Dy._onLog&&Dy._onLog(e),this.captureAndDecodeInParallel){let e=this.array_decodeFrameTimeCost,t=this.array_getFrameTimeCost,i=this._indexCurrentDecodingFrame;const n=()=>{let n=0;if(this.region instanceof Array){let r=0,o=0;r=i+1>=this.region.length?0:i+1,o=r+1>=this.region.length?0:r+1,n=e[r]&&e[r].length&&t[o]&&t[o].length?Math.min(...e[r])-Math.max(...t[o]):0}else if(t&&t.length){let i=Math.min(...e),r=Math.max(...t);i&&r&&(n=i-r)}else n=0;return n>0?n:0};(()=>{if(this.region instanceof Array){for(e[i]&&e[i]instanceof Array||(e[i]=[]);e[i].length>=5;)e[i].shift();e[i].push(this._lastInnerDecodeDuration)}else{for(;e.length>=5;)e.shift();e.push(this._lastInnerDecodeDuration)}})(),this._intervalGetVideoFrame=n()+this.intervalTime,Dy._onLog&&Dy._onLog("Next fetching frame loop interval: "+this._intervalGetVideoFrame)}if(this.isOpen()&&this.dce.video&&!this.dce.video.paused&&!this._bPauseScan){if(this.bPlaySoundOnSuccessfulRead&&e.length){let t=!1;!0===this.bPlaySoundOnSuccessfulRead||"frame"===this.bPlaySoundOnSuccessfulRead?t=e.some((e=>e.resultState>=0)):"unique"===this.bPlaySoundOnSuccessfulRead&&(t=e.some((e=>0==e.resultState))),t&&this.beepSound&&(this.beepSound.stop(),this.beepSound.play())}if(navigator.vibrate&&this.bVibrateOnSuccessfulRead&&e.length){let t=!1;if(!0===this.bVibrateOnSuccessfulRead||"frame"===this.bVibrateOnSuccessfulRead?t=e.some((e=>e.resultState>=0)):"unique"===this.bVibrateOnSuccessfulRead&&(t=e.some((e=>0==e.resultState))),t)try{navigator.vibrate(this.vibrateDuration)}catch(e){console.warn("Vibration not allowed. User interaction required: "+(e.message||e))}}if(this.onFrameRead){e=e.filter((e=>e.resultState>=0));const t=this._cloneDecodeResults(e);this.onFrameRead(t)}if(this.onUniqueRead){e=e.filter((e=>0==e.resultState));const t=this._cloneDecodeResults(e);for(let e of t)this.onUniqueRead(e.barcodeText,e)}}this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.intervalTime?this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),this.intervalTime):this._loopReadVideo()}))}_getVideoFrame(){if(!this.dce)return null;let e;if(this.captureAndDecodeInParallel){Dy._onLog&&Dy._onLog("Get frame in parallel.");let t=this.dce.isFetchingLoopStarted();if(this.dce.loopInterval=this._intervalGetVideoFrame,t||this.dce.startFetchingLoop(),!this.dce.numberOfFramesInBuffer)return this.dce.loopInterval=0,null;e=this.dce.getFrameFromBuffer();const i=e=>{if(!e)return;let t=e.timeSpent,i=this.array_getFrameTimeCost;for(;i.length>=5;)i.shift();i.push(t)};i(e)}else Dy._onLog&&Dy._onLog("Get frame in serial."),this.dce.stopFetchingLoop(),e=this.dce.getFrame();return e}async open(){this._bindUI();const e=await this.dce.open();return this._bPauseScan=!1,this.singleFrameMode||(this.dce&&(this.dce.ifShowScanRegionLaser=!0),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),0)),this._fireResolutionWarning(),e}async openVideo(){this._bindUI(),this.dce.ifShowScanRegionLaser=!1;const e=await this.dce.open();return this._bPauseScan=!0,this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),0)),this._fireResolutionWarning(),e}close(){this.dce.close(),this._bPauseScan=!0,this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId)}async show(){this._bindUI();const e=await this.dce.open(!0);return this._bPauseScan=!1,this.singleFrameMode||(this.dce&&(this.dce.ifShowScanRegionLaser=!0),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),0)),this._fireResolutionWarning(),e}async showVideo(){this._bindUI(),this.dce.ifShowScanRegionLaser=!1;const e=await this.dce.open(!0);return this._bPauseScan=!0,this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),0)),this._fireResolutionWarning(),e}hide(){this.dce.close(!0),this._bPauseScan=!0,this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId)}showTip(e,t,i,n,r=3e3,o=!0){this.dce&&this.dce.showTip(e,t,i,n,r,o)}hideTip(){this.dce&&this.dce.hideTip()}updateTipMessage(e){this.dce&&this.dce.updateTipMessage(e)}async enableTapToFocus(){this.dce&&this.dce.enableTapToFocus()}disableTapToFocus(){this.dce&&this.dce.disableTapToFocus()}isTapToFocusEnabled(){return this.dce.isTapToFocusEnabled()}transformCoord(e){if(!this.isOpen())throw new Error("Unavailable when the camera is not open.");if(this.singleFrameMode&&!this.dce._cvsSingleFrameMode)throw new Error("No image is selected. ");const t=this.dce._elContainer.getBoundingClientRect();let i,n,r,o,a,s=t.left,l=t.top,c=s+window.scrollX,h=l+window.scrollY;this.singleFrameMode?(i=this.dce._cvsSingleFrameMode.width,n=this.dce._cvsSingleFrameMode.height,r=parseFloat(window.getComputedStyle(this.dce._cvsSingleFrameMode).width),o=parseFloat(window.getComputedStyle(this.dce._cvsSingleFrameMode).height),a="contain"):(i=this.video.videoWidth,n=this.video.videoHeight,r=parseFloat(window.getComputedStyle(this.dce._elContainer).width),o=parseFloat(window.getComputedStyle(this.dce._elContainer).height),a=this.getVideoFit());const u=r/o,d=i/n;let f,p,g,m,v=1;if("contain"===a)u<d?(v=r/i,f=s+e.x*v,p=l+e.y*v+(o-n*v)/2,g=c+e.x*v,m=h+e.y*v+(o-n*v)/2):(v=o/n,f=s+e.x*v+(r-i*v)/2,p=l+e.y*v,g=c+e.x*v+(r-i*v)/2,m=h+e.y*v);else if("cover"===a)if(u<d){v=o/n;let t=e.x*v-(i*v-r)/2;t=Math.max(t,0),t=Math.min(t,r),f=s+t,p=l+e.y*v,g=c+t,m=h+e.y*v}else{v=r/i;let t=e.y*v-(n*v-o)/2;t=Math.max(t,0),t=Math.min(t,o),f=s+e.x*v,p=l+t,g=c+e.x*v,m=h+t}return{clientX:Math.round(f),clientY:Math.round(p),pageX:Math.round(g),pageY:Math.round(m)}}convertToPageCoordinates(e){const t=this.transformCoord(e);return{x:t.pageX,y:t.pageY}}convertToClientCoordinates(e){const t=this.transformCoord(e);return{x:t.clientX,y:t.clientY}}destroyContext(){this.close(),this.dce&&this.dce.dispose(!1),this.bDestroyed||super.destroyContext()}}var gw,mw,vw,_w,bw,yw,ww,xw,Sw,Cw,Tw,Ew,Iw,kw,Ow,Rw,Aw,Dw,Lw,Mw,Pw,Fw,Bw,Nw,jw,Vw;!function(e){e[e.BICM_DARK_ON_LIGHT=1]="BICM_DARK_ON_LIGHT",e[e.BICM_LIGHT_ON_DARK=2]="BICM_LIGHT_ON_DARK",e[e.BICM_DARK_ON_DARK=4]="BICM_DARK_ON_DARK",e[e.BICM_LIGHT_ON_LIGHT=8]="BICM_LIGHT_ON_LIGHT",e[e.BICM_DARK_LIGHT_MIXED=16]="BICM_DARK_LIGHT_MIXED",e[e.BICM_DARK_ON_LIGHT_DARK_SURROUNDING=32]="BICM_DARK_ON_LIGHT_DARK_SURROUNDING",e[e.BICM_SKIP=0]="BICM_SKIP",e[e.BICM_REV=2147483648]="BICM_REV"}(gw||(gw={})),function(e){e[e.BCM_AUTO=1]="BCM_AUTO",e[e.BCM_GENERAL=2]="BCM_GENERAL",e[e.BCM_SKIP=0]="BCM_SKIP",e[e.BCM_REV=2147483648]="BCM_REV"}(mw||(mw={})),function(e){e[e.BF2_NULL=0]="BF2_NULL",e[e.BF2_POSTALCODE=32505856]="BF2_POSTALCODE",e[e.BF2_NONSTANDARD_BARCODE=1]="BF2_NONSTANDARD_BARCODE",e[e.BF2_USPSINTELLIGENTMAIL=1048576]="BF2_USPSINTELLIGENTMAIL",e[e.BF2_POSTNET=2097152]="BF2_POSTNET",e[e.BF2_PLANET=4194304]="BF2_PLANET",e[e.BF2_AUSTRALIANPOST=8388608]="BF2_AUSTRALIANPOST",e[e.BF2_RM4SCC=16777216]="BF2_RM4SCC",e[e.BF2_DOTCODE=2]="BF2_DOTCODE",e[e.BF2_PHARMACODE_ONE_TRACK=4]="BF2_PHARMACODE_ONE_TRACK",e[e.BF2_PHARMACODE_TWO_TRACK=8]="BF2_PHARMACODE_TWO_TRACK",e[e.BF2_PHARMACODE=12]="BF2_PHARMACODE",e[e.BF2_ALL=-1]="BF2_ALL"}(vw||(vw={})),function(e){e[e.BM_AUTO=1]="BM_AUTO",e[e.BM_LOCAL_BLOCK=2]="BM_LOCAL_BLOCK",e[e.BM_SKIP=0]="BM_SKIP",e[e.BM_THRESHOLD=4]="BM_THRESHOLD",e[e.BM_REV=2147483648]="BM_REV"}(_w||(_w={})),function(e){e[e.ECCM_CONTRAST=1]="ECCM_CONTRAST"}(bw||(bw={})),function(e){e[e.CFM_GENERAL=1]="CFM_GENERAL"}(yw||(yw={})),function(e){e[e.CCM_AUTO=1]="CCM_AUTO",e[e.CCM_GENERAL_HSV=2]="CCM_GENERAL_HSV",e[e.CCM_SKIP=0]="CCM_SKIP",e[e.CCM_REV=2147483648]="CCM_REV"}(ww||(ww={})),function(e){e[e.CICM_GENERAL=1]="CICM_GENERAL",e[e.CICM_SKIP=0]="CICM_SKIP",e[e.CICM_REV=2147483648]="CICM_REV"}(xw||(xw={})),function(e){e[e.CM_IGNORE=1]="CM_IGNORE",e[e.CM_OVERWRITE=2]="CM_OVERWRITE"}(Sw||(Sw={})),function(e){e[e.DM_SKIP=0]="DM_SKIP",e[e.DM_DIRECT_BINARIZATION=1]="DM_DIRECT_BINARIZATION",e[e.DM_THRESHOLD_BINARIZATION=2]="DM_THRESHOLD_BINARIZATION",e[e.DM_GRAY_EQUALIZATION=4]="DM_GRAY_EQUALIZATION",e[e.DM_SMOOTHING=8]="DM_SMOOTHING",e[e.DM_MORPHING=16]="DM_MORPHING",e[e.DM_DEEP_ANALYSIS=32]="DM_DEEP_ANALYSIS",e[e.DM_SHARPENING=64]="DM_SHARPENING",e[e.DM_BASED_ON_LOC_BIN=128]="DM_BASED_ON_LOC_BIN",e[e.DM_SHARPENING_SMOOTHING=256]="DM_SHARPENING_SMOOTHING"}(Cw||(Cw={})),function(e){e[e.DRM_AUTO=1]="DRM_AUTO",e[e.DRM_GENERAL=2]="DRM_GENERAL",e[e.DRM_BROAD_WARP=4]="DRM_BROAD_WARP",e[e.DRM_LOCAL_REFERENCE=8]="DRM_LOCAL_REFERENCE",e[e.DRM_DEWRINKLE=16]="DRM_DEWRINKLE",e[e.DRM_SKIP=0]="DRM_SKIP",e[e.DRM_REV=2147483648]="DRM_REV"}(Tw||(Tw={})),function(e){e[e.DPMCRM_AUTO=1]="DPMCRM_AUTO",e[e.DPMCRM_GENERAL=2]="DPMCRM_GENERAL",e[e.DPMCRM_SKIP=0]="DPMCRM_SKIP",e[e.DPMCRM_REV=2147483648]="DPMCRM_REV"}(Ew||(Ew={})),function(e){e[e.GTM_INVERTED=1]="GTM_INVERTED",e[e.GTM_ORIGINAL=2]="GTM_ORIGINAL",e[e.GTM_SKIP=0]="GTM_SKIP",e[e.GTM_REV=2147483648]="GTM_REV"}(Iw||(Iw={})),function(e){e[e.IPM_AUTO=1]="IPM_AUTO",e[e.IPM_GENERAL=2]="IPM_GENERAL",e[e.IPM_GRAY_EQUALIZE=4]="IPM_GRAY_EQUALIZE",e[e.IPM_GRAY_SMOOTH=8]="IPM_GRAY_SMOOTH",e[e.IPM_SHARPEN_SMOOTH=16]="IPM_SHARPEN_SMOOTH",e[e.IPM_MORPHOLOGY=32]="IPM_MORPHOLOGY",e[e.IPM_SKIP=0]="IPM_SKIP",e[e.IPM_REV=2147483648]="IPM_REV"}(kw||(kw={})),function(e){e[e.IRSM_MEMORY=1]="IRSM_MEMORY",e[e.IRSM_FILESYSTEM=2]="IRSM_FILESYSTEM",e[e.IRSM_BOTH=4]="IRSM_BOTH"}(Ow||(Ow={})),function(e){e[e.LM_SKIP=0]="LM_SKIP",e[e.LM_AUTO=1]="LM_AUTO",e[e.LM_CONNECTED_BLOCKS=2]="LM_CONNECTED_BLOCKS",e[e.LM_LINES=8]="LM_LINES",e[e.LM_STATISTICS=4]="LM_STATISTICS",e[e.LM_SCAN_DIRECTLY=16]="LM_SCAN_DIRECTLY",e[e.LM_STATISTICS_MARKS=32]="LM_STATISTICS_MARKS",e[e.LM_STATISTICS_POSTAL_CODE=64]="LM_STATISTICS_POSTAL_CODE",e[e.LM_CENTRE=128]="LM_CENTRE",e[e.LM_ONED_FAST_SCAN=256]="LM_ONED_FAST_SCAN",e[e.LM_REV=2147483648]="LM_REV"}(Rw||(Rw={})),function(e){e[e.PDFRM_RASTER=1]="PDFRM_RASTER",e[e.PDFRM_AUTO=2]="PDFRM_AUTO",e[e.PDFRM_VECTOR=4]="PDFRM_VECTOR",e[e.PDFRM_REV=2147483648]="PDFRM_REV"}(Aw||(Aw={})),function(e){e[e.QRECL_ERROR_CORRECTION_H=0]="QRECL_ERROR_CORRECTION_H",e[e.QRECL_ERROR_CORRECTION_L=1]="QRECL_ERROR_CORRECTION_L",e[e.QRECL_ERROR_CORRECTION_M=2]="QRECL_ERROR_CORRECTION_M",e[e.QRECL_ERROR_CORRECTION_Q=3]="QRECL_ERROR_CORRECTION_Q"}(Dw||(Dw={})),function(e){e[e.RPM_AUTO=1]="RPM_AUTO",e[e.RPM_GENERAL=2]="RPM_GENERAL",e[e.RPM_GENERAL_RGB_CONTRAST=4]="RPM_GENERAL_RGB_CONTRAST",e[e.RPM_GENERAL_GRAY_CONTRAST=8]="RPM_GENERAL_GRAY_CONTRAST",e[e.RPM_GENERAL_HSV_CONTRAST=16]="RPM_GENERAL_HSV_CONTRAST",e[e.RPM_SKIP=0]="RPM_SKIP",e[e.RPM_REV=2147483648]="RPM_REV"}(Lw||(Lw={})),function(e){e[e.RCT_PIXEL=1]="RCT_PIXEL",e[e.RCT_PERCENTAGE=2]="RCT_PERCENTAGE"}(Mw||(Mw={})),function(e){e[e.RT_STANDARD_TEXT=0]="RT_STANDARD_TEXT",e[e.RT_RAW_TEXT=1]="RT_RAW_TEXT",e[e.RT_CANDIDATE_TEXT=2]="RT_CANDIDATE_TEXT",e[e.RT_PARTIAL_TEXT=3]="RT_PARTIAL_TEXT"}(Pw||(Pw={})),function(e){e[e.SUM_AUTO=1]="SUM_AUTO",e[e.SUM_LINEAR_INTERPOLATION=2]="SUM_LINEAR_INTERPOLATION",e[e.SUM_NEAREST_NEIGHBOUR_INTERPOLATION=4]="SUM_NEAREST_NEIGHBOUR_INTERPOLATION",e[e.SUM_SKIP=0]="SUM_SKIP",e[e.SUM_REV=2147483648]="SUM_REV"}(Fw||(Fw={})),function(e){e[e.TP_REGION_PREDETECTED=1]="TP_REGION_PREDETECTED",e[e.TP_IMAGE_PREPROCESSED=2]="TP_IMAGE_PREPROCESSED",e[e.TP_IMAGE_BINARIZED=4]="TP_IMAGE_BINARIZED",e[e.TP_BARCODE_LOCALIZED=8]="TP_BARCODE_LOCALIZED",e[e.TP_BARCODE_TYPE_DETERMINED=16]="TP_BARCODE_TYPE_DETERMINED",e[e.TP_BARCODE_RECOGNIZED=32]="TP_BARCODE_RECOGNIZED"}(Bw||(Bw={})),function(e){e[e.TFM_AUTO=1]="TFM_AUTO",e[e.TFM_GENERAL_CONTOUR=2]="TFM_GENERAL_CONTOUR",e[e.TFM_SKIP=0]="TFM_SKIP",e[e.TFM_REV=2147483648]="TFM_REV"}(Nw||(Nw={})),function(e){e[e.TROM_CONFIDENCE=1]="TROM_CONFIDENCE",e[e.TROM_POSITION=2]="TROM_POSITION",e[e.TROM_FORMAT=4]="TROM_FORMAT",e[e.TROM_SKIP=0]="TROM_SKIP",e[e.TROM_REV=2147483648]="TROM_REV"}(jw||(jw={})),function(e){e[e.TDM_AUTO=1]="TDM_AUTO",e[e.TDM_GENERAL_WIDTH_CONCENTRATION=2]="TDM_GENERAL_WIDTH_CONCENTRATION",e[e.TDM_SKIP=0]="TDM_SKIP",e[e.TDM_REV=2147483648]="TDM_REV"}(Vw||(Vw={})),Dy.license="t0071oQAAAGXxdSGZfq9UNytM0T7opNQWDd5UB+3tsDvNjnjjGQ/Nnb5nH096FaoEb6F0VYqx/Kvv5HfuTkkyCFsr536HTJ4KIjY=",Dy.engineResourcePath="https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode/dist/";class $w extends U.Component{constructor(...t){super(...t),e(this,"pScanner",null),e(this,"elRef",U.createRef())}async componentDidMount(){try{const e=await(this.pScanner=pw.createInstance());if(e.isContextDestroyed())return;if(await e.setUIElement(this.elRef.current),e.isContextDestroyed())return;e.onFrameRead=e=>{for(let t of e)console.log(t.barcodeText),console.log(t.localizationResult)},await e.open()}catch(e){if(e.message.indexOf("network connection error")){let e="Failed to connect to Dynamsoft License Server: network connection error. Check your Internet connection or contact Dynamsoft Support (support@dynamsoft.com) to acquire an offline license.";console.log(e),alert(e)}throw e}}async componentWillUnmount(){this.pScanner&&((await this.pScanner).destroyContext(),console.log("BarcodeScanner Component Unmount"))}shouldComponentUpdate(){return!1}render(){return J("div",{ref:this.elRef,className:"component-barcode-scanner",children:[Z("svg",{className:"dce-bg-loading",viewBox:"0 0 1792 1792",children:Z("path",{d:"M1760 896q0 176-68.5 336t-184 275.5-275.5 184-336 68.5-336-68.5-275.5-184-184-275.5-68.5-336q0-213 97-398.5t265-305.5 374-151v228q-221 45-366.5 221t-145.5 406q0 130 51 248.5t136.5 204 204 136.5 248.5 51 248.5-51 204-136.5 136.5-204 51-248.5q0-230-145.5-406t-366.5-221v-228q206 31 374 151t265 305.5 97 398.5z"})}),Z("svg",{className:"dce-bg-camera",viewBox:"0 0 2048 1792",children:Z("path",{d:"M1024 672q119 0 203.5 84.5t84.5 203.5-84.5 203.5-203.5 84.5-203.5-84.5-84.5-203.5 84.5-203.5 203.5-84.5zm704-416q106 0 181 75t75 181v896q0 106-75 181t-181 75h-1408q-106 0-181-75t-75-181v-896q0-106 75-181t181-75h224l51-136q19-49 69.5-84.5t103.5-35.5h512q53 0 103.5 35.5t69.5 84.5l51 136h224zm-704 1152q185 0 316.5-131.5t131.5-316.5-131.5-316.5-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5z"})}),Z("div",{className:"dce-video-container"}),Z("div",{className:"dce-scanarea",children:Z("div",{className:"dce-scanlight"})}),J("div",{className:"div-select-container",children:[Z("select",{className:"dce-sel-camera"}),Z("select",{className:"dce-sel-resolution"})]})]})}}const Uw=()=>J(gb,{children:[Z(J_,{children:Z(tb,{children:Z(eb,{children:"QR Scanner"})})}),J(Z_,{fullscreen:!0,children:[Z(J_,{collapse:"condense",children:Z(tb,{children:Z(eb,{size:"large",children:"Tab 1"})})}),Z($w,{})]})]}),Ww=({name:e})=>J("div",{className:"container",children:[Z("strong",{children:e}),J("p",{children:["Explore ",Z("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ionicframework.com/docs/components",children:"UI Components"})]})]}),zw=()=>J(gb,{children:[Z(J_,{children:Z(tb,{children:Z(eb,{children:"Tab 2"})})}),J(Z_,{fullscreen:!0,children:[Z(J_,{collapse:"condense",children:Z(tb,{children:Z(eb,{size:"large",children:"Tab 2"})})}),Z(Ww,{name:"Tab 2 page"})]})]});let Hw={"1ec74e6f-7b86-4b85-9ebe-18a3a7d0a17b":"Apples","6ca34ed6-2d60-4326-bdf3-c3a22d7c3b15":"Bananas","03de298c-e4d5-4b39-847b-b317337055ef":"Carrots","90f7de86-7468-4f28-aef4-902726b33c35":"Broccoli","a46e9a48-2001-4d70-b55e-d1a5735c5d5d":"Chicken","3c3b1b43-8d99-4883-ae20-b51af8e8b0c1":"Beef","fced11a8-a9b6-4fd4-8db6-8815ee0a279b":"Milk","8e35f7c9-38f4-4af1-bfc5-ee7d25df46e2":"Eggs","c7d2f212-21f4-4e88-96d6-8eddf213ed10":"Bread","e1a0a5c5-5d5f-4f62-9df3-f4c9ac73f4d7":"Cheese"};const Gw=()=>J(gb,{children:[Z(J_,{children:Z(tb,{children:Z(eb,{children:"Tab 3"})})}),J(Z_,{fullscreen:!0,children:[Z(J_,{collapse:"condense",children:Z(tb,{children:Z(eb,{size:"large",children:"Tab 3"})})}),Z("pre",{children:JSON.stringify(Hw,null,2)})]})]});((e={})=>{"undefined"!=typeof document&&document.documentElement.classList.add("ion-ce"),tm(Object.assign({},e))})();const Yw=()=>Z(ub,{children:Z(Kb,{children:J(Ob,{children:[J(wb,{children:[Z(bf,{exact:!0,path:"/tab1",children:Z(Uw,{})}),Z(bf,{exact:!0,path:"/tab2",children:Z(zw,{})}),Z(bf,{path:"/tab3",children:Z(Gw,{})}),Z(bf,{exact:!0,path:"/",children:Z(pf,{to:"/tab1"})})]}),J(Tb,{slot:"bottom",children:[J(xb,{tab:"tab1",href:"/tab1",children:[Z(Ab,{"aria-hidden":"true",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='64'/><path d='M432 144h-59c-3 0-6.72-1.94-9.62-5l-25.94-40.94a15.52 15.52 0 00-1.37-1.85C327.11 85.76 315 80 302 80h-92c-13 0-25.11 5.76-34.07 16.21a15.52 15.52 0 00-1.37 1.85l-25.94 41c-2.22 2.42-5.34 5-8.62 5v-8a16 16 0 00-16-16h-24a16 16 0 00-16 16v8h-4a48.05 48.05 0 00-48 48V384a48.05 48.05 0 0048 48h352a48.05 48.05 0 0048-48V192a48.05 48.05 0 00-48-48zM256 368a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>"}),Z(Q_,{children:"Scanner"})]}),J(xb,{tab:"tab2",href:"/tab2",children:[Z(Ab,{"aria-hidden":"true",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M192 448h128M384 208v32c0 70.4-57.6 128-128 128h0c-70.4 0-128-57.6-128-128v-32M256 368v80' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 320a78.83 78.83 0 01-56.55-24.1A80.89 80.89 0 01176 239V128a79.69 79.69 0 0180-80c44.86 0 80 35.14 80 80v111c0 44.66-35.89 81-80 81z'/></svg>"}),Z(Q_,{children:"Assistant"})]}),J(xb,{tab:"tab3",href:"/tab3",children:[Z(Ab,{"aria-hidden":"true",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M160 144h288M160 256h288M160 368h288' class='ionicon-fill-none'/><circle cx='80' cy='144' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='256' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='368' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>"}),Z(Q_,{children:"List"})]})]})]})})});su(document.getElementById("root")).render(Z(U.StrictMode,{children:Z(Yw,{})}))}}}))}();
